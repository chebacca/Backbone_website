import{j as e,B as o,T as i,a as b,u as le,G as a,c3 as Ie,ac as Ce,al as je,c4 as Pe,t as ce,v as de,r as Z,c as ae,ai as Ue,ag as Be,c5 as De,g as we,au as Ae,ay as Ee,af as ue,H as ke,ao as Re,ap as We,aq as Ne,ar as ee,as as u,at as Te,bQ as Se,aB as xe,aC as ge,aD as he,d as $e,e as F,aE as pe,aG as Me,aH as Oe,aI as Le,a5 as M,D as Fe,a4 as Ye,aa as ze,aF as He,p as Qe}from"./mui-CbJLuC6G.js";import{r as c}from"./vendor-CjD1bmmO.js";import{u as Ve}from"./notistack.esm-Ca-E78ev.js";import{p as me}from"./paymentService-CnMvePDI.js";import{c as Ge,e as qe}from"./index-BgQ_svsr.js";import{db as Y}from"./firebase-CXEvRXJe.js";import{query as z,collection as H,where as Q,limit as V,getDocs as G}from"./index.esm-D6OvRmrs.js";import{getAuth as ve,onAuthStateChanged as _e}from"./index.esm-Cicvjgiv.js";import"./index.esm-B6Q1BJpE.js";import{M as te}from"./MetricCard-DEDCS3oR.js";import"./stripe-iaBWsbMy.js";const q={USERS:"users",PAYMENTS:"payments",INVOICES:"invoices",SUBSCRIPTIONS:"subscriptions",LICENSES:"licenses"};class be{static getCurrentUserId(){const y=ve(),s=y.currentUser;return console.log("ðŸ” [UserBillingService] Auth state:",{hasAuth:!!y,currentUser:s?{uid:s.uid,email:s.email}:null}),s?(console.log("âœ… [UserBillingService] Current user ID:",s.uid),s.uid):(console.warn("âš ï¸ [UserBillingService] No authenticated user found"),null)}static async getCurrentUserSubscription(){var y,s;try{const x=this.getCurrentUserId();if(!x)throw new Error("No authenticated user");console.log("ðŸ” [UserBillingService] Getting subscription for Firebase UID:",x);const w=z(H(Y,q.USERS),Q("firebaseUid","==",x),V(1)),S=await G(w);if(console.log(`ðŸ‘¥ [UserBillingService] Found ${S.size} users with firebaseUid: ${x}`),S.empty)return console.log("â„¹ï¸ [UserBillingService] No user document found for firebaseUid"),null;const U=S.docs[0],W=U.data();console.log("âœ… [UserBillingService] Found user document:",{id:U.id,email:W.email});const A=z(H(Y,q.SUBSCRIPTIONS),Q("userId","==",U.id),V(10)),B=await G(A);if(console.log(`ðŸ“‹ [UserBillingService] Found ${B.size} subscriptions for user ID: ${U.id}`),B.empty)return console.log("â„¹ï¸ [UserBillingService] No subscriptions found for user ID"),null;const g=B.docs[0],l=g.data();console.log("ðŸ“Š [UserBillingService] Subscription data:",l);const v={id:g.id,plan:((y=l.tier)==null?void 0:y.toUpperCase())||"PRO",status:((s=l.status)==null?void 0:s.toLowerCase())||"active",currentPeriodStart:l.currentPeriodStart||l.createdAt,currentPeriodEnd:l.currentPeriodEnd||l.createdAt,seats:l.seats||1,amount:l.amount||0,nextPaymentDate:l.currentPeriodEnd||l.createdAt,tier:l.tier};return console.log("âœ… [UserBillingService] Subscription found and mapped:",v),v}catch(x){return console.error("âŒ [UserBillingService] Error getting user subscription:",x),null}}static async getCurrentUserBillingHistory(y={}){var s,x,w,S,U,W,A,B,g,l,v,_,J,N,K,I,T,E;try{const h=this.getCurrentUserId();if(!h)throw new Error("No authenticated user");const O=y.limit||25;console.log("ðŸ” [UserBillingService] Getting billing history for Firebase UID:",h);const X=z(H(Y,q.USERS),Q("firebaseUid","==",h),V(1)),k=await G(X);if(k.empty)return console.log("â„¹ï¸ [UserBillingService] No user document found for firebaseUid"),[];const R=k.docs[0],se=R.data();console.log("âœ… [UserBillingService] Found user document for billing history:",{id:R.id,email:se.email});const D=[];try{let p=z(H(Y,q.PAYMENTS),Q("userId","==",R.id),V(O));const C=await G(p);console.log(`ðŸ’³ [UserBillingService] Found ${C.size} payments for user ID: ${R.id}`);for(const m of C.docs){const r=m.data();console.log("ðŸ” [UserBillingService] Raw payment data amount:",{id:m.id,rawAmount:r.amount,type:typeof r.amount});const L={id:m.id,stripeInvoiceId:r.stripeInvoiceId,number:r.stripeInvoiceId||`PAY-${m.id.substring(0,8).toUpperCase()}`,date:((w=(x=(s=r.createdAt)==null?void 0:s.toDate)==null?void 0:x.call(s))==null?void 0:w.toISOString())||r.createdAt,amount:r.amount||0,status:((S=r.status)==null?void 0:S.toLowerCase())||"pending",description:r.description||`${((U=r.subscription)==null?void 0:U.tier)||"Subscription"} Plan - ${((W=r.subscription)==null?void 0:W.seats)||1} seat(s)`,downloadUrl:r.receiptUrl,receiptUrl:r.receiptUrl,currency:r.currency||"USD",createdAt:((g=(B=(A=r.createdAt)==null?void 0:A.toDate)==null?void 0:B.call(A))==null?void 0:g.toISOString())||r.createdAt,subscription:r.subscription};D.push(L)}console.log(`âœ… [UserBillingService] Processed ${D.length} payments`)}catch(p){console.warn("âš ï¸ [UserBillingService] Could not fetch payments:",p)}try{let p=z(H(Y,q.INVOICES),Q("userId","==",R.id),V(O));const C=await G(p);console.log(`ðŸ“‹ [UserBillingService] Found ${C.size} invoices for user ID: ${R.id}`);for(const m of C.docs){const r=m.data(),L={id:m.id,stripeInvoiceId:r.stripeInvoiceId,number:r.stripeInvoiceId||`INV-${m.id.substring(0,8).toUpperCase()}`,date:((_=(v=(l=r.createdAt)==null?void 0:l.toDate)==null?void 0:v.call(l))==null?void 0:_.toISOString())||r.createdAt,amount:r.amount||0,status:((J=r.status)==null?void 0:J.toLowerCase())||"pending",description:r.description||`${((N=r.subscription)==null?void 0:N.tier)||"Subscription"} Plan - ${((K=r.subscription)==null?void 0:K.seats)||1} seat(s)`,downloadUrl:r.receiptUrl,receiptUrl:r.receiptUrl,currency:r.currency||"USD",createdAt:((E=(T=(I=r.createdAt)==null?void 0:I.toDate)==null?void 0:T.call(I))==null?void 0:E.toISOString())||r.createdAt,subscription:r.subscription};D.push(L)}console.log(`âœ… [UserBillingService] Processed ${D.length} total items`)}catch(p){console.warn("âš ï¸ [UserBillingService] Could not fetch invoices:",p)}return D.sort((p,C)=>{const m=new Date(p.createdAt||p.date||0);return new Date(C.createdAt||C.date||0).getTime()-m.getTime()}),console.log(`âœ… [UserBillingService] Total billing history items: ${D.length}`),D}catch(h){return console.error("âŒ [UserBillingService] Error getting user billing history:",h),[]}}static formatCurrency(y,s="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(y)}}const Je=[{id:"1",type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025,isDefault:!0},{id:"2",type:"card",last4:"5555",brand:"Mastercard",expiryMonth:8,expiryYear:2026,isDefault:!1}],re=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),ye=d=>{switch(d.toLowerCase()){case"succeeded":case"paid":case"active":return"success";case"pending":case"processing":return"warning";case"failed":case"cancelled":case"canceled":return"error";case"refunded":return"info";default:return"default"}},fe=d=>{switch(d.toLowerCase()){case"succeeded":case"paid":case"active":return e.jsx(Qe,{});case"pending":case"processing":return e.jsx(je,{});case"failed":case"cancelled":case"canceled":return e.jsx(He,{});case"refunded":return e.jsx(Se,{});default:return e.jsx(ze,{})}},lt=()=>{const{enqueueSnackbar:d}=Ve(),[y]=c.useState(Je),[s,x]=c.useState(null),[w,S]=c.useState([]),[U,W]=c.useState(!1),[A,B]=c.useState(!1),[g,l]=c.useState(null),[v,_]=c.useState(!1),[J,N]=c.useState(!1),[K,I]=c.useState(!1),[T,E]=c.useState("PRO"),[h,O]=c.useState(1),[X,k]=c.useState(null),R=()=>{d("Payment method added successfully",{variant:"success"}),N(!1)},se=()=>{d("Subscription updated successfully",{variant:"success"}),I(!1)},D=()=>{s&&(O(s.seats),s.seats<=50?E("PRO"):E("ENTERPRISE")),I(!0)},p=t=>{t.receiptUrl?window.open(t.receiptUrl,"_blank"):d("No receipt available for this payment",{variant:"info"})};c.useEffect(()=>{const t=ve(),P=_e(t,n=>{console.log("ðŸ” [BillingPage] Auth state changed:",{hasUser:!!n,uid:n==null?void 0:n.uid,email:n==null?void 0:n.email}),l(n),_(!0)});return()=>P()},[]),c.useEffect(()=>{if(!v||!g){console.log("â³ [BillingPage] Waiting for auth to be ready...");return}console.log("âœ… [BillingPage] Auth ready, fetching subscription for user:",g.uid),(async()=>{var t,P,n,$;try{B(!0);let f;try{if(f=await be.getCurrentUserSubscription(),f){x(f),console.log("âœ… [BillingPage] Subscription loaded via UserBillingService");return}}catch(j){console.warn("âš ï¸ [BillingPage] UserBillingService failed, falling back to API:",j)}const oe=((P=(t=(await Ge.get(qe.subscriptions.mySubscriptions())).data)==null?void 0:t.data)==null?void 0:P.subscriptions)||[];if(oe.length>0){const j=oe[0];x({id:j.id,plan:((n=j.tier)==null?void 0:n.toUpperCase())||"PRO",status:(($=j.status)==null?void 0:$.toLowerCase())||"active",currentPeriodStart:j.currentPeriodStart,currentPeriodEnd:j.currentPeriodEnd,seats:j.seats||1,amount:j.amount||0,nextPaymentDate:j.currentPeriodEnd,tier:j.tier}),console.log("âœ… [BillingPage] Subscription loaded via API fallback")}}catch(f){console.error("âŒ [BillingPage] Failed to load subscription:",f),d((f==null?void 0:f.message)||"Failed to load subscription",{variant:"error"})}finally{B(!1)}})()},[d,v,g]),c.useEffect(()=>{if(!v||!g){console.log("â³ [BillingPage] Waiting for auth to be ready for billing history...");return}console.log("âœ… [BillingPage] Auth ready, fetching billing history for user:",g.uid),(async()=>{try{W(!0);let t;try{if(console.log("ðŸ” [BillingPage] Attempting to fetch billing history via UserBillingService..."),t=await be.getCurrentUserBillingHistory({limit:25}),console.log("ðŸ“Š [BillingPage] UserBillingService returned:",t),t&&t.length>0){S(t),console.log("âœ… [BillingPage] Billing history loaded via UserBillingService:",t.length,"items");return}else console.log("â„¹ï¸ [BillingPage] UserBillingService returned empty array or null")}catch(n){console.error("âŒ [BillingPage] UserBillingService failed:",n)}try{t=await me.getUserInvoices({limit:25})}catch{console.log("â„¹ï¸ [BillingPage] Invoice endpoint not available, falling back to payment history"),t=(await me.getPaymentHistory({limit:25})).payments||[]}const P=t.map(n=>{var $,f,ie;return{id:n.id,stripeInvoiceId:n.stripeInvoiceId,number:n.stripeInvoiceId||`PAY-${n.id.substring(0,8).toUpperCase()}`,date:n.createdAt,amount:n.amount,status:($=n.status)==null?void 0:$.toLowerCase(),description:n.description||`${((f=n.subscription)==null?void 0:f.tier)||"Subscription"} Plan - ${((ie=n.subscription)==null?void 0:ie.seats)||1} seat(s)`,downloadUrl:n.receiptUrl,receiptUrl:n.receiptUrl,currency:n.currency,createdAt:n.createdAt}});S(P),console.log("âœ… [BillingPage] Billing history loaded via API fallback:",P.length,"items")}catch(t){console.error("âŒ [BillingPage] Failed to load billing history:",t),d((t==null?void 0:t.message)||"Failed to load billing history",{variant:"error"}),S([])}finally{W(!1)}})()},[d,v,g]);const C=()=>({BASIC:29,PRO:99,ENTERPRISE:199})[T]*h,m=t=>{O(t),t<=50?E("PRO"):E("ENTERPRISE")},r=t=>{const n={BASIC:29,PRO:99,ENTERPRISE:199}[t];return`${t} - $${n}/seat/month`};if(A)return e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"Loading billing information..."})});if(!s)return e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"No subscription found. Please contact support."})});const L=re(s.amount),ne=Math.ceil((new Date(s.nextPaymentDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs(o,{children:[e.jsx(o,{children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(o,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Billing & Payments"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Manage your subscription, payment methods, and billing history"})]}),e.jsx(b,{variant:"contained",startIcon:e.jsx(le,{}),onClick:D,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Upgrade Plan"})]})}),e.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(te,{title:"Monthly Cost",value:re(s.amount),icon:e.jsx(Ie,{}),color:"primary"})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(te,{title:"Total Seats",value:s.seats,icon:e.jsx(Ce,{}),color:"secondary"})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(te,{title:"Days to Renewal",value:ne,icon:e.jsx(je,{}),color:"warning",trend:{value:Math.max(0,30-ne),direction:"down"}})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(te,{title:"Active Invoices",value:w.filter(t=>t.status==="paid"||t.status==="pending").length,icon:e.jsx(Pe,{}),color:"success"})})]}),e.jsx(o,{children:e.jsx(ce,{sx:{mb:4,background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsx(de,{sx:{p:4},children:e.jsxs(a,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(a,{item:!0,xs:12,md:8,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(Z,{label:s.plan,color:"primary",sx:{fontWeight:600,fontSize:"1rem",px:2,py:1}}),e.jsx(Z,{icon:fe(s.status),label:s.status.toUpperCase(),color:ye(s.status),sx:{fontWeight:500}})]}),e.jsxs(i,{variant:"h5",sx:{fontWeight:600,mb:1},children:[re(s.amount)," / month"]}),e.jsxs(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:[s.seats," seats â€¢ Next payment in ",ne," days"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Current period: ",new Date(s.currentPeriodStart).toLocaleDateString()," - ",new Date(s.currentPeriodEnd).toLocaleDateString()]})]}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{textAlign:"right"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Next Payment"}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,mb:1},children:L}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["on ",new Date(s.nextPaymentDate).toLocaleDateString()]})]})})]})})})}),e.jsxs(a,{container:!0,spacing:4,children:[e.jsx(a,{item:!0,xs:12,md:8,children:e.jsx(o,{children:e.jsxs(ae,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Payment Methods"}),e.jsx(b,{variant:"outlined",startIcon:e.jsx(Ue,{}),onClick:()=>N(!0),children:"+ Add Method"})]}),e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:y.map(t=>e.jsx(ce,{sx:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(de,{sx:{p:2},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Be,{sx:{bgcolor:"primary.main"},children:e.jsx(De,{})}),e.jsxs(o,{children:[e.jsxs(i,{variant:"body1",sx:{fontWeight:500},children:[t.brand," â€¢â€¢â€¢â€¢ ",t.last4]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Expires ",t.expiryMonth.toString().padStart(2,"0"),"/",t.expiryYear]})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.isDefault&&e.jsx(Z,{label:"Default",size:"small",color:"primary"}),e.jsx(we,{size:"small",onClick:P=>k(P.currentTarget),children:e.jsx(Ae,{})})]})]})})},t.id))})]})})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{children:e.jsxs(ae,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Quick Actions"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(b,{variant:"outlined",startIcon:e.jsx(le,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},onClick:()=>I(!0),children:"Upgrade Plan"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(b,{variant:"outlined",startIcon:e.jsx(Ee,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Update Billing Info"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(b,{variant:"outlined",startIcon:e.jsx(ue,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Download All Invoices"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(b,{variant:"outlined",startIcon:e.jsx(ke,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Billing Security Settings"})})]})]})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(o,{children:e.jsxs(ae,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Billing History"}),e.jsx(Re,{children:e.jsxs(We,{children:[e.jsx(Ne,{children:e.jsxs(ee,{children:[e.jsx(u,{sx:{fontWeight:600},children:"Invoice"}),e.jsx(u,{sx:{fontWeight:600},children:"Date"}),e.jsx(u,{sx:{fontWeight:600},children:"Description"}),e.jsx(u,{sx:{fontWeight:600},children:"Amount"}),e.jsx(u,{sx:{fontWeight:600},children:"Status"}),e.jsx(u,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(Te,{children:U?e.jsx(ee,{children:e.jsx(u,{colSpan:6,align:"center",children:e.jsx(o,{sx:{py:4},children:e.jsx(i,{variant:"body1",color:"text.secondary",children:"Loading billing history..."})})})}):w.length>0?w.map(t=>e.jsxs(ee,{hover:!0,children:[e.jsx(u,{children:e.jsx(i,{variant:"body2",sx:{fontWeight:500,fontFamily:"monospace"},children:t.number})}),e.jsx(u,{children:e.jsx(i,{variant:"body2",children:new Date(t.createdAt||t.date).toLocaleDateString()})}),e.jsx(u,{children:e.jsx(i,{variant:"body2",children:t.description})}),e.jsx(u,{children:e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:new Intl.NumberFormat("en-US",{style:"currency",currency:(t.currency||"USD").toUpperCase()}).format(t.amount||0)})}),e.jsx(u,{children:e.jsx(Z,{icon:fe(String(t.status).toLowerCase()),label:String(t.status).toUpperCase(),color:ye(String(t.status).toLowerCase()),size:"small"})}),e.jsx(u,{children:e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(b,{variant:"contained",size:"small",startIcon:e.jsx(ue,{}),onClick:()=>p(t),sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Receipt"}),t.stripeInvoiceId&&e.jsx(b,{variant:"outlined",size:"small",startIcon:e.jsx(Se,{}),onClick:()=>window.open(`https://dashboard.stripe.com/invoices/${t.stripeInvoiceId}`,"_blank"),sx:{borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:"rgba(0, 0, 0, 0.04)",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Stripe"})]})})]},t.id)):e.jsx(ee,{children:e.jsx(u,{colSpan:6,align:"center",children:e.jsxs(o,{sx:{py:4},children:[e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"No billing history found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Your payment history will appear here once you have completed transactions."})]})})})})]})})]})})})]}),e.jsxs(xe,{open:J,onClose:()=>N(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Add Payment Method"}),e.jsxs(he,{children:[e.jsx($e,{severity:"info",sx:{mb:3},children:"Your payment information is securely processed by Stripe and never stored on our servers."}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"Card Number",placeholder:"1234 5678 9012 3456",sx:{mt:1}})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"Expiry Date",placeholder:"MM/YY"})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"CVC",placeholder:"123"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"Cardholder Name",placeholder:"John Doe"})})]})]}),e.jsxs(pe,{children:[e.jsx(b,{onClick:()=>N(!1),children:"Cancel"}),e.jsx(b,{onClick:R,variant:"contained",children:"Add Payment Method"})]})]}),e.jsxs(xe,{open:K,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Upgrade Your Plan"}),e.jsx(he,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(Oe,{children:"Select Plan"}),e.jsxs(Le,{value:T,label:"Select Plan",onChange:t=>E(t.target.value),inputProps:{"aria-label":"Select subscription plan",title:"Choose your subscription plan"},children:[e.jsx(M,{value:"BASIC",children:r("BASIC")}),e.jsx(M,{value:"PRO",children:r("PRO")}),e.jsx(M,{value:"ENTERPRISE",children:r("ENTERPRISE")})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(F,{fullWidth:!0,label:"Number of Seats",type:"number",value:h,onChange:t=>m(parseInt(t.target.value)),inputProps:{min:1,max:100},helperText:"Up to 50 seats: Pro plan. 51+ seats: Enterprise plan."})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(Fe,{sx:{my:2}}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(i,{variant:"h6",children:["Total: ",re(C())," / month"]})}),e.jsxs(o,{sx:{p:2,bgcolor:"background.default",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.jsx("strong",{children:"Plan Selection Logic:"})}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["â€¢ ",h<=50?"âœ…":"âŒ"," Up to 50 seats: ",e.jsx("strong",{children:"Pro Plan"})," ($99/seat/month)"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["â€¢ ",h>50?"âœ…":"âŒ"," 51+ seats: ",e.jsx("strong",{children:"Enterprise Plan"})," ($199/seat/month)"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mt:1,fontStyle:"italic"},children:["Current selection: ",e.jsx("strong",{children:T})," plan with ",e.jsx("strong",{children:h})," seat",h!==1?"s":""]})]})]})]})]})}),e.jsxs(pe,{children:[e.jsx(b,{onClick:()=>I(!1),children:"Cancel"}),e.jsx(b,{onClick:se,variant:"contained",children:"Upgrade Now"})]})]}),e.jsxs(Ye,{anchorEl:X,open:!!X,onClose:()=>k(null),PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(M,{onClick:()=>k(null),children:"Set as Default"}),e.jsx(M,{onClick:()=>k(null),children:"Edit"}),e.jsx(M,{onClick:()=>k(null),sx:{color:"error.main"},children:"Remove"})]})]})};export{lt as default};
