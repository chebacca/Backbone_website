import{j as t,a as I,T as u,t as V,b9 as Mt,ba as F,c as w,G as m,S as D,u as S,d as p,aR as Yt,aS as zt,aT as Bt,a4 as rt,D as N,bW as Ht,aC as O,aD as W,aE as v,aF as s,aG as P,h as Jt,aB as Vt}from"./mui-d9nHzX9S.js";import{r as j}from"./vendor-DIxetjBo.js";import{c as $,e as U}from"./index-CDYlgGPS.js";import"./stripe-CiUV72pZ.js";const qt=()=>{var Q,q,Z,tt,et;const[ct,dt]=j.useState([]),[B,ht]=j.useState(""),[H,xt]=j.useState(""),[k,mt]=j.useState(0),[g,ut]=j.useState(null),[d,K]=j.useState(null),[pt,gt]=j.useState([]),[jt,yt]=j.useState([]),[J,bt]=j.useState(0),[b,L]=j.useState(""),[f,_]=j.useState(""),[C,ft]=j.useState("US_SALES_TAX"),[a,T]=j.useState({legalName:"",taxId:"",addressLine1:"",addressLine2:"",city:"",region:"",postalCode:"",country:"US",contactEmail:""}),[St,vt]=j.useState([]),[z,Tt]=j.useState("NY"),[G,wt]=j.useState("US"),M=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California",portal:"https://onlineservices.cdtfa.ca.gov"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida",portal:"https://floridarevenue.com/taxes/Pages/return_drt.aspx"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York",portal:"https://www.tax.ny.gov/online/"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas",portal:"https://comptroller.texas.gov/taxes/file-pay/"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington",portal:"https://secure.dor.wa.gov/"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"},{code:"DC",name:"District of Columbia"}];j.useEffect(()=>{try{const c=localStorage.getItem("filing_company_default");c&&T(JSON.parse(c))}catch{}const e=new Date,n=new Date(e.getFullYear(),e.getMonth()-1,1),i=new Date(e.getFullYear(),e.getMonth(),0),o=c=>`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;L(o(n)),_(o(i))},[]);const E=e=>{const n=new Date,i=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,o=(r,l)=>new Date(r,l,1),c=(r,l)=>new Date(r,l+1,0),x=(r,l)=>new Date(r,l*3,1),h=(r,l)=>new Date(r,l*3+3,0);if(e==="THIS_MONTH"){const r=o(n.getFullYear(),n.getMonth()),l=c(n.getFullYear(),n.getMonth());L(i(r)),_(i(l));return}if(e==="LAST_MONTH"){const r=o(n.getFullYear(),n.getMonth()-1),l=c(n.getFullYear(),n.getMonth()-1);L(i(r)),_(i(l));return}if(e==="THIS_QUARTER"){const r=Math.floor(n.getMonth()/3),l=x(n.getFullYear(),r),y=h(n.getFullYear(),r);L(i(l)),_(i(y));return}if(e==="LAST_QUARTER"){let r=Math.floor(n.getMonth()/3)-1,l=n.getFullYear();r<0&&(r=3,l-=1);const y=x(l,r),A=h(l,r);L(i(y)),_(i(A));return}if(e==="YTD"){const r=new Date(n.getFullYear(),0,1),l=n;L(i(r)),_(i(l));return}if(e==="LAST_YEAR"){const r=n.getFullYear()-1,l=new Date(r,0,1),y=new Date(r,11,31);L(i(l)),_(i(y));return}},$t=async()=>{try{localStorage.setItem("filing_company_default",JSON.stringify(a))}catch{}try{await $.post(U.admin.companyFilingSave(),a)}catch{}},Ct=()=>{try{const e=localStorage.getItem("filing_company_default");e&&T(JSON.parse(e))}catch{}},X=async()=>{var n,i;const e=await $.get(U.accounting.payments(),{params:{limit:50}});dt(((i=(n=e.data)==null?void 0:n.data)==null?void 0:i.payments)||[])};j.useEffect(()=>{(async()=>{var h,r,l,y,A,R,at,nt,st,it;X();const[n,i,o,c]=await Promise.all([$.get("accounting/overview"),$.get("accounting/tax/summary"),$.get("accounting/kyc"),$.get("accounting/compliance-events")]);ut(((h=n.data)==null?void 0:h.data)||null),K(((r=i.data)==null?void 0:r.data)||null),gt(((y=(l=o.data)==null?void 0:l.data)==null?void 0:y.users)||[]),yt(((R=(A=c.data)==null?void 0:A.data)==null?void 0:R.events)||[]);const x=(((nt=(at=o.data)==null?void 0:at.data)==null?void 0:nt.users)||[]).filter(ot=>String(ot.kycStatus||"").toUpperCase()!=="COMPLETED").length;bt(x);try{const lt=(it=(st=(await $.get(U.admin.companyFilingGet())).data)==null?void 0:st.data)==null?void 0:it.company;lt&&T(Ut=>({...Ut,...lt}))}catch{}})()},[]);const Lt=async()=>{var l,y;const e={from:B,to:H,includePII:!1},i=((y=(l=(await $.post(U.accounting.exportPayments(),e)).data)==null?void 0:l.data)==null?void 0:y.rows)||[],c=[Object.keys(i[0]||{}).join(","),...i.map(A=>Object.values(A).map(R=>JSON.stringify(R??"")).join(","))].join(`
`),x=new Blob([c],{type:"text/csv"}),h=URL.createObjectURL(x),r=document.createElement("a");r.href=h,r.download=`payments_${B||"all"}_${H||"all"}.csv`,r.click(),URL.revokeObjectURL(h)},_t=async()=>{var l,y;const e={from:b,to:f,includePII:!1},i=((y=(l=(await $.post(U.accounting.exportPayments(),e)).data)==null?void 0:l.data)==null?void 0:y.rows)||[],c=[Object.keys(i[0]||{}).join(","),...i.map(A=>Object.values(A).map(R=>JSON.stringify(R??"")).join(","))].join(`
`),x=new Blob([c],{type:"text/csv"}),h=URL.createObjectURL(x),r=document.createElement("a");r.href=h,r.download=`payments_${b||"all"}_${f||"all"}.csv`,r.click(),URL.revokeObjectURL(h)},At=async()=>{var i,o,c;const e=await $.get("accounting/tax/summary",{params:{from:b||void 0,to:f||void 0}});K(((i=e.data)==null?void 0:i.data)||null);const n=await $.get(U.accounting.payments(),{params:{from:b||void 0,to:f||void 0,limit:500}});vt(((c=(o=n.data)==null?void 0:o.data)==null?void 0:c.payments)||[])},Dt=()=>{if(!d)return;const e=[];if(C==="US_SALES_TAX"){const h=(d==null?void 0:d.byJurisdiction)||{};for(const[r,l]of Object.entries(h))e.push({jurisdiction:r,tax_cents:l.tax_cents??0,taxable_cents:l.taxable_cents??0,count:l.count??0})}else{const h=(d==null?void 0:d.byCountry)||{};for(const[r,l]of Object.entries(h))e.push({country:r,tax_cents:l.tax_cents??0,taxable_cents:l.taxable_cents??0,count:l.count??0})}const i=[Object.keys(e[0]||{}).join(","),...e.map(h=>Object.values(h).map(r=>JSON.stringify(r??"")).join(","))].join(`
`),o=new Blob([i],{type:"text/csv"}),c=URL.createObjectURL(o),x=document.createElement("a");x.href=c,x.download=`filing_summary_${C}_${b||"all"}_${f||"all"}.csv`,x.click(),URL.revokeObjectURL(c)},kt=()=>{const e=window.open("","PRINT","height=800,width=800");if(!e)return;const n=`${b||"Start"} to ${f||"End"}`,i=C==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},o=Object.values(i).reduce((x,h)=>({tax:x.tax+((h==null?void 0:h.tax_cents)||0),taxable:x.taxable+((h==null?void 0:h.taxable_cents)||0),count:x.count+((h==null?void 0:h.count)||0)}),{tax:0,taxable:0,count:0}),c=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Cover Sheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Tax Filing Cover Sheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Filing</h2>
      <div>Scheme: ${C}</div>
      <div>Period: ${n}</div>
      <table>
        <tr><th>Total Taxable</th><th>Total Tax</th><th>Transactions</th></tr>
        <tr><td>${(o.taxable/100).toLocaleString()}</td><td>${(o.tax/100).toLocaleString()}</td><td>${o.count}</td></tr>
      </table>
      <p style="margin-top:16px">Attach the jurisdiction/member-state summary CSV and payments CSV for the filing period when submitting via your tax portal or provider.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;e.document.write(c),e.document.close(),e.focus()},It={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden"},Et=()=>{if(!d)return;const e=window.open("","PRINT","height=900,width=1000");if(!e)return;const n=`${b||"Start"} to ${f||"End"}`,i=C==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},o=Object.entries(i).map(([r,l])=>`<tr><td>${C==="EU_OSS"?`${It[r]||r} (${r})`:r}</td><td>${(((l==null?void 0:l.taxable_cents)||0)/100).toLocaleString()}</td><td>${(((l==null?void 0:l.tax_cents)||0)/100).toLocaleString()}</td><td>${(l==null?void 0:l.count)||0}</td></tr>`).join(""),c=Object.values(i).reduce((r,l)=>({tax:r.tax+((l==null?void 0:l.tax_cents)||0),taxable:r.taxable+((l==null?void 0:l.taxable_cents)||0),count:r.count+((l==null?void 0:l.count)||0)}),{tax:0,taxable:0,count:0}),x=C==="US_SALES_TAX"?"Jurisdiction":"Member State",h=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Worksheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666} tfoot td{font-weight:600}</style>
    </head><body>
      <h1>Filing Worksheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${n} — Scheme: ${C}</h2>
      <table>
        <thead><tr><th>${x}</th><th>Taxable</th><th>Tax</th><th>Count</th></tr></thead>
        <tbody>${o}</tbody>
        <tfoot><tr><td>Total</td><td>${(c.taxable/100).toLocaleString()}</td><td>${(c.tax/100).toLocaleString()}</td><td>${c.count}</td></tr></tfoot>
      </table>
      <p style="margin-top:16px">Use this worksheet to transcribe totals into your state portal (e-file) or retain for records.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;e.document.write(h),e.document.close(),e.focus()},Y=()=>{var n;const e={};for(const i of St){if(String(i.status).toUpperCase()!=="SUCCEEDED")continue;const o=((n=i.billingAddress)==null?void 0:n.state)||"UNKNOWN",c=i.taxAmount??0,x=(i.amount??0)-c;e[o]=e[o]||{taxable_cents:0,tax_cents:0,count:0},e[o].taxable_cents+=x,e[o].tax_cents+=c,e[o].count+=1}return e},Rt=()=>{const n=Y().NY||{taxable_cents:0,tax_cents:0,count:0},i=`${b||"Start"} to ${f||"End"}`,o=window.open("","PRINT","height=900,width=1000");if(!o)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>NY ST-100 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>NY ST-100 Quarterly Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File electronically via NYS Sales Tax Web File.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${i}</h2>
      <table>
        <tr><th>Taxable sales (NY)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (NY)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://www.tax.ny.gov/online/" target="_blank" rel="noreferrer">NYS Sales Tax Web File</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;o.document.write(c),o.document.close(),o.focus()},Ft=()=>{const n=Y().TX||{taxable_cents:0,tax_cents:0,count:0},i=`${b||"Start"} to ${f||"End"}`,o=window.open("","PRINT","height=900,width=1000");if(!o)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>TX 01-114 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Texas 01-114 Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File via Texas Webfile.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${i}</h2>
      <table>
        <tr><th>Taxable sales (TX)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (TX)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://comptroller.texas.gov/taxes/file-pay/" target="_blank" rel="noreferrer">Texas Webfile</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;o.document.write(c),o.document.close(),o.focus()},Nt=()=>{const n=Y().FL||{taxable_cents:0,tax_cents:0,count:0},i=`${b||"Start"} to ${f||"End"}`,o=window.open("","PRINT","height=900,width=1000");if(!o)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>FL DR-15 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Florida DR-15 Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File via Florida DOR (e-Services).</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${i}</h2>
      <table>
        <tr><th>Line: Taxable Sales (FL)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Line: Sales and Use Tax Due (FL)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
        <tr><th>Less: Credits</th><td>0.00</td></tr>
        <tr><th>Less: Deductions</th><td>0.00</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://floridarevenue.com/taxes/Pages/return_drt.aspx" target="_blank" rel="noreferrer">Florida DOR e-Services</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;o.document.write(c),o.document.close(),o.focus()},Ot=()=>{const n=Y().WA||{taxable_cents:0,tax_cents:0,count:0},i=`${b||"Start"} to ${f||"End"}`,o=window.open("","PRINT","height=900,width=1000");if(!o)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>WA Excise/B&O Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Washington Excise/B&O Return (Worksheet)</h1>
      <small>For reference only. File via My DOR.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${i}</h2>
      <table>
        <tr><th>Gross Receipts (WA)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Tax Due (WA)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
        <tr><th>Less: Credits</th><td>0.00</td></tr>
        <tr><th>Less: Deductions</th><td>0.00</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://secure.dor.wa.gov/" target="_blank" rel="noreferrer">WA My DOR</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;o.document.write(c),o.document.close(),o.focus()},Wt=e=>{const i=Y()[e]||{taxable_cents:0,tax_cents:0,count:0},o=`${b||"Start"} to ${f||"End"}`,c=M.find(r=>r.code===e),x=window.open("","PRINT","height=900,width=1000");if(!x)return;const h=`<!doctype html><html><head><meta charset="utf-8"><title>${e} Sales Tax Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${(c==null?void 0:c.name)||e} Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. Most states require e-filing via their tax portal.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Taxable sales (${e})</th><td>${(i.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (${e})</th><td>${(i.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${i.count}</td></tr>
      </table>
      ${c!=null&&c.portal?`<p style="margin-top:16px">Portal: <a href="${c.portal}" target="_blank" rel="noreferrer">${c.portal}</a></p>`:""}
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;x.document.write(h),x.document.close(),x.focus()},Pt=e=>{const n=`${b||"Start"} to ${f||"End"}`,o=((d==null?void 0:d.byCountry)||{})[e]||{tax_cents:0,taxable_cents:0,count:0},c=window.open("","PRINT","height=900,width=1000");if(!c)return;const x=`<!doctype html><html><head><meta charset="utf-8"><title>${e} VAT/Sales Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${e} Indirect Tax Worksheet</h1>
      <small>For reference only. File via your national portal (e.g., EU OSS, CRA GST/HST).</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${n}</h2>
      <table>
        <tr><th>Taxable amount (${e})</th><td>${(o.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Tax due (${e})</th><td>${(o.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${o.count||0}</td></tr>
      </table>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;c.document.write(x),c.document.close(),c.focus()};return t.jsxs(I,{sx:{p:3},children:[t.jsx(u,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Accounting & Compliance"}),t.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Financial reporting, tax, KYC/AML, and regulatory oversight snapshot."}),J>0&&t.jsxs(V,{severity:"warning",sx:{mb:2},children:[J," user",J===1?"":"s"," require KYC verification. Review the KYC tab for details."]}),t.jsxs(Mt,{value:k,onChange:(e,n)=>mt(n),sx:{mb:2},children:[t.jsx(F,{label:"Overview"}),t.jsx(F,{label:"Payments"}),t.jsx(F,{label:"Tax"}),t.jsx(F,{label:"Filings"}),t.jsx(F,{label:"KYC"}),t.jsx(F,{label:"Compliance"})]}),k===3&&t.jsx(I,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Filing Packet"}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"Filing Period"}),t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[t.jsx(S,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:b,onChange:e=>L(e.target.value),size:"small"}),t.jsx(S,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:f,onChange:e=>_(e.target.value),size:"small"})]}),t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:1,sx:{mb:2},children:[t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("THIS_MONTH"),children:"This Month"}),t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("LAST_MONTH"),children:"Last Month"}),t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("THIS_QUARTER"),children:"This Quarter"}),t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("LAST_QUARTER"),children:"Last Quarter"}),t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("YTD"),children:"YTD"}),t.jsx(p,{size:"small",variant:"outlined",onClick:()=>E("LAST_YEAR"),children:"Last Year"})]}),t.jsxs(Yt,{size:"small",sx:{minWidth:240},children:[t.jsx(zt,{id:"scheme-label",children:"Scheme"}),t.jsxs(Bt,{labelId:"scheme-label",id:"scheme",value:C,label:"Scheme",onChange:e=>ft(e.target.value),children:[t.jsx(rt,{value:"US_SALES_TAX",children:"US Sales Tax (state/county)"}),t.jsx(rt,{value:"EU_OSS",children:"EU OSS VAT (member state)"})]})]}),t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[t.jsx(p,{variant:"outlined",onClick:At,children:"Refresh Summary"}),t.jsx(p,{variant:"contained",onClick:Dt,children:"Download Summary CSV"}),t.jsx(p,{variant:"outlined",onClick:_t,children:"Download Payments CSV"})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"Company Info (for cover sheet)"}),t.jsxs(m,{container:!0,spacing:1,children:[t.jsx(m,{item:!0,xs:12,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Legal Name",value:a.legalName,onChange:e=>T({...a,legalName:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:6,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Tax ID / VAT",value:a.taxId,onChange:e=>T({...a,taxId:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:6,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Contact Email",value:a.contactEmail,onChange:e=>T({...a,contactEmail:e.target.value})})}),t.jsx(m,{item:!0,xs:12,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Address Line 1",value:a.addressLine1,onChange:e=>T({...a,addressLine1:e.target.value})})}),t.jsx(m,{item:!0,xs:12,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Address Line 2",value:a.addressLine2,onChange:e=>T({...a,addressLine2:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(S,{fullWidth:!0,size:"small",label:"City",value:a.city,onChange:e=>T({...a,city:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Region/State",value:a.region,onChange:e=>T({...a,region:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(S,{fullWidth:!0,size:"small",label:"Postal Code",value:a.postalCode,onChange:e=>T({...a,postalCode:e.target.value})})})]}),t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[t.jsx(p,{variant:"outlined",onClick:kt,children:"Print Filing Cover Sheet"}),t.jsx(p,{variant:"outlined",onClick:Et,children:"Print Jurisdiction Worksheet"}),t.jsx(p,{variant:"outlined",onClick:Rt,children:"NY ST-100 Worksheet"}),t.jsx(p,{variant:"outlined",onClick:Ft,children:"TX 01-114 Worksheet"}),t.jsx(p,{variant:"outlined",onClick:Nt,children:"FL DR-15 Worksheet"}),t.jsx(p,{variant:"outlined",onClick:Ot,children:"WA Excise/B&O Worksheet"}),t.jsx(p,{variant:"text",onClick:$t,children:"Save as Default"}),t.jsx(p,{variant:"text",onClick:Ct,children:"Load Default"})]}),t.jsx(N,{sx:{my:2}}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"US State Worksheets"}),t.jsx(Ht,{options:M,getOptionLabel:e=>`${e.code} — ${e.name}`,value:M.find(e=>e.code===z)||null,onChange:(e,n)=>Tt((n==null?void 0:n.code)||"NY"),renderInput:e=>t.jsx(S,{...e,label:"Select State",size:"small"}),sx:{maxWidth:400,mt:1}}),t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[t.jsx(p,{variant:"contained",onClick:()=>Wt(z),children:"Print Selected State Worksheet"}),((Q=M.find(e=>e.code===z))==null?void 0:Q.portal)&&t.jsx(p,{variant:"outlined",onClick:()=>window.open(M.find(e=>e.code===z).portal,"_blank","noreferrer"),children:"Open State Portal"})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"International (Country) Worksheets"}),t.jsx(S,{label:"Country Code (ISO alpha-2)",size:"small",value:G,onChange:e=>wt(e.target.value.toUpperCase()),sx:{maxWidth:240,mt:1}}),t.jsx(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:t.jsx(p,{variant:"contained",onClick:()=>Pt(G),children:"Print Country Worksheet"})}),t.jsx(V,{severity:"info",sx:{mt:2},children:"For EU OSS, use scheme EU_OSS and the jurisdiction summary CSV; for Canada, file GST/HST per CRA portal."})]})]})]})]}),t.jsx(V,{severity:"info",sx:{mt:2},children:"This packet mirrors common filings used by SaaS: US Sales Tax returns (state/county totals) and EU OSS VAT returns (member-state totals). Attach the CSV summaries and payments export when filing via your tax portal or provider."})]})}),k===0&&t.jsxs(I,{children:[t.jsxs(m,{container:!0,spacing:2,sx:{mb:2},children:[t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Revenue (USD)"}),t.jsx(u,{variant:"h5",children:((((q=g==null?void 0:g.totals)==null?void 0:q.revenue_cents)||0)/100).toLocaleString()})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Tax Collected"}),t.jsx(u,{variant:"h5",children:((((Z=g==null?void 0:g.totals)==null?void 0:Z.tax_cents)||0)/100).toLocaleString()})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Payments"}),t.jsx(u,{variant:"h5",children:((tt=g==null?void 0:g.totals)==null?void 0:tt.paymentsCount)||0})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"KYC Completed"}),t.jsx(u,{variant:"h5",children:((et=g==null?void 0:g.kycCounts)==null?void 0:et.COMPLETED)||0})]})})]}),t.jsxs(w,{sx:{p:2,mb:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Recent Payments"}),t.jsx(N,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Date"}),t.jsx(s,{children:"Invoice"}),t.jsx(s,{align:"right",children:"Amount"}),t.jsx(s,{children:"Tax"}),t.jsx(s,{children:"Jurisdiction"})]})}),t.jsx(P,{children:((g==null?void 0:g.recentPayments)||[]).map(e=>t.jsxs(v,{children:[t.jsx(s,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(s,{children:e.stripeInvoiceId}),t.jsx(s,{align:"right",children:(e.amount??0)/100}),t.jsxs(s,{children:[((e.taxAmount??0)/100).toFixed(2)," (",((e.taxRate??0)*100).toFixed(2),"%)"]}),t.jsx(s,{children:e.jurisdiction})]},e.id))})]})]}),t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax by Jurisdiction"}),t.jsx(N,{sx:{mb:1}}),t.jsx(D,{direction:"row",spacing:1,flexWrap:"wrap",children:(g==null?void 0:g.taxByJurisdiction)&&Object.entries(g.taxByJurisdiction).map(([e,n])=>t.jsx(Jt,{label:`${e}: ${(n/100).toLocaleString()}`},e))})]})]}),k===1&&t.jsxs(I,{children:[t.jsxs(D,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[t.jsx(S,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:B,onChange:e=>ht(e.target.value),size:"small"}),t.jsx(S,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:H,onChange:e=>xt(e.target.value),size:"small"}),t.jsx(p,{variant:"contained",onClick:Lt,children:"Export CSV"}),t.jsx(p,{variant:"outlined",onClick:X,children:"Refresh"})]}),t.jsx(Vt,{component:w,children:t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Date"}),t.jsx(s,{children:"Invoice"}),t.jsx(s,{align:"right",children:"Amount"}),t.jsx(s,{children:"Currency"}),t.jsx(s,{children:"Status"}),t.jsx(s,{children:"Tax"}),t.jsx(s,{children:"Jurisdiction"}),t.jsx(s,{children:"User Email"}),t.jsx(s,{children:"Residency"})]})}),t.jsx(P,{children:ct.map(e=>{var n,i,o;return t.jsxs(v,{children:[t.jsx(s,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(s,{children:e.stripeInvoiceId}),t.jsx(s,{align:"right",children:(e.amount??0)/100}),t.jsx(s,{children:e.currency}),t.jsx(s,{children:e.status}),t.jsxs(s,{children:[((e.taxAmount??0)/100).toFixed(2)," (",((e.taxRate??0)*100).toFixed(2),"%)"]}),t.jsx(s,{children:e.taxJurisdiction}),t.jsx(s,{children:(n=e.user)==null?void 0:n.email}),t.jsx(s,{children:(o=(i=e.user)==null?void 0:i.taxInformation)==null?void 0:o.taxResidency})]},e.id)})})]})})]}),k===2&&t.jsx(I,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax Summary"}),t.jsx(N,{sx:{mb:1}}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"By Jurisdiction"}),t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Jurisdiction"}),t.jsx(s,{align:"right",children:"Tax"}),t.jsx(s,{align:"right",children:"Taxable"}),t.jsx(s,{align:"right",children:"Count"})]})}),t.jsx(P,{children:(d==null?void 0:d.byJurisdiction)&&Object.entries(d.byJurisdiction).map(([e,n])=>t.jsxs(v,{children:[t.jsx(s,{children:e}),t.jsx(s,{align:"right",children:((n.tax_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:((n.taxable_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:n.count})]},e))})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"By Country"}),t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Country"}),t.jsx(s,{align:"right",children:"Tax"}),t.jsx(s,{align:"right",children:"Taxable"}),t.jsx(s,{align:"right",children:"Count"})]})}),t.jsx(P,{children:(d==null?void 0:d.byCountry)&&Object.entries(d.byCountry).map(([e,n])=>t.jsxs(v,{children:[t.jsx(s,{children:e}),t.jsx(s,{align:"right",children:((n.tax_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:((n.taxable_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:n.count})]},e))})]})]})]})]})}),k===4&&t.jsx(I,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"KYC Overview"}),t.jsx(N,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Email"}),t.jsx(s,{children:"Status"}),t.jsx(s,{children:"Completed At"}),t.jsx(s,{children:"Name"}),t.jsx(s,{children:"Nationality"}),t.jsx(s,{children:"Residence"}),t.jsx(s,{children:"Company"})]})}),t.jsx(P,{children:pt.map(e=>{var n,i,o,c,x;return t.jsxs(v,{children:[t.jsx(s,{children:e.email}),t.jsx(s,{children:e.kycStatus}),t.jsx(s,{children:e.kycCompletedAt?new Date(e.kycCompletedAt).toLocaleDateString():"-"}),t.jsxs(s,{children:[(n=e.complianceProfile)==null?void 0:n.firstName," ",(i=e.complianceProfile)==null?void 0:i.lastName]}),t.jsx(s,{children:(o=e.complianceProfile)==null?void 0:o.nationality}),t.jsx(s,{children:(c=e.complianceProfile)==null?void 0:c.countryOfResidence}),t.jsx(s,{children:(x=e.businessProfile)==null?void 0:x.companyName})]},e.id)})})]})]})}),k===5&&t.jsx(I,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Compliance Events"}),t.jsx(N,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(W,{children:t.jsxs(v,{children:[t.jsx(s,{children:"Type"}),t.jsx(s,{children:"Severity"}),t.jsx(s,{children:"Description"})]})}),t.jsx(P,{children:jt.map(e=>t.jsxs(v,{children:[t.jsx(s,{children:e.eventType}),t.jsx(s,{children:e.severity}),t.jsx(s,{children:e.description})]},e.id))})]})]})})]})};export{qt as default};
