import{j as e,a as I,T as u,t as V,b9 as Re,ba as E,c as T,G as m,S as k,u as y,d as p,aR as Ee,aS as Oe,aT as Ye,a4 as se,D as O,bW as Fe,aC as Y,aD as F,aE as v,aF as s,aG as M,h as Me,aB as Pe}from"./mui-d9nHzX9S.js";import{r as j}from"./vendor-DIxetjBo.js";import{c as w,e as W}from"./index-x9wec--R.js";import"./stripe-CiUV72pZ.js";const He=()=>{var Q,q,Z,ee,te;const[ie,oe]=j.useState([]),[z,le]=j.useState(""),[J,re]=j.useState(""),[D,ce]=j.useState(0),[g,de]=j.useState(null),[d,K]=j.useState(null),[he,xe]=j.useState([]),[me,ue]=j.useState([]),[H,pe]=j.useState(0),[f,$]=j.useState(""),[S,_]=j.useState(""),[L,ge]=j.useState("US_SALES_TAX"),[n,C]=j.useState({legalName:"",taxId:"",addressLine1:"",addressLine2:"",city:"",region:"",postalCode:"",country:"US",contactEmail:""}),[je,be]=j.useState([]),[U,ye]=j.useState("NY"),[X,fe]=j.useState("US"),P=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California",portal:"https://onlineservices.cdtfa.ca.gov"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida",portal:"https://floridarevenue.com/taxes/Pages/return_drt.aspx"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York",portal:"https://www.tax.ny.gov/online/"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas",portal:"https://comptroller.texas.gov/taxes/file-pay/"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington",portal:"https://secure.dor.wa.gov/"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"},{code:"DC",name:"District of Columbia"}];j.useEffect(()=>{try{const r=localStorage.getItem("filing_company_default");r&&C(JSON.parse(r))}catch{}const t=new Date,a=new Date(t.getFullYear(),t.getMonth()-1,1),o=new Date(t.getFullYear(),t.getMonth(),0),c=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;$(c(a)),_(c(o))},[]);const N=t=>{const a=new Date,o=l=>`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`,c=(l,i)=>new Date(l,i,1),r=(l,i)=>new Date(l,i+1,0),x=(l,i)=>new Date(l,i*3,1),h=(l,i)=>new Date(l,i*3+3,0);if(t==="THIS_MONTH"){const l=c(a.getFullYear(),a.getMonth()),i=r(a.getFullYear(),a.getMonth());$(o(l)),_(o(i));return}if(t==="LAST_MONTH"){const l=c(a.getFullYear(),a.getMonth()-1),i=r(a.getFullYear(),a.getMonth()-1);$(o(l)),_(o(i));return}if(t==="THIS_QUARTER"){const l=Math.floor(a.getMonth()/3),i=x(a.getFullYear(),l),b=h(a.getFullYear(),l);$(o(i)),_(o(b));return}if(t==="LAST_QUARTER"){let l=Math.floor(a.getMonth()/3)-1,i=a.getFullYear();l<0&&(l=3,i-=1);const b=x(i,l),A=h(i,l);$(o(b)),_(o(A));return}if(t==="YTD"){const l=new Date(a.getFullYear(),0,1),i=a;$(o(l)),_(o(i));return}if(t==="LAST_YEAR"){const l=a.getFullYear()-1,i=new Date(l,0,1),b=new Date(l,11,31);$(o(i)),_(o(b));return}},Se=()=>{try{localStorage.setItem("filing_company_default",JSON.stringify(n))}catch{}},ve=()=>{try{const t=localStorage.getItem("filing_company_default");t&&C(JSON.parse(t))}catch{}},G=async()=>{var a,o;const t=await w.get(W.accounting.payments(),{params:{limit:50}});oe(((o=(a=t.data)==null?void 0:a.data)==null?void 0:o.payments)||[])};j.useEffect(()=>{(async()=>{var h,l,i,b,A,R,ne,ae;G();const[a,o,c,r]=await Promise.all([w.get("accounting/overview"),w.get("accounting/tax/summary"),w.get("accounting/kyc"),w.get("accounting/compliance-events")]);de(((h=a.data)==null?void 0:h.data)||null),K(((l=o.data)==null?void 0:l.data)||null),xe(((b=(i=c.data)==null?void 0:i.data)==null?void 0:b.users)||[]),ue(((R=(A=r.data)==null?void 0:A.data)==null?void 0:R.events)||[]);const x=(((ae=(ne=c.data)==null?void 0:ne.data)==null?void 0:ae.users)||[]).filter(Ne=>String(Ne.kycStatus||"").toUpperCase()!=="COMPLETED").length;pe(x)})()},[]);const Te=async()=>{var i,b;const t={from:z,to:J,includePII:!1},o=((b=(i=(await w.post(W.accounting.exportPayments(),t)).data)==null?void 0:i.data)==null?void 0:b.rows)||[],r=[Object.keys(o[0]||{}).join(","),...o.map(A=>Object.values(A).map(R=>JSON.stringify(R??"")).join(","))].join(`
`),x=new Blob([r],{type:"text/csv"}),h=URL.createObjectURL(x),l=document.createElement("a");l.href=h,l.download=`payments_${z||"all"}_${J||"all"}.csv`,l.click(),URL.revokeObjectURL(h)},Ce=async()=>{var i,b;const t={from:f,to:S,includePII:!1},o=((b=(i=(await w.post(W.accounting.exportPayments(),t)).data)==null?void 0:i.data)==null?void 0:b.rows)||[],r=[Object.keys(o[0]||{}).join(","),...o.map(A=>Object.values(A).map(R=>JSON.stringify(R??"")).join(","))].join(`
`),x=new Blob([r],{type:"text/csv"}),h=URL.createObjectURL(x),l=document.createElement("a");l.href=h,l.download=`payments_${f||"all"}_${S||"all"}.csv`,l.click(),URL.revokeObjectURL(h)},we=async()=>{var o,c,r;const t=await w.get("accounting/tax/summary",{params:{from:f||void 0,to:S||void 0}});K(((o=t.data)==null?void 0:o.data)||null);const a=await w.get(W.accounting.payments(),{params:{from:f||void 0,to:S||void 0,limit:500}});be(((r=(c=a.data)==null?void 0:c.data)==null?void 0:r.payments)||[])},$e=()=>{if(!d)return;const t=[];if(L==="US_SALES_TAX"){const h=(d==null?void 0:d.byJurisdiction)||{};for(const[l,i]of Object.entries(h))t.push({jurisdiction:l,tax_cents:i.tax_cents??0,taxable_cents:i.taxable_cents??0,count:i.count??0})}else{const h=(d==null?void 0:d.byCountry)||{};for(const[l,i]of Object.entries(h))t.push({country:l,tax_cents:i.tax_cents??0,taxable_cents:i.taxable_cents??0,count:i.count??0})}const o=[Object.keys(t[0]||{}).join(","),...t.map(h=>Object.values(h).map(l=>JSON.stringify(l??"")).join(","))].join(`
`),c=new Blob([o],{type:"text/csv"}),r=URL.createObjectURL(c),x=document.createElement("a");x.href=r,x.download=`filing_summary_${L}_${f||"all"}_${S||"all"}.csv`,x.click(),URL.revokeObjectURL(r)},_e=()=>{const t=window.open("","PRINT","height=800,width=800");if(!t)return;const a=`${f||"Start"} to ${S||"End"}`,o=L==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},c=Object.values(o).reduce((x,h)=>({tax:x.tax+((h==null?void 0:h.tax_cents)||0),taxable:x.taxable+((h==null?void 0:h.taxable_cents)||0),count:x.count+((h==null?void 0:h.count)||0)}),{tax:0,taxable:0,count:0}),r=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Cover Sheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Tax Filing Cover Sheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Filing</h2>
      <div>Scheme: ${L}</div>
      <div>Period: ${a}</div>
      <table>
        <tr><th>Total Taxable</th><th>Total Tax</th><th>Transactions</th></tr>
        <tr><td>${(c.taxable/100).toLocaleString()}</td><td>${(c.tax/100).toLocaleString()}</td><td>${c.count}</td></tr>
      </table>
      <p style="margin-top:16px">Attach the jurisdiction/member-state summary CSV and payments CSV for the filing period when submitting via your tax portal or provider.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;t.document.write(r),t.document.close(),t.focus()},Le=()=>{if(!d)return;const t=window.open("","PRINT","height=900,width=1000");if(!t)return;const a=`${f||"Start"} to ${S||"End"}`,o=L==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},c=Object.entries(o).map(([l,i])=>`<tr><td>${l}</td><td>${(((i==null?void 0:i.taxable_cents)||0)/100).toLocaleString()}</td><td>${(((i==null?void 0:i.tax_cents)||0)/100).toLocaleString()}</td><td>${(i==null?void 0:i.count)||0}</td></tr>`).join(""),r=Object.values(o).reduce((l,i)=>({tax:l.tax+((i==null?void 0:i.tax_cents)||0),taxable:l.taxable+((i==null?void 0:i.taxable_cents)||0),count:l.count+((i==null?void 0:i.count)||0)}),{tax:0,taxable:0,count:0}),x=L==="US_SALES_TAX"?"Jurisdiction":"Member State",h=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Worksheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666} tfoot td{font-weight:600}</style>
    </head><body>
      <h1>Filing Worksheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Period: ${a} — Scheme: ${L}</h2>
      <table>
        <thead><tr><th>${x}</th><th>Taxable</th><th>Tax</th><th>Count</th></tr></thead>
        <tbody>${c}</tbody>
        <tfoot><tr><td>Total</td><td>${(r.taxable/100).toLocaleString()}</td><td>${(r.tax/100).toLocaleString()}</td><td>${r.count}</td></tr></tfoot>
      </table>
      <p style="margin-top:16px">Use this worksheet to transcribe totals into your state portal (e-file) or retain for records.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;t.document.write(h),t.document.close(),t.focus()},B=()=>{var a;const t={};for(const o of je){if(String(o.status).toUpperCase()!=="SUCCEEDED")continue;const c=((a=o.billingAddress)==null?void 0:a.state)||"UNKNOWN",r=o.taxAmount??0,x=(o.amount??0)-r;t[c]=t[c]||{taxable_cents:0,tax_cents:0,count:0},t[c].taxable_cents+=x,t[c].tax_cents+=r,t[c].count+=1}return t},Ae=()=>{const a=B().NY||{taxable_cents:0,tax_cents:0,count:0},o=`${f||"Start"} to ${S||"End"}`,c=window.open("","PRINT","height=900,width=1000");if(!c)return;const r=`<!doctype html><html><head><meta charset="utf-8"><title>NY ST-100 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>NY ST-100 Quarterly Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File electronically via NYS Sales Tax Web File.</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Taxable sales (NY)</th><td>${(a.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (NY)</th><td>${(a.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${a.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://www.tax.ny.gov/online/" target="_blank" rel="noreferrer">NYS Sales Tax Web File</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;c.document.write(r),c.document.close(),c.focus()},ke=()=>{const a=B().TX||{taxable_cents:0,tax_cents:0,count:0},o=`${f||"Start"} to ${S||"End"}`,c=window.open("","PRINT","height=900,width=1000");if(!c)return;const r=`<!doctype html><html><head><meta charset="utf-8"><title>TX 01-114 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Texas 01-114 Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File via Texas Webfile.</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Taxable sales (TX)</th><td>${(a.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (TX)</th><td>${(a.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${a.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://comptroller.texas.gov/taxes/file-pay/" target="_blank" rel="noreferrer">Texas Webfile</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;c.document.write(r),c.document.close(),c.focus()},De=t=>{const o=B()[t]||{taxable_cents:0,tax_cents:0,count:0},c=`${f||"Start"} to ${S||"End"}`,r=P.find(l=>l.code===t),x=window.open("","PRINT","height=900,width=1000");if(!x)return;const h=`<!doctype html><html><head><meta charset="utf-8"><title>${t} Sales Tax Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${(r==null?void 0:r.name)||t} Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. Most states require e-filing via their tax portal.</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Period: ${c}</h2>
      <table>
        <tr><th>Taxable sales (${t})</th><td>${(o.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (${t})</th><td>${(o.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${o.count}</td></tr>
      </table>
      ${r!=null&&r.portal?`<p style="margin-top:16px">Portal: <a href="${r.portal}" target="_blank" rel="noreferrer">${r.portal}</a></p>`:""}
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;x.document.write(h),x.document.close(),x.focus()},Ie=t=>{const a=`${f||"Start"} to ${S||"End"}`,c=((d==null?void 0:d.byCountry)||{})[t]||{tax_cents:0,taxable_cents:0,count:0},r=window.open("","PRINT","height=900,width=1000");if(!r)return;const x=`<!doctype html><html><head><meta charset="utf-8"><title>${t} VAT/Sales Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${t} Indirect Tax Worksheet</h1>
      <small>For reference only. File via your national portal (e.g., EU OSS, CRA GST/HST).</small>
      <h2>Company</h2>
      <div>${n.legalName||"-"}</div>
      <div>${n.addressLine1||""} ${n.addressLine2||""}</div>
      <div>${n.city||""} ${n.region||""} ${n.postalCode||""} ${n.country||""}</div>
      <div>Tax ID: ${n.taxId||"-"}</div>
      <div>Contact: ${n.contactEmail||"-"}</div>
      <h2>Period: ${a}</h2>
      <table>
        <tr><th>Taxable amount (${t})</th><td>${(c.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Tax due (${t})</th><td>${(c.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${c.count||0}</td></tr>
      </table>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;r.document.write(x),r.document.close(),r.focus()};return e.jsxs(I,{sx:{p:3},children:[e.jsx(u,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Accounting & Compliance"}),e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Financial reporting, tax, KYC/AML, and regulatory oversight snapshot."}),H>0&&e.jsxs(V,{severity:"warning",sx:{mb:2},children:[H," user",H===1?"":"s"," require KYC verification. Review the KYC tab for details."]}),e.jsxs(Re,{value:D,onChange:(t,a)=>ce(a),sx:{mb:2},children:[e.jsx(E,{label:"Overview"}),e.jsx(E,{label:"Payments"}),e.jsx(E,{label:"Tax"}),e.jsx(E,{label:"Filings"}),e.jsx(E,{label:"KYC"}),e.jsx(E,{label:"Compliance"})]}),D===3&&e.jsx(I,{children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Filing Packet"}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"Filing Period"}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[e.jsx(y,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:f,onChange:t=>$(t.target.value),size:"small"}),e.jsx(y,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:S,onChange:t=>_(t.target.value),size:"small"})]}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:1,sx:{mb:2},children:[e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("THIS_MONTH"),children:"This Month"}),e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("LAST_MONTH"),children:"Last Month"}),e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("THIS_QUARTER"),children:"This Quarter"}),e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("LAST_QUARTER"),children:"Last Quarter"}),e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("YTD"),children:"YTD"}),e.jsx(p,{size:"small",variant:"outlined",onClick:()=>N("LAST_YEAR"),children:"Last Year"})]}),e.jsxs(Ee,{size:"small",sx:{minWidth:240},children:[e.jsx(Oe,{id:"scheme-label",children:"Scheme"}),e.jsxs(Ye,{labelId:"scheme-label",id:"scheme",value:L,label:"Scheme",onChange:t=>ge(t.target.value),children:[e.jsx(se,{value:"US_SALES_TAX",children:"US Sales Tax (state/county)"}),e.jsx(se,{value:"EU_OSS",children:"EU OSS VAT (member state)"})]})]}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(p,{variant:"outlined",onClick:we,children:"Refresh Summary"}),e.jsx(p,{variant:"contained",onClick:$e,children:"Download Summary CSV"}),e.jsx(p,{variant:"outlined",onClick:Ce,children:"Download Payments CSV"})]})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"Company Info (for cover sheet)"}),e.jsxs(m,{container:!0,spacing:1,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Legal Name",value:n.legalName,onChange:t=>C({...n,legalName:t.target.value})})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Tax ID / VAT",value:n.taxId,onChange:t=>C({...n,taxId:t.target.value})})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Contact Email",value:n.contactEmail,onChange:t=>C({...n,contactEmail:t.target.value})})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Address Line 1",value:n.addressLine1,onChange:t=>C({...n,addressLine1:t.target.value})})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Address Line 2",value:n.addressLine2,onChange:t=>C({...n,addressLine2:t.target.value})})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(y,{fullWidth:!0,size:"small",label:"City",value:n.city,onChange:t=>C({...n,city:t.target.value})})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Region/State",value:n.region,onChange:t=>C({...n,region:t.target.value})})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(y,{fullWidth:!0,size:"small",label:"Postal Code",value:n.postalCode,onChange:t=>C({...n,postalCode:t.target.value})})})]}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(p,{variant:"outlined",onClick:_e,children:"Print Filing Cover Sheet"}),e.jsx(p,{variant:"outlined",onClick:Le,children:"Print Jurisdiction Worksheet"}),e.jsx(p,{variant:"outlined",onClick:Ae,children:"NY ST-100 Worksheet"}),e.jsx(p,{variant:"outlined",onClick:ke,children:"TX 01-114 Worksheet"}),e.jsx(p,{variant:"text",onClick:Se,children:"Save as Default"}),e.jsx(p,{variant:"text",onClick:ve,children:"Load Default"})]}),e.jsx(O,{sx:{my:2}}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"US State Worksheets"}),e.jsx(Fe,{options:P,getOptionLabel:t=>`${t.code} — ${t.name}`,value:P.find(t=>t.code===U)||null,onChange:(t,a)=>ye((a==null?void 0:a.code)||"NY"),renderInput:t=>e.jsx(y,{...t,label:"Select State",size:"small"}),sx:{maxWidth:400,mt:1}}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(p,{variant:"contained",onClick:()=>De(U),children:"Print Selected State Worksheet"}),((Q=P.find(t=>t.code===U))==null?void 0:Q.portal)&&e.jsx(p,{variant:"outlined",onClick:()=>window.open(P.find(t=>t.code===U).portal,"_blank","noreferrer"),children:"Open State Portal"})]})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"International (Country) Worksheets"}),e.jsx(y,{label:"Country Code (ISO alpha-2)",size:"small",value:X,onChange:t=>fe(t.target.value.toUpperCase()),sx:{maxWidth:240,mt:1}}),e.jsx(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:e.jsx(p,{variant:"contained",onClick:()=>Ie(X),children:"Print Country Worksheet"})}),e.jsx(V,{severity:"info",sx:{mt:2},children:"For EU OSS, use scheme EU_OSS and the jurisdiction summary CSV; for Canada, file GST/HST per CRA portal."})]})]})]})]}),e.jsx(V,{severity:"info",sx:{mt:2},children:"This packet mirrors common filings used by SaaS: US Sales Tax returns (state/county totals) and EU OSS VAT returns (member-state totals). Attach the CSV summaries and payments export when filing via your tax portal or provider."})]})}),D===0&&e.jsxs(I,{children:[e.jsxs(m,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(m,{item:!0,xs:12,md:3,children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"overline",children:"Revenue (USD)"}),e.jsx(u,{variant:"h5",children:((((q=g==null?void 0:g.totals)==null?void 0:q.revenue_cents)||0)/100).toLocaleString()})]})}),e.jsx(m,{item:!0,xs:12,md:3,children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"overline",children:"Tax Collected"}),e.jsx(u,{variant:"h5",children:((((Z=g==null?void 0:g.totals)==null?void 0:Z.tax_cents)||0)/100).toLocaleString()})]})}),e.jsx(m,{item:!0,xs:12,md:3,children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"overline",children:"Payments"}),e.jsx(u,{variant:"h5",children:((ee=g==null?void 0:g.totals)==null?void 0:ee.paymentsCount)||0})]})}),e.jsx(m,{item:!0,xs:12,md:3,children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"overline",children:"KYC Completed"}),e.jsx(u,{variant:"h5",children:((te=g==null?void 0:g.kycCounts)==null?void 0:te.COMPLETED)||0})]})})]}),e.jsxs(T,{sx:{p:2,mb:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Recent Payments"}),e.jsx(O,{sx:{mb:1}}),e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Invoice"}),e.jsx(s,{align:"right",children:"Amount"}),e.jsx(s,{children:"Tax"}),e.jsx(s,{children:"Jurisdiction"})]})}),e.jsx(M,{children:((g==null?void 0:g.recentPayments)||[]).map(t=>e.jsxs(v,{children:[e.jsx(s,{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx(s,{children:t.stripeInvoiceId}),e.jsx(s,{align:"right",children:(t.amount??0)/100}),e.jsxs(s,{children:[((t.taxAmount??0)/100).toFixed(2)," (",((t.taxRate??0)*100).toFixed(2),"%)"]}),e.jsx(s,{children:t.jurisdiction})]},t.id))})]})]}),e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax by Jurisdiction"}),e.jsx(O,{sx:{mb:1}}),e.jsx(k,{direction:"row",spacing:1,flexWrap:"wrap",children:(g==null?void 0:g.taxByJurisdiction)&&Object.entries(g.taxByJurisdiction).map(([t,a])=>e.jsx(Me,{label:`${t}: ${(a/100).toLocaleString()}`},t))})]})]}),D===1&&e.jsxs(I,{children:[e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[e.jsx(y,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:z,onChange:t=>le(t.target.value),size:"small"}),e.jsx(y,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:J,onChange:t=>re(t.target.value),size:"small"}),e.jsx(p,{variant:"contained",onClick:Te,children:"Export CSV"}),e.jsx(p,{variant:"outlined",onClick:G,children:"Refresh"})]}),e.jsx(Pe,{component:T,children:e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Invoice"}),e.jsx(s,{align:"right",children:"Amount"}),e.jsx(s,{children:"Currency"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Tax"}),e.jsx(s,{children:"Jurisdiction"}),e.jsx(s,{children:"User Email"}),e.jsx(s,{children:"Residency"})]})}),e.jsx(M,{children:ie.map(t=>{var a,o,c;return e.jsxs(v,{children:[e.jsx(s,{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx(s,{children:t.stripeInvoiceId}),e.jsx(s,{align:"right",children:(t.amount??0)/100}),e.jsx(s,{children:t.currency}),e.jsx(s,{children:t.status}),e.jsxs(s,{children:[((t.taxAmount??0)/100).toFixed(2)," (",((t.taxRate??0)*100).toFixed(2),"%)"]}),e.jsx(s,{children:t.taxJurisdiction}),e.jsx(s,{children:(a=t.user)==null?void 0:a.email}),e.jsx(s,{children:(c=(o=t.user)==null?void 0:o.taxInformation)==null?void 0:c.taxResidency})]},t.id)})})]})})]}),D===2&&e.jsx(I,{children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax Summary"}),e.jsx(O,{sx:{mb:1}}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"By Jurisdiction"}),e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Jurisdiction"}),e.jsx(s,{align:"right",children:"Tax"}),e.jsx(s,{align:"right",children:"Taxable"}),e.jsx(s,{align:"right",children:"Count"})]})}),e.jsx(M,{children:(d==null?void 0:d.byJurisdiction)&&Object.entries(d.byJurisdiction).map(([t,a])=>e.jsxs(v,{children:[e.jsx(s,{children:t}),e.jsx(s,{align:"right",children:((a.tax_cents||0)/100).toLocaleString()}),e.jsx(s,{align:"right",children:((a.taxable_cents||0)/100).toLocaleString()}),e.jsx(s,{align:"right",children:a.count})]},t))})]})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"overline",children:"By Country"}),e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Country"}),e.jsx(s,{align:"right",children:"Tax"}),e.jsx(s,{align:"right",children:"Taxable"}),e.jsx(s,{align:"right",children:"Count"})]})}),e.jsx(M,{children:(d==null?void 0:d.byCountry)&&Object.entries(d.byCountry).map(([t,a])=>e.jsxs(v,{children:[e.jsx(s,{children:t}),e.jsx(s,{align:"right",children:((a.tax_cents||0)/100).toLocaleString()}),e.jsx(s,{align:"right",children:((a.taxable_cents||0)/100).toLocaleString()}),e.jsx(s,{align:"right",children:a.count})]},t))})]})]})]})]})}),D===4&&e.jsx(I,{children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"KYC Overview"}),e.jsx(O,{sx:{mb:1}}),e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Completed At"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Nationality"}),e.jsx(s,{children:"Residence"}),e.jsx(s,{children:"Company"})]})}),e.jsx(M,{children:he.map(t=>{var a,o,c,r,x;return e.jsxs(v,{children:[e.jsx(s,{children:t.email}),e.jsx(s,{children:t.kycStatus}),e.jsx(s,{children:t.kycCompletedAt?new Date(t.kycCompletedAt).toLocaleDateString():"-"}),e.jsxs(s,{children:[(a=t.complianceProfile)==null?void 0:a.firstName," ",(o=t.complianceProfile)==null?void 0:o.lastName]}),e.jsx(s,{children:(c=t.complianceProfile)==null?void 0:c.nationality}),e.jsx(s,{children:(r=t.complianceProfile)==null?void 0:r.countryOfResidence}),e.jsx(s,{children:(x=t.businessProfile)==null?void 0:x.companyName})]},t.id)})})]})]})}),D===5&&e.jsx(I,{children:e.jsxs(T,{sx:{p:2},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Compliance Events"}),e.jsx(O,{sx:{mb:1}}),e.jsxs(Y,{size:"small",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Severity"}),e.jsx(s,{children:"Description"})]})}),e.jsx(M,{children:me.map(t=>e.jsxs(v,{children:[e.jsx(s,{children:t.eventType}),e.jsx(s,{children:t.severity}),e.jsx(s,{children:t.description})]},t.id))})]})]})})]})};export{He as default};
