import{j as t,a as R,T as u,t as G,b9 as Vt,ba as E,c as w,G as m,S as K,u as f,bW as Gt,bX as N,aR as Kt,aS as Xt,aT as Qt,a4 as dt,aU as B,d as j,R as qt,aq as ht,bY as k,bZ as Zt,b_ as te,D as F,b$ as ee,c0 as ae,c1 as ne,c2 as se,aC as O,aD as U,aE as T,aF as s,aG as M,h as oe,aB as ie}from"./mui-DpsxcHA8.js";import{r as g}from"./vendor-DIxetjBo.js";import{c as $,e as P}from"./index-Bz15aLJP.js";import"./stripe-GgbZzTKy.js";const he=()=>{var Z,tt,et,at,nt;const[xt,mt]=g.useState([]),[z,ut]=g.useState(""),[J,pt]=g.useState(""),[I,gt]=g.useState(0),[p,jt]=g.useState(null),[d,X]=g.useState(null),[yt,bt]=g.useState([]),[St,ft]=g.useState([]),[V,Tt]=g.useState(0),[b,L]=g.useState(""),[S,_]=g.useState(""),[C,vt]=g.useState("US_SALES_TAX"),[a,v]=g.useState({legalName:"",taxId:"",addressLine1:"",addressLine2:"",city:"",region:"",postalCode:"",country:"US",contactEmail:""}),[wt,$t]=g.useState([]),[H,Ct]=g.useState("NY"),[Q,Lt]=g.useState("US"),[_t,At]=g.useState(null),W=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California",portal:"https://onlineservices.cdtfa.ca.gov"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida",portal:"https://floridarevenue.com/taxes/Pages/return_drt.aspx"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York",portal:"https://www.tax.ny.gov/online/"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas",portal:"https://comptroller.texas.gov/taxes/file-pay/"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington",portal:"https://secure.dor.wa.gov/"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"},{code:"DC",name:"District of Columbia"}];g.useEffect(()=>{try{const c=localStorage.getItem("filing_company_default");c&&v(JSON.parse(c))}catch{}const e=new Date,n=new Date(e.getFullYear(),e.getMonth()-1,1),o=new Date(e.getFullYear(),e.getMonth(),0),i=c=>`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;L(i(n)),_(i(o))},[]);const It=e=>{const n=new Date,o=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=(r,l)=>new Date(r,l,1),c=(r,l)=>new Date(r,l+1,0),x=(r,l)=>new Date(r,l*3,1),h=(r,l)=>new Date(r,l*3+3,0);if(e==="THIS_MONTH"){const r=i(n.getFullYear(),n.getMonth()),l=c(n.getFullYear(),n.getMonth());L(o(r)),_(o(l));return}if(e==="LAST_MONTH"){const r=i(n.getFullYear(),n.getMonth()-1),l=c(n.getFullYear(),n.getMonth()-1);L(o(r)),_(o(l));return}if(e==="THIS_QUARTER"){const r=Math.floor(n.getMonth()/3),l=x(n.getFullYear(),r),y=h(n.getFullYear(),r);L(o(l)),_(o(y));return}if(e==="LAST_QUARTER"){let r=Math.floor(n.getMonth()/3)-1,l=n.getFullYear();r<0&&(r=3,l-=1);const y=x(l,r),A=h(l,r);L(o(y)),_(o(A));return}if(e==="YTD"){const r=new Date(n.getFullYear(),0,1),l=n;L(o(r)),_(o(l));return}if(e==="LAST_YEAR"){const r=n.getFullYear()-1,l=new Date(r,0,1),y=new Date(r,11,31);L(o(l)),_(o(y));return}},Rt=async()=>{try{localStorage.setItem("filing_company_default",JSON.stringify(a))}catch{}try{await $.post(P.admin.companyFilingSave(),a)}catch{}},Dt=()=>{try{const e=localStorage.getItem("filing_company_default");e&&v(JSON.parse(e))}catch{}},q=async()=>{var n,o;const e=await $.get(P.accounting.payments(),{params:{limit:50}});mt(((o=(n=e.data)==null?void 0:n.data)==null?void 0:o.payments)||[])};g.useEffect(()=>{(async()=>{var h,r,l,y,A,D,st,ot,it,lt;q();const[n,o,i,c]=await Promise.all([$.get("accounting/overview"),$.get("accounting/tax/summary"),$.get("accounting/kyc"),$.get("accounting/compliance-events")]);jt(((h=n.data)==null?void 0:h.data)||null),X(((r=o.data)==null?void 0:r.data)||null),bt(((y=(l=i.data)==null?void 0:l.data)==null?void 0:y.users)||[]),ft(((D=(A=c.data)==null?void 0:A.data)==null?void 0:D.events)||[]);const x=(((ot=(st=i.data)==null?void 0:st.data)==null?void 0:ot.users)||[]).filter(rt=>String(rt.kycStatus||"").toUpperCase()!=="COMPLETED").length;Tt(x);try{const ct=(lt=(it=(await $.get(P.admin.companyFilingGet())).data)==null?void 0:it.data)==null?void 0:lt.company;ct&&v(Jt=>({...Jt,...ct}))}catch{}})()},[]);const Et=async()=>{var l,y;const e={from:z,to:J,includePII:!1},o=((y=(l=(await $.post(P.accounting.exportPayments(),e)).data)==null?void 0:l.data)==null?void 0:y.rows)||[],c=[Object.keys(o[0]||{}).join(","),...o.map(A=>Object.values(A).map(D=>JSON.stringify(D??"")).join(","))].join(`
`),x=new Blob([c],{type:"text/csv"}),h=URL.createObjectURL(x),r=document.createElement("a");r.href=h,r.download=`payments_${z||"all"}_${J||"all"}.csv`,r.click(),URL.revokeObjectURL(h)},Nt=async()=>{var l,y;const e={from:b,to:S,includePII:!1},o=((y=(l=(await $.post(P.accounting.exportPayments(),e)).data)==null?void 0:l.data)==null?void 0:y.rows)||[],c=[Object.keys(o[0]||{}).join(","),...o.map(A=>Object.values(A).map(D=>JSON.stringify(D??"")).join(","))].join(`
`),x=new Blob([c],{type:"text/csv"}),h=URL.createObjectURL(x),r=document.createElement("a");r.href=h,r.download=`payments_${b||"all"}_${S||"all"}.csv`,r.click(),URL.revokeObjectURL(h)},kt=async()=>{var o,i,c;const e=await $.get("accounting/tax/summary",{params:{from:b||void 0,to:S||void 0}});X(((o=e.data)==null?void 0:o.data)||null);const n=await $.get(P.accounting.payments(),{params:{from:b||void 0,to:S||void 0,limit:500}});$t(((c=(i=n.data)==null?void 0:i.data)==null?void 0:c.payments)||[])},Ft=()=>{if(!d)return;const e=[];if(C==="US_SALES_TAX"){const h=(d==null?void 0:d.byJurisdiction)||{};for(const[r,l]of Object.entries(h))e.push({jurisdiction:r,tax_cents:l.tax_cents??0,taxable_cents:l.taxable_cents??0,count:l.count??0})}else{const h=(d==null?void 0:d.byCountry)||{};for(const[r,l]of Object.entries(h))e.push({country:r,tax_cents:l.tax_cents??0,taxable_cents:l.taxable_cents??0,count:l.count??0})}const o=[Object.keys(e[0]||{}).join(","),...e.map(h=>Object.values(h).map(r=>JSON.stringify(r??"")).join(","))].join(`
`),i=new Blob([o],{type:"text/csv"}),c=URL.createObjectURL(i),x=document.createElement("a");x.href=c,x.download=`filing_summary_${C}_${b||"all"}_${S||"all"}.csv`,x.click(),URL.revokeObjectURL(c)},Ot=()=>{const e=window.open("","PRINT","height=800,width=800");if(!e)return;const n=`${b||"Start"} to ${S||"End"}`,o=C==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},i=Object.values(o).reduce((x,h)=>({tax:x.tax+((h==null?void 0:h.tax_cents)||0),taxable:x.taxable+((h==null?void 0:h.taxable_cents)||0),count:x.count+((h==null?void 0:h.count)||0)}),{tax:0,taxable:0,count:0}),c=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Cover Sheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Tax Filing Cover Sheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Filing</h2>
      <div>Scheme: ${C}</div>
      <div>Period: ${n}</div>
      <table>
        <tr><th>Total Taxable</th><th>Total Tax</th><th>Transactions</th></tr>
        <tr><td>${(i.taxable/100).toLocaleString()}</td><td>${(i.tax/100).toLocaleString()}</td><td>${i.count}</td></tr>
      </table>
      <p style="margin-top:16px">Attach the jurisdiction/member-state summary CSV and payments CSV for the filing period when submitting via your tax portal or provider.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;e.document.write(c),e.document.close(),e.focus()},Ut={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden"},Mt=()=>{if(!d)return;const e=window.open("","PRINT","height=900,width=1000");if(!e)return;const n=`${b||"Start"} to ${S||"End"}`,o=C==="US_SALES_TAX"?(d==null?void 0:d.byJurisdiction)||{}:(d==null?void 0:d.byCountry)||{},i=Object.entries(o).map(([r,l])=>`<tr><td>${C==="EU_OSS"?`${Ut[r]||r} (${r})`:r}</td><td>${(((l==null?void 0:l.taxable_cents)||0)/100).toLocaleString()}</td><td>${(((l==null?void 0:l.tax_cents)||0)/100).toLocaleString()}</td><td>${(l==null?void 0:l.count)||0}</td></tr>`).join(""),c=Object.values(o).reduce((r,l)=>({tax:r.tax+((l==null?void 0:l.tax_cents)||0),taxable:r.taxable+((l==null?void 0:l.taxable_cents)||0),count:r.count+((l==null?void 0:l.count)||0)}),{tax:0,taxable:0,count:0}),x=C==="US_SALES_TAX"?"Jurisdiction":"Member State",h=`<!doctype html><html><head><meta charset="utf-8"><title>Filing Worksheet</title>
      <style>body{font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding:24px;} h1,h2{margin:0 0 8px;} table{border-collapse: collapse; width:100%; margin-top:16px;} th,td{border:1px solid #ccc; padding:8px; text-align:left;} small{color:#666} tfoot td{font-weight:600}</style>
    </head><body>
      <h1>Filing Worksheet</h1>
      <small>Generated by Accounting Dashboard</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${n} — Scheme: ${C}</h2>
      <table>
        <thead><tr><th>${x}</th><th>Taxable</th><th>Tax</th><th>Count</th></tr></thead>
        <tbody>${i}</tbody>
        <tfoot><tr><td>Total</td><td>${(c.taxable/100).toLocaleString()}</td><td>${(c.tax/100).toLocaleString()}</td><td>${c.count}</td></tr></tfoot>
      </table>
      <p style="margin-top:16px">Use this worksheet to transcribe totals into your state portal (e-file) or retain for records.</p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;e.document.write(h),e.document.close(),e.focus()},Y=()=>{var n;const e={};for(const o of wt){if(String(o.status).toUpperCase()!=="SUCCEEDED")continue;const i=((n=o.billingAddress)==null?void 0:n.state)||"UNKNOWN",c=o.taxAmount??0,x=(o.amount??0)-c;e[i]=e[i]||{taxable_cents:0,tax_cents:0,count:0},e[i].taxable_cents+=x,e[i].tax_cents+=c,e[i].count+=1}return e},Pt=()=>{const n=Y().NY||{taxable_cents:0,tax_cents:0,count:0},o=`${b||"Start"} to ${S||"End"}`,i=window.open("","PRINT","height=900,width=1000");if(!i)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>NY ST-100 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>NY ST-100 Quarterly Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File electronically via NYS Sales Tax Web File.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Taxable sales (NY)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (NY)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://www.tax.ny.gov/online/" target="_blank" rel="noreferrer">NYS Sales Tax Web File</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;i.document.write(c),i.document.close(),i.focus()},Wt=()=>{const n=Y().TX||{taxable_cents:0,tax_cents:0,count:0},o=`${b||"Start"} to ${S||"End"}`,i=window.open("","PRINT","height=900,width=1000");if(!i)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>TX 01-114 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Texas 01-114 Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File via Texas Webfile.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Taxable sales (TX)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (TX)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://comptroller.texas.gov/taxes/file-pay/" target="_blank" rel="noreferrer">Texas Webfile</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;i.document.write(c),i.document.close(),i.focus()},Yt=()=>{const n=Y().FL||{taxable_cents:0,tax_cents:0,count:0},o=`${b||"Start"} to ${S||"End"}`,i=window.open("","PRINT","height=900,width=1000");if(!i)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>FL DR-15 Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Florida DR-15 Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. File via Florida DOR (e-Services).</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Line: Taxable Sales (FL)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Line: Sales and Use Tax Due (FL)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
        <tr><th>Less: Credits</th><td>0.00</td></tr>
        <tr><th>Less: Deductions</th><td>0.00</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://floridarevenue.com/taxes/Pages/return_drt.aspx" target="_blank" rel="noreferrer">Florida DOR e-Services</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;i.document.write(c),i.document.close(),i.focus()},Ht=()=>{const n=Y().WA||{taxable_cents:0,tax_cents:0,count:0},o=`${b||"Start"} to ${S||"End"}`,i=window.open("","PRINT","height=900,width=1000");if(!i)return;const c=`<!doctype html><html><head><meta charset="utf-8"><title>WA Excise/B&O Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>Washington Excise/B&O Return (Worksheet)</h1>
      <small>For reference only. File via My DOR.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${o}</h2>
      <table>
        <tr><th>Gross Receipts (WA)</th><td>${(n.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Tax Due (WA)</th><td>${(n.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${n.count}</td></tr>
        <tr><th>Less: Credits</th><td>0.00</td></tr>
        <tr><th>Less: Deductions</th><td>0.00</td></tr>
      </table>
      <p style="margin-top:16px">Portal: <a href="https://secure.dor.wa.gov/" target="_blank" rel="noreferrer">WA My DOR</a></p>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;i.document.write(c),i.document.close(),i.focus()},Bt=e=>{const o=Y()[e]||{taxable_cents:0,tax_cents:0,count:0},i=`${b||"Start"} to ${S||"End"}`,c=W.find(r=>r.code===e),x=window.open("","PRINT","height=900,width=1000");if(!x)return;const h=`<!doctype html><html><head><meta charset="utf-8"><title>${e} Sales Tax Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${(c==null?void 0:c.name)||e} Sales and Use Tax Return (Worksheet)</h1>
      <small>For reference only. Most states require e-filing via their tax portal.</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${i}</h2>
      <table>
        <tr><th>Taxable sales (${e})</th><td>${(o.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Sales and use tax due (${e})</th><td>${(o.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${o.count}</td></tr>
      </table>
      ${c!=null&&c.portal?`<p style="margin-top:16px">Portal: <a href="${c.portal}" target="_blank" rel="noreferrer">${c.portal}</a></p>`:""}
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;x.document.write(h),x.document.close(),x.focus()},zt=e=>{const n=`${b||"Start"} to ${S||"End"}`,i=((d==null?void 0:d.byCountry)||{})[e]||{tax_cents:0,taxable_cents:0,count:0},c=window.open("","PRINT","height=900,width=1000");if(!c)return;const x=`<!doctype html><html><head><meta charset="utf-8"><title>${e} VAT/Sales Worksheet</title>
      <style>body{font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;} h1{margin:0 0 8px} table{border-collapse:collapse;width:100%;margin-top:16px;} th,td{border:1px solid #ccc;padding:8px;text-align:left;} small{color:#666}</style>
    </head><body>
      <h1>${e} Indirect Tax Worksheet</h1>
      <small>For reference only. File via your national portal (e.g., EU OSS, CRA GST/HST).</small>
      <h2>Company</h2>
      <div>${a.legalName||"-"}</div>
      <div>${a.addressLine1||""} ${a.addressLine2||""}</div>
      <div>${a.city||""} ${a.region||""} ${a.postalCode||""} ${a.country||""}</div>
      <div>Tax ID: ${a.taxId||"-"}</div>
      <div>Contact: ${a.contactEmail||"-"}</div>
      <h2>Period: ${n}</h2>
      <table>
        <tr><th>Taxable amount (${e})</th><td>${(i.taxable_cents/100).toLocaleString()}</td></tr>
        <tr><th>Tax due (${e})</th><td>${(i.tax_cents/100).toLocaleString()}</td></tr>
        <tr><th>Transactions</th><td>${i.count||0}</td></tr>
      </table>
      <script>window.onload=function(){window.print(); setTimeout(()=>window.close(), 300);}<\/script>
    </body></html>`;c.document.write(x),c.document.close(),c.focus()};return t.jsxs(R,{sx:{p:3},children:[t.jsx(u,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Accounting & Compliance"}),t.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Financial reporting, tax, KYC/AML, and regulatory oversight snapshot."}),V>0&&t.jsxs(G,{severity:"warning",sx:{mb:2},children:[V," user",V===1?"":"s"," require KYC verification. Review the KYC tab for details."]}),t.jsxs(Vt,{value:I,onChange:(e,n)=>gt(n),sx:{mb:2},children:[t.jsx(E,{label:"Overview"}),t.jsx(E,{label:"Payments"}),t.jsx(E,{label:"Tax"}),t.jsx(E,{label:"Filings"}),t.jsx(E,{label:"KYC"}),t.jsx(E,{label:"Compliance"})]}),I===3&&t.jsx(R,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Filing Packet"}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"Filing Period"}),t.jsxs(K,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[t.jsx(f,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:b,onChange:e=>L(e.target.value),size:"small"}),t.jsx(f,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:S,onChange:e=>_(e.target.value),size:"small"})]}),t.jsxs(Gt,{exclusive:!0,size:"small",value:_t,onChange:(e,n)=>{if(At(n),!n)return;It({THIS_MONTH:"THIS_MONTH",LAST_MONTH:"LAST_MONTH",THIS_QUARTER:"THIS_QUARTER",LAST_QUARTER:"LAST_QUARTER",YTD:"YTD",LAST_YEAR:"LAST_YEAR"}[n])},sx:{mb:2,flexWrap:"wrap"},children:[t.jsx(N,{value:"THIS_MONTH",children:"This Month"}),t.jsx(N,{value:"LAST_MONTH",children:"Last Month"}),t.jsx(N,{value:"THIS_QUARTER",children:"This Quarter"}),t.jsx(N,{value:"LAST_QUARTER",children:"Last Quarter"}),t.jsx(N,{value:"YTD",children:"YTD"}),t.jsx(N,{value:"LAST_YEAR",children:"Last Year"})]}),t.jsxs(Kt,{size:"small",sx:{minWidth:240},children:[t.jsx(Xt,{id:"scheme-label",children:"Scheme"}),t.jsxs(Qt,{labelId:"scheme-label",id:"scheme",value:C,label:"Scheme",onChange:e=>vt(e.target.value),children:[t.jsx(dt,{value:"US_SALES_TAX",children:"US Sales Tax (state/county)"}),t.jsx(dt,{value:"EU_OSS",children:"EU OSS VAT (member state)"})]})]}),t.jsxs(B,{variant:"contained",size:"small",sx:{mt:2,flexWrap:"wrap"},children:[t.jsx(j,{color:"inherit",startIcon:t.jsx(qt,{}),onClick:kt,children:"Refresh"}),t.jsx(j,{color:"primary",startIcon:t.jsx(ht,{}),onClick:Ft,children:"Summary CSV"}),t.jsx(j,{color:"secondary",startIcon:t.jsx(ht,{}),onClick:Nt,children:"Payments CSV"})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"Company Info (for cover sheet)"}),t.jsxs(m,{container:!0,spacing:1,children:[t.jsx(m,{item:!0,xs:12,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Legal Name",value:a.legalName,onChange:e=>v({...a,legalName:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:6,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Tax ID / VAT",value:a.taxId,onChange:e=>v({...a,taxId:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:6,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Contact Email",value:a.contactEmail,onChange:e=>v({...a,contactEmail:e.target.value})})}),t.jsx(m,{item:!0,xs:12,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Address Line 1",value:a.addressLine1,onChange:e=>v({...a,addressLine1:e.target.value})})}),t.jsx(m,{item:!0,xs:12,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Address Line 2",value:a.addressLine2,onChange:e=>v({...a,addressLine2:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(f,{fullWidth:!0,size:"small",label:"City",value:a.city,onChange:e=>v({...a,city:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Region/State",value:a.region,onChange:e=>v({...a,region:e.target.value})})}),t.jsx(m,{item:!0,xs:12,sm:4,children:t.jsx(f,{fullWidth:!0,size:"small",label:"Postal Code",value:a.postalCode,onChange:e=>v({...a,postalCode:e.target.value})})})]}),t.jsxs(B,{variant:"outlined",size:"small",sx:{mt:2,flexWrap:"wrap"},children:[t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Ot,children:"Cover Sheet"}),t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Mt,children:"Jurisdiction"}),t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Pt,children:"NY ST-100"}),t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Wt,children:"TX 01-114"}),t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Yt,children:"FL DR-15"}),t.jsx(j,{startIcon:t.jsx(k,{}),onClick:Ht,children:"WA Excise"}),t.jsx(j,{startIcon:t.jsx(Zt,{}),onClick:Rt,children:"Save Defaults"}),t.jsx(j,{startIcon:t.jsx(te,{}),onClick:Dt,children:"Load Defaults"})]}),t.jsx(F,{sx:{my:2}}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"US State Worksheets"}),t.jsx(ee,{options:W,getOptionLabel:e=>`${e.code} — ${e.name}`,value:W.find(e=>e.code===H)||null,onChange:(e,n)=>Ct((n==null?void 0:n.code)||"NY"),renderInput:e=>t.jsx(f,{...e,label:"Select State",size:"small"}),sx:{maxWidth:400,mt:1}}),t.jsxs(B,{size:"small",sx:{mt:2,flexWrap:"wrap"},children:[t.jsx(j,{variant:"contained",startIcon:t.jsx(ae,{}),onClick:()=>Bt(H),children:"Print State Worksheet"}),((Z=W.find(e=>e.code===H))==null?void 0:Z.portal)&&t.jsx(j,{variant:"outlined",startIcon:t.jsx(ne,{}),onClick:()=>window.open(W.find(e=>e.code===H).portal,"_blank","noreferrer"),children:"Open Portal"})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"International (Country) Worksheets"}),t.jsx(f,{label:"Country Code (ISO alpha-2)",size:"small",value:Q,onChange:e=>Lt(e.target.value.toUpperCase()),sx:{maxWidth:240,mt:1}}),t.jsx(B,{size:"small",sx:{mt:2,flexWrap:"wrap"},children:t.jsx(j,{variant:"contained",startIcon:t.jsx(se,{}),onClick:()=>zt(Q),children:"Print Country Worksheet"})}),t.jsx(G,{severity:"info",sx:{mt:2},children:"For EU OSS, use scheme EU_OSS and the jurisdiction summary CSV; for Canada, file GST/HST per CRA portal."})]})]})]})]}),t.jsx(G,{severity:"info",sx:{mt:2},children:"This packet mirrors common filings used by SaaS: US Sales Tax returns (state/county totals) and EU OSS VAT returns (member-state totals). Attach the CSV summaries and payments export when filing via your tax portal or provider."})]})}),I===0&&t.jsxs(R,{children:[t.jsxs(m,{container:!0,spacing:2,sx:{mb:2},children:[t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Revenue (USD)"}),t.jsx(u,{variant:"h5",children:((((tt=p==null?void 0:p.totals)==null?void 0:tt.revenue_cents)||0)/100).toLocaleString()})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Tax Collected"}),t.jsx(u,{variant:"h5",children:((((et=p==null?void 0:p.totals)==null?void 0:et.tax_cents)||0)/100).toLocaleString()})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"Payments"}),t.jsx(u,{variant:"h5",children:((at=p==null?void 0:p.totals)==null?void 0:at.paymentsCount)||0})]})}),t.jsx(m,{item:!0,xs:12,md:3,children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"overline",children:"KYC Completed"}),t.jsx(u,{variant:"h5",children:((nt=p==null?void 0:p.kycCounts)==null?void 0:nt.COMPLETED)||0})]})})]}),t.jsxs(w,{sx:{p:2,mb:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Recent Payments"}),t.jsx(F,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Date"}),t.jsx(s,{children:"Invoice"}),t.jsx(s,{align:"right",children:"Amount"}),t.jsx(s,{children:"Tax"}),t.jsx(s,{children:"Jurisdiction"})]})}),t.jsx(M,{children:((p==null?void 0:p.recentPayments)||[]).map(e=>t.jsxs(T,{children:[t.jsx(s,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(s,{children:e.stripeInvoiceId}),t.jsx(s,{align:"right",children:(e.amount??0)/100}),t.jsxs(s,{children:[((e.taxAmount??0)/100).toFixed(2)," (",((e.taxRate??0)*100).toFixed(2),"%)"]}),t.jsx(s,{children:e.jurisdiction})]},e.id))})]})]}),t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax by Jurisdiction"}),t.jsx(F,{sx:{mb:1}}),t.jsx(K,{direction:"row",spacing:1,flexWrap:"wrap",children:(p==null?void 0:p.taxByJurisdiction)&&Object.entries(p.taxByJurisdiction).map(([e,n])=>t.jsx(oe,{label:`${e}: ${(n/100).toLocaleString()}`},e))})]})]}),I===1&&t.jsxs(R,{children:[t.jsxs(K,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[t.jsx(f,{label:"From (YYYY-MM-DD)",placeholder:"2025-01-01",value:z,onChange:e=>ut(e.target.value),size:"small"}),t.jsx(f,{label:"To (YYYY-MM-DD)",placeholder:"2025-12-31",value:J,onChange:e=>pt(e.target.value),size:"small"}),t.jsx(j,{variant:"contained",onClick:Et,children:"Export CSV"}),t.jsx(j,{variant:"outlined",onClick:q,children:"Refresh"})]}),t.jsx(ie,{component:w,children:t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Date"}),t.jsx(s,{children:"Invoice"}),t.jsx(s,{align:"right",children:"Amount"}),t.jsx(s,{children:"Currency"}),t.jsx(s,{children:"Status"}),t.jsx(s,{children:"Tax"}),t.jsx(s,{children:"Jurisdiction"}),t.jsx(s,{children:"User Email"}),t.jsx(s,{children:"Residency"})]})}),t.jsx(M,{children:xt.map(e=>{var n,o,i;return t.jsxs(T,{children:[t.jsx(s,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(s,{children:e.stripeInvoiceId}),t.jsx(s,{align:"right",children:(e.amount??0)/100}),t.jsx(s,{children:e.currency}),t.jsx(s,{children:e.status}),t.jsxs(s,{children:[((e.taxAmount??0)/100).toFixed(2)," (",((e.taxRate??0)*100).toFixed(2),"%)"]}),t.jsx(s,{children:e.taxJurisdiction}),t.jsx(s,{children:(n=e.user)==null?void 0:n.email}),t.jsx(s,{children:(i=(o=e.user)==null?void 0:o.taxInformation)==null?void 0:i.taxResidency})]},e.id)})})]})})]}),I===2&&t.jsx(R,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Tax Summary"}),t.jsx(F,{sx:{mb:1}}),t.jsxs(m,{container:!0,spacing:2,children:[t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"By Jurisdiction"}),t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Jurisdiction"}),t.jsx(s,{align:"right",children:"Tax"}),t.jsx(s,{align:"right",children:"Taxable"}),t.jsx(s,{align:"right",children:"Count"})]})}),t.jsx(M,{children:(d==null?void 0:d.byJurisdiction)&&Object.entries(d.byJurisdiction).map(([e,n])=>t.jsxs(T,{children:[t.jsx(s,{children:e}),t.jsx(s,{align:"right",children:((n.tax_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:((n.taxable_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:n.count})]},e))})]})]}),t.jsxs(m,{item:!0,xs:12,md:6,children:[t.jsx(u,{variant:"overline",children:"By Country"}),t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Country"}),t.jsx(s,{align:"right",children:"Tax"}),t.jsx(s,{align:"right",children:"Taxable"}),t.jsx(s,{align:"right",children:"Count"})]})}),t.jsx(M,{children:(d==null?void 0:d.byCountry)&&Object.entries(d.byCountry).map(([e,n])=>t.jsxs(T,{children:[t.jsx(s,{children:e}),t.jsx(s,{align:"right",children:((n.tax_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:((n.taxable_cents||0)/100).toLocaleString()}),t.jsx(s,{align:"right",children:n.count})]},e))})]})]})]})]})}),I===4&&t.jsx(R,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"KYC Overview"}),t.jsx(F,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Email"}),t.jsx(s,{children:"Status"}),t.jsx(s,{children:"Completed At"}),t.jsx(s,{children:"Name"}),t.jsx(s,{children:"Nationality"}),t.jsx(s,{children:"Residence"}),t.jsx(s,{children:"Company"})]})}),t.jsx(M,{children:yt.map(e=>{var n,o,i,c,x;return t.jsxs(T,{children:[t.jsx(s,{children:e.email}),t.jsx(s,{children:e.kycStatus}),t.jsx(s,{children:e.kycCompletedAt?new Date(e.kycCompletedAt).toLocaleDateString():"-"}),t.jsxs(s,{children:[(n=e.complianceProfile)==null?void 0:n.firstName," ",(o=e.complianceProfile)==null?void 0:o.lastName]}),t.jsx(s,{children:(i=e.complianceProfile)==null?void 0:i.nationality}),t.jsx(s,{children:(c=e.complianceProfile)==null?void 0:c.countryOfResidence}),t.jsx(s,{children:(x=e.businessProfile)==null?void 0:x.companyName})]},e.id)})})]})]})}),I===5&&t.jsx(R,{children:t.jsxs(w,{sx:{p:2},children:[t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Compliance Events"}),t.jsx(F,{sx:{mb:1}}),t.jsxs(O,{size:"small",children:[t.jsx(U,{children:t.jsxs(T,{children:[t.jsx(s,{children:"Type"}),t.jsx(s,{children:"Severity"}),t.jsx(s,{children:"Description"})]})}),t.jsx(M,{children:St.map(e=>t.jsxs(T,{children:[t.jsx(s,{children:e.eventType}),t.jsx(s,{children:e.severity}),t.jsx(s,{children:e.description})]},e.id))})]})]})})]})};export{he as default};
