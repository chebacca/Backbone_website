import{j as e,a as l,b as gs,ao as bs,T as i,h as x,G as d,k as _,l as K,av as vs,bO as fs,aa as Ss,aR as q,c as k,ba as Cs,bb as Q,u as m,v as N,I as A,bP as be,aA as ve,d as p,aC as J,aD as ee,aE as se,aF as g,aG as a,aH as te,aL as He,b2 as As,y as Ds,ar as Is,a4 as u,t as ae,n as fe,aN as ie,aO as ne,aP as re,aS as Me,aT as Be,aU as Ge,aQ as le,O as ws}from"./mui-DiYnqcGn.js";import{u as Ls,r as n}from"./vendor-DIxetjBo.js";import{b as Ps,u as Es,d as v,e as f}from"./index-DQte3TP3.js";import{N as Us}from"./Navigation-DZAYsE1i.js";import{F as ks}from"./Footer-D06cUr6a.js";import{m as C}from"./proxy-B_KpOrcW.js";import"./stripe-CQkQ71Kl.js";const Hs=()=>{var Ee;const{enqueueSnackbar:O}=Ps(),{user:y}=Es();Ls();const[D,Ve]=n.useState(0),[I,ce]=n.useState({totalUsers:0,activeSubscriptions:0,totalRevenue:0,pendingApprovals:0,systemHealth:"healthy"}),[T,oe]=n.useState([]),[H,M]=n.useState([]),[Rs,Se]=n.useState([]),[B,Xe]=n.useState([]),[W,de]=n.useState(1),[xe,Ye]=n.useState(1),[j,G]=n.useState({}),[Ze,he]=n.useState(!1),[S,_e]=n.useState({}),[R,Ce]=n.useState(null),[Ke,V]=n.useState(!1),[qe,ue]=n.useState(!1),[Qe,X]=n.useState(!1),[w,Y]=n.useState({userId:"",subscriptionId:"",tier:"PRO",seats:1}),[Ae,De]=n.useState([]),[L,Ie]=n.useState(""),[P,we]=n.useState(""),[E,Le]=n.useState(""),me=n.useMemo(()=>{if(!L.trim())return T;const s=L.toLowerCase();return T.filter(t=>t.firstName.toLowerCase().includes(s)||t.lastName.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.role.toLowerCase().includes(s)||t.status.toLowerCase().includes(s)||t.subscription&&t.subscription.toLowerCase().includes(s))},[T,L]),je=n.useMemo(()=>{if(!P.trim())return H;const s=P.toLowerCase();return H.filter(t=>t.key.toLowerCase().includes(s)||t.userEmail.toLowerCase().includes(s)||t.tier.toLowerCase().includes(s)||t.status.toLowerCase().includes(s)||new Date(t.expiresAt).toLocaleDateString().includes(s)||new Date(t.activatedAt).toLocaleDateString().includes(s))},[H,P]),pe=n.useMemo(()=>{if(!E.trim())return B;const s=E.toLowerCase();return B.filter(t=>{var c,h;return t.id.toLowerCase().includes(s)||((c=t.user)==null?void 0:c.email)&&t.user.email.toLowerCase().includes(s)||((h=t.subscription)==null?void 0:h.tier)&&t.subscription.tier.toLowerCase().includes(s)||t.status.toLowerCase().includes(s)||new Date(t.createdAt).toLocaleDateString().includes(s)||`$${(t.amount/100).toFixed(2)}`.includes(s)})},[B,E]),Je=()=>Ie(""),es=()=>we(""),ss=()=>Le("");n.useEffect(()=>{let s=!0;return(async()=>{var t,c,h,o,b,U,z,F,Ue,ke,Re;try{if(String((y==null?void 0:y.role)||"").toUpperCase()!=="SUPERADMIN"){oe([]),M([]),ce(r=>({...r,systemHealth:"warning"}));return}const[ge,hs,us,ms,js]=await Promise.all([v.get(f.admin.users()),v.get(f.admin.licenses()),v.get(f.admin.paymentAnalytics()),v.get(f.admin.systemHealth()),v.get(f.admin.dashboardStats())]),Ne=((c=(t=ge.data)==null?void 0:t.data)==null?void 0:c.users)??[],ps=((o=(h=hs.data)==null?void 0:h.data)==null?void 0:o.licenses)??[],Te=((U=(b=us.data)==null?void 0:b.data)==null?void 0:U.summary)??{totalRevenue:0,activeSubscriptions:0},ys=((Ue=(F=(z=js.data)==null?void 0:z.data)==null?void 0:F.stats)==null?void 0:Ue.recentPayments)??[],We=((Re=(ke=ms.data)==null?void 0:ke.data)==null?void 0:Re.status)??"healthy";if(!s)return;oe(Ne.map(r=>{var $,ze,Z,Fe,$e,Oe;return{id:r.id,email:r.email,firstName:(($=r.name)==null?void 0:$.split(" ")[0])??"",lastName:((ze=r.name)==null?void 0:ze.split(" ").slice(1).join(" "))??"",role:r.role,status:((Fe=(Z=r.status)==null?void 0:Z.toLowerCase)==null?void 0:Fe.call(Z))||"active",subscription:((Oe=($e=r.subscriptions)==null?void 0:$e[0])==null?void 0:Oe.tier)??void 0,lastLogin:r.lastLoginAt||new Date().toISOString(),createdAt:r.createdAt||new Date().toISOString()}})),M(ps.map(r=>{var $;return{id:r.id,key:r.key,userId:r.userId,userEmail:(($=r.user)==null?void 0:$.email)??"",tier:r.tier,status:(r.status||"").toLowerCase(),activatedAt:r.activatedAt||r.createdAt,expiresAt:r.expiresAt||r.createdAt,lastUsed:r.updatedAt||r.createdAt}})),ce({totalUsers:Ne.length,activeSubscriptions:Te.activeSubscriptions??0,totalRevenue:Te.totalRevenue??0,pendingApprovals:0,systemHealth:We==="healthy"?"healthy":We==="degraded"?"warning":"error"}),Se(ys)}catch{if(!s)return;oe([]),M([]),ce(ge=>({...ge,systemHealth:"error"})),Se([])}})(),()=>{s=!1}},[y==null?void 0:y.role]);const Pe=async(s=1)=>{var b,U,z,F;const t=new URLSearchParams;t.set("page",String(s)),t.set("limit","20"),j.status&&t.set("status",j.status),j.email&&t.set("email",j.email),j.from&&t.set("from",j.from),j.to&&t.set("to",j.to);const c=await v.get(`${f.admin.payments()}?${t.toString()}`),h=((U=(b=c.data)==null?void 0:b.data)==null?void 0:U.payments)??[],o=((F=(z=c.data)==null?void 0:z.data)==null?void 0:F.pagination)??{pages:1,page:1};Xe(h),de(o.page||s),Ye(o.pages||1)};n.useEffect(()=>{String((y==null?void 0:y.role)||"").toUpperCase()==="SUPERADMIN"&&D===2&&Pe(W).catch(()=>{})},[D,W,j,y==null?void 0:y.role]);const ts=async s=>{var t;try{const h=((t=(await v.get(f.admin.paymentDetails(s))).data)==null?void 0:t.data)||{};_e({payment:h.payment,licenses:h.licenses||[]}),he(!0)}catch{O("Failed to load payment details",{variant:"error"})}},as=s=>{Ce(s),V(!0)},is=()=>{O("User updated successfully",{variant:"success"}),V(!1),Ce(null)},ns=()=>{ue(!0)},rs=async()=>{X(!0)},ls=async s=>{var t,c,h;if(Y(o=>({...o,userId:s,subscriptionId:""})),s){const b=((h=(c=(t=(await v.get(f.admin.userDetails(s))).data)==null?void 0:t.data)==null?void 0:c.user)==null?void 0:h.subscriptions)||[];De(b.filter(U=>U.status==="ACTIVE"))}else De([])},cs=async()=>{var s,t;try{await v.post(f.admin.createLicense(),w),O("License(s) created",{variant:"success"}),X(!1);const h=((t=(s=(await v.get(f.admin.licenses())).data)==null?void 0:s.data)==null?void 0:t.licenses)??[];M(h.map(o=>{var b;return{id:o.id,key:o.key,userId:o.userId,userEmail:((b=o.user)==null?void 0:b.email)??"",tier:o.tier,status:(o.status||"").toLowerCase(),activatedAt:o.activatedAt||o.createdAt,expiresAt:o.expiresAt||o.createdAt,lastUsed:o.updatedAt||o.createdAt}}))}catch(c){O((c==null?void 0:c.message)||"Failed to create license",{variant:"error"})}},ye=s=>{switch(s){case"active":return"success";case"pending":return"warning";case"suspended":return"error";default:return"default"}},os=s=>{switch(s){case"healthy":return"success";case"warning":return"warning";case"error":return"error";default:return"default"}},ds=s=>{switch(s){case"healthy":return e.jsx(fe,{});case"warning":return e.jsx(q,{});case"error":return e.jsx(ws,{});default:return e.jsx(q,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(Us,{}),e.jsx(l,{sx:{pt:8,pb:4},children:e.jsxs(gs,{maxWidth:"xl",children:[e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[e.jsx(bs,{sx:{fontSize:32,color:"primary.main"}}),e.jsx(i,{variant:"h4",sx:{fontWeight:700},children:"Admin Dashboard"}),e.jsx(x,{icon:ds(I.systemHealth),label:`System ${I.systemHealth}`,color:os(I.systemHealth),size:"small"})]}),e.jsxs(d,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(d,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:e.jsx(_,{sx:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsxs(K,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(vs,{sx:{color:"primary.main"}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"Total Users"})]}),e.jsx(i,{variant:"h3",sx:{fontWeight:700,color:"primary.main"},children:I.totalUsers.toLocaleString()})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsx(_,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(K,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(fs,{sx:{color:"secondary.main"}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"Active Subscriptions"})]}),e.jsx(i,{variant:"h3",sx:{fontWeight:700},children:I.activeSubscriptions.toLocaleString()})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsx(_,{sx:{background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(139, 195, 74, 0.1) 100%)",border:"1px solid rgba(76, 175, 80, 0.2)"},children:e.jsxs(K,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(Ss,{sx:{color:"success.main"}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"Total Revenue"})]}),e.jsxs(i,{variant:"h3",sx:{fontWeight:700,color:"success.main"},children:["$",I.totalRevenue.toLocaleString()]})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsx(_,{sx:{background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1) 0%, rgba(255, 193, 7, 0.1) 100%)",border:"1px solid rgba(255, 152, 0, 0.2)"},children:e.jsxs(K,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(q,{sx:{color:"warning.main"}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"Pending Approvals"})]}),e.jsx(i,{variant:"h3",sx:{fontWeight:700,color:"warning.main"},children:I.pendingApprovals})]})})})})]}),e.jsx(k,{sx:{mb:3},children:e.jsxs(Cs,{value:D,onChange:(s,t)=>Ve(t),sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:600}},children:[e.jsx(Q,{label:"Users"}),e.jsx(Q,{label:"Licenses"}),e.jsx(Q,{label:"Invoices"}),e.jsx(Q,{label:"System Health"})]})}),D===0&&e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(m,{placeholder:"Search users by name, email, role, status, or subscription...",value:L,onChange:s=>Ie(s.target.value),size:"small",sx:{minWidth:400},InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(ve,{})}),endAdornment:L&&e.jsx(N,{position:"end",children:e.jsx(A,{size:"small",onClick:Je,children:e.jsx(be,{})})})}}),e.jsx(p,{variant:"contained",onClick:rs,children:"Add License"})]}),L&&e.jsx(l,{sx:{mb:2},children:e.jsx(x,{label:`${me.length} of ${T.length} users found`,color:"primary",variant:"outlined"})}),e.jsx(J,{component:k,children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(a,{children:"User"}),e.jsx(a,{children:"Role"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Subscription"}),e.jsx(a,{children:"Last Login"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(te,{children:me.length>0?me.map(s=>e.jsxs(g,{children:[e.jsx(a,{children:e.jsxs(l,{children:[e.jsxs(i,{variant:"subtitle2",children:[s.firstName," ",s.lastName]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:s.email})]})}),e.jsx(a,{children:e.jsx(x,{label:s.role,size:"small",color:s.role==="ADMIN"?"primary":"default"})}),e.jsx(a,{children:e.jsx(x,{label:s.status,size:"small",color:ye(s.status)})}),e.jsx(a,{children:s.subscription&&e.jsx(x,{label:s.subscription,size:"small",variant:"outlined"})}),e.jsx(a,{children:e.jsx(i,{variant:"body2",children:new Date(s.lastLogin).toLocaleDateString()})}),e.jsxs(a,{children:[e.jsx(A,{size:"small",onClick:()=>as(s),children:e.jsx(He,{})}),e.jsx(A,{size:"small",color:"error",children:e.jsx(As,{})})]})]},s.id)):e.jsx(g,{children:e.jsx(a,{colSpan:6,align:"center",children:e.jsx(l,{sx:{py:4},children:e.jsx(i,{variant:"body1",color:"text.secondary",children:L?"No users found matching your search criteria.":"No users available."})})})})})]})})]}),D===1&&e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(m,{placeholder:"Search licenses by key, user email, tier, status, or dates...",value:P,onChange:s=>we(s.target.value),size:"small",sx:{minWidth:400},InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(ve,{})}),endAdornment:P&&e.jsx(N,{position:"end",children:e.jsx(A,{size:"small",onClick:es,children:e.jsx(be,{})})})}})}),P&&e.jsx(l,{sx:{mb:2},children:e.jsx(x,{label:`${je.length} of ${H.length} licenses found`,color:"primary",variant:"outlined"})}),e.jsx(J,{component:k,children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(a,{children:"License Key"}),e.jsx(a,{children:"User"}),e.jsx(a,{children:"Tier"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Expires"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(te,{children:je.length>0?je.map(s=>e.jsxs(g,{children:[e.jsx(a,{children:e.jsx(i,{variant:"body2",fontFamily:"monospace",children:s.key})}),e.jsx(a,{children:e.jsx(i,{variant:"body2",children:s.userEmail})}),e.jsx(a,{children:e.jsx(x,{label:s.tier,size:"small",variant:"outlined"})}),e.jsx(a,{children:e.jsx(x,{label:s.status,size:"small",color:ye(s.status)})}),e.jsx(a,{children:e.jsx(i,{variant:"body2",children:new Date(s.expiresAt).toLocaleDateString()})}),e.jsxs(a,{children:[e.jsx(A,{size:"small",onClick:()=>ns(),children:e.jsx(He,{})}),e.jsx(A,{size:"small",children:e.jsx(Ds,{})}),e.jsx(A,{size:"small",children:e.jsx(Is,{})})]})]},s.id)):e.jsx(g,{children:e.jsx(a,{colSpan:6,align:"center",children:e.jsx(l,{sx:{py:4},children:e.jsx(i,{variant:"body1",color:"text.secondary",children:P?"No licenses found matching your search criteria.":"No licenses available."})})})})})]})})]}),D===2&&e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2,mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(m,{placeholder:"Search payments by ID, email, tier, status, amount, or date...",value:E,onChange:s=>Le(s.target.value),size:"small",sx:{minWidth:400},InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(ve,{})}),endAdornment:E&&e.jsx(N,{position:"end",children:e.jsx(A,{size:"small",onClick:ss,children:e.jsx(be,{})})})}}),E&&e.jsx(x,{label:`${pe.length} of ${B.length} payments found`,color:"primary",variant:"outlined"})]}),e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(m,{label:"Filter by Email",size:"small",value:j.email||"",onChange:s=>G(t=>({...t,email:s.target.value}))}),e.jsx(m,{label:"From",size:"small",type:"date",InputLabelProps:{shrink:!0},value:j.from||"",onChange:s=>G(t=>({...t,from:s.target.value}))}),e.jsx(m,{label:"To",size:"small",type:"date",InputLabelProps:{shrink:!0},value:j.to||"",onChange:s=>G(t=>({...t,to:s.target.value}))}),e.jsxs(m,{label:"Status",select:!0,size:"small",value:j.status||"",onChange:s=>G(t=>({...t,status:s.target.value||void 0})),sx:{minWidth:160},children:[e.jsx(u,{value:"",children:"All"}),e.jsx(u,{value:"SUCCEEDED",children:"SUCCEEDED"}),e.jsx(u,{value:"PENDING",children:"PENDING"}),e.jsx(u,{value:"FAILED",children:"FAILED"}),e.jsx(u,{value:"REFUNDED",children:"REFUNDED"})]}),e.jsx(p,{variant:"outlined",onClick:()=>Pe(1),children:"Apply Filters"})]})]}),e.jsx(J,{component:k,children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(a,{children:"Payment ID"}),e.jsx(a,{children:"User"}),e.jsx(a,{children:"Tier"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Invoice"}),e.jsx(a,{children:"Details"})]})}),e.jsx(te,{children:pe.length>0?pe.map(s=>{var t,c;return e.jsxs(g,{children:[e.jsx(a,{children:e.jsx(i,{variant:"body2",fontFamily:"monospace",children:s.id})}),e.jsx(a,{children:e.jsx(i,{variant:"body2",children:((t=s.user)==null?void 0:t.email)||"—"})}),e.jsx(a,{children:e.jsx(x,{size:"small",variant:"outlined",label:((c=s.subscription)==null?void 0:c.tier)||"—"})}),e.jsx(a,{children:e.jsxs(i,{variant:"body2",children:["$","{","(p.amount / 100).toFixed(2)","}"]})}),e.jsx(a,{children:e.jsx(x,{size:"small",label:s.status,color:s.status==="SUCCEEDED"?"success":s.status==="FAILED"?"error":"default"})}),e.jsx(a,{children:e.jsx(i,{variant:"body2",children:new Date(s.createdAt).toLocaleDateString()})}),e.jsx(a,{children:s.receiptUrl?e.jsx(p,{size:"small",variant:"outlined",onClick:()=>window.open(s.receiptUrl,"_blank"),children:"View"}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"N/A"})}),e.jsx(a,{children:e.jsx(p,{size:"small",onClick:()=>ts(s.id),children:"Open"})})]},s.id)}):e.jsx(g,{children:e.jsx(a,{colSpan:8,align:"center",children:e.jsx(l,{sx:{py:4},children:e.jsx(i,{variant:"body1",color:"text.secondary",children:E?"No payments found matching your search criteria.":"No payments available."})})})})})]})}),e.jsxs(l,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:2},children:[e.jsx(p,{disabled:W<=1,onClick:()=>de(s=>Math.max(1,s-1)),children:"Prev"}),e.jsx(x,{label:`Page ${W} of ${xe}`}),e.jsx(p,{disabled:W>=xe,onClick:()=>de(s=>Math.min(xe,s+1)),children:"Next"})]})]}),D===3&&e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(k,{sx:{p:3},children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"System Status"}),e.jsx(ae,{severity:"success",sx:{mb:2},children:"All systems operational"}),e.jsx(ae,{severity:"info",sx:{mb:2},children:"Database connection: Healthy"}),e.jsx(ae,{severity:"info",sx:{mb:2},children:"API response time: 45ms"}),e.jsx(ae,{severity:"warning",children:"Storage usage: 78% (Consider cleanup)"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(k,{sx:{p:3},children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"Recent Activity"}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(fe,{color:"success"}),e.jsx(i,{variant:"body2",children:"New user registration: john.doe@company.com"})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(fe,{color:"success"}),e.jsx(i,{variant:"body2",children:"License activated: LIC-XXXX-YYYY-ZZZZ-0001"})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(q,{color:"warning"}),e.jsx(i,{variant:"body2",children:"Payment failed: jane.smith@startup.io"})]})]})]})})]})})]}),e.jsxs(ie,{open:Ke,onClose:()=>V(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ne,{children:"Edit User"}),e.jsx(re,{children:R&&e.jsxs(d,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(m,{fullWidth:!0,label:"First Name",value:R.firstName})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(m,{fullWidth:!0,label:"Last Name",value:R.lastName})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(m,{fullWidth:!0,label:"Email",value:R.email})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(Be,{children:"Role"}),e.jsxs(Ge,{value:R.role,label:"Role",inputProps:{"aria-label":"Select user role",title:"Choose the user role"},children:[e.jsx(u,{value:"USER",children:"User"}),e.jsx(u,{value:"ADMIN",children:"Admin"})]})]})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(Be,{children:"Status"}),e.jsxs(Ge,{value:R.status,label:"Status",inputProps:{"aria-label":"Select user status",title:"Choose the user status"},children:[e.jsx(u,{value:"active",children:"Active"}),e.jsx(u,{value:"suspended",children:"Suspended"}),e.jsx(u,{value:"pending",children:"Pending"})]})]})})]})}),e.jsxs(le,{children:[e.jsx(p,{onClick:()=>V(!1),children:"Cancel"}),e.jsx(p,{onClick:is,variant:"contained",children:"Save Changes"})]})]}),e.jsxs(ie,{open:Ze,onClose:()=>he(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(ne,{children:"Payment Details"}),e.jsx(re,{children:S.payment?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(x,{label:`ID: ${S.payment.id}`}),e.jsx(x,{label:`User: ${((Ee=S.payment.user)==null?void 0:Ee.email)||"—"}`}),e.jsx(x,{label:`Amount: $${(S.payment.amount/100).toFixed(2)}`}),e.jsx(x,{label:`Status: ${S.payment.status}`}),e.jsx(x,{label:`Date: ${new Date(S.payment.createdAt).toLocaleString()}`}),S.payment.receiptUrl&&e.jsx(p,{size:"small",variant:"outlined",onClick:()=>window.open(S.payment.receiptUrl,"_blank"),children:"View Invoice"})]}),e.jsx(i,{variant:"subtitle2",children:"Related Licenses"}),e.jsx(J,{component:k,children:e.jsxs(ee,{size:"small",children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(a,{children:"License Key"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Activated"}),e.jsx(a,{children:"Expires"})]})}),e.jsx(te,{children:(S.licenses||[]).map(s=>e.jsxs(g,{children:[e.jsx(a,{children:e.jsx(i,{variant:"body2",fontFamily:"monospace",children:s.key})}),e.jsx(a,{children:e.jsx(x,{size:"small",label:s.status,color:ye(String(s.status).toLowerCase())})}),e.jsx(a,{children:s.activatedAt?new Date(s.activatedAt).toLocaleDateString():"—"}),e.jsx(a,{children:s.expiresAt?new Date(s.expiresAt).toLocaleDateString():"—"})]},s.id))})]})})]}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No details."})}),e.jsx(le,{children:e.jsx(p,{onClick:()=>he(!1),children:"Close"})})]}),e.jsxs(ie,{open:qe,onClose:()=>ue(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ne,{children:"Edit License"}),e.jsx(re,{children:e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"License management options will be available here."})}),e.jsx(le,{children:e.jsx(p,{onClick:()=>ue(!1),children:"Close"})})]}),e.jsxs(ie,{open:Qe,onClose:()=>X(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ne,{children:"Add License"}),e.jsx(re,{children:e.jsxs(d,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(m,{select:!0,fullWidth:!0,label:"User",value:w.userId,onChange:s=>ls(s.target.value),children:T.map(s=>e.jsx(u,{value:s.id,children:s.email},s.id))})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(m,{select:!0,fullWidth:!0,label:"Subscription",value:w.subscriptionId,onChange:s=>Y(t=>({...t,subscriptionId:s.target.value})),disabled:!Ae.length,children:Ae.map(s=>e.jsxs(u,{value:s.id,children:[s.tier," — seats ",s.seats]},s.id))})}),e.jsx(d,{item:!0,xs:6,children:e.jsxs(m,{select:!0,fullWidth:!0,label:"Tier",value:w.tier,onChange:s=>Y(t=>({...t,tier:s.target.value})),children:[e.jsx(u,{value:"BASIC",children:"BASIC"}),e.jsx(u,{value:"PRO",children:"PRO"}),e.jsx(u,{value:"ENTERPRISE",children:"ENTERPRISE"})]})}),e.jsx(d,{item:!0,xs:6,children:e.jsx(m,{fullWidth:!0,type:"number",label:"Seats",inputProps:{min:1,max:1e3},value:w.seats,onChange:s=>Y(t=>({...t,seats:Math.max(1,Math.min(1e3,parseInt(s.target.value)||1))}))})})]})}),e.jsxs(le,{children:[e.jsx(p,{onClick:()=>X(!1),children:"Cancel"}),e.jsx(p,{variant:"contained",onClick:cs,disabled:!w.userId||!w.subscriptionId,children:"Create"})]})]})]})}),e.jsx(ks,{})]})};export{Hs as default};
//# sourceMappingURL=AdminDashboard-BVCQaf8N.js.map
