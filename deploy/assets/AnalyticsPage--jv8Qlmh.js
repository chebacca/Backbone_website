import{j as e,l as P,m as T,a as o,aE as F,T as c,i as Q,I as Z,bg as he,a3 as pe,F as O,A as V,ax as me,aN as be,bh as ge,d as A,bi as je,ab as J,bj as fe,S as ye,aK as ve,aL as Se,aO as Ce,v as Ae,aP as we,R as ee,aG as De,b4 as ke,b5 as Le,a6 as q,C as ue,G as m,aq as Ie,s as Pe,bk as H,av as ae,bl as G,X as te,Y as re,Z as se,_ as ie,O as ne,bm as Te,bn as le,r as oe}from"./mui-CToveFo4.js";import{r as u,b as ce}from"./vendor-OeuszDaU.js";import{c as D,e as E,u as xe}from"./index-DhTczSYj.js";import{M as $}from"./MetricCard-C5SKa5v1.js";import"./stripe-Bj9OrZIU.js";const K={warning:.85,critical:.95,emergency:.98},de={free:{tier:"free",maxCollaborators:2,allowedStorageBackends:["firestore"],maxStorageQuota:1,storageWarningEnabled:!0,additionalStorageAvailable:!1,features:{cloudStorage:!0,localStorage:!1,encryption:!1,backup:!1,analytics:!1,customSchemas:!1}},pro:{tier:"pro",maxCollaborators:10,allowedStorageBackends:["firestore","gcs","s3"],maxStorageQuota:50,storageWarningEnabled:!0,additionalStorageAvailable:!0,additionalStoragePrice:.1,features:{cloudStorage:!0,localStorage:!0,encryption:!0,backup:!0,analytics:!0,customSchemas:!0}},enterprise:{tier:"enterprise",maxCollaborators:-1,allowedStorageBackends:["firestore","gcs","s3","aws","azure","local"],maxStorageQuota:-1,storageWarningEnabled:!1,additionalStorageAvailable:!0,additionalStoragePrice:.08,features:{cloudStorage:!0,localStorage:!0,encryption:!0,backup:!0,analytics:!0,customSchemas:!0}},"on-premises":{tier:"on-premises",maxCollaborators:-1,allowedStorageBackends:["local","private-cloud"],maxStorageQuota:-1,storageWarningEnabled:!1,additionalStorageAvailable:!1,features:{cloudStorage:!1,localStorage:!0,encryption:!0,backup:!0,analytics:!0,customSchemas:!0}}};class z{static async getStorageUsage(r){var i,n,s,l;try{const[f,d]=await Promise.all([D.get(E.subscriptions.mySubscriptions()),D.get("/api/storage/usage")]),k=((n=(i=f.data)==null?void 0:i.data)==null?void 0:n.subscriptions)||[],y=k.find(x=>x.status==="ACTIVE")||k[0],v=((s=y==null?void 0:y.tier)==null?void 0:s.toLowerCase())||"free",w=de[v],b=(((l=d.data)==null?void 0:l.data)||{used:0,breakdown:{}}).used/(1024*1024*1024),p=w.maxStorageQuota;let S=0,t="none";return p>0&&(S=b/p*100,S>=K.emergency*100?t="emergency":S>=K.critical*100?t="critical":S>=K.warning*100&&(t="warning")),{used:Math.round(b*100)/100,limit:p,percentage:Math.round(S*100)/100,tier:v,warningLevel:t,canPurchaseAdditional:w.additionalStorageAvailable||!1,additionalStoragePrice:w.additionalStoragePrice}}catch(f){return console.error("Failed to fetch storage usage:",f),{used:0,limit:1,percentage:0,tier:"free",warningLevel:"none",canPurchaseAdditional:!1}}}static async getStorageBreakdown(){var r;try{const n=((r=(await D.get("/api/storage/breakdown")).data)==null?void 0:r.data)||{};return{firestore:n.firestore||0,gcs:n.gcs||0,s3:n.s3||0,azure:n.azure||0,local:n.local||0,total:n.total||0}}catch(i){return console.error("Failed to fetch storage breakdown:",i),{firestore:0,gcs:0,s3:0,azure:0,local:0,total:0}}}static generateStorageAlerts(r){const i=[];if(r.warningLevel==="none"||r.limit===-1)return i;const n={id:`storage-${r.warningLevel}-${Date.now()}`,timestamp:new Date,canUpgrade:r.tier!=="enterprise",canPurchaseStorage:r.canPurchaseAdditional};switch(r.warningLevel){case"warning":i.push({...n,type:"warning",title:"Storage Usage Warning",message:`You're using ${r.percentage}% of your ${r.limit}GB storage limit. Consider upgrading your plan or purchasing additional storage.`,actionRequired:!1});break;case"critical":i.push({...n,type:"critical",title:"Critical Storage Usage",message:`You're using ${r.percentage}% of your ${r.limit}GB storage limit. Your account may be restricted soon. Please upgrade or purchase additional storage immediately.`,actionRequired:!0});break;case"emergency":i.push({...n,type:"emergency",title:"Storage Limit Almost Reached",message:`URGENT: You're using ${r.percentage}% of your ${r.limit}GB storage limit. New uploads will be blocked soon. Upgrade your plan or purchase additional storage now.`,actionRequired:!0});break}return i}static getUpgradeRecommendations(r){const i=[];return r.tier==="free"?i.push({tier:"pro",storageLimit:50,price:"$29/month",recommended:r.used>.8},{tier:"enterprise",storageLimit:-1,price:"Contact Sales",recommended:r.used>40}):r.tier==="pro"&&i.push({tier:"enterprise",storageLimit:-1,price:"Contact Sales",recommended:r.percentage>80}),i}static calculateAdditionalStorageCost(r,i){const n=de[i];return!n.additionalStorageAvailable||!n.additionalStoragePrice?0:r*n.additionalStoragePrice}static async purchaseAdditionalStorage(r){var i,n,s;try{return{success:!0,paymentUrl:(i=(await D.post("/api/storage/purchase",{additionalGB:r})).data)==null?void 0:i.paymentUrl}}catch(l){return{success:!1,error:((s=(n=l.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to initiate storage purchase"}}}}const Ue=({onUpgrade:h,onPurchaseStorage:r,compact:i=!1})=>{const{user:n}=xe(),[s,l]=u.useState(null),[f,d]=u.useState([]),[k,y]=u.useState(!0),[v,w]=u.useState(!1),[B,b]=u.useState(!1),[p,S]=u.useState(10),[t,x]=u.useState(new Set);u.useEffect(()=>{U();const a=setInterval(U,5*60*1e3);return()=>clearInterval(a)},[n]);const U=async()=>{try{y(!0);const a=await z.getStorageUsage();l(a);const C=z.generateStorageAlerts(a);d(C)}catch(a){console.error("Failed to fetch storage data:",a)}finally{y(!1)}},W=a=>{x(C=>new Set([...C,a]))},M=async()=>{if(r)r(p);else try{const a=await z.purchaseAdditionalStorage(p);a.success&&a.paymentUrl&&window.open(a.paymentUrl,"_blank")}catch(a){console.error("Failed to purchase storage:",a)}b(!1)},L=a=>{switch(a){case"emergency":return"error";case"critical":return"error";case"warning":return"warning";default:return"primary"}},_=a=>{switch(a){case"emergency":return"error";case"critical":return"error";case"warning":return"warning";default:return"info"}};if(k||!s)return e.jsx(P,{children:e.jsx(T,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(F,{}),e.jsx(c,{variant:"h6",children:"Loading storage usage..."})]})})});if(s.limit===-1&&f.length===0)return null;const I=f.filter(a=>!t.has(a.id)),j=s.additionalStoragePrice?z.calculateAdditionalStorageCost(p,s.tier):0;return e.jsxs(e.Fragment,{children:[e.jsx(P,{sx:{mb:2},children:e.jsxs(T,{children:[e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(F,{color:s.warningLevel!=="none"?"warning":"primary"}),e.jsx(c,{variant:"h6",children:"Cloud Storage Usage"}),s.warningLevel!=="none"&&e.jsx(Q,{label:s.warningLevel.toUpperCase(),color:L(s.warningLevel),size:"small"})]}),e.jsx(Z,{onClick:()=>w(!v),size:"small",children:v?e.jsx(he,{}):e.jsx(pe,{})})]}),e.jsxs(o,{mb:2,children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",mb:1,children:[e.jsxs(c,{variant:"body2",color:"textSecondary",children:[s.used,"GB used"]}),e.jsx(c,{variant:"body2",color:"textSecondary",children:s.limit===-1?"Unlimited":`${s.limit}GB limit`})]}),s.limit>0&&e.jsx(O,{variant:"determinate",value:Math.min(s.percentage,100),color:L(s.warningLevel),sx:{height:8,borderRadius:4}}),s.limit>0&&e.jsxs(c,{variant:"caption",color:"textSecondary",sx:{mt:.5,display:"block"},children:[s.percentage,"% used"]})]}),I.map(a=>e.jsxs(V,{severity:_(a.type),sx:{mb:1},action:e.jsx(Z,{size:"small",onClick:()=>W(a.id),children:e.jsx(be,{fontSize:"small"})}),children:[e.jsx(me,{children:a.title}),a.message]},a.id)),(s.warningLevel!=="none"||!i)&&e.jsx(o,{mt:2,children:e.jsxs(ge,{variant:"outlined",size:"small",fullWidth:!0,children:[s.tier!=="enterprise"&&e.jsx(A,{startIcon:e.jsx(je,{}),onClick:h,color:"primary",children:"Upgrade Plan"}),s.canPurchaseAdditional&&e.jsx(A,{startIcon:e.jsx(J,{}),onClick:()=>b(!0),color:"secondary",children:"Buy Storage"})]})}),e.jsx(fe,{in:v,children:e.jsxs(o,{mt:2,pt:2,borderTop:1,borderColor:"divider",children:[e.jsxs(c,{variant:"subtitle2",gutterBottom:!0,children:["Current Plan: ",s.tier.toUpperCase()]}),s.additionalStoragePrice&&e.jsxs(c,{variant:"body2",color:"textSecondary",children:["Additional storage: $",s.additionalStoragePrice,"/GB/month"]}),e.jsxs(ye,{direction:"row",spacing:1,mt:1,children:[e.jsx(Q,{label:`${s.tier} tier`,size:"small"}),s.canPurchaseAdditional&&e.jsx(Q,{label:"Storage expansion available",size:"small",color:"primary"})]})]})})]})}),e.jsxs(ve,{open:B,onClose:()=>b(!1),children:[e.jsx(Se,{children:"Purchase Additional Storage"}),e.jsxs(Ce,{children:[e.jsxs(c,{variant:"body2",color:"textSecondary",sx:{mb:2},children:["Add more cloud storage to your ",s.tier," plan."]}),e.jsx(Ae,{label:"Additional Storage (GB)",type:"number",value:p,onChange:a=>S(Math.max(1,parseInt(a.target.value)||1)),fullWidth:!0,sx:{mb:2},inputProps:{min:1,max:1e3}}),j>0&&e.jsx(V,{severity:"info",children:e.jsxs(c,{variant:"body2",children:["Cost: $",j.toFixed(2),"/month for ",p,"GB"]})})]}),e.jsxs(we,{children:[e.jsx(A,{onClick:()=>b(!1),children:"Cancel"}),e.jsxs(A,{onClick:M,variant:"contained",startIcon:e.jsx(J,{}),children:["Purchase $",j.toFixed(2),"/month"]})]})]})]})},X=[{label:"Mon",value:0},{label:"Tue",value:0},{label:"Wed",value:0},{label:"Thu",value:0},{label:"Fri",value:0},{label:"Sat",value:0},{label:"Sun",value:0}],N={totalApiCalls:0,responseTime:0,activeDevices:0,dataTransfer:0,dailyUsage:X,topEndpoints:[],geographicData:[],usageMetrics:[]},Re=({data:h,loading:r=!1})=>r?e.jsx(o,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{})}):(Math.max(...h.map(i=>i.value)),e.jsx(o,{sx:{height:200,display:"flex",alignItems:"end",gap:1,px:2},children:h.map(i=>e.jsx(o,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(c,{variant:"caption",color:"text.secondary",children:i.label})},i.label))})),$e=()=>{const{user:h}=xe(),[r,i]=u.useState("7d"),[n,s]=u.useState("api_calls"),[l,f]=u.useState(N),[d,k]=u.useState(!1),[y,v]=u.useState(null),w=async()=>{var t,x,U,W,M;try{k(!0),v(null);const L=String((h==null?void 0:h.role)||"").toUpperCase(),_=L==="ADMIN"||L==="SUPERADMIN";let I;if(_)try{const[j,a,C]=await Promise.allSettled([D.get(`${E.admin.licenseAnalytics()}?period=${r}`),D.get(E.admin.systemHealth()),D.get(E.admin.dashboardStats())]),g=j.status==="fulfilled"?((x=(t=j.value.data)==null?void 0:t.data)==null?void 0:x.analytics)||{}:{},R=a.status==="fulfilled"?((U=a.value.data)==null?void 0:U.data)||{}:{},Ee=C.status==="fulfilled"?((W=C.value.data)==null?void 0:W.data)||{}:{};I={totalApiCalls:g.totalApiCalls||g.activeLicenses||0,responseTime:R.averageResponseTime||98.7,activeDevices:g.activeDevices||g.newLicenses||0,dataTransfer:(g.totalDataTransfer||g.totalLicenses||0)/1e3,dailyUsage:(g.dailyCounts||[]).map(Y=>({label:Y.date,value:Y.count,change:Y.change||0}))||X,topEndpoints:g.topEndpoints||[],geographicData:g.geographicDistribution||[],usageMetrics:[{name:"API Calls",value:g.totalApiCalls||g.activeLicenses||0,limit:1e5,unit:"calls",icon:e.jsx(le,{}),color:"#00d4ff"},{name:"Data Transfer",value:(g.totalDataTransfer||g.totalLicenses||0)/1e3,limit:100,unit:"GB",icon:e.jsx(F,{}),color:"#667eea"},{name:"Active Devices",value:g.activeDevices||g.newLicenses||0,limit:50,unit:"devices",icon:e.jsx(H,{}),color:"#f093fb"},{name:"Uptime",value:R.uptimePercentage||99.8,limit:100,unit:"%",icon:e.jsx(oe,{}),color:"#4facfe"}]}}catch(j){console.warn("Admin analytics failed, falling back to basic data:",j),I=N}else try{const a=((M=(await D.get(E.licenses.analytics())).data)==null?void 0:M.data)||{};I={totalApiCalls:a.totalEvents||a.totalApiCalls||0,responseTime:a.averageResponseTime||98.7,activeDevices:a.activeDevices||Object.keys(a.eventTypes||{}).length,dataTransfer:(a.totalDataTransfer||a.totalEvents||0)/1e3,dailyUsage:Object.entries(a.dailyUsage||a.eventTypes||{}).map(([C,g])=>{var R;return{label:C,value:g,change:((R=a.dailyChanges)==null?void 0:R[C])||0}})||X,topEndpoints:a.topEndpoints||[],geographicData:a.geographicData||[],usageMetrics:[{name:"API Calls",value:a.totalEvents||a.totalApiCalls||0,limit:1e5,unit:"calls",icon:e.jsx(le,{}),color:"#00d4ff"},{name:"Data Transfer",value:(a.totalDataTransfer||a.totalEvents||0)/1e3,limit:100,unit:"GB",icon:e.jsx(F,{}),color:"#667eea"},{name:"Active Devices",value:a.activeDevices||Object.keys(a.eventTypes||{}).length,limit:50,unit:"devices",icon:e.jsx(H,{}),color:"#f093fb"},{name:"Uptime",value:a.uptimePercentage||99.8,limit:100,unit:"%",icon:e.jsx(oe,{}),color:"#4facfe"}]}}catch(j){console.warn("User analytics failed, using default data:",j),I=N}f(I)}catch(L){console.error("Failed to fetch analytics data:",L),v("Failed to load analytics data. Please try again."),f(N)}finally{k(!1)}};u.useEffect(()=>{w()},[h==null?void 0:h.role,r]);const B=t=>{i(t.target.value)},b=t=>{s(t)},p=()=>{w()},S=u.useMemo(()=>l.dailyUsage.length?l.dailyUsage.reduce((t,x)=>t+(x.change||0),0)/l.dailyUsage.length:0,[l.dailyUsage]);return y?e.jsxs(o,{sx:{p:3},children:[e.jsx(V,{severity:"error",sx:{mb:3},children:y}),e.jsx(A,{variant:"contained",onClick:p,startIcon:e.jsx(ee,{}),children:"Retry"})]}):e.jsxs(o,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(o,{children:[e.jsx(c,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Usage Analytics"}),e.jsx(c,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Monitor your BackboneLogic, Inc. usage patterns and performance"})]}),e.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs(De,{size:"small",sx:{minWidth:120},children:[e.jsx(ke,{children:"Time Range"}),e.jsxs(Le,{value:r,label:"Time Range",onChange:B,disabled:d,inputProps:{"aria-label":"Select time range for analytics",title:"Choose the time period for analytics data"},children:[e.jsx(q,{value:"7d",children:"Last 7 days"}),e.jsx(q,{value:"30d",children:"Last 30 days"}),e.jsx(q,{value:"90d",children:"Last 90 days"})]})]}),e.jsxs(ge,{variant:"outlined",size:"small",children:[e.jsx(A,{variant:n==="api_calls"?"contained":"outlined",onClick:()=>b("api_calls"),disabled:d,children:"API Calls"}),e.jsx(A,{variant:n==="data_transfer"?"contained":"outlined",onClick:()=>b("data_transfer"),disabled:d,children:"Data Transfer"}),e.jsx(A,{variant:n==="devices"?"contained":"outlined",onClick:()=>b("devices"),disabled:d,children:"Devices"})]}),e.jsx(A,{variant:"outlined",onClick:p,disabled:d,startIcon:d?e.jsx(ue,{size:16}):e.jsx(ee,{}),children:d?"Loading...":"Refresh"})]})]}),e.jsx(Ue,{onUpgrade:()=>window.open("/pricing","_blank"),compact:!1}),e.jsxs(m,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(m,{item:!0,xs:12,sm:6,lg:3,children:e.jsx($,{title:"Total API Calls",value:d?"Loading...":l.totalApiCalls.toLocaleString(),icon:e.jsx(Ie,{}),trend:{value:S,direction:"up"},color:"primary"})}),e.jsx(m,{item:!0,xs:12,sm:6,lg:3,children:e.jsx($,{title:"Response Time",value:d?"Loading...":`${l.responseTime}%`,icon:e.jsx(Pe,{}),trend:{value:2.3,direction:"up"},color:"secondary"})}),e.jsx(m,{item:!0,xs:12,sm:6,lg:3,children:e.jsx($,{title:"Active Devices",value:d?"Loading...":l.activeDevices.toString(),icon:e.jsx(H,{}),trend:{value:12,direction:"up"},color:"warning"})}),e.jsx(m,{item:!0,xs:12,sm:6,lg:3,children:e.jsx($,{title:"Data Transfer",value:d?"Loading...":`${l.dataTransfer.toFixed(1)} GB`,icon:e.jsx(F,{}),trend:{value:.2,direction:"down"},color:"error"})})]}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,lg:8,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:e.jsxs(T,{children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Usage Trends"}),e.jsx(Re,{data:l.dailyUsage,loading:d})]})})}),e.jsx(m,{item:!0,xs:12,lg:4,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3,height:"fit-content"},children:e.jsxs(T,{children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Real-time Status"}),e.jsx(m,{container:!0,spacing:2,children:l.usageMetrics.map(t=>e.jsx(m,{item:!0,xs:12,children:e.jsx(o,{children:e.jsx(P,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},transition:"all 0.3s ease"},children:e.jsxs(T,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(ae,{sx:{bgcolor:t.color,width:40,height:40},children:t.icon}),e.jsx(c,{variant:"h6",sx:{fontWeight:700},children:d?e.jsx(G,{width:80,height:32}):e.jsxs(e.Fragment,{children:[t.value.toLocaleString(),e.jsx(c,{component:"span",variant:"body2",color:"text.secondary",sx:{ml:.5},children:t.unit})]})})]}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:1},children:t.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{variant:"determinate",value:d?0:t.value/t.limit*100,sx:{flex:1,height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:3,backgroundColor:t.color}}}),e.jsx(c,{variant:"caption",color:"text.secondary",sx:{minWidth:40},children:d?e.jsx(G,{width:30,height:16}):`${(t.value/t.limit*100).toFixed(1)}%`})]})]})})})},t.name))})]})})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(T,{children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Top API Endpoints"}),d?e.jsx(o,{children:[1,2,3,4,5].map(t=>e.jsx(o,{sx:{mb:2},children:e.jsx(G,{variant:"rectangular",height:40})},t))}):l.topEndpoints.length>0?e.jsx(te,{dense:!0,children:l.topEndpoints.map((t,x)=>e.jsxs(ce.Fragment,{children:[e.jsxs(re,{sx:{px:0},children:[e.jsx(se,{sx:{minWidth:40},children:e.jsx(ae,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem",fontWeight:600},children:x+1})}),e.jsx(ie,{primary:t.name,secondary:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(O,{variant:"determinate",value:t.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(c,{variant:"caption",sx:{minWidth:60},children:[t.calls.toLocaleString()," calls"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500,sx:{fontFamily:"monospace"}}})]}),x<l.topEndpoints.length-1&&e.jsx(ne,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},t.name))}):e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No endpoint data available"})]})})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(T,{children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Geographic Distribution"}),d?e.jsx(o,{children:[1,2,3,4,5].map(t=>e.jsx(o,{sx:{mb:2},children:e.jsx(G,{variant:"rectangular",height:40})},t))}):l.geographicData.length>0?e.jsx(te,{dense:!0,children:l.geographicData.map((t,x)=>e.jsxs(ce.Fragment,{children:[e.jsxs(re,{sx:{px:0},children:[e.jsx(se,{sx:{minWidth:40},children:e.jsx(Te,{sx:{color:"primary.main"}})}),e.jsx(ie,{primary:t.region,secondary:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(O,{variant:"determinate",value:t.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #f093fb 0%, #f5576c 100%)"}}}),e.jsxs(c,{variant:"caption",sx:{minWidth:60},children:[t.users," users"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),x<l.geographicData.length-1&&e.jsx(ne,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},t.region))}):e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No geographic data available"})]})})})]})]})};export{$e as default};
