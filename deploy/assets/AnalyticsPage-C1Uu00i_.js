import{j as e,a as n,T as r,aE as V,b2 as ee,b3 as ae,a6 as m,be as se,d as k,G as i,l as x,m as g,aq as re,i as b,aQ as I,s as ne,bf as O,aC as $,bg as ie,c as u,X as M,Y as R,Z as F,av as N,_ as w,F as D,O as G,bh as te,bi as le,r as ce}from"./mui-_PSgCBCU.js";import{r as o,b as B}from"./vendor-OeuszDaU.js";import{u as oe,c as U,e as E}from"./index-Bi993N68.js";import"./stripe-DfVvuFM7.js";const j=[{label:"Mon",value:0},{label:"Tue",value:0},{label:"Wed",value:0},{label:"Thu",value:0},{label:"Fri",value:0},{label:"Sat",value:0},{label:"Sun",value:0}],v=s=>[{name:"API Calls",value:s.apiCalls,limit:1e5,unit:"calls",icon:e.jsx(le,{}),color:"#00d4ff"},{name:"Data Transfer",value:s.dataTransferGB,limit:100,unit:"GB",icon:e.jsx($,{}),color:"#667eea"},{name:"Active Devices",value:s.activeDevices,limit:50,unit:"devices",icon:e.jsx(O,{}),color:"#f093fb"},{name:"Uptime",value:s.uptimePct,limit:100,unit:"%",icon:e.jsx(ce,{}),color:"#4facfe"}],z=[{name:"/api/v1/licenses/validate",calls:23567,percentage:45.2},{name:"/api/v1/users/profile",calls:12890,percentage:24.7},{name:"/api/v1/analytics/usage",calls:8234,percentage:15.8},{name:"/api/v1/downloads/sdk",calls:4567,percentage:8.8},{name:"/api/v1/auth/refresh",calls:2890,percentage:5.5}],_=[{region:"United States",users:145,percentage:42.3},{region:"United Kingdom",users:89,percentage:26},{region:"Germany",users:67,percentage:19.5},{region:"Canada",users:23,percentage:6.7},{region:"Australia",users:19,percentage:5.5}],de=({data:s})=>(Math.max(...s.map(t=>t.value)),e.jsx(n,{sx:{height:200,display:"flex",alignItems:"end",gap:1,px:2},children:s.map(t=>e.jsx(n,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(r,{variant:"caption",color:"text.secondary",children:t.label})},t.label))})),xe=({metric:s})=>{const t=s.value/s.limit*100;return e.jsx(x,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},transition:"all 0.3s ease"},children:e.jsxs(g,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(N,{sx:{bgcolor:s.color,width:40,height:40},children:s.icon}),e.jsxs(r,{variant:"h6",sx:{fontWeight:700},children:[s.value.toLocaleString(),e.jsx(r,{component:"span",variant:"body2",color:"text.secondary",sx:{ml:.5},children:s.unit})]})]}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:s.name}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(D,{variant:"determinate",value:t,sx:{flex:1,height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:3,backgroundColor:s.color}}}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{minWidth:40},children:[t.toFixed(1),"%"]})]})]})})},je=()=>{const{user:s}=oe(),[t,Y]=o.useState("7d"),[f,q]=o.useState("api_calls"),[d,y]=o.useState(j),[K,C]=o.useState(v({apiCalls:0,dataTransferGB:0,activeDevices:0,uptimePct:99.8})),[ge,S]=o.useState(!1);o.useEffect(()=>{let a=!0;return(async()=>{var L,A,W,P;try{S(!0);const h=String((s==null?void 0:s.role)||"").toUpperCase();if(h==="ADMIN"||h==="SUPERADMIN"){const c=((A=(L=(await U.get(`${E.admin.licenseAnalytics()}?period=${t}`)).data)==null?void 0:L.data)==null?void 0:A.analytics)||{};y((c.dailyCounts||[]).map(p=>({label:p.date,value:p.count}))||j),C(v({apiCalls:c.activeLicenses??0,dataTransferGB:(c.totalLicenses||0)/10,activeDevices:c.newLicenses||0,uptimePct:99.8}))}else{const c=((P=(W=(await U.get(E.licenses.analytics())).data)==null?void 0:W.data)==null?void 0:P.summary)||{};y(Object.entries(c.eventTypes||{}).map(([p,J])=>({label:p,value:J}))||j),C(v({apiCalls:c.totalEvents||0,dataTransferGB:(c.totalEvents||0)/100,activeDevices:Object.keys(c.eventTypes||{}).length,uptimePct:99.8}))}}catch(h){console.error("Failed to fetch analytics data:",h),a&&(y(j),C(v({apiCalls:0,dataTransferGB:0,activeDevices:0,uptimePct:99.8})))}finally{a&&S(!1)}})(),()=>{a=!1}},[s==null?void 0:s.role,t]);const Q=o.useMemo(()=>d.reduce((a,l)=>a+l.value,0),[d]),X=o.useMemo(()=>d.length?d.reduce((a,l)=>a+(l.change||0),0)/d.length:0,[d]),Z=a=>{Y(a.target.value)},T=a=>{q(a)};return e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(n,{children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Usage Analytics"}),e.jsx(r,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Monitor your BackboneLogic, Inc. usage patterns and performance"})]}),e.jsxs(n,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs(V,{size:"small",sx:{minWidth:120},children:[e.jsx(ee,{children:"Time Range"}),e.jsxs(ae,{value:t,label:"Time Range",onChange:Z,inputProps:{"aria-label":"Select time range for analytics",title:"Choose the time period for analytics data"},children:[e.jsx(m,{value:"1d",children:"Last 24h"}),e.jsx(m,{value:"7d",children:"Last 7 days"}),e.jsx(m,{value:"30d",children:"Last 30 days"}),e.jsx(m,{value:"90d",children:"Last 90 days"})]})]}),e.jsxs(se,{variant:"outlined",size:"small",children:[e.jsx(k,{variant:f==="api_calls"?"contained":"outlined",onClick:()=>T("api_calls"),children:"API Calls"}),e.jsx(k,{variant:f==="data_transfer"?"contained":"outlined",onClick:()=>T("data_transfer"),children:"Data Transfer"}),e.jsx(k,{variant:f==="devices"?"contained":"outlined",onClick:()=>T("devices"),children:"Devices"})]})]})]}),e.jsxs(i,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(x,{sx:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsxs(g,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(re,{sx:{color:"primary.main"}}),e.jsx(b,{icon:e.jsx(I,{}),label:`+${X.toFixed(1)}%`,color:"success",size:"small"})]}),e.jsx(r,{variant:"h4",sx:{fontWeight:700,color:"primary.main"},children:Q.toLocaleString()}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Total API Calls"})]})})}),e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(x,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(g,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(ne,{sx:{color:"secondary.main"}}),e.jsx(b,{icon:e.jsx(I,{}),label:"+2.3%",color:"success",size:"small"})]}),e.jsx(r,{variant:"h4",sx:{fontWeight:700},children:"98.7%"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Average Response Time"})]})})}),e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(x,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(g,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(O,{sx:{color:"warning.main"}}),e.jsx(b,{icon:e.jsx(I,{}),label:"+12",color:"success",size:"small"})]}),e.jsx(r,{variant:"h4",sx:{fontWeight:700},children:"342"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Active Devices"})]})})}),e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(x,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(g,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx($,{sx:{color:"info.main"}}),e.jsx(b,{icon:e.jsx(ie,{}),label:"-0.2%",color:"error",size:"small"})]}),e.jsx(r,{variant:"h4",sx:{fontWeight:700},children:"2.4 TB"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Data Transfer"})]})})})]}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,lg:8,children:e.jsxs(u,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Usage Trends"}),e.jsx(de,{data:d})]})}),e.jsx(i,{item:!0,xs:12,lg:4,children:e.jsxs(u,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3,height:"fit-content"},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Real-time Status"}),e.jsx(i,{container:!0,spacing:2,children:K.map(a=>e.jsx(i,{item:!0,xs:12,children:e.jsx(xe,{metric:a})},a.name))})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(u,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Top API Endpoints"}),e.jsx(M,{dense:!0,children:z.map((a,l)=>e.jsxs(B.Fragment,{children:[e.jsxs(R,{sx:{px:0},children:[e.jsx(F,{sx:{minWidth:40},children:e.jsx(N,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem",fontWeight:600},children:l+1})}),e.jsx(w,{primary:a.name,secondary:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(D,{variant:"determinate",value:a.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(r,{variant:"caption",sx:{minWidth:60},children:[a.calls.toLocaleString()," calls"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500,sx:{fontFamily:"monospace"}}})]}),l<z.length-1&&e.jsx(G,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},a.name))})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(u,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Geographic Distribution"}),e.jsx(M,{dense:!0,children:_.map((a,l)=>e.jsxs(B.Fragment,{children:[e.jsxs(R,{sx:{px:0},children:[e.jsx(F,{sx:{minWidth:40},children:e.jsx(te,{sx:{color:"primary.main"}})}),e.jsx(w,{primary:a.region,secondary:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(D,{variant:"determinate",value:a.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #f093fb 0%, #f5576c 100%)"}}}),e.jsxs(r,{variant:"caption",sx:{minWidth:60},children:[a.users," users"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),l<_.length-1&&e.jsx(G,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},a.region))})]})})]})]})};export{je as default};
