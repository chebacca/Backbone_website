import{j as e,a as r,T as s,aZ as Z,a_ as J,a$ as Q,a4 as b,b0 as ee,d as S,G as n,k as p,l as h,ao as ae,h as j,aw as D,q as ie,b1 as O,aH as N,b2 as se,c as y,U as R,W as w,X as F,at as Y,Y as B,D as L,M as G,b3 as re,b4 as ne,p as te}from"./mui-T5zcPaKR.js";import{r as x,b as U}from"./vendor-OeuszDaU.js";import{u as le,c as E,e as z}from"./index-Dgi_lM-i.js";import{m as l}from"./proxy-Bigtmpzy.js";import"./stripe-Bd-xCkZF.js";const v=[{label:"Mon",value:0},{label:"Tue",value:0},{label:"Wed",value:0},{label:"Thu",value:0},{label:"Fri",value:0},{label:"Sat",value:0},{label:"Sun",value:0}],f=a=>[{name:"API Calls",value:a.apiCalls,limit:1e5,unit:"calls",icon:e.jsx(ne,{}),color:"#00d4ff"},{name:"Data Transfer",value:a.dataTransferGB,limit:100,unit:"GB",icon:e.jsx(N,{}),color:"#667eea"},{name:"Active Devices",value:a.activeDevices,limit:50,unit:"devices",icon:e.jsx(O,{}),color:"#f093fb"},{name:"Uptime",value:a.uptimePct,limit:100,unit:"%",icon:e.jsx(te,{}),color:"#4facfe"}],_=[{name:"/api/v1/licenses/validate",calls:23567,percentage:45.2},{name:"/api/v1/users/profile",calls:12890,percentage:24.7},{name:"/api/v1/analytics/usage",calls:8234,percentage:15.8},{name:"/api/v1/downloads/sdk",calls:4567,percentage:8.8},{name:"/api/v1/auth/refresh",calls:2890,percentage:5.5}],$=[{region:"United States",users:145,percentage:42.3},{region:"United Kingdom",users:89,percentage:26},{region:"Germany",users:67,percentage:19.5},{region:"Canada",users:23,percentage:6.7},{region:"Australia",users:19,percentage:5.5}],oe=({data:a})=>{const c=Math.max(...a.map(d=>d.value));return e.jsx(r,{sx:{height:200,display:"flex",alignItems:"end",gap:1,px:2},children:a.map(d=>e.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(l.div,{initial:{height:0},animate:{height:`${d.value/c*160}px`},transition:{duration:.8,delay:a.indexOf(d)*.1},style:{width:"100%",background:"linear-gradient(180deg, #00d4ff 0%, #667eea 100%)",borderRadius:"4px 4px 0 0",marginBottom:"8px"}}),e.jsx(s,{variant:"caption",color:"text.secondary",children:d.label})]},d.label))})},ce=({metric:a})=>{const c=a.value/a.limit*100;return e.jsx(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},children:e.jsx(p,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},transition:"all 0.3s ease"},children:e.jsxs(h,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(Y,{sx:{bgcolor:a.color,width:40,height:40},children:a.icon}),e.jsxs(s,{variant:"h6",sx:{fontWeight:700},children:[a.value.toLocaleString(),e.jsx(s,{component:"span",variant:"body2",color:"text.secondary",sx:{ml:.5},children:a.unit})]})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:a.name}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{variant:"determinate",value:c,sx:{flex:1,height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:3,backgroundColor:a.color}}}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{minWidth:40},children:[c.toFixed(1),"%"]})]})]})})})},be=()=>{const{user:a}=le(),[c,d]=x.useState("7d"),[C,k]=x.useState("api_calls"),[g,T]=x.useState(v),[q,I]=x.useState(f({apiCalls:0,dataTransferGB:0,activeDevices:0,uptimePct:99.8})),[de,W]=x.useState(!1);x.useEffect(()=>{let i=!0;return(async()=>{var t,A,P,M;try{W(!0);const m=String((a==null?void 0:a.role)||"").toUpperCase();if(m==="ADMIN"||m==="SUPERADMIN"){const o=((A=(t=(await E.get(`${z.admin.licenseAnalytics()}?period=${c}`)).data)==null?void 0:t.data)==null?void 0:A.analytics)||{};T((o.dailyCounts||[]).map(u=>({label:u.date,value:u.count}))||v),I(f({apiCalls:o.activeLicenses??0,dataTransferGB:(o.totalLicenses||0)/10,activeDevices:o.newLicenses||0,uptimePct:99.8}))}else{const o=((M=(P=(await E.get(z.licenses.analytics())).data)==null?void 0:P.data)==null?void 0:M.summary)||{};T(Object.entries(o.eventTypes||{}).map(([u,X])=>({label:u,value:X}))||v),I(f({apiCalls:o.totalEvents||0,dataTransferGB:(o.totalEvents||0)/100,activeDevices:Object.keys(o.eventTypes||{}).length,uptimePct:99.8}))}}catch(m){console.error("Failed to fetch analytics data:",m),i&&(T(v),I(f({apiCalls:0,dataTransferGB:0,activeDevices:0,uptimePct:99.8})))}finally{i&&W(!1)}})(),()=>{i=!1}},[a==null?void 0:a.role,c]);const H=x.useMemo(()=>g.reduce((i,t)=>i+t.value,0),[g]),K=x.useMemo(()=>g.length?g.reduce((i,t)=>i+(t.change||0),0)/g.length:0,[g]);return e.jsxs(r,{children:[e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(r,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Usage Analytics"}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Monitor your BackboneLogic, Inc. usage patterns and performance"})]}),e.jsxs(r,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs(Z,{size:"small",sx:{minWidth:120},children:[e.jsx(J,{children:"Time Range"}),e.jsxs(Q,{value:c,label:"Time Range",onChange:i=>d(i.target.value),inputProps:{"aria-label":"Select time range for analytics",title:"Choose the time period for analytics data"},children:[e.jsx(b,{value:"1d",children:"Last 24h"}),e.jsx(b,{value:"7d",children:"Last 7 days"}),e.jsx(b,{value:"30d",children:"Last 30 days"}),e.jsx(b,{value:"90d",children:"Last 90 days"})]})]}),e.jsxs(ee,{variant:"outlined",size:"small",children:[e.jsx(S,{variant:C==="api_calls"?"contained":"outlined",onClick:()=>k("api_calls"),children:"API Calls"}),e.jsx(S,{variant:C==="data_transfer"?"contained":"outlined",onClick:()=>k("data_transfer"),children:"Data Transfer"}),e.jsx(S,{variant:C==="devices"?"contained":"outlined",onClick:()=>k("devices"),children:"Devices"})]})]})]})}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:e.jsx(p,{sx:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsxs(h,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(ae,{sx:{color:"primary.main"}}),e.jsx(j,{icon:e.jsx(D,{}),label:`+${K.toFixed(1)}%`,color:"success",size:"small"})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"primary.main"},children:H.toLocaleString()}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total API Calls"})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsx(p,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(h,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(ie,{sx:{color:"secondary.main"}}),e.jsx(j,{icon:e.jsx(D,{}),label:"+2.3%",color:"success",size:"small"})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:"98.7%"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Average Response Time"})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsx(p,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(h,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(O,{sx:{color:"warning.main"}}),e.jsx(j,{icon:e.jsx(D,{}),label:"+12",color:"success",size:"small"})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:"342"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Devices"})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsx(p,{sx:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(h,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(N,{sx:{color:"info.main"}}),e.jsx(j,{icon:e.jsx(se,{}),label:"-0.2%",color:"error",size:"small"})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:"2.4 TB"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Data Transfer"})]})})})})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,lg:8,children:e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:e.jsxs(y,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Usage Trends"}),e.jsx(oe,{data:g})]})})}),e.jsx(n,{item:!0,xs:12,lg:4,children:e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:e.jsxs(y,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3,height:"fit-content"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Real-time Status"}),e.jsx(n,{container:!0,spacing:2,children:q.map(i=>e.jsx(n,{item:!0,xs:12,children:e.jsx(ce,{metric:i})},i.name))})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:e.jsxs(y,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Top API Endpoints"}),e.jsx(R,{dense:!0,children:_.map((i,t)=>e.jsxs(U.Fragment,{children:[e.jsxs(w,{sx:{px:0},children:[e.jsx(F,{sx:{minWidth:40},children:e.jsx(Y,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem",fontWeight:600},children:t+1})}),e.jsx(B,{primary:i.name,secondary:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(L,{variant:"determinate",value:i.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(s,{variant:"caption",sx:{minWidth:60},children:[i.calls.toLocaleString()," calls"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500,sx:{fontFamily:"monospace"}}})]}),t<_.length-1&&e.jsx(G,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},i.name))})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsxs(y,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Geographic Distribution"}),e.jsx(R,{dense:!0,children:$.map((i,t)=>e.jsxs(U.Fragment,{children:[e.jsxs(w,{sx:{px:0},children:[e.jsx(F,{sx:{minWidth:40},children:e.jsx(re,{sx:{color:"primary.main"}})}),e.jsx(B,{primary:i.region,secondary:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(L,{variant:"determinate",value:i.percentage,sx:{flex:1,height:4,borderRadius:2,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:2,background:"linear-gradient(90deg, #f093fb 0%, #f5576c 100%)"}}}),e.jsxs(s,{variant:"caption",sx:{minWidth:60},children:[i.users," users"]})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),t<$.length-1&&e.jsx(G,{sx:{borderColor:"rgba(255,255,255,0.1)"}})]},i.region))})]})})})]})]})};export{be as default};
