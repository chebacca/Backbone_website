import{j as e,B as a,T as n,a as p,u as se,G as i,c3 as be,ac as ye,al as he,c4 as je,t as ne,v as ie,r as J,c as te,ai as fe,ag as Se,c5 as ve,g as Ce,au as Ie,ay as Ue,af as ae,H as Pe,ao as Be,ap as De,aq as we,ar as K,as as d,at as Ae,bQ as pe,aB as oe,aC as le,aD as ce,d as Ee,e as F,aE as de,aG as ke,aH as Re,aI as We,a5 as N,D as Ne,a4 as Te,aa as Me,aF as Fe,p as Oe}from"./mui-D8UjIA2s.js";import{r as l}from"./vendor-CjD1bmmO.js";import{u as $e}from"./notistack.esm-Ca-E78ev.js";import{db as O}from"./firebase-B4I3SjNr.js";import{query as $,collection as L,where as z,limit as Y,getDocs as Q}from"./index.esm-ClhtutUx.js";import{getAuth as me,onAuthStateChanged as Le}from"./index.esm-DOG5cvVU.js";import"./index.esm-COtph9ny.js";import{M as X}from"./MetricCard-B_DL-kwb.js";import"./index-D__dOgoR.js";import"./stripe-CUttI3Gx.js";const H={USERS:"users",PAYMENTS:"payments",INVOICES:"invoices",SUBSCRIPTIONS:"subscriptions",LICENSES:"licenses"};class ue{static getCurrentUserId(){const m=me(),s=m.currentUser;return console.log("ðŸ” [UserBillingService] Auth state:",{hasAuth:!!m,currentUser:s?{uid:s.uid,email:s.email}:null}),s?(console.log("âœ… [UserBillingService] Current user ID:",s.uid),s.uid):(console.warn("âš ï¸ [UserBillingService] No authenticated user found"),null)}static async getCurrentUserSubscription(){var m,s;try{const b=this.getCurrentUserId();if(!b)throw new Error("No authenticated user");console.log("ðŸ” [UserBillingService] Getting subscription for Firebase UID:",b);const P=$(L(O,H.USERS),z("firebaseUid","==",b),Y(1)),y=await Q(P);if(console.log(`ðŸ‘¥ [UserBillingService] Found ${y.size} users with firebaseUid: ${b}`),y.empty)return console.log("â„¹ï¸ [UserBillingService] No user document found for firebaseUid"),null;const C=y.docs[0],k=C.data();console.log("âœ… [UserBillingService] Found user document:",{id:C.id,email:k.email});const B=$(L(O,H.SUBSCRIPTIONS),z("userId","==",C.id),Y(10)),I=await Q(B);if(console.log(`ðŸ“‹ [UserBillingService] Found ${I.size} subscriptions for user ID: ${C.id}`),I.empty)return console.log("â„¹ï¸ [UserBillingService] No subscriptions found for user ID"),null;const u=I.docs[0],o=u.data();console.log("ðŸ“Š [UserBillingService] Subscription data:",o);const j={id:u.id,plan:((m=o.tier)==null?void 0:m.toUpperCase())||"PRO",status:((s=o.status)==null?void 0:s.toLowerCase())||"active",currentPeriodStart:o.currentPeriodStart||o.createdAt,currentPeriodEnd:o.currentPeriodEnd||o.createdAt,seats:o.seats||1,amount:o.amount||0,nextPaymentDate:o.currentPeriodEnd||o.createdAt,tier:o.tier};return console.log("âœ… [UserBillingService] Subscription found and mapped:",j),j}catch(b){return console.error("âŒ [UserBillingService] Error getting user subscription:",b),null}}static async getCurrentUserBillingHistory(m={}){var s,b,P,y,C,k,B,I,u,o,j,V,G,R,q,f,W,D;try{const x=this.getCurrentUserId();if(!x)throw new Error("No authenticated user");const T=m.limit||25;console.log("ðŸ” [UserBillingService] Getting billing history for Firebase UID:",x);const _=$(L(O,H.USERS),z("firebaseUid","==",x),Y(1)),w=await Q(_);if(w.empty)return console.log("â„¹ï¸ [UserBillingService] No user document found for firebaseUid"),[];const A=w.docs[0],ee=A.data();console.log("âœ… [UserBillingService] Found user document for billing history:",{id:A.id,email:ee.email});const U=[];try{let g=$(L(O,H.PAYMENTS),z("userId","==",A.id),Y(T));const S=await Q(g);console.log(`ðŸ’³ [UserBillingService] Found ${S.size} payments for user ID: ${A.id}`);for(const h of S.docs){const t=h.data();console.log("ðŸ” [UserBillingService] Raw payment data amount:",{id:h.id,rawAmount:t.amount,type:typeof t.amount});const M={id:h.id,stripeInvoiceId:t.stripeInvoiceId,number:t.stripeInvoiceId||`PAY-${h.id.substring(0,8).toUpperCase()}`,date:((P=(b=(s=t.createdAt)==null?void 0:s.toDate)==null?void 0:b.call(s))==null?void 0:P.toISOString())||t.createdAt,amount:t.amount||0,status:((y=t.status)==null?void 0:y.toLowerCase())||"pending",description:t.description||`${((C=t.subscription)==null?void 0:C.tier)||"Subscription"} Plan - ${((k=t.subscription)==null?void 0:k.seats)||1} seat(s)`,downloadUrl:t.receiptUrl,receiptUrl:t.receiptUrl,currency:t.currency||"USD",createdAt:((u=(I=(B=t.createdAt)==null?void 0:B.toDate)==null?void 0:I.call(B))==null?void 0:u.toISOString())||t.createdAt,subscription:t.subscription};U.push(M)}console.log(`âœ… [UserBillingService] Processed ${U.length} payments`)}catch(g){console.warn("âš ï¸ [UserBillingService] Could not fetch payments:",g)}try{let g=$(L(O,H.INVOICES),z("userId","==",A.id),Y(T));const S=await Q(g);console.log(`ðŸ“‹ [UserBillingService] Found ${S.size} invoices for user ID: ${A.id}`);for(const h of S.docs){const t=h.data(),M={id:h.id,stripeInvoiceId:t.stripeInvoiceId,number:t.stripeInvoiceId||`INV-${h.id.substring(0,8).toUpperCase()}`,date:((V=(j=(o=t.createdAt)==null?void 0:o.toDate)==null?void 0:j.call(o))==null?void 0:V.toISOString())||t.createdAt,amount:t.amount||0,status:((G=t.status)==null?void 0:G.toLowerCase())||"pending",description:t.description||`${((R=t.subscription)==null?void 0:R.tier)||"Subscription"} Plan - ${((q=t.subscription)==null?void 0:q.seats)||1} seat(s)`,downloadUrl:t.receiptUrl,receiptUrl:t.receiptUrl,currency:t.currency||"USD",createdAt:((D=(W=(f=t.createdAt)==null?void 0:f.toDate)==null?void 0:W.call(f))==null?void 0:D.toISOString())||t.createdAt,subscription:t.subscription};U.push(M)}console.log(`âœ… [UserBillingService] Processed ${U.length} total items`)}catch(g){console.warn("âš ï¸ [UserBillingService] Could not fetch invoices:",g)}return U.sort((g,S)=>{const h=new Date(g.createdAt||g.date||0);return new Date(S.createdAt||S.date||0).getTime()-h.getTime()}),console.log(`âœ… [UserBillingService] Total billing history items: ${U.length}`),U}catch(x){return console.error("âŒ [UserBillingService] Error getting user billing history:",x),[]}}static formatCurrency(m,s="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(m)}}const ze=[{id:"1",type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025,isDefault:!0},{id:"2",type:"card",last4:"5555",brand:"Mastercard",expiryMonth:8,expiryYear:2026,isDefault:!1}],Z=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c),xe=c=>{switch(c.toLowerCase()){case"succeeded":case"paid":case"active":return"success";case"pending":case"processing":return"warning";case"failed":case"cancelled":case"canceled":return"error";case"refunded":return"info";default:return"default"}},ge=c=>{switch(c.toLowerCase()){case"succeeded":case"paid":case"active":return e.jsx(Oe,{});case"pending":case"processing":return e.jsx(he,{});case"failed":case"cancelled":case"canceled":return e.jsx(Fe,{});case"refunded":return e.jsx(pe,{});default:return e.jsx(Me,{})}},Ze=()=>{const{enqueueSnackbar:c}=$e(),[m]=l.useState(ze),[s,b]=l.useState(null),[P,y]=l.useState([]),[C,k]=l.useState(!1),[B,I]=l.useState(!1),[u,o]=l.useState(null),[j,V]=l.useState(!1),[G,R]=l.useState(!1),[q,f]=l.useState(!1),[W,D]=l.useState("PRO"),[x,T]=l.useState(1),[_,w]=l.useState(null),A=()=>{c("Payment method added successfully",{variant:"success"}),R(!1)},ee=()=>{c("Subscription updated successfully",{variant:"success"}),f(!1)},U=()=>{s&&(T(s.seats),s.seats<=50?D("PRO"):D("ENTERPRISE")),f(!0)},g=r=>{r.receiptUrl?window.open(r.receiptUrl,"_blank"):c("No receipt available for this payment",{variant:"info"})};l.useEffect(()=>{const r=me(),E=Le(r,v=>{console.log("ðŸ” [BillingPage] Auth state changed:",{hasUser:!!v,uid:v==null?void 0:v.uid,email:v==null?void 0:v.email}),o(v),V(!0)});return()=>E()},[]),l.useEffect(()=>{if(!j||!u){console.log("â³ [BillingPage] Waiting for auth to be ready...");return}console.log("âœ… [BillingPage] Auth ready, fetching subscription for user:",u.uid),(async()=>{try{I(!0);let r;try{if(r=await ue.getCurrentUserSubscription(),r){b(r),console.log("âœ… [BillingPage] Subscription loaded via UserBillingService");return}}catch(E){console.warn("âš ï¸ [BillingPage] UserBillingService failed, falling back to API:",E)}console.log("â„¹ï¸ [BillingPage] Web-only mode: No subscription found in Firestore")}catch(r){console.error("âŒ [BillingPage] Failed to load subscription:",r),c((r==null?void 0:r.message)||"Failed to load subscription",{variant:"error"})}finally{I(!1)}})()},[c,j,u]),l.useEffect(()=>{if(!j||!u){console.log("â³ [BillingPage] Waiting for auth to be ready for billing history...");return}console.log("âœ… [BillingPage] Auth ready, fetching billing history for user:",u.uid),(async()=>{try{k(!0);let r;try{if(console.log("ðŸ” [BillingPage] Attempting to fetch billing history via UserBillingService..."),r=await ue.getCurrentUserBillingHistory({limit:25}),console.log("ðŸ“Š [BillingPage] UserBillingService returned:",r),r&&r.length>0){y(r),console.log("âœ… [BillingPage] Billing history loaded via UserBillingService:",r.length,"items");return}else console.log("â„¹ï¸ [BillingPage] UserBillingService returned empty array or null")}catch(E){console.error("âŒ [BillingPage] UserBillingService failed:",E)}console.log("â„¹ï¸ [BillingPage] Web-only mode: No billing history found in Firestore"),y([])}catch(r){console.error("âŒ [BillingPage] Failed to load billing history:",r),c((r==null?void 0:r.message)||"Failed to load billing history",{variant:"error"}),y([])}finally{k(!1)}})()},[c,j,u]);const S=()=>({BASIC:29,PRO:99,ENTERPRISE:199})[W]*x,h=r=>{T(r),r<=50?D("PRO"):D("ENTERPRISE")},t=r=>{const v={BASIC:29,PRO:99,ENTERPRISE:199}[r];return`${r} - $${v}/seat/month`};if(B)return e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(n,{variant:"h6",color:"text.secondary",children:"Loading billing information..."})});if(!s)return e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(n,{variant:"h6",color:"text.secondary",children:"No subscription found. Please contact support."})});const M=Z(s.amount),re=Math.ceil((new Date(s.nextPaymentDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs(a,{children:[e.jsx(a,{children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(a,{children:[e.jsx(n,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Billing & Payments"}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Manage your subscription, payment methods, and billing history"})]}),e.jsx(p,{variant:"contained",startIcon:e.jsx(se,{}),onClick:U,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Upgrade Plan"})]})}),e.jsxs(i,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(X,{title:"Monthly Cost",value:Z(s.amount),icon:e.jsx(be,{}),color:"primary"})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(X,{title:"Total Seats",value:s.seats,icon:e.jsx(ye,{}),color:"secondary"})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(X,{title:"Days to Renewal",value:re,icon:e.jsx(he,{}),color:"warning",trend:{value:Math.max(0,30-re),direction:"down"}})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(X,{title:"Active Invoices",value:P.filter(r=>r.status==="paid"||r.status==="pending").length,icon:e.jsx(je,{}),color:"success"})})]}),e.jsx(a,{children:e.jsx(ne,{sx:{mb:4,background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsx(ie,{sx:{p:4},children:e.jsxs(i,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(i,{item:!0,xs:12,md:8,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(J,{label:s.plan,color:"primary",sx:{fontWeight:600,fontSize:"1rem",px:2,py:1}}),e.jsx(J,{icon:ge(s.status),label:s.status.toUpperCase(),color:xe(s.status),sx:{fontWeight:500}})]}),e.jsxs(n,{variant:"h5",sx:{fontWeight:600,mb:1},children:[Z(s.amount)," / month"]}),e.jsxs(n,{variant:"body1",color:"text.secondary",sx:{mb:2},children:[s.seats," seats â€¢ Next payment in ",re," days"]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Current period: ",new Date(s.currentPeriodStart).toLocaleDateString()," - ",new Date(s.currentPeriodEnd).toLocaleDateString()]})]}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{textAlign:"right"},children:[e.jsx(n,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Next Payment"}),e.jsx(n,{variant:"h4",sx:{fontWeight:700,mb:1},children:M}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["on ",new Date(s.nextPaymentDate).toLocaleDateString()]})]})})]})})})}),e.jsxs(i,{container:!0,spacing:4,children:[e.jsx(i,{item:!0,xs:12,md:8,children:e.jsx(a,{children:e.jsxs(te,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600},children:"Payment Methods"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(fe,{}),onClick:()=>R(!0),children:"+ Add Method"})]}),e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:2},children:m.map(r=>e.jsx(ne,{sx:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(ie,{sx:{p:2},children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Se,{sx:{bgcolor:"primary.main"},children:e.jsx(ve,{})}),e.jsxs(a,{children:[e.jsxs(n,{variant:"body1",sx:{fontWeight:500},children:[r.brand," â€¢â€¢â€¢â€¢ ",r.last4]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Expires ",r.expiryMonth.toString().padStart(2,"0"),"/",r.expiryYear]})]})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.isDefault&&e.jsx(J,{label:"Default",size:"small",color:"primary"}),e.jsx(Ce,{size:"small",onClick:E=>w(E.currentTarget),children:e.jsx(Ie,{})})]})]})})},r.id))})]})})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(a,{children:e.jsxs(te,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Quick Actions"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(p,{variant:"outlined",startIcon:e.jsx(se,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},onClick:()=>f(!0),children:"Upgrade Plan"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(p,{variant:"outlined",startIcon:e.jsx(Ue,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Update Billing Info"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(p,{variant:"outlined",startIcon:e.jsx(ae,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Download All Invoices"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(p,{variant:"outlined",startIcon:e.jsx(Pe,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Billing Security Settings"})})]})]})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(a,{children:e.jsxs(te,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Billing History"}),e.jsx(Be,{children:e.jsxs(De,{children:[e.jsx(we,{children:e.jsxs(K,{children:[e.jsx(d,{sx:{fontWeight:600},children:"Invoice"}),e.jsx(d,{sx:{fontWeight:600},children:"Date"}),e.jsx(d,{sx:{fontWeight:600},children:"Description"}),e.jsx(d,{sx:{fontWeight:600},children:"Amount"}),e.jsx(d,{sx:{fontWeight:600},children:"Status"}),e.jsx(d,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(Ae,{children:C?e.jsx(K,{children:e.jsx(d,{colSpan:6,align:"center",children:e.jsx(a,{sx:{py:4},children:e.jsx(n,{variant:"body1",color:"text.secondary",children:"Loading billing history..."})})})}):P.length>0?P.map(r=>e.jsxs(K,{hover:!0,children:[e.jsx(d,{children:e.jsx(n,{variant:"body2",sx:{fontWeight:500,fontFamily:"monospace"},children:r.number})}),e.jsx(d,{children:e.jsx(n,{variant:"body2",children:new Date(r.createdAt||r.date).toLocaleDateString()})}),e.jsx(d,{children:e.jsx(n,{variant:"body2",children:r.description})}),e.jsx(d,{children:e.jsx(n,{variant:"body2",sx:{fontWeight:500},children:new Intl.NumberFormat("en-US",{style:"currency",currency:(r.currency||"USD").toUpperCase()}).format(r.amount||0)})}),e.jsx(d,{children:e.jsx(J,{icon:ge(String(r.status).toLowerCase()),label:String(r.status).toUpperCase(),color:xe(String(r.status).toLowerCase()),size:"small"})}),e.jsx(d,{children:e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(p,{variant:"contained",size:"small",startIcon:e.jsx(ae,{}),onClick:()=>g(r),sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Receipt"}),r.stripeInvoiceId&&e.jsx(p,{variant:"outlined",size:"small",startIcon:e.jsx(pe,{}),onClick:()=>window.open(`https://dashboard.stripe.com/invoices/${r.stripeInvoiceId}`,"_blank"),sx:{borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:"rgba(0, 0, 0, 0.04)",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Stripe"})]})})]},r.id)):e.jsx(K,{children:e.jsx(d,{colSpan:6,align:"center",children:e.jsxs(a,{sx:{py:4},children:[e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"No billing history found"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Your payment history will appear here once you have completed transactions."})]})})})})]})})]})})})]}),e.jsxs(oe,{open:G,onClose:()=>R(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(le,{children:"Add Payment Method"}),e.jsxs(ce,{children:[e.jsx(Ee,{severity:"info",sx:{mb:3},children:"Your payment information is securely processed by Stripe and never stored on our servers."}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"Card Number",placeholder:"1234 5678 9012 3456",sx:{mt:1}})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"Expiry Date",placeholder:"MM/YY"})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"CVC",placeholder:"123"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"Cardholder Name",placeholder:"John Doe"})})]})]}),e.jsxs(de,{children:[e.jsx(p,{onClick:()=>R(!1),children:"Cancel"}),e.jsx(p,{onClick:A,variant:"contained",children:"Add Payment Method"})]})]}),e.jsxs(oe,{open:q,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(le,{children:"Upgrade Your Plan"}),e.jsx(ce,{children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(ke,{fullWidth:!0,children:[e.jsx(Re,{children:"Select Plan"}),e.jsxs(We,{value:W,label:"Select Plan",onChange:r=>D(r.target.value),inputProps:{"aria-label":"Select subscription plan",title:"Choose your subscription plan"},children:[e.jsx(N,{value:"BASIC",children:t("BASIC")}),e.jsx(N,{value:"PRO",children:t("PRO")}),e.jsx(N,{value:"ENTERPRISE",children:t("ENTERPRISE")})]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(F,{fullWidth:!0,label:"Number of Seats",type:"number",value:x,onChange:r=>h(parseInt(r.target.value)),inputProps:{min:1,max:100},helperText:"Up to 50 seats: Pro plan. 51+ seats: Enterprise plan."})}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx(Ne,{sx:{my:2}}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(n,{variant:"h6",children:["Total: ",Z(S())," / month"]})}),e.jsxs(a,{sx:{p:2,bgcolor:"background.default",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.jsx("strong",{children:"Plan Selection Logic:"})}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["â€¢ ",x<=50?"âœ…":"âŒ"," Up to 50 seats: ",e.jsx("strong",{children:"Pro Plan"})," ($99/seat/month)"]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["â€¢ ",x>50?"âœ…":"âŒ"," 51+ seats: ",e.jsx("strong",{children:"Enterprise Plan"})," ($199/seat/month)"]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1,fontStyle:"italic"},children:["Current selection: ",e.jsx("strong",{children:W})," plan with ",e.jsx("strong",{children:x})," seat",x!==1?"s":""]})]})]})]})]})}),e.jsxs(de,{children:[e.jsx(p,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(p,{onClick:ee,variant:"contained",children:"Upgrade Now"})]})]}),e.jsxs(Te,{anchorEl:_,open:!!_,onClose:()=>w(null),PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(N,{onClick:()=>w(null),children:"Set as Default"}),e.jsx(N,{onClick:()=>w(null),children:"Edit"}),e.jsx(N,{onClick:()=>w(null),sx:{color:"error.main"},children:"Remove"})]})]})};export{Ze as default};
