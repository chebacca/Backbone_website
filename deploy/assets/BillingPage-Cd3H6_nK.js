import{j as e,a as c,T as s,d as i,m as v,k as V,l as _,G as a,h as m,c as g,az as Q,U as q,W as J,X,at as K,a5 as Z,Y as ee,I as te,aI as ae,aL as se,a$ as re,p as ne,aC as ie,aD as le,aE as oe,aF as P,aG as r,aH as ce,ar as de,aN as D,aO as I,aP as k,t as xe,u as h,aQ as W,aS as ue,aT as he,aU as pe,a4 as d,D as je,ak as me,n as w,aR as ge,ax as ye}from"./mui-DiYnqcGn.js";import{r as o,b as be}from"./vendor-DIxetjBo.js";import{b as fe}from"./index-DQte3TP3.js";import{p as Ce}from"./paymentService-CsKQ06zd.js";import{m as p}from"./proxy-B_KpOrcW.js";import"./stripe-CQkQ71Kl.js";const Se=[{id:"1",type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025,isDefault:!0},{id:"2",type:"card",last4:"5555",brand:"Mastercard",expiryMonth:8,expiryYear:2026,isDefault:!1}],ve={id:"1",plan:"PRO",status:"active",currentPeriodStart:"2024-01-15",currentPeriodEnd:"2024-02-15",seats:3,amount:29700,nextPaymentDate:"2024-02-15"},y=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l/100),U=l=>{switch(l){case"paid":case"active":return"success";case"pending":return"warning";case"failed":case"past_due":return"error";case"canceled":return"default";default:return"default"}},A=l=>{switch(l){case"paid":case"active":return e.jsx(w,{});case"pending":return e.jsx(ye,{});case"failed":case"past_due":return e.jsx(ge,{});default:return e.jsx(w,{})}},Ee=()=>{const{enqueueSnackbar:l}=fe(),[E]=o.useState(Se),[n]=o.useState(ve),[M,T]=o.useState([]),[Pe,b]=o.useState(!1),[R,j]=o.useState(!1),[B,x]=o.useState(!1),[f,L]=o.useState("PRO"),[C,N]=o.useState(3),[S,u]=o.useState(null),F=()=>{l("Payment method added successfully",{variant:"success"}),j(!1)},O=()=>{l("Subscription updated successfully",{variant:"success"}),x(!1)},Y=t=>{t.receiptUrl?window.open(t.receiptUrl,"_blank"):l("No receipt available for this payment",{variant:"info"})};o.useEffect(()=>{(async()=>{try{b(!0);const t=await Ce.getPaymentHistory({limit:25});T(t.payments||[])}catch(t){l((t==null?void 0:t.message)||"Failed to load billing history",{variant:"error"})}finally{b(!1)}})()},[]);const z=()=>({BASIC:2900,PRO:9900,ENTERPRISE:19900})[f]*C,$=y(n.amount),H=Math.ceil((new Date(n.nextPaymentDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs(c,{children:[e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(c,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Billing & Payments"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Manage your subscription, payment methods, and billing history"})]}),e.jsx(i,{variant:"contained",startIcon:e.jsx(v,{}),onClick:()=>x(!0),sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Upgrade Plan"})]})}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:e.jsx(V,{sx:{mb:4,background:"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)",border:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsx(_,{sx:{p:4},children:e.jsxs(a,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(a,{item:!0,xs:12,md:8,children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(m,{label:n.plan,color:"primary",sx:{fontWeight:600,fontSize:"1rem",px:2,py:1}}),e.jsx(m,{icon:A(n.status),label:n.status.toUpperCase(),color:U(n.status),sx:{fontWeight:500}})]}),e.jsxs(s,{variant:"h5",sx:{fontWeight:600,mb:1},children:[y(n.amount)," / month"]}),e.jsxs(s,{variant:"body1",color:"text.secondary",sx:{mb:2},children:[n.seats," seats • Next payment in ",H," days"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Current period: ",new Date(n.currentPeriodStart).toLocaleDateString()," - ",new Date(n.currentPeriodEnd).toLocaleDateString()]})]}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{textAlign:{xs:"left",md:"right"}},children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Next Payment"}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"primary.main",mb:2},children:$}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["on ",new Date(n.nextPaymentDate).toLocaleDateString()]})]})})]})})})}),e.jsxs(a,{container:!0,spacing:4,children:[e.jsx(a,{item:!0,xs:12,lg:6,children:e.jsx(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:e.jsxs(g,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Payment Methods"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(Q,{}),onClick:()=>j(!0),size:"small",children:"Add Method"})]}),e.jsx(q,{children:E.map((t,De)=>e.jsx(be.Fragment,{children:e.jsxs(J,{sx:{px:0,border:t.isDefault?"1px solid rgba(0, 212, 255, 0.3)":"1px solid rgba(255,255,255,0.1)",borderRadius:2,mb:1,backgroundColor:t.isDefault?"rgba(0, 212, 255, 0.05)":"rgba(255,255,255,0.02)"},children:[e.jsx(X,{sx:{ml:2},children:e.jsx(K,{sx:{bgcolor:"primary.main",width:40,height:40},children:e.jsx(Z,{})})}),e.jsx(ee,{primary:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(s,{variant:"body1",sx:{fontWeight:500},children:[t.brand," •••• ",t.last4]}),t.isDefault&&e.jsx(m,{label:"Default",size:"small",color:"primary"})]}),secondary:`Expires ${t.expiryMonth}/${t.expiryYear}`,sx:{ml:1}}),e.jsx(te,{onClick:G=>u(G.currentTarget),sx:{mr:2},children:e.jsx(ae,{})})]})},t.id))})]})})}),e.jsx(a,{item:!0,xs:12,lg:6,children:e.jsx(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:e.jsxs(g,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Quick Actions"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(i,{variant:"outlined",startIcon:e.jsx(v,{}),fullWidth:!0,onClick:()=>x(!0),sx:{justifyContent:"flex-start",py:1.5},children:"Upgrade Plan"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(i,{variant:"outlined",startIcon:e.jsx(se,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Update Billing Info"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(i,{variant:"outlined",startIcon:e.jsx(re,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Download All Invoices"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(i,{variant:"outlined",startIcon:e.jsx(ne,{}),fullWidth:!0,sx:{justifyContent:"flex-start",py:1.5},children:"Billing Security Settings"})})]})]})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs(g,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Billing History"}),e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(oe,{children:e.jsxs(P,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Invoice"}),e.jsx(r,{sx:{fontWeight:600},children:"Date"}),e.jsx(r,{sx:{fontWeight:600},children:"Description"}),e.jsx(r,{sx:{fontWeight:600},children:"Amount"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ce,{children:M.map(t=>e.jsxs(P,{hover:!0,children:[e.jsx(r,{children:e.jsx(s,{variant:"body2",sx:{fontWeight:500,fontFamily:"monospace"},children:t.id})}),e.jsx(r,{children:e.jsx(s,{variant:"body2",children:new Date(t.createdAt).toLocaleDateString()})}),e.jsx(r,{children:e.jsx(s,{variant:"body2",children:t.description})}),e.jsx(r,{children:e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:new Intl.NumberFormat("en-US",{style:"currency",currency:(t.currency||"USD").toUpperCase()}).format((t.amount||0)/100)})}),e.jsx(r,{children:e.jsx(m,{icon:A(String(t.status).toLowerCase()),label:String(t.status).toUpperCase(),color:U(String(t.status).toLowerCase()),size:"small"})}),e.jsx(r,{children:e.jsx(i,{variant:"outlined",size:"small",startIcon:e.jsx(de,{}),onClick:()=>Y(t),children:"Receipt"})})]},t.id))})]})})]})})})]}),e.jsxs(D,{open:R,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(I,{children:"Add Payment Method"}),e.jsxs(k,{children:[e.jsx(xe,{severity:"info",sx:{mb:3},children:"Your payment information is securely processed by Stripe and never stored on our servers."}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,label:"Card Number",placeholder:"1234 5678 9012 3456",sx:{mt:1}})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,label:"Expiry Date",placeholder:"MM/YY"})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,label:"CVC",placeholder:"123"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,label:"Cardholder Name",placeholder:"John Doe"})})]})]}),e.jsxs(W,{children:[e.jsx(i,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(i,{onClick:F,variant:"contained",children:"Add Payment Method"})]})]}),e.jsxs(D,{open:B,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(I,{children:"Upgrade Your Plan"}),e.jsx(k,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsxs(ue,{fullWidth:!0,children:[e.jsx(he,{children:"Select Plan"}),e.jsxs(pe,{value:f,label:"Select Plan",onChange:t=>L(t.target.value),inputProps:{"aria-label":"Select subscription plan",title:"Choose your subscription plan"},children:[e.jsx(d,{value:"BASIC",children:"Basic - $29/month"}),e.jsx(d,{value:"PRO",children:"Pro - $99/month"}),e.jsx(d,{value:"ENTERPRISE",children:"Enterprise - $199/month"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Number of Seats",type:"number",value:C,onChange:t=>N(parseInt(t.target.value)),inputProps:{min:1,max:100}})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(je,{sx:{my:2}}),e.jsx(c,{sx:{display:"flex",justifyContent:"between",alignItems:"center"},children:e.jsxs(s,{variant:"h6",children:["Total: ",y(z())," / month"]})})]})]})}),e.jsxs(W,{children:[e.jsx(i,{onClick:()=>x(!1),children:"Cancel"}),e.jsx(i,{onClick:O,variant:"contained",children:"Upgrade Now"})]})]}),e.jsxs(me,{anchorEl:S,open:!!S,onClose:()=>u(null),PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(d,{onClick:()=>u(null),children:"Set as Default"}),e.jsx(d,{onClick:()=>u(null),children:"Edit"}),e.jsx(d,{onClick:()=>u(null),sx:{color:"error.main"},children:"Remove"})]})]})};export{Ee as default};
//# sourceMappingURL=BillingPage-Cd3H6_nK.js.map
