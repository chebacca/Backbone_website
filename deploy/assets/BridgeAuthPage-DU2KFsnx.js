import{j as e,a as g,C as d,T as u,d as p}from"./mui-CqGO0PUa.js";import{u as h,r as a}from"./vendor-OeuszDaU.js";const w=()=>{const t=h(),[n,i]=a.useState(!1);return a.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("bridge")==="1",s=localStorage.getItem("auth_token"),c=localStorage.getItem("refresh_token"),o=localStorage.getItem("auth_user");if((!s||!o)&&r){t("/login?bridge=1",{replace:!0});return}try{const l=o?JSON.parse(o):null;window.opener&&r&&(window.opener.postMessage({type:"BACKBONE_AUTH",payload:{user:l,tokens:{accessToken:s,refreshToken:c}}},"*"),i(!0),window.close())}catch{}},[t]),e.jsxs(g,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2},children:[e.jsx(d,{}),e.jsx(u,{variant:"body1",color:"text.secondary",children:n?"Sent credentials to the application. You can close this window.":"Preparing authentication bridge..."}),e.jsx(p,{onClick:()=>t("/login?bridge=1"),variant:"outlined",children:"Go to Login"})]})};export{w as default};
