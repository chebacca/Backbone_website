import{j as e,a as s,T as n,c as N,J as $,h as Y,Q as ce,G as a,k as de,m as ie,l as xe,U as D,W as A,X as T,M as w,Y as I,d as B,u as P,F as O,a3 as _,o as ae,D as z,a4 as R,$ as me,a0 as ue,a1 as pe,a2 as he,z as U,K,a5 as be,t as H,p as ge,S as ye,b as Q,s as Z,a6 as je,a7 as fe,a8 as Ce,A as ve,a9 as Se,aa as ee,n as Pe}from"./mui-BQ0lC4VB.js";import{b as te,L as V,r as k,u as Ae,h as Ie}from"./vendor-DIxetjBo.js";import{u as ke,a as We}from"./index-CBNusD3z.js";import{u as Ee}from"./notistack.esm-Bg0Tn0tt.js";import{p as G}from"./paymentService-DAs6RNCg.js";import{N as re}from"./Navigation-Bxz4zsfj.js";import{u as Re,C}from"./index.esm-9wQFonXx.js";import{u as Te,a as we,C as se,b as Ne,c as Le}from"./stripe-0lUOqiTp.js";const Be=({pricingTiers:t,selectedTier:u,seats:j,isYearly:b,onUpdate:v})=>{const g=r=>{const h=t.find(f=>f.id===r);if(!h)return;let o=j;h.id==="BASIC"&&j>1?o=1:h.id==="ENTERPRISE"&&j<10&&(o=10),v({tier:r,seats:o})},m=r=>{const h=t.find(o=>o.id===u);h&&(h.id==="BASIC"&&r>1||h.id==="PRO"&&r>50||h.id==="ENTERPRISE"&&r<10||r<1||v({seats:r}))},y=r=>{switch(r){case"BASIC":return e.jsx(O,{});case"PRO":return e.jsx(ae,{});case"ENTERPRISE":return e.jsx(_,{});default:return e.jsx(O,{})}},d=r=>r.price?`$${b?r.price*10:r.price}`:"Custom";return e.jsxs(s,{children:[e.jsx(n,{variant:"h5",sx:{mb:1,fontWeight:600},children:"Choose Your Plan"}),e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Select the plan that best fits your needs. You can change or cancel anytime."}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(N,{elevation:2,sx:{display:"inline-flex",p:.5,backgroundColor:"background.paper",borderRadius:4},children:e.jsx($,{control:e.jsx(ce,{checked:b,onChange:r=>v({isYearly:r.target.checked}),color:"primary"}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"body2",children:"Annual billing"}),e.jsx(Y,{label:"Save 17%",size:"small",color:"primary",variant:"outlined"})]}),sx:{m:1}})})}),e.jsx(a,{container:!0,spacing:3,sx:{mb:4},children:t.map(r=>e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(s,{whileHover:{scale:1.02},transition:{duration:.2},children:e.jsxs(de,{sx:{height:"100%",position:"relative",backgroundColor:r.id===u?"primary.dark":"background.paper",border:r.id===u?"2px solid":"1px solid rgba(255, 255, 255, 0.1)",borderColor:r.id===u?"primary.main":void 0,cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>g(r.id),children:[r.popular&&e.jsx(s,{sx:{position:"absolute",top:-12,left:"50%",transform:"translateX(-50%)"},children:e.jsx(Y,{icon:e.jsx(ie,{}),label:"Most Popular",color:"primary",sx:{fontWeight:600,color:"#000"}})}),e.jsxs(xe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{textAlign:"center",mb:3},children:[e.jsx(s,{sx:{width:48,height:48,borderRadius:2,backgroundColor:r.id===u?"rgba(0, 212, 255, 0.2)":"rgba(0, 212, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2,color:"primary.main"},children:y(r.id)}),e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:1},children:r.name}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),e.jsxs(s,{sx:{mb:2},children:[e.jsx(n,{variant:"h4",sx:{fontWeight:700},children:d(r)}),e.jsx(n,{variant:"body2",color:"text.secondary",children:r.price?b?"/year":"/month":"Contact Sales"})]}),r.maxSeats&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Up to ",r.maxSeats," ",r.maxSeats===1?"user":"users"]})]}),e.jsx(D,{dense:!0,sx:{p:0,flexGrow:1},children:r.features.slice(0,6).map((h,o)=>e.jsxs(A,{sx:{px:0,py:.25},children:[e.jsx(T,{sx:{minWidth:20},children:e.jsx(w,{sx:{fontSize:14,color:"success.main"}})}),e.jsx(I,{primary:h,primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8rem"}}})]},o))}),r.id===u&&e.jsx(B,{variant:"contained",fullWidth:!0,sx:{mt:2,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:"Selected"})]})]})})},r.id))}),u&&e.jsxs(s,{children:[e.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Number of Seats"}),e.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(a,{item:!0,xs:12,sm:6,md:4,children:e.jsx(P,{fullWidth:!0,label:"Number of seats",type:"number",value:j,onChange:r=>m(parseInt(r.target.value)||1),inputProps:{min:u==="ENTERPRISE"?10:1,max:u==="BASIC"?1:u==="PRO"?50:1e3},helperText:u==="BASIC"?"Basic plan includes 1 seat only":u==="PRO"?"Pro plan supports up to 50 seats":"Enterprise plan minimum 10 seats"})}),e.jsx(a,{item:!0,xs:12,sm:6,md:8,children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"Each seat allows one user to access BackboneLogic, Inc."})})]})]})]})},Oe=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"AU",name:"Australia"},{code:"JP",name:"Japan"}],ze=[{code:"AL",name:"Alabama"},{code:"CA",name:"California"},{code:"FL",name:"Florida"},{code:"NY",name:"New York"},{code:"TX",name:"Texas"}],Me=({billingAddress:t,taxInformation:u,businessProfile:j,acceptTerms:b,acceptPrivacy:v,onUpdate:g})=>{var f,W,L;const{control:m,watch:y,formState:{errors:d}}=Re({defaultValues:{billingAddress:t,taxInformation:u,businessProfile:j,acceptTerms:b,acceptPrivacy:v}}),r=y(),h=(f=r.billingAddress)==null?void 0:f.country,o=d;return te.useEffect(()=>{g(r)},[r,g]),e.jsxs(s,{children:[e.jsx(n,{variant:"h5",sx:{mb:1,fontWeight:600},children:"Billing Information"}),e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Please provide your billing details for invoicing and compliance."}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(n,{variant:"h6",sx:{mb:2,fontWeight:600,display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{})," Contact Information"]})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.firstName",control:m,rules:{required:"First name is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,label:"First Name",error:!!((x=o.billingAddress)!=null&&x.firstName),helperText:(c=(i=o.billingAddress)==null?void 0:i.firstName)==null?void 0:c.message})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.lastName",control:m,rules:{required:"Last name is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,label:"Last Name",error:!!((x=o.billingAddress)!=null&&x.lastName),helperText:(c=(i=o.billingAddress)==null?void 0:i.lastName)==null?void 0:c.message})}})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"billingAddress.company",control:m,render:({field:l})=>e.jsx(P,{...l,fullWidth:!0,label:"Company (Optional)",helperText:"If purchasing for a business"})})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(z,{sx:{my:2}}),e.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Billing Address"})]}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"billingAddress.addressLine1",control:m,rules:{required:"Address is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,label:"Address Line 1",error:!!((x=o.billingAddress)!=null&&x.addressLine1),helperText:(c=(i=o.billingAddress)==null?void 0:i.addressLine1)==null?void 0:c.message})}})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"billingAddress.addressLine2",control:m,render:({field:l})=>e.jsx(P,{...l,fullWidth:!0,label:"Address Line 2 (Optional)"})})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.city",control:m,rules:{required:"City is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,label:"City",error:!!((x=o.billingAddress)!=null&&x.city),helperText:(c=(i=o.billingAddress)==null?void 0:i.city)==null?void 0:c.message})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.postalCode",control:m,rules:{required:"Postal code is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,label:"Postal Code",error:!!((x=o.billingAddress)!=null&&x.postalCode),helperText:(c=(i=o.billingAddress)==null?void 0:i.postalCode)==null?void 0:c.message})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.country",control:m,rules:{required:"Country is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,select:!0,label:"Country",error:!!((x=o.billingAddress)!=null&&x.country),helperText:(c=(i=o.billingAddress)==null?void 0:i.country)==null?void 0:c.message,children:Oe.map(S=>e.jsx(R,{value:S.code,children:S.name},S.code))})}})}),(h==="US"||h==="CA")&&e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"billingAddress.state",control:m,rules:{required:"State/Province is required"},render:({field:l})=>{var x,i,c;return e.jsx(P,{...l,fullWidth:!0,select:!0,label:h==="US"?"State":"Province",error:!!((x=o.billingAddress)!=null&&x.state),helperText:(c=(i=o.billingAddress)==null?void 0:i.state)==null?void 0:c.message,children:ze.map(S=>e.jsx(R,{value:S.code,children:S.name},S.code))})}})}),e.jsx(a,{item:!0,xs:12,children:e.jsxs(me,{children:[e.jsx(ue,{expandIcon:e.jsx(pe,{}),children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsx(n,{variant:"h6",sx:{fontWeight:600},children:"Business Information (Optional)"})]})}),e.jsx(he,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"businessProfile.companyName",control:m,render:({field:l})=>e.jsx(P,{...l,fullWidth:!0,label:"Company Name",helperText:"Required for business purchases and volume discounts"})})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"businessProfile.companyType",control:m,render:({field:l})=>e.jsxs(P,{...l,fullWidth:!0,select:!0,label:"Company Type",children:[e.jsx(R,{value:"SOLE_PROPRIETORSHIP",children:"Sole Proprietorship"}),e.jsx(R,{value:"PARTNERSHIP",children:"Partnership"}),e.jsx(R,{value:"LLC",children:"LLC"}),e.jsx(R,{value:"CORPORATION",children:"Corporation"}),e.jsx(R,{value:"NON_PROFIT",children:"Non-Profit"}),e.jsx(R,{value:"GOVERNMENT",children:"Government"}),e.jsx(R,{value:"OTHER",children:"Other"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(C,{name:"taxInformation.taxId",control:m,render:({field:l})=>e.jsx(P,{...l,fullWidth:!0,label:"Tax ID / VAT Number",helperText:"For tax exemption and business verification"})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"businessProfile.businessDescription",control:m,render:({field:l})=>e.jsx(P,{...l,fullWidth:!0,multiline:!0,rows:3,label:"Business Description",helperText:"Brief description of your business (optional)"})})})]})})]})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(z,{sx:{my:2}}),e.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Legal Agreements"})]}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"acceptTerms",control:m,rules:{required:"You must accept the Terms of Service"},render:({field:{value:l,onChange:x}})=>e.jsx($,{control:e.jsx(K,{checked:l,onChange:x,color:"primary",icon:e.jsx(s,{sx:{width:20,height:20,border:"2px solid",borderColor:"rgba(255,255,255,0.3)",borderRadius:.5}}),checkedIcon:e.jsx(s,{sx:{width:20,height:20,backgroundColor:"primary.main",color:"#000",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{sx:{fontSize:14}})})}),label:e.jsxs(n,{variant:"body2",children:["I agree to the"," ",e.jsx(U,{component:V,to:"/terms",target:"_blank",sx:{color:"primary.main"},children:"Terms of Service"})," ","and"," ",e.jsx(U,{component:V,to:"/sla",target:"_blank",sx:{color:"primary.main"},children:"Service Level Agreement"})]}),sx:{alignItems:"flex-start",...d.acceptTerms&&{color:"error.main"}}})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(C,{name:"acceptPrivacy",control:m,rules:{required:"You must accept the Privacy Policy"},render:({field:{value:l,onChange:x}})=>e.jsx($,{control:e.jsx(K,{checked:l,onChange:x,color:"primary",icon:e.jsx(s,{sx:{width:20,height:20,border:"2px solid",borderColor:"rgba(255,255,255,0.3)",borderRadius:.5}}),checkedIcon:e.jsx(s,{sx:{width:20,height:20,backgroundColor:"primary.main",color:"#000",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{sx:{fontSize:14}})})}),label:e.jsxs(n,{variant:"body2",children:["I agree to the"," ",e.jsx(U,{component:V,to:"/privacy",target:"_blank",sx:{color:"primary.main"},children:"Privacy Policy"})," ","and consent to data processing for billing and service delivery"]}),sx:{alignItems:"flex-start",...d.acceptPrivacy&&{color:"error.main"}}})})}),(d.acceptTerms||d.acceptPrivacy)&&e.jsx(a,{item:!0,xs:12,children:e.jsx(n,{variant:"caption",color:"error.main",children:((W=d.acceptTerms)==null?void 0:W.message)||((L=d.acceptPrivacy)==null?void 0:L.message)})})]}),e.jsxs(s,{sx:{mt:4,p:3,backgroundColor:"rgba(255, 255, 255, 0.02)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.jsx("strong",{children:"Privacy & Compliance Notice"})}),e.jsx(n,{variant:"caption",color:"text.secondary",children:"Your information is collected in accordance with GDPR, CCPA, and other applicable privacy laws. We use industry-standard encryption and security measures to protect your data. Tax information is used solely for compliance and billing purposes."})]})]})},Fe=({checkoutData:t,taxCalculation:u,onComplete:j})=>{const b=Te(),v=we(),[g,m]=k.useState(!1),[y,d]=k.useState(null),[r,h]=k.useState({cardNumber:!1,cardExpiry:!1,cardCvc:!1}),o=te.useMemo(()=>({BASIC:{name:"Basic",price:2900},PRO:{name:"Pro",price:9900},ENTERPRISE:{name:"Enterprise",price:null}})[t.tier],[t.tier]),f=()=>{if(!(o!=null&&o.price))return 0;const i=o.price*t.seats,c=(u==null?void 0:u.taxAmount)||0;return i+c},W=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i/100),L=async i=>{if(i.preventDefault(),!b||!v){d("Stripe has not loaded yet. Please try again.");return}const c=v.getElement(se);if(!c){d("Card element not found. Please refresh and try again.");return}m(!0),d(null);try{const{error:S,paymentMethod:M}=await b.createPaymentMethod({type:"card",card:c,billing_details:{name:`${t.billingAddress.firstName} ${t.billingAddress.lastName}`,email:"user@example.com",address:{line1:t.billingAddress.addressLine1,line2:t.billingAddress.addressLine2,city:t.billingAddress.city,state:t.billingAddress.state,postal_code:t.billingAddress.postalCode,country:t.billingAddress.country}}});if(S){d(S.message||"Payment method creation failed");return}if(!M){d("Failed to create payment method");return}await j(M.id)}catch(S){d(S.message||"Payment processing failed")}finally{m(!1)}},l=Object.values(r).every(Boolean)&&t.acceptTerms&&t.acceptPrivacy,x={style:{base:{fontSize:"16px",color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0.05)","::placeholder":{color:"rgba(255, 255, 255, 0.5)"}},invalid:{color:"#f44336",iconColor:"#f44336"}}};return e.jsxs(s,{children:[e.jsx(n,{variant:"h5",sx:{mb:1,fontWeight:600},children:"Payment Method"}),e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Complete your purchase with secure payment processing by Stripe."}),e.jsxs(a,{container:!0,spacing:4,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsxs(N,{elevation:2,sx:{p:4,backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(be,{sx:{color:"primary.main"}}),e.jsx(n,{variant:"h6",sx:{fontWeight:600},children:"Credit Card Information"})]}),y&&e.jsx(H,{severity:"error",sx:{mb:3},children:y}),e.jsx(s,{component:"form",onSubmit:L,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Card Number"}),e.jsx(s,{sx:{p:2,border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,backgroundColor:"rgba(255, 255, 255, 0.05)","&:focus-within":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(0, 212, 255, 0.2)"}},children:e.jsx(se,{options:x,onChange:i=>{h(c=>({...c,cardNumber:i.complete})),i.error?d(i.error.message):d(null)}})})]}),e.jsxs(a,{item:!0,xs:12,sm:6,children:[e.jsx(n,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Expiry Date"}),e.jsx(s,{sx:{p:2,border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,backgroundColor:"rgba(255, 255, 255, 0.05)","&:focus-within":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(0, 212, 255, 0.2)"}},children:e.jsx(Ne,{options:x,onChange:i=>{h(c=>({...c,cardExpiry:i.complete})),i.error?d(i.error.message):y&&i.complete&&d(null)}})})]}),e.jsxs(a,{item:!0,xs:12,sm:6,children:[e.jsx(n,{variant:"body2",sx:{mb:1,fontWeight:500},children:"CVC"}),e.jsx(s,{sx:{p:2,border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,backgroundColor:"rgba(255, 255, 255, 0.05)","&:focus-within":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(0, 212, 255, 0.2)"}},children:e.jsx(Le,{options:x,onChange:i=>{h(c=>({...c,cardCvc:i.complete})),i.error?d(i.error.message):y&&i.complete&&d(null)}})})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(z,{sx:{my:2}}),e.jsx(B,{type:"submit",variant:"contained",size:"large",fullWidth:!0,disabled:!l||g||!b,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000","&:disabled":{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.5)"}},children:g?"Processing Payment...":`Complete Purchase - ${W(f())}`})]})]})})]})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsxs(s,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsxs(N,{elevation:2,sx:{p:3,backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(ge,{sx:{color:"success.main"}}),e.jsx(n,{variant:"h6",sx:{fontWeight:600},children:"Secure Payment"})]}),e.jsxs(D,{dense:!0,children:[e.jsxs(A,{sx:{px:0},children:[e.jsx(T,{sx:{minWidth:32},children:e.jsx(w,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(I,{primary:"256-bit SSL Encryption",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(A,{sx:{px:0},children:[e.jsx(T,{sx:{minWidth:32},children:e.jsx(w,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(I,{primary:"PCI DSS Compliant",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(A,{sx:{px:0},children:[e.jsx(T,{sx:{minWidth:32},children:e.jsx(w,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(I,{primary:"SOC 2 Type II Certified",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(A,{sx:{px:0},children:[e.jsx(T,{sx:{minWidth:32},children:e.jsx(w,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(I,{primary:"14-Day Money Back Guarantee",primaryTypographyProps:{variant:"body2"}})]})]}),e.jsx(z,{sx:{my:2}}),e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Powered by Stripe"}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",gap:1,mb:2},children:["Visa","Mastercard","American Express","Discover"].map(i=>e.jsx(s,{sx:{px:1,py:.5,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:1,fontSize:"0.75rem"},children:i},i))}),e.jsx(n,{variant:"caption",color:"text.secondary",children:"Your payment information is never stored on our servers"})]})]}),e.jsxs(N,{elevation:2,sx:{p:3,mt:3,backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600},children:"What Happens Next?"}),e.jsxs(D,{dense:!0,children:[e.jsxs(A,{sx:{px:0,alignItems:"flex-start"},children:[e.jsx(T,{sx:{minWidth:32,mt:.5},children:e.jsx(s,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:"primary.main",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:"1"})}),e.jsx(I,{primary:"Instant License Generation",secondary:"Your license keys are generated immediately upon payment",primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]}),e.jsxs(A,{sx:{px:0,alignItems:"flex-start"},children:[e.jsx(T,{sx:{minWidth:32,mt:.5},children:e.jsx(s,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:"primary.main",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:"2"})}),e.jsx(I,{primary:"Email Confirmation",secondary:"Receipt and license details sent to your email",primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]}),e.jsxs(A,{sx:{px:0,alignItems:"flex-start"},children:[e.jsx(T,{sx:{minWidth:32,mt:.5},children:e.jsx(s,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:"primary.main",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:"3"})}),e.jsx(I,{primary:"Dashboard Access",secondary:"Manage your licenses and team from your dashboard",primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]})]})]})]})})]})]})},qe=({selectedTier:t,seats:u,isYearly:j=!1,taxCalculation:b})=>{if(!t)return e.jsxs(N,{elevation:3,sx:{p:4,backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)",position:"sticky",top:100},children:[e.jsx(n,{variant:"h6",sx:{mb:3},children:"Order Summary"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Please select a plan to see pricing details."})]});const v=()=>{switch(t.id){case"BASIC":return e.jsx(O,{});case"PRO":return e.jsx(ae,{});case"ENTERPRISE":return e.jsx(_,{});default:return e.jsx(O,{})}},m=(()=>{if(!t.price)return{subtotal:0,discount:0,total:0};const d=t.price*u;let r=d,h=0;j&&(r=d*12,h=d*2);const o=r-h,f=(b==null?void 0:b.taxAmount)||0,W=o+f;return{subtotal:r,discount:h,discountedSubtotal:o,taxAmount:f,total:W}})(),y=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d/100);return e.jsx(s,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},children:e.jsxs(N,{elevation:3,sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)",position:"sticky",top:100},children:[e.jsxs(s,{sx:{p:3,background:t.popular?"linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%)":"rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(s,{sx:{width:48,height:48,borderRadius:2,backgroundColor:t.popular?"rgba(0, 212, 255, 0.2)":"rgba(0, 212, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"primary.main"},children:v()}),e.jsxs(s,{sx:{flexGrow:1},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600},children:t.name}),t.popular&&e.jsx(Y,{size:"small",icon:e.jsx(ie,{}),label:"Popular",color:"primary",sx:{color:"#000"}})]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:t.description})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(n,{variant:"body2",color:"text.secondary",children:[u," ",u===1?"seat":"seats"]}),j&&e.jsx(Y,{size:"small",label:"Annual Billing",variant:"outlined",color:"success"})]})]}),e.jsxs(s,{sx:{p:3},children:[e.jsx(n,{variant:"h6",sx:{mb:3},children:"Order Summary"}),e.jsxs(ye,{spacing:2,sx:{mb:3},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(n,{variant:"body2",children:[t.name," × ",u," seat",u!==1?"s":"",j&&" (12 months)"]}),e.jsx(n,{variant:"body2",children:y(m.subtotal)})]}),m.discount>0&&e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(n,{variant:"body2",color:"success.main",children:"Annual discount (2 months free)"}),e.jsxs(n,{variant:"body2",color:"success.main",children:["-",y(m.discount)]})]}),b&&e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(n,{variant:"body2",children:["Tax (",b.taxJurisdiction,")"]}),e.jsx(n,{variant:"body2",children:y(b.taxAmount)})]})]}),e.jsx(z,{sx:{mb:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsxs(n,{variant:"h6",children:["Total ",j?"(Annual)":"(Monthly)"]}),e.jsx(n,{variant:"h6",color:"primary.main",children:y(m.total)})]}),j&&e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Billed annually. Cancel anytime."}),e.jsx(n,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"What's included:"}),e.jsxs(D,{dense:!0,sx:{p:0},children:[t.features.slice(0,5).map((d,r)=>e.jsxs(A,{sx:{px:0,py:.5},children:[e.jsx(T,{sx:{minWidth:24},children:e.jsx(w,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(I,{primary:d,primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.875rem"}}})]},r)),t.features.length>5&&e.jsx(A,{sx:{px:0,py:.5},children:e.jsx(I,{primary:`+ ${t.features.length-5} more features`,primaryTypographyProps:{variant:"body2",color:"primary.main",sx:{fontSize:"0.875rem",fontWeight:500}}})})]})]}),e.jsx(s,{sx:{p:3,backgroundColor:"rgba(255, 255, 255, 0.02)",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(n,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center"},children:["🔒 Secured by 256-bit SSL encryption",e.jsx("br",{}),"💳 PCI DSS compliant payment processing",e.jsx("br",{}),"🔄 14-day money-back guarantee"]})})]})})},ne=[{label:"Select Plan",icon:e.jsx(Se,{})},{label:"Billing Details",icon:e.jsx(ee,{})},{label:"Payment Method",icon:e.jsx(ee,{})},{label:"Confirmation",icon:e.jsx(Pe,{})}],Je=()=>{var J,X;const t=Ae(),u=Ie(),{user:j}=ke(),{setLoading:b}=We(),{enqueueSnackbar:v}=Ee(),[g,m]=k.useState(0),[y,d]=k.useState([]),[r,h]=k.useState({tier:((J=u.state)==null?void 0:J.tier)||"PRO",seats:1,isYearly:((X=u.state)==null?void 0:X.isYearly)||!1,billingAddress:{},taxInformation:{},businessProfile:{},acceptTerms:!1,acceptPrivacy:!1}),[o,f]=k.useState(null),[W,L]=k.useState(null);k.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await G.getPricingTiers();d(p)}catch(p){v(p.message||"Failed to load pricing",{variant:"error"})}},x=p=>{h(E=>({...E,...p}))},i=async()=>{if(r.billingAddress.country)try{const p=y.find(q=>q.id===r.tier);if(!p||!p.price)return;const E=p.price*r.seats,F=await G.calculateTax({amount:E,billingAddress:r.billingAddress,userType:r.businessProfile.companyName?"business":"individual"});L(F)}catch(p){console.warn("Tax calculation failed:",p.message)}};k.useEffect(()=>{g>=1&&i()},[r.billingAddress,r.tier,r.seats,g]);const c=()=>{switch(f(null),g){case 0:if(!r.tier){f("Please select a plan");return}break;case 1:const p=G.validateBillingAddress(r.billingAddress);if(!p.valid){f(p.errors.join(", "));return}break}m(p=>p+1)},S=()=>{f(null),m(p=>p-1)},M=async p=>{try{b(!0),f(null);const E=await G.createSubscription({tier:r.tier,seats:r.seats,paymentMethodId:p,billingAddress:r.billingAddress,taxInformation:r.taxInformation,businessProfile:r.businessProfile});v("Subscription created successfully!",{variant:"success"}),t("/dashboard",{state:{subscriptionCreated:!0,subscription:E.subscription}})}catch(E){f(E.message||"Payment failed. Please try again."),v(E.message||"Payment failed",{variant:"error"})}finally{b(!1)}},oe=y.find(p=>p.id===r.tier),le=()=>{switch(g){case 0:return e.jsx(Be,{pricingTiers:y,selectedTier:r.tier,seats:r.seats,isYearly:r.isYearly,onUpdate:x});case 1:return e.jsx(Me,{billingAddress:r.billingAddress,taxInformation:r.taxInformation,businessProfile:r.businessProfile,acceptTerms:r.acceptTerms,acceptPrivacy:r.acceptPrivacy,onUpdate:x});case 2:return e.jsx(Fe,{checkoutData:r,taxCalculation:W,onComplete:M});default:return null}};return j?e.jsxs(s,{sx:{minHeight:"100vh",backgroundColor:"background.default"},children:[e.jsx(re,{}),e.jsx(Q,{maxWidth:"lg",sx:{pt:{xs:10,md:12},pb:8},children:e.jsxs(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx(s,{sx:{mb:4},children:e.jsx(B,{startIcon:e.jsx(Z,{}),onClick:()=>t("/pricing"),sx:{color:"text.secondary","&:hover":{color:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Back to Pricing"})}),e.jsxs(s,{sx:{textAlign:"center",mb:6},children:[e.jsx(n,{variant:"h3",sx:{fontWeight:600,mb:2,background:"linear-gradient(135deg, #ffffff 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Complete Your Purchase"}),e.jsx(n,{variant:"h6",color:"text.secondary",sx:{mb:4,maxWidth:600,mx:"auto"},children:"Join thousands of professionals using BackboneLogic, Inc."})]}),e.jsxs(a,{container:!0,spacing:4,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsxs(N,{elevation:3,sx:{p:4,backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(je,{activeStep:g,sx:{mb:4,"& .MuiStepLabel-root":{color:"text.secondary"},"& .MuiStepLabel-label.Mui-active":{color:"primary.main"},"& .MuiStepLabel-label.Mui-completed":{color:"success.main"}},children:ne.map((p,E)=>e.jsx(fe,{children:e.jsx(Ce,{StepIconComponent:({active:F,completed:q})=>e.jsx(s,{sx:{width:40,height:40,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:q?"success.main":F?"primary.main":"rgba(255, 255, 255, 0.1)",color:q||F?"#000":"text.secondary"},children:p.icon}),children:p.label})},p.label))}),o&&e.jsx(H,{severity:"error",sx:{mb:3},children:o}),e.jsx(s,{sx:{mb:4},children:le()}),g<2&&e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(B,{onClick:S,disabled:g===0,startIcon:e.jsx(Z,{}),children:"Back"}),e.jsx(B,{variant:"contained",onClick:c,endIcon:e.jsx(ve,{}),sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:g===ne.length-1?"Complete Order":"Continue"})]})]})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsx(qe,{selectedTier:oe,seats:r.seats,isYearly:r.isYearly,taxCalculation:W})})]})]})})]}):e.jsxs(s,{sx:{minHeight:"100vh",backgroundColor:"background.default"},children:[e.jsx(re,{}),e.jsx(Q,{maxWidth:"md",sx:{pt:12,pb:8},children:e.jsx(H,{severity:"warning",children:"Please sign in to continue with checkout."})})]})};export{Je as default};
