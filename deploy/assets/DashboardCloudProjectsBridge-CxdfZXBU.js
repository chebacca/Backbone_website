import{ab as i,j as e,b as K,a,T as s,d as l,bb as Z,bc as U,t as ee,C as te,G as x,h as _,aO as ae,aP as re,aQ as se,U as oe,W as h,X as j,Y as v,aR as ne}from"./mui-BeKQ6Vc5.js";import{r as n}from"./vendor-OeuszDaU.js";import{r as c}from"./createSvgIcon-DKetcj1w.js";import{cloudProjectIntegration as le}from"./CloudProjectIntegration-C0DEAOx-.js";import{U as ie}from"./UnifiedProjectCreationDialog-CcOfQ94u.js";import{s as ce}from"./index-BvoI4F7U.js";import"./proxy-rb2B78Gd.js";import"./stripe-B_MuO_-5.js";var D={},de=i;Object.defineProperty(D,"__esModule",{value:!0});var S=D.default=void 0,ue=de(c()),xe=e;S=D.default=(0,ue.default)((0,xe.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"}),"Cloud");var M={},he=i;Object.defineProperty(M,"__esModule",{value:!0});var P=M.default=void 0,je=he(c()),ve=e;P=M.default=(0,je.default)((0,ve.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var I={},fe=i;Object.defineProperty(I,"__esModule",{value:!0});var k=I.default=void 0,pe=fe(c()),me=e;k=I.default=(0,pe.default)((0,me.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage");var z={},ge=i;Object.defineProperty(z,"__esModule",{value:!0});var w=z.default=void 0,be=ge(c()),ye=e;w=z.default=(0,be.default)((0,ye.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"Computer");var R={},Ce=i;Object.defineProperty(R,"__esModule",{value:!0});var $=R.default=void 0,_e=Ce(c()),Se=e;$=R.default=(0,_e.default)((0,Se.jsx)("path",{d:"M8.4 18.2c.38.5.6 1.12.6 1.8 0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3c.44 0 .85.09 1.23.26l1.41-1.77c-.92-1.03-1.29-2.39-1.09-3.69l-2.03-.68c-.54.83-1.46 1.38-2.52 1.38-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3c0 .07 0 .14-.01.21l2.03.68c.64-1.21 1.82-2.09 3.22-2.32V5.91C9.96 5.57 9 4.4 9 3c0-1.66 1.34-3 3-3s3 1.34 3 3c0 1.4-.96 2.57-2.25 2.91v2.16c1.4.23 2.58 1.11 3.22 2.32L18 9.71V9.5c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3c-1.06 0-1.98-.55-2.52-1.37l-2.03.68c.2 1.29-.16 2.65-1.09 3.69l1.41 1.77c.38-.18.79-.27 1.23-.27 1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3c0-.68.22-1.3.6-1.8l-1.41-1.77c-1.35.75-3.01.76-4.37 0z"}),"Hub");var B={},Pe=i;Object.defineProperty(B,"__esModule",{value:!0});var E=B.default=void 0,ke=Pe(c()),we=e;E=B.default=(0,ke.default)((0,we.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");const Te=({onProjectLaunch:f})=>{const[p,N]=n.useState([]),[F,A]=n.useState(!0),[H,m]=n.useState(null),[L,G]=n.useState(0),[Y,g]=n.useState(!1),[$e,De]=n.useState(!1),[r,d]=n.useState(null);n.useEffect(()=>{T()},[]);const T=async()=>{try{m(null),A(!0);const t=await le.getUserProjects();N(t)}catch(t){m((t==null?void 0:t.message)||"Failed to load projects")}finally{A(!1)}},b=async t=>{try{await ce.selectProject(t.id),f==null||f(t.id)}catch(o){console.error("Failed to launch project:",o),m("Failed to launch project")}},q=()=>{g(!0)},Q=async t=>{g(!1),await T();const o=p.find(W=>W.id===t);o&&b(o)},O=t=>{switch(t){case"firestore":return e.jsx(S,{});case"gcs":return e.jsx(k,{});default:return e.jsx(w,{})}},V=t=>t==="standalone"?e.jsx(w,{}):e.jsx($,{}),X=t=>{const o=new Date(t),J=new Date().getTime()-o.getTime(),u=Math.floor(J/(1e3*60*60*24));return u===0?"Today":u===1?"Yesterday":u<7?`${u} days ago`:o.toLocaleDateString()},y=p.filter(t=>t.isActive),C=p.filter(t=>!t.isActive);return e.jsxs(K,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cloud Projects"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Manage your cloud-based projects and collaborate with your team"})]}),e.jsx(l,{variant:"contained",startIcon:e.jsx(P,{}),onClick:q,size:"large",children:"Create New Project"})]}),e.jsx(a,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(Z,{value:L,onChange:(t,o)=>G(o),children:[e.jsx(U,{label:`Active Projects (${y.length})`}),e.jsx(U,{label:`Archived Projects (${C.length})`})]})}),H&&e.jsx(ee,{severity:"error",sx:{mb:3},children:H}),F?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(te,{size:60})}):e.jsx(a,{children:L===0?y.length>0?e.jsx(x,{container:!0,spacing:3,children:y.map(t=>e.jsx(x,{item:!0,xs:12,md:6,lg:4,children:e.jsxs(a,{sx:{p:3,border:1,borderColor:"divider",borderRadius:2,backgroundColor:"background.paper",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:2,transform:"translateY(-2px)"}},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(s,{variant:"h6",component:"h3",sx:{fontWeight:600},children:t.name}),e.jsxs(a,{sx:{display:"flex",gap:1},children:[V(t.applicationMode),O(t.storageBackend)]})]}),t.description&&e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[e.jsx(_,{size:"small",label:t.applicationMode==="standalone"?"Standalone":"Network",variant:"outlined",color:t.applicationMode==="standalone"?"default":"primary"}),e.jsx(_,{size:"small",label:t.storageBackend.toUpperCase(),variant:"outlined"}),t.gcsBucket&&e.jsx(_,{size:"small",label:`GCS: ${t.gcsBucket}`,variant:"outlined"})]}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2},children:["Last accessed: ",X(t.lastAccessedAt)]}),e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(l,{variant:"outlined",size:"small",onClick:()=>d(t),children:"Details"}),e.jsx(l,{variant:"contained",size:"small",onClick:()=>b(t),sx:{ml:"auto"},children:"Launch"})]})]})},t.id))}):e.jsxs(a,{sx:{textAlign:"center",py:8},children:[e.jsx(S,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Active Projects"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your first cloud project to get started with collaboration and cloud storage."}),e.jsx(l,{variant:"contained",startIcon:e.jsx(P,{}),onClick:q,size:"large",children:"Create Your First Project"})]}):C.length>0?e.jsx(x,{container:!0,spacing:3,children:C.map(t=>e.jsx(x,{item:!0,xs:12,md:6,lg:4,children:e.jsxs(a,{sx:{p:3,border:1,borderColor:"divider",borderRadius:2,backgroundColor:"background.paper",opacity:.7},children:[e.jsx(s,{variant:"h6",component:"h3",sx:{fontWeight:600,mb:1},children:t.name}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Archived project"}),e.jsx(l,{variant:"outlined",size:"small",onClick:()=>d(t),children:"View Details"})]})},t.id))}):e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(s,{variant:"body2",color:"text.secondary",children:"No archived projects"})})}),e.jsx(ie,{open:Y,onClose:()=>g(!1),mode:"shared_network",onSuccess:Q}),e.jsxs(ae,{open:!!r,onClose:()=>d(null),maxWidth:"sm",fullWidth:!0,children:[e.jsx(re,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),"Project Details"]})}),e.jsx(se,{children:r&&e.jsxs(oe,{children:[e.jsxs(h,{children:[e.jsx(j,{children:V(r.applicationMode)}),e.jsx(v,{primary:"Mode",secondary:r.applicationMode==="standalone"?"Standalone":"Network"})]}),e.jsxs(h,{children:[e.jsx(j,{children:O(r.storageBackend)}),e.jsx(v,{primary:"Storage Backend",secondary:r.storageBackend})]}),r.gcsBucket&&e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(k,{})}),e.jsx(v,{primary:"GCS Bucket",secondary:r.gcsBucket})]}),r.allowCollaboration&&e.jsxs(h,{children:[e.jsx(j,{children:e.jsx($,{})}),e.jsx(v,{primary:"Collaboration",secondary:`Up to ${r.maxCollaborators} users`})]})]})}),e.jsxs(ne,{children:[e.jsx(l,{onClick:()=>d(null),children:"Close"}),r&&e.jsx(l,{variant:"contained",onClick:()=>{b(r),d(null)},children:"Launch Project"})]})]})]})};export{Te as DashboardCloudProjectsBridge,Te as default};
