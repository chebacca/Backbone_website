import{j as e,b as q,a as r,T as o,d as l,az as B,t as L,aA as H,aB as M,G as T,k as J,l as K,I as R,ak as X,h as w,aC as Z,Z as G,aD as O,aE as Q,aF as V,aG as ee,U as te,W as h,X as j,Y as u,aH as z,aI as F,aJ as se,aK as W}from"./mui-DfoTb_nB.js";import{r as n}from"./vendor-OeuszDaU.js";import{cloudProjectIntegration as ae}from"./CloudProjectIntegration-BcZMMiZo.js";import{U as re,s as oe}from"./UnifiedProjectCreationDialog-DXjIinrw.js";import"./index-CVyAHYZ-.js";import"./stripe-DEPCLfU9.js";import"./proxy-oKNssMSV.js";const ge=({onProjectLaunch:g})=>{const[m,E]=n.useState([]),[v,S]=n.useState(!0),[I,c]=n.useState(null),[i,N]=n.useState(0),[U,p]=n.useState(!1),[ne,ie]=n.useState(!1),[s,d]=n.useState(null);n.useEffect(()=>{k()},[]);const k=async()=>{try{c(null),S(!0);const t=await ae.getUserProjects();E(t)}catch(t){c((t==null?void 0:t.message)||"Failed to load projects")}finally{S(!1)}},f=async t=>{try{await oe.selectProject(t.id),g==null||g(t.id)}catch(a){console.error("Failed to launch project:",a),c("Failed to launch project")}},P=()=>{p(!0)},$=async t=>{p(!1),await k();const a=m.find(D=>D.id===t);a&&f(a)},A=t=>{switch(t){case"firestore":return e.jsx(G,{});case"gcs":return e.jsx(z,{});default:return e.jsx(W,{})}},y=t=>t==="standalone"?e.jsx(W,{}):e.jsx(F,{}),Y=t=>{const a=new Date(t),_=new Date().getTime()-a.getTime(),x=Math.floor(_/(1e3*60*60*24));return x===0?"Today":x===1?"Yesterday":x<7?`${x} days ago`:a.toLocaleDateString()},C=m.filter(t=>t.isActive),b=m.filter(t=>!t.isActive);return e.jsxs(q,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(r,{children:[e.jsx(o,{variant:"h4",component:"h1",fontWeight:"bold",gutterBottom:!0,children:"Cloud Projects"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"Manage your projects with Firebase and Google Cloud Storage integration"})]}),e.jsx(l,{variant:"contained",startIcon:e.jsx(B,{}),onClick:P,size:"large",children:"Create Project"})]}),e.jsx(L,{severity:"info",sx:{mb:3},children:e.jsxs(o,{variant:"body2",children:[e.jsx("strong",{children:"Integrated Startup System:"})," Projects created here will automatically integrate with the unified startup flow and support both standalone and network modes with Firebase/GCS storage options."]})}),I&&e.jsx(L,{severity:"error",sx:{mb:3},onClose:()=>c(null),children:I}),e.jsxs(H,{value:i,onChange:(t,a)=>N(a),sx:{borderBottom:1,borderColor:"divider",mb:3},children:[e.jsx(M,{label:`Active Projects (${C.length})`}),e.jsx(M,{label:`Archived (${b.length})`})]}),e.jsxs(r,{children:[v?e.jsx(r,{sx:{textAlign:"center",py:4},children:e.jsx(o,{children:"Loading projects..."})}):e.jsx(T,{container:!0,spacing:3,children:(i===0?C:b).map(t=>e.jsx(T,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:a=>a.shadows[4]}},children:[e.jsxs(K,{sx:{flexGrow:1},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[y(t.applicationMode),e.jsx(o,{variant:"h6",component:"h3",sx:{ml:1,flexGrow:1},children:t.name}),e.jsx(R,{size:"small",onClick:()=>d(t),children:e.jsx(X,{})})]}),t.description&&e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:t.description}),e.jsxs(r,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[e.jsx(w,{size:"small",icon:y(t.applicationMode),label:t.applicationMode==="standalone"?"Standalone":"Network",color:"primary",variant:"outlined"}),e.jsx(w,{size:"small",icon:A(t.storageBackend),label:t.storageBackend,variant:"outlined"}),t.allowCollaboration&&e.jsx(w,{size:"small",label:`${t.maxCollaborators} users`,variant:"outlined"})]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:["Last accessed: ",Y(t.lastAccessedAt)]})]}),e.jsx(r,{sx:{p:2,pt:0},children:e.jsx(l,{fullWidth:!0,variant:"contained",startIcon:e.jsx(Z,{}),onClick:()=>f(t),disabled:!t.isActive,children:t.isActive?"Launch Project":"Archived"})})]})},t.id))}),!v&&(i===0?C:b).length===0&&e.jsxs(r,{sx:{textAlign:"center",py:8},children:[e.jsx(G,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:i===0?"No active projects yet":"No archived projects"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:i===0?"Create your first cloud project to get started with Firebase and GCS integration":"Archived projects will appear here"}),i===0&&e.jsx(l,{variant:"contained",startIcon:e.jsx(B,{}),onClick:P,size:"large",children:"Create Your First Project"})]})]}),e.jsx(re,{open:U,onClose:()=>p(!1),mode:"shared_network",onSuccess:$}),e.jsxs(O,{open:!!s,onClose:()=>d(null),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Q,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(V,{}),"Project Details"]})}),e.jsx(ee,{children:s&&e.jsxs(te,{children:[e.jsxs(h,{children:[e.jsx(j,{children:y(s.applicationMode)}),e.jsx(u,{primary:"Mode",secondary:s.applicationMode==="standalone"?"Standalone":"Network"})]}),e.jsxs(h,{children:[e.jsx(j,{children:A(s.storageBackend)}),e.jsx(u,{primary:"Storage Backend",secondary:s.storageBackend})]}),s.gcsBucket&&e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(z,{})}),e.jsx(u,{primary:"GCS Bucket",secondary:s.gcsBucket})]}),s.allowCollaboration&&e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(F,{})}),e.jsx(u,{primary:"Collaboration",secondary:`Up to ${s.maxCollaborators} users`})]})]})}),e.jsxs(se,{children:[e.jsx(l,{onClick:()=>d(null),children:"Close"}),s&&e.jsx(l,{variant:"contained",onClick:()=>{f(s),d(null)},children:"Launch Project"})]})]})]})};export{ge as DashboardCloudProjectsBridge,ge as default};
