import{Z as re,_ as ne,j as e,B as a,$ as se,a0 as E,g as y,a1 as ie,A as D,a as S,a2 as U,a3 as ce,a4 as le,a5 as de,M as R,y as c,a6 as K,a7 as xe,a8 as N,d as pe,a9 as H,aa as w,ab as I,ac as he,H as m,ad as _,X as G,ae as Y,J as ge,T as x,af as me,r as v,w as be,x as p,ag as h,z as g,D as O,ah as ue,Y as je}from"./mui-BV3QNocG.js";import{r as f,e as ye,u as fe,b as ke,L as l,O as Ce}from"./vendor-CjD1bmmO.js";import{u as Se}from"./index-B8ul4s1n.js";import"./stripe-DumUHF41.js";const d=280,ve=[{text:"Overview",icon:e.jsx(H,{}),path:"/dashboard"},{text:"Licenses",icon:e.jsx(Y,{}),path:"/dashboard/licenses"},{text:"Cloud Projects",icon:e.jsx(I,{}),path:"/dashboard/cloud-projects"},{text:"Team Management",icon:e.jsx(G,{}),path:"/dashboard/team"},{text:"Billing & Payments",icon:e.jsx(w,{}),path:"/dashboard/billing"},{text:"Support",icon:e.jsx(ge,{}),path:"/dashboard/support"},{text:"Settings",icon:e.jsx(K,{}),path:"/dashboard/settings"}],we=[{text:"Organization",icon:e.jsx(je,{}),path:"/dashboard/organization"},{text:"Security Center",icon:e.jsx(m,{}),path:"/dashboard/security"},{text:"Compliance",icon:e.jsx(m,{}),path:"/dashboard/compliance"}],Ie=[{text:"Overview",icon:e.jsx(H,{}),path:"/accounting#overview"},{text:"Payments",icon:e.jsx(w,{}),path:"/accounting#payments"},{text:"Tax",icon:e.jsx(I,{}),path:"/accounting#tax"},{text:"Filings",icon:e.jsx(he,{}),path:"/accounting#filings"},{text:"KYC",icon:e.jsx(m,{}),path:"/accounting#kyc"},{text:"Compliance",icon:e.jsx(m,{}),path:"/accounting#compliance"},{text:"Terms",icon:e.jsx(_,{}),path:"/accounting#terms"}],Le=[{text:"Users",icon:e.jsx(G,{}),path:"/admin#users"},{text:"Licenses",icon:e.jsx(Y,{}),path:"/admin#licenses"},{text:"Invoices",icon:e.jsx(w,{}),path:"/admin#invoices"},{text:"System Health",icon:e.jsx(m,{}),path:"/admin#system"}],We=()=>{var P;const $=re(),F=ne($.breakpoints.down("lg")),[L,Q]=f.useState(!1),[M,z]=f.useState(null),r=ye(),{user:t,logout:q}=Se(),s=fe(),[J,X]=f.useState(()=>{try{return localStorage.getItem("dismiss_kyc_banner")==="1"}catch{return!1}}),k=String((t==null?void 0:t.role)||"").toUpperCase()==="ACCOUNTING";if(f.useEffect(()=>{k&&r.pathname.startsWith("/dashboard")&&s("/accounting",{replace:!0})},[k,r.pathname,s]),k&&!r.pathname.startsWith("/accounting"))return null;const B=()=>{Q(!L)},Z=n=>{z(n.currentTarget)},b=()=>{z(null)},V=async()=>{try{await q(),b()}catch(n){console.error("Logout failed:",n),b()}},ee=String(((P=t==null?void 0:t.subscription)==null?void 0:P.plan)||"").toUpperCase()==="ENTERPRISE",te=String((t==null?void 0:t.role)||"").toUpperCase()==="ENTERPRISE_ADMIN",T=String((t==null?void 0:t.kycStatus)||"").toUpperCase()!=="COMPLETED",oe=T&&!J,ae=ke.useMemo(()=>{const n=r.pathname.startsWith("/accounting"),u=r.pathname.startsWith("/admin");if(n)return[...Ie];if(u)return[...Le];const o=[...ve];return String((t==null?void 0:t.role)||"").toUpperCase()==="SUPERADMIN"?o.filter(W=>W.path!=="/dashboard/billing"):o},[r.pathname,t==null?void 0:t.role]),A=()=>{var n,u;return e.jsxs(a,{sx:{width:d,height:"100%",backgroundColor:"background.paper"},children:[e.jsxs(a,{component:l,to:"/","aria-label":"Go to Landing Page",sx:{p:3,display:"block",textDecoration:"none",color:"inherit",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",cursor:"pointer","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)"}},children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600,background:"linear-gradient(135deg, #ffffff 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"BackboneLogic, Inc."}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"License Management"})]}),e.jsx(a,{sx:{p:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(me,{sx:{width:48,height:48,bgcolor:"primary.main"},children:((n=t==null?void 0:t.name)==null?void 0:n[0])||((u=t==null?void 0:t.email)==null?void 0:u[0])||"U"}),e.jsxs(a,{sx:{flex:1,minWidth:0},children:[e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600},noWrap:!0,children:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"User"}),e.jsx(x,{variant:"body2",color:"text.secondary",noWrap:!0,children:t==null?void 0:t.email}),(t==null?void 0:t.subscription)&&e.jsx(v,{label:String(t.subscription.plan).toUpperCase(),size:"small",color:String(t.subscription.plan).toUpperCase()==="ENTERPRISE"?"primary":"default",sx:{mt:.5,fontSize:"0.7rem"}})]})]})}),e.jsxs(be,{sx:{px:2,py:1},children:[ae.map(o=>{const[i,C]=String(o.path||"").split("#"),j=!!C?r.pathname===i&&r.hash===`#${C}`:r.pathname===o.path;return e.jsx(a,{children:e.jsx(p,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(h,{component:l,to:o.path,sx:{borderRadius:2,py:1.5,backgroundColor:j?"rgba(0, 212, 255, 0.1)":"transparent",color:j?"primary.main":"text.primary","&:hover":{backgroundColor:j?"rgba(0, 212, 255, 0.15)":"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(c,{sx:{color:"inherit",minWidth:40},children:o.badge?e.jsx(U,{badgeContent:o.badge,color:"primary",children:o.icon}):o.icon}),e.jsx(g,{primary:o.text,sx:{"& .MuiListItemText-primary":{fontWeight:j?600:400,fontSize:"0.95rem"}}}),o.chip&&e.jsx(v,{label:o.chip,size:"small",sx:{fontSize:"0.7rem",height:20,backgroundColor:"rgba(0, 212, 255, 0.2)",color:"primary.main"}})]})})},o.text)}),ee&&te&&e.jsxs(e.Fragment,{children:[e.jsx(O,{sx:{my:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsx(x,{variant:"caption",sx:{px:2,py:1,display:"block",fontWeight:600,color:"text.secondary",textTransform:"uppercase",letterSpacing:1},children:"Enterprise"}),we.map(o=>{const i=r.pathname===o.path;return e.jsx(a,{children:e.jsx(p,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(h,{component:l,to:o.path,sx:{borderRadius:2,py:1.5,backgroundColor:i?"rgba(0, 212, 255, 0.1)":"transparent",color:i?"primary.main":"text.primary","&:hover":{backgroundColor:i?"rgba(0, 212, 255, 0.15)":"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(c,{sx:{color:"inherit",minWidth:40},children:o.icon}),e.jsx(g,{primary:o.text,sx:{"& .MuiListItemText-primary":{fontWeight:i?600:400,fontSize:"0.95rem"}}})]})})},o.text)})]})]}),e.jsxs(a,{sx:{mt:"auto",p:2},children:[e.jsx(O,{sx:{mb:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsx(x,{variant:"caption",sx:{px:2,py:1,display:"block",fontWeight:600,color:"text.secondary",textTransform:"uppercase",letterSpacing:1},children:"Quick Access"}),e.jsx(p,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(h,{component:l,to:"/dashboard/support#analytics",sx:{borderRadius:2,py:1,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(c,{sx:{color:"text.secondary",minWidth:40},children:e.jsx(I,{})}),e.jsx(g,{primary:"Usage Analytics",sx:{"& .MuiListItemText-primary":{fontSize:"0.85rem",color:"text.secondary"}}})]})}),e.jsx(p,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(h,{component:l,to:"/dashboard/support#downloads",sx:{borderRadius:2,py:1,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(c,{sx:{color:"text.secondary",minWidth:40},children:e.jsx(ue,{})}),e.jsx(g,{primary:"Downloads",sx:{"& .MuiListItemText-primary":{fontSize:"0.85rem",color:"text.secondary"}}}),e.jsx(v,{label:"SDK",size:"small",sx:{fontSize:"0.6rem",height:16,backgroundColor:"rgba(0, 212, 255, 0.2)",color:"primary.main"}})]})}),e.jsx(p,{disablePadding:!0,children:e.jsxs(h,{component:l,to:"/dashboard/support#documentation",sx:{borderRadius:2,py:1,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(c,{sx:{color:"text.secondary",minWidth:40},children:e.jsx(_,{})}),e.jsx(g,{primary:"Documentation",sx:{"& .MuiListItemText-primary":{fontSize:"0.85rem",color:"text.secondary"}}})]})})]})]})};return e.jsxs(a,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(se,{position:"fixed",sx:{width:{lg:`calc(100% - ${d}px)`},ml:{lg:`${d}px`},backgroundColor:"background.paper",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"none"},children:e.jsxs(E,{children:[e.jsx(y,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:B,sx:{mr:2,display:{lg:"none"}},children:e.jsx(ie,{})}),F?e.jsx(y,{color:"inherit","aria-label":"Back",onClick:()=>{typeof window<"u"&&window.history.length>1?s(-1):s("/")},sx:{mr:1},children:e.jsx(D,{})}):e.jsx(S,{variant:"outlined",size:"small",startIcon:e.jsx(D,{}),onClick:()=>{typeof window<"u"&&window.history.length>1?s(-1):s("/")},sx:{mr:1,borderColor:"rgba(255, 255, 255, 0.2)",color:"text.primary",textTransform:"none","&:hover":{borderColor:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Back"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(y,{size:"large",color:"inherit",sx:{mr:1},children:e.jsx(U,{badgeContent:T?1:0,color:"primary",children:e.jsx(ce,{})})}),e.jsx(y,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":"profile-menu","aria-haspopup":"true",onClick:Z,color:"inherit",children:e.jsx(le,{})}),e.jsxs(de,{id:"profile-menu",anchorEl:M,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!M,onClose:b,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)",mt:1}},children:[e.jsxs(R,{component:l,to:"/dashboard/settings",onClick:b,children:[e.jsx(c,{children:e.jsx(K,{fontSize:"small"})}),"Settings"]}),e.jsxs(R,{onClick:V,children:[e.jsx(c,{children:e.jsx(xe,{fontSize:"small"})}),"Logout"]})]})]})}),e.jsxs(a,{component:"nav",sx:{width:{lg:d},flexShrink:{lg:0}},children:[e.jsx(N,{variant:"temporary",open:L,onClose:B,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",lg:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:d,backgroundColor:"background.paper",border:"none",borderRight:"1px solid rgba(255, 255, 255, 0.1)"}},children:e.jsx(A,{})}),e.jsx(N,{variant:"permanent",sx:{display:{xs:"none",lg:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:d,backgroundColor:"background.paper",border:"none",borderRight:"1px solid rgba(255, 255, 255, 0.1)"}},open:!0,children:e.jsx(A,{})})]}),e.jsxs(a,{component:"main",sx:{flexGrow:1,width:{lg:`calc(100% - ${d}px)`},backgroundColor:"background.default",minHeight:"100vh"},children:[e.jsx(E,{}),e.jsxs(a,{sx:{p:3},children:[oe&&e.jsx(pe,{severity:"warning",sx:{mb:2},action:e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(S,{size:"small",variant:"contained",onClick:()=>s("/dashboard/settings#compliance"),sx:{color:"#000"},children:"Complete KYC"}),e.jsx(S,{size:"small",onClick:()=>{try{localStorage.setItem("dismiss_kyc_banner","1")}catch{}X(!0)},children:"Dismiss"})]}),children:"Your account requires identity verification (KYC). Complete it in Settings to unlock all features."}),e.jsx(Ce,{})]})]})]})};export{We as DashboardLayout,We as default};
