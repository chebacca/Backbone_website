import{ab as X,ac as J,j as e,a,ad as V,ae as L,I as x,af as Z,s as z,d as u,ag as B,ah as ee,ai as re,aj as oe,a4 as E,X as l,ak as P,al as ae,am as D,t as te,an as ne,ao as se,ap as ie,aa as le,o as ce,aq as de,ar as pe,r as W,T as c,as as xe,h as T,U as he,W as j,at as y,Y as f,D as A,a3 as ge,p as U}from"./mui-C7T4Yh-9.js";import{r as h,h as be,u as me,b as ue,L as d,O as je}from"./vendor-DIxetjBo.js";import{u as ye}from"./index-BFaPik0D.js";import"./stripe-B27ZlBYr.js";const i=280,fe=[{text:"Overview",icon:e.jsx(ne,{}),path:"/dashboard"},{text:"Licenses",icon:e.jsx(se,{}),path:"/dashboard/licenses",badge:3},{text:"Usage Analytics",icon:e.jsx(ie,{}),path:"/dashboard/analytics"},{text:"Billing & Payments",icon:e.jsx(le,{}),path:"/dashboard/billing"},{text:"Team Management",icon:e.jsx(ce,{}),path:"/dashboard/team"},{text:"Downloads",icon:e.jsx(de,{}),path:"/dashboard/downloads",chip:"SDK"},{text:"Documentation",icon:e.jsx(pe,{}),path:"/dashboard/documentation"},{text:"Support",icon:e.jsx(W,{}),path:"/dashboard/support"},{text:"Settings",icon:e.jsx(P,{}),path:"/dashboard/settings"}],ke=[{text:"Organization",icon:e.jsx(ge,{}),path:"/dashboard/organization"},{text:"Security Center",icon:e.jsx(U,{}),path:"/dashboard/security"},{text:"Compliance",icon:e.jsx(U,{}),path:"/dashboard/compliance"}],Le=()=>{var M;const R=X(),N=J(R.breakpoints.down("lg")),[k,O]=h.useState(!1),[C,S]=h.useState(null),p=be(),{user:r,logout:K}=ye(),n=me(),[G,H]=h.useState(()=>{try{return localStorage.getItem("dismiss_kyc_banner")==="1"}catch{return!1}}),g=String((r==null?void 0:r.role)||"").toUpperCase()==="ACCOUNTING";if(h.useEffect(()=>{g&&p.pathname.startsWith("/dashboard")&&n("/accounting",{replace:!0})},[g,p.pathname,n]),g)return null;const v=()=>{O(!k)},_=s=>{S(s.currentTarget)},b=()=>{S(null)},Y=()=>{K(),b()},$=String(((M=r==null?void 0:r.subscription)==null?void 0:M.plan)||"").toUpperCase()==="ENTERPRISE",q=String((r==null?void 0:r.role)||"").toUpperCase()==="ENTERPRISE_ADMIN",w=String((r==null?void 0:r.kycStatus)||"").toUpperCase()!=="COMPLETED",F=w&&!G,Q=ue.useMemo(()=>{const s=[...fe];return String((r==null?void 0:r.role)||"").toUpperCase()==="SUPERADMIN"?s.filter(t=>t.path!=="/dashboard/billing"):s},[r==null?void 0:r.role]),I=()=>{var s,m;return e.jsxs(a,{sx:{width:i,height:"100%",backgroundColor:"background.paper"},children:[e.jsxs(a,{component:d,to:"/","aria-label":"Go to Landing Page",sx:{p:3,display:"block",textDecoration:"none",color:"inherit",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",cursor:"pointer","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)"}},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600,background:"linear-gradient(135deg, #ffffff 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"BackboneLogic, Inc."}),e.jsx(c,{variant:"body2",color:"text.secondary",children:"License Management"})]}),e.jsx(a,{sx:{p:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(xe,{sx:{width:48,height:48,bgcolor:"primary.main"},children:((s=r==null?void 0:r.name)==null?void 0:s[0])||((m=r==null?void 0:r.email)==null?void 0:m[0])||"U"}),e.jsxs(a,{sx:{flex:1,minWidth:0},children:[e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600},noWrap:!0,children:(r==null?void 0:r.name)||(r==null?void 0:r.email)||"User"}),e.jsx(c,{variant:"body2",color:"text.secondary",noWrap:!0,children:r==null?void 0:r.email}),(r==null?void 0:r.subscription)&&e.jsx(T,{label:String(r.subscription.plan).toUpperCase(),size:"small",color:String(r.subscription.plan).toUpperCase()==="ENTERPRISE"?"primary":"default",sx:{mt:.5,fontSize:"0.7rem"}})]})]})}),e.jsxs(he,{sx:{px:2,py:1},children:[Q.map(o=>{const t=p.pathname===o.path;return e.jsx(a,{whileHover:{x:4},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx(j,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(y,{component:d,to:o.path,sx:{borderRadius:2,py:1.5,backgroundColor:t?"rgba(0, 212, 255, 0.1)":"transparent",color:t?"primary.main":"text.primary","&:hover":{backgroundColor:t?"rgba(0, 212, 255, 0.15)":"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(l,{sx:{color:"inherit",minWidth:40},children:o.badge?e.jsx(B,{badgeContent:o.badge,color:"primary",children:o.icon}):o.icon}),e.jsx(f,{primary:o.text,sx:{"& .MuiListItemText-primary":{fontWeight:t?600:400,fontSize:"0.95rem"}}}),o.chip&&e.jsx(T,{label:o.chip,size:"small",sx:{fontSize:"0.7rem",height:20,backgroundColor:"rgba(0, 212, 255, 0.2)",color:"primary.main"}})]})})},o.text)}),$&&q&&e.jsxs(e.Fragment,{children:[e.jsx(A,{sx:{my:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsx(c,{variant:"caption",sx:{px:2,py:1,display:"block",fontWeight:600,color:"text.secondary",textTransform:"uppercase",letterSpacing:1},children:"Enterprise"}),ke.map(o=>{const t=p.pathname===o.path;return e.jsx(a,{whileHover:{x:4},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx(j,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(y,{component:d,to:o.path,sx:{borderRadius:2,py:1.5,backgroundColor:t?"rgba(0, 212, 255, 0.1)":"transparent",color:t?"primary.main":"text.primary","&:hover":{backgroundColor:t?"rgba(0, 212, 255, 0.15)":"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(l,{sx:{color:"inherit",minWidth:40},children:o.icon}),e.jsx(f,{primary:o.text,sx:{"& .MuiListItemText-primary":{fontWeight:t?600:400,fontSize:"0.95rem"}}})]})})},o.text)})]})]}),e.jsxs(a,{sx:{mt:"auto",p:2},children:[e.jsx(A,{sx:{mb:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsx(j,{disablePadding:!0,children:e.jsxs(y,{component:d,to:"/dashboard/support",sx:{borderRadius:2,py:1.5,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[e.jsx(l,{sx:{color:"text.secondary",minWidth:40},children:e.jsx(W,{})}),e.jsx(f,{primary:"Help & Support",sx:{"& .MuiListItemText-primary":{fontSize:"0.95rem",color:"text.secondary"}}})]})})]})]})};return e.jsxs(a,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(V,{position:"fixed",sx:{width:{lg:`calc(100% - ${i}px)`},ml:{lg:`${i}px`},backgroundColor:"background.paper",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"none"},children:e.jsxs(L,{children:[e.jsx(x,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:v,sx:{mr:2,display:{lg:"none"}},children:e.jsx(Z,{})}),N?e.jsx(x,{color:"inherit","aria-label":"Back",onClick:()=>{typeof window<"u"&&window.history.length>1?n(-1):n("/")},sx:{mr:1},children:e.jsx(z,{})}):e.jsx(u,{variant:"outlined",size:"small",startIcon:e.jsx(z,{}),onClick:()=>{typeof window<"u"&&window.history.length>1?n(-1):n("/")},sx:{mr:1,borderColor:"rgba(255, 255, 255, 0.2)",color:"text.primary",textTransform:"none","&:hover":{borderColor:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Back"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(x,{size:"large",color:"inherit",sx:{mr:1},children:e.jsx(B,{badgeContent:w?1:0,color:"primary",children:e.jsx(ee,{})})}),e.jsx(x,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":"profile-menu","aria-haspopup":"true",onClick:_,color:"inherit",children:e.jsx(re,{})}),e.jsxs(oe,{id:"profile-menu",anchorEl:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!C,onClose:b,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)",mt:1}},children:[e.jsxs(E,{component:d,to:"/dashboard/settings",onClick:b,children:[e.jsx(l,{children:e.jsx(P,{fontSize:"small"})}),"Settings"]}),e.jsxs(E,{onClick:Y,children:[e.jsx(l,{children:e.jsx(ae,{fontSize:"small"})}),"Logout"]})]})]})}),e.jsxs(a,{component:"nav",sx:{width:{lg:i},flexShrink:{lg:0}},children:[e.jsx(D,{variant:"temporary",open:k,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",lg:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:i,backgroundColor:"background.paper",border:"none",borderRight:"1px solid rgba(255, 255, 255, 0.1)"}},children:e.jsx(I,{})}),e.jsx(D,{variant:"permanent",sx:{display:{xs:"none",lg:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:i,backgroundColor:"background.paper",border:"none",borderRight:"1px solid rgba(255, 255, 255, 0.1)"}},open:!0,children:e.jsx(I,{})})]}),e.jsxs(a,{component:"main",sx:{flexGrow:1,width:{lg:`calc(100% - ${i}px)`},backgroundColor:"background.default",minHeight:"100vh"},children:[e.jsx(L,{}),e.jsxs(a,{sx:{p:3},children:[F&&e.jsx(te,{severity:"warning",sx:{mb:2},action:e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(u,{size:"small",variant:"contained",onClick:()=>n("/dashboard/settings#compliance"),sx:{color:"#000"},children:"Complete KYC"}),e.jsx(u,{size:"small",onClick:()=>{try{localStorage.setItem("dismiss_kyc_banner","1")}catch{}H(!0)},children:"Dismiss"})]}),children:"Your account requires identity verification (KYC). Complete it in Settings to unlock all features."}),e.jsx(je,{})]})]})]})};export{Le as DashboardLayout,Le as default};
