import{j as e,a,T as s,G as r,as as q,aw as D,ax as le,at as Y,k as C,l as P,H as de,h as Z,d as u,m as xe,U as he,W as me,X as ue,au as ee,Y as pe,D as je,c as ge,n as Q,ay as ye,az as be,ai as fe,p as ve,aa as Ee}from"./mui-BeS5Ygr6.js";import{r as n,L as p,b as _}from"./vendor-OeuszDaU.js";import{u as we,c as S,e as I}from"./index-CH8M_k4Y.js";import"./stripe-TmI1MsK7.js";var A=(t=>(t.BASIC="BASIC",t.PRO="PRO",t.ENTERPRISE="ENTERPRISE",t))(A||{}),se=(t=>(t.PENDING="PENDING",t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED",t.EXPIRED="EXPIRED",t.REVOKED="REVOKED",t))(se||{});const j=({title:t,value:g,icon:x,trend:o,color:h="primary"})=>e.jsx(a,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsx(C,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},transition:"all 0.3s ease"},children:e.jsxs(P,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(ee,{sx:{bgcolor:`${h}.main`,width:48,height:48},children:x}),o&&e.jsx(Z,{label:`${o.direction==="up"?"+":"-"}${o.value}%`,size:"small",color:o.direction==="up"?"success":"error",sx:{fontWeight:600}})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:g}),e.jsx(s,{variant:"body2",color:"text.secondary",children:t})]})})}),J=[{type:"license",title:"License Activated",description:"Pro license activated for john.doe@company.com",timestamp:"2 hours ago",status:"success"},{type:"payment",title:"Payment Successful",description:"Monthly subscription renewed for $297.00",timestamp:"1 day ago",status:"success"},{type:"user",title:"Team Member Added",description:"Sarah Johnson added to development team",timestamp:"2 days ago",status:"success"},{type:"security",title:"Security Alert",description:"New device login detected from New York",timestamp:"3 days ago",status:"warning"}],Se=t=>{switch(t){case"license":return e.jsx(q,{});case"payment":return e.jsx(Ee,{});case"user":return e.jsx(D,{});case"security":return e.jsx(ve,{});default:return e.jsx(fe,{})}},Ie=t=>{switch(t){case"success":return"success.main";case"warning":return"warning.main";case"error":return"error.main";default:return"text.secondary"}},Re=()=>{var N;const{user:t}=we(),[g,x]=n.useState(!0),[o,h]=n.useState(0),[m,R]=n.useState(0),[te,y]=n.useState(0),[ae,b]=n.useState(0),[f,L]=n.useState(""),[T,k]=n.useState(""),[M,W]=n.useState(!1),[re,U]=n.useState(0);n.useEffect(()=>{let i=!0;return(async()=>{var z,O,F,V,$,B,K;try{x(!0);const[w,ne,ie]=await Promise.all([S.get(I.subscriptions.mySubscriptions()),S.get(I.licenses.analytics()),S.get(I.licenses.myLicenses())]);if(!i)return;const G=((O=(z=ie.data)==null?void 0:z.data)==null?void 0:O.licenses)??[],oe=G.length,ce=G.filter(d=>d.status===se.ACTIVE).length;R(oe),h(ce);const H=((V=(F=w.data)==null?void 0:F.data)==null?void 0:V.subscriptions)??[],c=H.find(d=>d.status==="ACTIVE")||H[0];if(c){if(L((($=c.tier)==null?void 0:$.toLowerCase())??""),c.currentPeriodEnd){const d=new Date(c.currentPeriodEnd),X=Math.max(0,Math.ceil((d.getTime()-Date.now())/(1e3*60*60*24)));k(`${X} day${X===1?"":"s"}`)}W(c.tier===A.ENTERPRISE),c.tier===A.ENTERPRISE&&U(c.seats||0)}const l=(B=ne.data)==null?void 0:B.data;if(l)if(l.summary){y(l.summary.totalEvents??0);const d=((K=l.summary.eventTypes)==null?void 0:K.SDK_DOWNLOAD_REQUEST)||0;b(d)}else l.totalEvents!==void 0&&(y(l.totalEvents),b(l.downloads||0))}catch(w){if(console.error("Error fetching dashboard data:",w),!i)return;h(0),R(0),y(0),b(0),L(""),k(""),W(!1),U(0)}finally{i&&x(!1)}})(),()=>{i=!1}},[]);const v=n.useMemo(()=>m<=0?0:Math.round(o/m*100),[o,m]);return g?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(s,{children:"Loading dashboard..."})}):e.jsxs(a,{children:[e.jsx(a,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(a,{sx:{mb:4},children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:["Welcome back, ",((N=t==null?void 0:t.name)==null?void 0:N.split(" ")[0])||"User","! ðŸ‘‹"]}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Here's what's happening with your BackboneLogic, Inc. licenses"})]})}),e.jsxs(r,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(r,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Active Licenses",value:o,icon:e.jsx(q,{}),trend:{value:12,direction:"up"},color:"primary"})}),M&&e.jsx(r,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Team Members",value:re,icon:e.jsx(D,{}),trend:{value:8,direction:"up"},color:"secondary"})}),e.jsx(r,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Monthly Usage",value:te,icon:e.jsx(le,{}),trend:{value:5,direction:"up"},color:"success"})}),e.jsx(r,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Total Downloads",value:ae.toLocaleString(),icon:e.jsx(Y,{}),trend:{value:23,direction:"up"},color:"warning"})})]}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,lg:8,children:e.jsx(a,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:e.jsx(C,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:e.jsxs(P,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"License Overview"}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsxs(a,{sx:{mb:3},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"License Utilization"}),e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[v,"%"]})]}),e.jsx(de,{variant:"determinate",value:v,sx:{height:8,borderRadius:4,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:v>80?"linear-gradient(90deg, #ff9800 0%, #f44336 100%)":"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[o," of ",m," licenses in use"]})]}),e.jsxs(a,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Current Plan"}),e.jsx(Z,{label:f&&f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()||"â€”",color:"primary",sx:{fontWeight:600,mb:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:T?`Next renewal in ${T}`:"â€”"})]})]}),e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Quick Actions"}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:[M&&e.jsx(u,{variant:"outlined",startIcon:e.jsx(D,{}),component:p,to:"/dashboard/team",sx:{justifyContent:"flex-start"},children:"Add Team Member"}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(Y,{}),component:p,to:"/dashboard/downloads",sx:{justifyContent:"flex-start"},children:"Download SDK"}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(xe,{}),component:p,to:"/dashboard/billing",sx:{justifyContent:"flex-start"},children:"Upgrade Plan"})]})]})]})]})})})}),e.jsx(r,{item:!0,xs:12,lg:4,children:e.jsx(a,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:e.jsx(C,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",height:"fit-content"},children:e.jsxs(P,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Recent Activity"}),e.jsx(he,{dense:!0,children:J.map((i,E)=>e.jsxs(_.Fragment,{children:[e.jsxs(me,{sx:{px:0},children:[e.jsx(ue,{sx:{minWidth:40},children:e.jsx(ee,{sx:{width:32,height:32,bgcolor:Ie(i.status),fontSize:"1rem"},children:Se(i.type)})}),e.jsx(pe,{primary:i.title,secondary:e.jsxs(_.Fragment,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:i.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:i.timestamp})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),E<J.length-1&&e.jsx(je,{variant:"inset",component:"li",sx:{borderColor:"rgba(255,255,255,0.1)"}})]},E))}),e.jsx(u,{variant:"text",size:"small",sx:{mt:2,color:"primary.main"},component:p,to:"/dashboard/activity",children:"View All Activity"})]})})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(a,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs(ge,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"System Status"}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{sx:{color:"success.main",fontSize:20}}),e.jsxs(a,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"License Server"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{sx:{color:"success.main",fontSize:20}}),e.jsxs(a,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"API Services"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ye,{sx:{color:"warning.main",fontSize:20}}),e.jsxs(a,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"Maintenance"}),e.jsx(s,{variant:"caption",color:"warning.main",children:"Scheduled 2AM EST"})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(be,{sx:{color:"primary.main",fontSize:20}}),e.jsxs(a,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"SDK Version"}),e.jsx(s,{variant:"caption",color:"primary.main",children:"v14.2.1 Available"})]})]})})]})]})})})]})]})};export{Re as default};
