import{j as e,a as r,T as s,A as pe,ax as ye,ay as fe,G as a,at as ne,az as D,aA as q,aB as be,$ as ve,l as ee,m as se,F as Ee,i as Pe,d as h,au as Se,n as we,X as Ce,Y as Ae,Z as Ie,av as De,_ as Re,O as Le,c as Te,p as te,aC as ke,aD as Me,aj as Ue,r as Ne,ac as We}from"./mui-Bfk3EfzY.js";import{u as Oe,r as n,L as m,b as re}from"./vendor-OeuszDaU.js";import{u as ze,c as C,d as A,e as I}from"./index-DXZxefko.js";import{M as j}from"./MetricCard-D0ZJbbIx.js";import{S as Be}from"./StorageWarningCard-C5BrfZKy.js";import"./stripe-CV5HSYwT.js";var R=(t=>(t.BASIC="BASIC",t.PRO="PRO",t.ENTERPRISE="ENTERPRISE",t))(R||{}),ie=(t=>(t.PENDING="PENDING",t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED",t.EXPIRED="EXPIRED",t.REVOKED="REVOKED",t))(ie||{});const ae=[{type:"license",title:"License Activated",description:"Pro license activated for john.doe@company.com",timestamp:"2 hours ago",status:"success"},{type:"payment",title:"Payment Successful",description:"Monthly subscription renewed for $297.00",timestamp:"1 day ago",status:"success"},{type:"user",title:"Team Member Added",description:"Sarah Johnson added to development team",timestamp:"2 days ago",status:"success"},{type:"security",title:"Security Alert",description:"New device login detected from New York",timestamp:"3 days ago",status:"warning"}],Fe=t=>{switch(t){case"license":return e.jsx(ne,{});case"payment":return e.jsx(We,{});case"user":return e.jsx(D,{});case"security":return e.jsx(Ne,{});default:return e.jsx(Ue,{})}},Ve=t=>{switch(t){case"success":return"success.main";case"warning":return"warning.main";case"error":return"error.main";default:return"text.secondary"}},qe=()=>{var V;const{user:t}=ze(),g=Oe(),[oe,L]=n.useState(!0),[x,T]=n.useState(0),[u,k]=n.useState(0),[Ke,p]=n.useState(0),[$e,y]=n.useState(0),[f,M]=n.useState(""),[U,N]=n.useState(""),[W,O]=n.useState(!1),[ce,z]=n.useState(!1),[le,B]=n.useState(null),[de,F]=n.useState(0),[xe,b]=n.useState(0),[ue,v]=n.useState(0),[Ge,He]=n.useState(!1);n.useEffect(()=>{let o=!0;return(async()=>{var K,$,G,H,X,_,Q;try{L(!0);const[S,he,me,w]=await Promise.all([C.get(I.subscriptions.mySubscriptions()),C.get(I.licenses.analytics()),C.get(I.licenses.myLicenses()),A.getUserProjects()]);if(!o)return;const Y=(($=(K=me.data)==null?void 0:K.data)==null?void 0:$.licenses)??[],je=Y.length,ge=Y.filter(i=>i.status===ie.ACTIVE).length;k(je),T(ge);const J=((H=(G=S.data)==null?void 0:G.data)==null?void 0:H.subscriptions)??[],c=J.find(i=>i.status==="ACTIVE")||J[0];if(c){if(M(((X=c.tier)==null?void 0:X.toLowerCase())??""),c.currentPeriodEnd){const i=new Date(c.currentPeriodEnd),d=Math.max(0,Math.ceil((i.getTime()-Date.now())/(1e3*60*60*24)));N(`${d} day${d===1?"":"s"}`)}O(c.tier===R.ENTERPRISE),c.tier===R.ENTERPRISE&&F(c.seats||0)}const l=(_=he.data)==null?void 0:_.data;if(l)if(l.summary){p(l.summary.totalEvents??0);const i=((Q=l.summary.eventTypes)==null?void 0:Q.SDK_DOWNLOAD_REQUEST)||0;y(i)}else l.totalEvents!==void 0&&(p(l.totalEvents),y(l.downloads||0));try{if(w){const i=w.length,d=w.filter(Z=>Z.isActive&&!Z.isArchived).length;b(i),v(d)}}catch(i){console.error("Error processing cloud projects data:",i),b(0),v(0)}try{const i=A.isEdge(),d=A.getBaseUrlIfEdge();z(i),B(d)}catch(i){console.warn("Edge mode detection failed:",i),z(!1),B(null)}}catch(S){if(console.error("Error fetching dashboard data:",S),!o)return;T(0),k(0),p(0),y(0),M(""),N(""),O(!1),F(0),b(0),v(0)}finally{o&&L(!1)}})(),()=>{o=!1}},[]);const E=n.useMemo(()=>u<=0?0:Math.round(x/u*100),[x,u]);return oe?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(s,{children:"Loading dashboard..."})}):e.jsxs(r,{children:[ce&&e.jsxs(pe,{severity:"info",sx:{mb:3},icon:e.jsx(fe,{}),children:[e.jsx(ye,{children:"Edge Mode Active"}),"Running in offline LAN mode via Edge Hub at ",le||"local network",". Projects and data are stored locally and will sync when cloud connectivity returns."]}),e.jsx(r,{children:e.jsxs(r,{sx:{mb:4},children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:["Welcome back, ",((V=t==null?void 0:t.name)==null?void 0:V.split(" ")[0])||"User","! ðŸ‘‹"]}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Here's what's happening with your BackboneLogic, Inc. licenses"})]})}),e.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Active Licenses",value:x,icon:e.jsx(ne,{}),trend:{value:12,direction:"up"},color:"primary"})}),W&&e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(j,{title:"Team Members",value:de,icon:e.jsx(D,{}),trend:{value:8,direction:"up"},color:"secondary"})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(q,{title:"Click to view Cloud Projects",arrow:!0,children:e.jsx("div",{children:e.jsx(j,{title:"Total Projects",value:xe,icon:e.jsx(be,{}),trend:{value:15,direction:"up"},color:"success",onClick:()=>g("/dashboard/cloud-projects")})})})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(q,{title:"Click to view Cloud Projects",arrow:!0,children:e.jsx("div",{children:e.jsx(j,{title:"Active Projects",value:ue,icon:e.jsx(ve,{}),trend:{value:8,direction:"up"},color:"warning",onClick:()=>g("/dashboard/cloud-projects")})})})})]}),e.jsx(Be,{onUpgrade:()=>g("/pricing"),compact:!0}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsx(r,{children:e.jsx(ee,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:e.jsxs(se,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"License Overview"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"License Utilization"}),e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[E,"%"]})]}),e.jsx(Ee,{variant:"determinate",value:E,sx:{height:8,borderRadius:4,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:E>80?"linear-gradient(90deg, #ff9800 0%, #f44336 100%)":"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[x," of ",u," licenses in use"]})]}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Current Plan"}),e.jsx(Pe,{label:f&&f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()||"â€”",color:"primary",sx:{fontWeight:600,mb:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:U?`Next renewal in ${U}`:"â€”"})]})]}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Quick Actions"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[W&&e.jsx(h,{variant:"outlined",startIcon:e.jsx(D,{}),component:m,to:"/dashboard/team",sx:{justifyContent:"flex-start"},children:"Add Team Member"}),e.jsx(h,{variant:"outlined",startIcon:e.jsx(Se,{}),component:m,to:"/dashboard/downloads",sx:{justifyContent:"flex-start"},children:"Download SDK"}),e.jsx(h,{variant:"outlined",startIcon:e.jsx(we,{}),component:m,to:"/dashboard/billing",sx:{justifyContent:"flex-start"},children:"Upgrade Plan"})]})]})]})]})})})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsx(r,{children:e.jsx(ee,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",height:"fit-content"},children:e.jsxs(se,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Recent Activity"}),e.jsx(Ce,{dense:!0,children:ae.map((o,P)=>e.jsxs(re.Fragment,{children:[e.jsxs(Ae,{sx:{px:0},children:[e.jsx(Ie,{sx:{minWidth:40},children:e.jsx(De,{sx:{width:32,height:32,bgcolor:Ve(o.status),fontSize:"1rem"},children:Fe(o.type)})}),e.jsx(Re,{primary:o.title,secondary:e.jsxs(re.Fragment,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:o.timestamp})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),P<ae.length-1&&e.jsx(Le,{variant:"inset",component:"li",sx:{borderColor:"rgba(255,255,255,0.1)"}})]},P))}),e.jsx(h,{variant:"text",size:"small",sx:{mt:2,color:"primary.main"},component:m,to:"/dashboard/activity",children:"View All Activity"})]})})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(r,{children:e.jsxs(Te,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"System Status"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{sx:{color:"success.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"License Server"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{sx:{color:"success.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"API Services"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{sx:{color:"warning.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"Maintenance"}),e.jsx(s,{variant:"caption",color:"warning.main",children:"Scheduled 2AM EST"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Me,{sx:{color:"primary.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"SDK Version"}),e.jsx(s,{variant:"caption",color:"primary.main",children:"v14.2.1 Available"})]})]})})]})]})})})]})]})};export{qe as default};
