import{j as e,a as r,T as s,G as a,at as te,ax as L,ay as ue,$ as me,l as T,m as k,F as je,i as re,d as p,au as pe,n as ge,X as be,Y as ye,Z as fe,av as ae,_ as ve,O as Ee,c as Pe,p as q,az as Se,aA as we,aj as Ie,r as Ae,ac as Ce}from"./mui-78jFsJL8.js";import{u as De,r as n,L as g,b as ee}from"./vendor-OeuszDaU.js";import{u as Re,c as D,d as Le,e as R}from"./index-BS3nD-jO.js";import"./stripe-D5S-2E52.js";var M=(t=>(t.BASIC="BASIC",t.PRO="PRO",t.ENTERPRISE="ENTERPRISE",t))(M||{}),ne=(t=>(t.PENDING="PENDING",t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED",t.EXPIRED="EXPIRED",t.REVOKED="REVOKED",t))(ne||{});const b=({title:t,value:u,icon:y,trend:c,color:x="primary",onClick:h})=>e.jsx(r,{children:e.jsx(T,{onClick:h,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",cursor:h?"pointer":"default","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},transition:"all 0.3s ease"},children:e.jsxs(k,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(ae,{sx:{bgcolor:`${x}.main`,width:48,height:48},children:y}),c&&e.jsx(re,{label:`${c.direction==="up"?"+":"-"}${c.value}%`,size:"small",color:c.direction==="up"?"success":"error",sx:{fontWeight:600}})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:u}),e.jsx(s,{variant:"body2",color:"text.secondary",children:t})]})})}),se=[{type:"license",title:"License Activated",description:"Pro license activated for john.doe@company.com",timestamp:"2 hours ago",status:"success"},{type:"payment",title:"Payment Successful",description:"Monthly subscription renewed for $297.00",timestamp:"1 day ago",status:"success"},{type:"user",title:"Team Member Added",description:"Sarah Johnson added to development team",timestamp:"2 days ago",status:"success"},{type:"security",title:"Security Alert",description:"New device login detected from New York",timestamp:"3 days ago",status:"warning"}],Te=t=>{switch(t){case"license":return e.jsx(te,{});case"payment":return e.jsx(Ce,{});case"user":return e.jsx(L,{});case"security":return e.jsx(Ae,{});default:return e.jsx(Ie,{})}},ke=t=>{switch(t){case"success":return"success.main";case"warning":return"warning.main";case"error":return"error.main";default:return"text.secondary"}},Fe=()=>{var $;const{user:t}=Re(),u=De(),[y,c]=n.useState(!0),[x,h]=n.useState(0),[m,N]=n.useState(0),[Me,f]=n.useState(0),[Ne,v]=n.useState(0),[E,W]=n.useState(""),[U,O]=n.useState(""),[z,F]=n.useState(!1),[ie,V]=n.useState(0),[oe,P]=n.useState(0),[ce,S]=n.useState(0);n.useEffect(()=>{let o=!0;return(async()=>{var B,K,G,X,Y,_,H;try{c(!0);const[A,le,de,C]=await Promise.all([D.get(R.subscriptions.mySubscriptions()),D.get(R.licenses.analytics()),D.get(R.licenses.myLicenses()),Le.getUserProjects()]);if(!o)return;const Q=((K=(B=de.data)==null?void 0:B.data)==null?void 0:K.licenses)??[],xe=Q.length,he=Q.filter(i=>i.status===ne.ACTIVE).length;N(xe),h(he);const J=((X=(G=A.data)==null?void 0:G.data)==null?void 0:X.subscriptions)??[],l=J.find(i=>i.status==="ACTIVE")||J[0];if(l){if(W(((Y=l.tier)==null?void 0:Y.toLowerCase())??""),l.currentPeriodEnd){const i=new Date(l.currentPeriodEnd),j=Math.max(0,Math.ceil((i.getTime()-Date.now())/(1e3*60*60*24)));O(`${j} day${j===1?"":"s"}`)}F(l.tier===M.ENTERPRISE),l.tier===M.ENTERPRISE&&V(l.seats||0)}const d=(_=le.data)==null?void 0:_.data;if(d)if(d.summary){f(d.summary.totalEvents??0);const i=((H=d.summary.eventTypes)==null?void 0:H.SDK_DOWNLOAD_REQUEST)||0;v(i)}else d.totalEvents!==void 0&&(f(d.totalEvents),v(d.downloads||0));try{if(C){const i=C.length,j=C.filter(Z=>Z.isActive&&!Z.isArchived).length;P(i),S(j)}}catch(i){console.error("Error processing cloud projects data:",i),P(0),S(0)}}catch(A){if(console.error("Error fetching dashboard data:",A),!o)return;h(0),N(0),f(0),v(0),W(""),O(""),F(!1),V(0),P(0),S(0)}finally{o&&c(!1)}})(),()=>{o=!1}},[]);const w=n.useMemo(()=>m<=0?0:Math.round(x/m*100),[x,m]);return y?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(s,{children:"Loading dashboard..."})}):e.jsxs(r,{children:[e.jsx(r,{children:e.jsxs(r,{sx:{mb:4},children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:["Welcome back, ",(($=t==null?void 0:t.name)==null?void 0:$.split(" ")[0])||"User","! ðŸ‘‹"]}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Here's what's happening with your BackboneLogic, Inc. licenses"})]})}),e.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(b,{title:"Active Licenses",value:x,icon:e.jsx(te,{}),trend:{value:12,direction:"up"},color:"primary"})}),z&&e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(b,{title:"Team Members",value:ie,icon:e.jsx(L,{}),trend:{value:8,direction:"up"},color:"secondary"})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(b,{title:"Total Projects",value:oe,icon:e.jsx(ue,{}),trend:{value:15,direction:"up"},color:"success",onClick:()=>u("/dashboard/cloud-projects")})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(b,{title:"Active Projects",value:ce,icon:e.jsx(me,{}),trend:{value:8,direction:"up"},color:"warning",onClick:()=>u("/dashboard/cloud-projects")})})]}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsx(r,{children:e.jsx(T,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:e.jsxs(k,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"License Overview"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"License Utilization"}),e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[w,"%"]})]}),e.jsx(je,{variant:"determinate",value:w,sx:{height:8,borderRadius:4,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:w>80?"linear-gradient(90deg, #ff9800 0%, #f44336 100%)":"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[x," of ",m," licenses in use"]})]}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Current Plan"}),e.jsx(re,{label:E&&E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()||"â€”",color:"primary",sx:{fontWeight:600,mb:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:U?`Next renewal in ${U}`:"â€”"})]})]}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Quick Actions"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[z&&e.jsx(p,{variant:"outlined",startIcon:e.jsx(L,{}),component:g,to:"/dashboard/team",sx:{justifyContent:"flex-start"},children:"Add Team Member"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(pe,{}),component:g,to:"/dashboard/downloads",sx:{justifyContent:"flex-start"},children:"Download SDK"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(ge,{}),component:g,to:"/dashboard/billing",sx:{justifyContent:"flex-start"},children:"Upgrade Plan"})]})]})]})]})})})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsx(r,{children:e.jsx(T,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",height:"fit-content"},children:e.jsxs(k,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Recent Activity"}),e.jsx(be,{dense:!0,children:se.map((o,I)=>e.jsxs(ee.Fragment,{children:[e.jsxs(ye,{sx:{px:0},children:[e.jsx(fe,{sx:{minWidth:40},children:e.jsx(ae,{sx:{width:32,height:32,bgcolor:ke(o.status),fontSize:"1rem"},children:Te(o.type)})}),e.jsx(ve,{primary:o.title,secondary:e.jsxs(ee.Fragment,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:o.timestamp})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),I<se.length-1&&e.jsx(Ee,{variant:"inset",component:"li",sx:{borderColor:"rgba(255,255,255,0.1)"}})]},I))}),e.jsx(p,{variant:"text",size:"small",sx:{mt:2,color:"primary.main"},component:g,to:"/dashboard/activity",children:"View All Activity"})]})})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(r,{children:e.jsxs(Pe,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"System Status"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{color:"success.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"License Server"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{color:"success.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"API Services"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Se,{sx:{color:"warning.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"Maintenance"}),e.jsx(s,{variant:"caption",color:"warning.main",children:"Scheduled 2AM EST"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{sx:{color:"primary.main",fontSize:20}}),e.jsxs(r,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"SDK Version"}),e.jsx(s,{variant:"caption",color:"primary.main",children:"v14.2.1 Available"})]})]})})]})]})})})]})]})};export{Fe as default};
