import{j as e,a as t,T as s,G as a,at as ae,ax as k,ay as se,az as me,$ as je,l as M,m as N,F as pe,i as ne,d as y,au as ge,n as ye,X as be,Y as fe,Z as ve,av as we,_ as Ee,O as Pe,c as Se,p as te,aA as Ie,aB as Ce,o as Ae,aj as De,r as Re,ac as Le}from"./mui-hG33YaAY.js";import{u as Te,r as n,L as b,b as W}from"./vendor-OeuszDaU.js";import{u as ke,c as L,d as Me,e as T}from"./index-DHwWAd-q.js";import"./stripe-DT00o_RN.js";var U=(r=>(r.BASIC="BASIC",r.PRO="PRO",r.ENTERPRISE="ENTERPRISE",r))(U||{}),ie=(r=>(r.PENDING="PENDING",r.ACTIVE="ACTIVE",r.SUSPENDED="SUSPENDED",r.EXPIRED="EXPIRED",r.REVOKED="REVOKED",r))(ie||{});const f=({title:r,value:m,icon:v,trend:u,color:l="primary",onClick:c})=>{const h=p=>{switch(p){case"success":return"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)";case"warning":return"linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%)";case"secondary":return"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)";case"primary":default:return"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},j=p=>{switch(p){case"success":return"0 8px 25px rgba(17, 153, 142, 0.3)";case"warning":return"0 8px 25px rgba(252, 74, 26, 0.3)";case"secondary":return"0 8px 25px rgba(79, 172, 254, 0.3)";case"primary":default:return"0 8px 25px rgba(102, 126, 234, 0.3)"}};return e.jsx(t,{children:e.jsx(M,{onClick:c,sx:{background:h(l),color:"white",height:"100%",cursor:c?"pointer":"default",transition:"transform 0.2s ease-in-out","&:hover":{transform:c?"translateY(-4px)":"translateY(-2px)",boxShadow:c?j(l):"0 8px 32px rgba(0,0,0,0.3)"}},children:e.jsxs(N,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(t,{sx:{width:48,height:48,borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:W.cloneElement(v,{sx:{fontSize:24,color:"white"}})}),u&&e.jsx(ne,{label:`${u.direction==="up"?"+":"-"}${u.value}%`,size:"small",sx:{fontWeight:600,backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","& .MuiChip-label":{color:"white"}}})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:1,color:"white"},children:m}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",sx:{opacity:.9,color:"white"},children:r}),c&&e.jsx(Ae,{sx:{fontSize:16,opacity:.6,color:"white",transition:"all 0.2s ease","&:hover":{opacity:1,transform:"translateX(2px)"}}})]})]})})})},re=[{type:"license",title:"License Activated",description:"Pro license activated for john.doe@company.com",timestamp:"2 hours ago",status:"success"},{type:"payment",title:"Payment Successful",description:"Monthly subscription renewed for $297.00",timestamp:"1 day ago",status:"success"},{type:"user",title:"Team Member Added",description:"Sarah Johnson added to development team",timestamp:"2 days ago",status:"success"},{type:"security",title:"Security Alert",description:"New device login detected from New York",timestamp:"3 days ago",status:"warning"}],Ne=r=>{switch(r){case"license":return e.jsx(ae,{});case"payment":return e.jsx(Le,{});case"user":return e.jsx(k,{});case"security":return e.jsx(Re,{});default:return e.jsx(De,{})}},We=r=>{switch(r){case"success":return"success.main";case"warning":return"warning.main";case"error":return"error.main";default:return"text.secondary"}},Ge=()=>{var G;const{user:r}=ke(),m=Te(),[v,u]=n.useState(!0),[l,c]=n.useState(0),[h,j]=n.useState(0),[p,w]=n.useState(0),[Ue,E]=n.useState(0),[P,z]=n.useState(""),[O,F]=n.useState(""),[V,B]=n.useState(!1),[oe,$]=n.useState(0),[ce,S]=n.useState(0),[le,I]=n.useState(0),[ze,Oe]=n.useState(!1);n.useEffect(()=>{let o=!0;return(async()=>{var K,X,Y,H,_,Q,J;try{u(!0);const[D,de,xe,R]=await Promise.all([L.get(T.subscriptions.mySubscriptions()),L.get(T.licenses.analytics()),L.get(T.licenses.myLicenses()),Me.getUserProjects()]);if(!o)return;const Z=((X=(K=xe.data)==null?void 0:K.data)==null?void 0:X.licenses)??[],ue=Z.length,he=Z.filter(i=>i.status===ie.ACTIVE).length;j(ue),c(he);const q=((H=(Y=D.data)==null?void 0:Y.data)==null?void 0:H.subscriptions)??[],d=q.find(i=>i.status==="ACTIVE")||q[0];if(d){if(z(((_=d.tier)==null?void 0:_.toLowerCase())??""),d.currentPeriodEnd){const i=new Date(d.currentPeriodEnd),g=Math.max(0,Math.ceil((i.getTime()-Date.now())/(1e3*60*60*24)));F(`${g} day${g===1?"":"s"}`)}B(d.tier===U.ENTERPRISE),d.tier===U.ENTERPRISE&&$(d.seats||0)}const x=(Q=de.data)==null?void 0:Q.data;if(x)if(x.summary){w(x.summary.totalEvents??0);const i=((J=x.summary.eventTypes)==null?void 0:J.SDK_DOWNLOAD_REQUEST)||0;E(i)}else x.totalEvents!==void 0&&(w(x.totalEvents),E(x.downloads||0));try{if(R){const i=R.length,g=R.filter(ee=>ee.isActive&&!ee.isArchived).length;S(i),I(g)}}catch(i){console.error("Error processing cloud projects data:",i),S(0),I(0)}}catch(D){if(console.error("Error fetching dashboard data:",D),!o)return;c(0),j(0),w(0),E(0),z(""),F(""),B(!1),$(0),S(0),I(0)}finally{o&&u(!1)}})(),()=>{o=!1}},[]);const C=n.useMemo(()=>h<=0?0:Math.round(l/h*100),[l,h]);return v?e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(s,{children:"Loading dashboard..."})}):e.jsxs(t,{children:[e.jsx(t,{children:e.jsxs(t,{sx:{mb:4},children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700,mb:1},children:["Welcome back, ",((G=r==null?void 0:r.name)==null?void 0:G.split(" ")[0])||"User","! ðŸ‘‹"]}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Here's what's happening with your BackboneLogic, Inc. licenses"})]})}),e.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(f,{title:"Active Licenses",value:l,icon:e.jsx(ae,{}),trend:{value:12,direction:"up"},color:"primary"})}),V&&e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(f,{title:"Team Members",value:oe,icon:e.jsx(k,{}),trend:{value:8,direction:"up"},color:"secondary"})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(se,{title:"Click to view Cloud Projects",arrow:!0,children:e.jsx("div",{children:e.jsx(f,{title:"Total Projects",value:ce,icon:e.jsx(me,{}),trend:{value:15,direction:"up"},color:"success",onClick:()=>m("/dashboard/cloud-projects")})})})}),e.jsx(a,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(se,{title:"Click to view Cloud Projects",arrow:!0,children:e.jsx("div",{children:e.jsx(f,{title:"Active Projects",value:le,icon:e.jsx(je,{}),trend:{value:8,direction:"up"},color:"warning",onClick:()=>m("/dashboard/cloud-projects")})})})})]}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsx(t,{children:e.jsx(M,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"License Overview"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(t,{sx:{mb:3},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"License Utilization"}),e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[C,"%"]})]}),e.jsx(pe,{variant:"determinate",value:C,sx:{height:8,borderRadius:4,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:C>80?"linear-gradient(90deg, #ff9800 0%, #f44336 100%)":"linear-gradient(90deg, #00d4ff 0%, #667eea 100%)"}}}),e.jsxs(s,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[l," of ",h," licenses in use"]})]}),e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Current Plan"}),e.jsx(ne,{label:P&&P.charAt(0).toUpperCase()+P.slice(1).toLowerCase()||"â€”",color:"primary",sx:{fontWeight:600,mb:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:O?`Next renewal in ${O}`:"â€”"})]})]}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Quick Actions"}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:1},children:[V&&e.jsx(y,{variant:"outlined",startIcon:e.jsx(k,{}),component:b,to:"/dashboard/team",sx:{justifyContent:"flex-start"},children:"Add Team Member"}),e.jsx(y,{variant:"outlined",startIcon:e.jsx(ge,{}),component:b,to:"/dashboard/downloads",sx:{justifyContent:"flex-start"},children:"Download SDK"}),e.jsx(y,{variant:"outlined",startIcon:e.jsx(ye,{}),component:b,to:"/dashboard/billing",sx:{justifyContent:"flex-start"},children:"Upgrade Plan"})]})]})]})]})})})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsx(t,{children:e.jsx(M,{sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",height:"fit-content"},children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Recent Activity"}),e.jsx(be,{dense:!0,children:re.map((o,A)=>e.jsxs(W.Fragment,{children:[e.jsxs(fe,{sx:{px:0},children:[e.jsx(ve,{sx:{minWidth:40},children:e.jsx(we,{sx:{width:32,height:32,bgcolor:We(o.status),fontSize:"1rem"},children:Ne(o.type)})}),e.jsx(Ee,{primary:o.title,secondary:e.jsxs(W.Fragment,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:o.timestamp})]}),primaryTypographyProps:{variant:"body2",fontWeight:500}})]}),A<re.length-1&&e.jsx(Pe,{variant:"inset",component:"li",sx:{borderColor:"rgba(255,255,255,0.1)"}})]},A))}),e.jsx(y,{variant:"text",size:"small",sx:{mt:2,color:"primary.main"},component:b,to:"/dashboard/activity",children:"View All Activity"})]})})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(t,{children:e.jsxs(Se,{sx:{p:3,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"System Status"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{sx:{color:"success.main",fontSize:20}}),e.jsxs(t,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"License Server"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{sx:{color:"success.main",fontSize:20}}),e.jsxs(t,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"API Services"}),e.jsx(s,{variant:"caption",color:"success.main",children:"Operational"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{sx:{color:"warning.main",fontSize:20}}),e.jsxs(t,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"Maintenance"}),e.jsx(s,{variant:"caption",color:"warning.main",children:"Scheduled 2AM EST"})]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ce,{sx:{color:"primary.main",fontSize:20}}),e.jsxs(t,{children:[e.jsx(s,{variant:"body2",sx:{fontWeight:500},children:"SDK Version"}),e.jsx(s,{variant:"caption",color:"primary.main",children:"v14.2.1 Available"})]})]})})]})]})})})]})]})};export{Ge as default};
