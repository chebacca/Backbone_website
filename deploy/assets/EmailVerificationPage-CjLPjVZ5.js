import{j as e,a,b as T,c as V,T as i,t as m,w as W,S as p,d as s,R as k,O as I,n as z,A as P,C as B}from"./mui-DiYnqcGn.js";import{u as F,i as L,h as Y,r as x}from"./vendor-DIxetjBo.js";import{u as D,a as U,b as q,c as C}from"./index-CCGQgEqV.js";import{m as G}from"./proxy-B_KpOrcW.js";import"./stripe-CQkQ71Kl.js";const Q=()=>{var v;const n=F(),{token:f}=L(),E=Y(),{user:t,refreshUser:S}=D(),{setLoading:H}=U(),{enqueueSnackbar:o}=q(),[g,h]=x.useState("pending"),[u,c]=x.useState(null),[l,b]=x.useState(!1),r=(v=E.state)==null?void 0:v.selectedTier;x.useEffect(()=>{f&&w(f)},[f]);const w=async d=>{try{h("verifying"),c(null),await C.verifyEmail(d),await S(),h("success"),o("Email verified successfully!",{variant:"success"}),setTimeout(()=>{r?n("/checkout",{state:{tier:r}}):n("/dashboard")},3e3)}catch(j){h("error"),c(j.message||"Email verification failed"),o(j.message||"Email verification failed",{variant:"error"})}},y=async()=>{try{b(!0),c(null),await C.resendVerification(),o("Verification email sent! Please check your inbox.",{variant:"success"})}catch(d){c(d.message||"Failed to resend verification email"),o(d.message||"Failed to resend verification email",{variant:"error"})}finally{b(!1)}},A=()=>{r?n("/checkout",{state:{tier:r}}):n("/dashboard")},R=()=>{switch(g){case"verifying":return e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(B,{size:60,sx:{mb:3,color:"primary.main"}}),e.jsx(i,{variant:"h5",sx:{fontWeight:600,mb:2},children:"Verifying Your Email"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Please wait while we verify your email address..."})]});case"success":return e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(z,{sx:{fontSize:80,color:"success.main",mb:3}}),e.jsx(i,{variant:"h5",sx:{fontWeight:600,mb:2},children:"Email Verified Successfully!"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:"Your email has been verified. You can now access all features of BackboneLogic, Inc."}),r&&e.jsxs(m,{severity:"info",sx:{mb:3},children:["Redirecting to checkout for your selected ",r," plan..."]}),e.jsx(s,{variant:"contained",size:"large",endIcon:e.jsx(P,{}),onClick:A,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:r?"Continue to Checkout":"Go to Dashboard"})]});case"error":return e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(I,{sx:{fontSize:80,color:"error.main",mb:3}}),e.jsx(i,{variant:"h5",sx:{fontWeight:600,mb:2},children:"Verification Failed"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:4},children:u||"The verification link is invalid or has expired."}),e.jsxs(p,{spacing:2,direction:{xs:"column",sm:"row"},justifyContent:"center",children:[e.jsx(s,{variant:"contained",startIcon:e.jsx(k,{}),onClick:y,disabled:l,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:l?"Sending...":"Resend Verification"}),e.jsx(s,{variant:"outlined",onClick:()=>n("/login"),children:"Back to Login"})]})]});default:return e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(W,{sx:{fontSize:80,color:"primary.main",mb:3}}),e.jsx(i,{variant:"h5",sx:{fontWeight:600,mb:2},children:"Check Your Email"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"We've sent a verification link to:"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:4,color:"primary.main"},children:t==null?void 0:t.email}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Click the link in your email to verify your account. The link will expire in 24 hours."}),r&&e.jsxs(m,{severity:"info",sx:{mb:4},children:["After verifying your email, you'll be redirected to checkout for your selected ",r," plan."]}),e.jsxs(p,{spacing:2,children:[e.jsx(s,{variant:"contained",size:"large",startIcon:e.jsx(k,{}),onClick:y,disabled:l,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:l?"Sending...":"Resend Verification Email"}),e.jsx(s,{variant:"text",onClick:()=>n("/login"),sx:{color:"text.secondary"},children:"Use a different email address"})]}),e.jsxs(a,{sx:{mt:4,p:2,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:2},children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.jsx("strong",{children:"Didn't receive the email?"})}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["â€¢ Check your spam/junk folder",e.jsx("br",{}),"â€¢ Make sure ",t==null?void 0:t.email," is correct",e.jsx("br",{}),"â€¢ Try resending the verification email"]})]})]})}};return e.jsx(a,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",alignItems:"center",py:{xs:4,md:0}},children:e.jsx(T,{maxWidth:"sm",children:e.jsx(G.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(V,{elevation:10,sx:{p:{xs:4,md:6},backgroundColor:"background.paper",borderRadius:3,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(a,{sx:{textAlign:"center",mb:4},children:[e.jsx(a,{sx:{width:60,height:60,borderRadius:2,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#000"},children:"D"})}),e.jsx(i,{variant:"h4",sx:{fontWeight:600,mb:1,background:"linear-gradient(135deg, #ffffff 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Email Verification"})]}),u&&g!=="error"&&e.jsx(m,{severity:"error",sx:{mb:3},children:u}),R(),e.jsx(a,{sx:{mt:4,pt:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:e.jsx(i,{variant:"caption",color:"text.secondary",children:"ðŸ”’ Your account security is our top priority"})})]})})})})};export{Q as default};
//# sourceMappingURL=EmailVerificationPage-CjLPjVZ5.js.map
