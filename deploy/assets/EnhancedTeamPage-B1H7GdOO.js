var ct=Object.defineProperty;var dt=(f,s,t)=>s in f?ct(f,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[s]=t;var D=(f,s,t)=>dt(f,typeof s!="symbol"?s+"":s,t);import{j as e,B as j,T as v,G as b,aR as ut,d as ce,ai as de,a as C,cd as pt,ce as ht,c7 as mt,al as Re,p as gt,am as ft,bP as xt,t as ee,aU as vt,aV as U,ab as jt,aW as yt,a6 as wt,cf as te,e as ue,I as St,be as At,cg as bt,bC as Tt,bD as pe,ch as Ct,ci as It,cj as Mt,ck as Dt,v as he,ar as $,as as W,at as G,M as T,aB as me,c as ge,aC as fe,aD as xe,aE as z,aF as h,l as Oe,aG as ve,af as kt,r as k,g as Lt,aH as Bt,cl as Et,C as Rt,i as Ot,R as Pt,b8 as Ft,aI as Pe,aJ as Fe,aK as Ve,cm as Vt,aL as ze}from"./mui-DUnBgZhO.js";import{r as g}from"./vendor-CjD1bmmO.js";import{u as zt}from"./notistack.esm-Ca-E78ev.js";import{b as Nt,c as _t,a as Ut,u as $t,d as Wt,i as Gt,j as Ht,k as Qt,g as Jt,h as Yt,l as Kt}from"./useStreamlinedData-hO-tpu8q.js";import{M as se}from"./MetricCard-BiOGvHso.js";import"./UnifiedDataService-BvykrS3g.js";import"./index-CdzHX5NW.js";import"./stripe-BqXXkzvQ.js";import"./index.esm-DdZh2hq1.js";import"./index.esm-Dkmm1Qng.js";import"./FirestoreCollectionManager-BWiFX8i9.js";import"./firebase-Bmlv-H5h.js";import"./index.esm-e-DuI42t.js";const B=class B{static getInstance(){return B.instance||(B.instance=new B),B.instance}async exportTeamMembers(s,t={}){const{includeInactive:n=!1,includePassword:a=!1,includeAuditInfo:i=!1,customFields:r=[]}=t;let d=s;n||(d=s.filter(c=>c.status==="active"));const u=["Email","First Name","Last Name","Role","Status","Department","Position","Phone","License Type","Organization ID","Created At","Last Active"];a&&u.splice(4,0,"Password"),i&&u.push("Created By","Updated At","Updated By"),r.forEach(c=>{u.includes(c)||u.push(c)});const o=d.map(c=>{const x=[c.email||"",c.firstName||"",c.lastName||"",c.role||"",c.status||"",c.department||"",c.position||"",c.phone||"",c.licenseType||"",c.organizationId||"",c.createdAt?new Date(c.createdAt).toISOString():"",c.lastActive?new Date(c.lastActive).toISOString():""];return a&&x.splice(4,0,c.password||""),i&&x.push(c.createdBy||"",c.updatedAt?new Date(c.updatedAt).toISOString():"",c.updatedBy||""),r.forEach(M=>{const S=c[M];x.push(typeof S=="string"?S:S?String(S):"")}),x});return[u.join(","),...o.map(c=>c.map(x=>typeof x=="string"&&x.includes(",")?`"${x.replace(/"/g,'""')}"`:x).join(","))].join(`
`)}async importTeamMembers(s,t,n){const a=s.split(`
`).filter(c=>c.trim());if(a.length<2)return{success:!1,totalRows:0,successfulImports:0,failedImports:0,errors:[{row:0,field:"general",value:"",error:"CSV file is empty or invalid"}],importedMembers:[]};const i=this.parseCSVLine(a[0]),r=a.slice(1),d=[],u=[],p=["Email","First Name","Last Name","Role"].filter(c=>!i.includes(c));if(p.length>0)return{success:!1,totalRows:r.length,successfulImports:0,failedImports:r.length,errors:[{row:0,field:"headers",value:p.join(", "),error:`Missing required headers: ${p.join(", ")}`}],importedMembers:[]};for(let c=0;c<r.length;c++){const x=r[c],M=this.parseCSVLine(x);n&&n(Math.round((c+1)/r.length*100));try{const S=this.validateAndCreateTeamMember(M,i,t,c+2);S&&u.push(S)}catch(S){d.push({row:c+2,field:"general",value:x,error:S instanceof Error?S.message:"Unknown error"})}}return{success:d.length===0,totalRows:r.length,successfulImports:u.length,failedImports:d.length,errors:d,importedMembers:u}}parseCSVLine(s){const t=[];let n="",a=!1;for(let i=0;i<s.length;i++){const r=s[i];r==='"'?a&&s[i+1]==='"'?(n+='"',i++):a=!a:r===","&&!a?(t.push(n.trim()),n=""):n+=r}return t.push(n.trim()),t}validateAndCreateTeamMember(s,t,n,a){var x,M,S,N,Q,ne,ie,re;const i=[],r={};t.forEach((J,Te)=>{r[J.toLowerCase()]=s[Te]||""});const d=(x=r.email)==null?void 0:x.trim(),u=(M=r["first name"])==null?void 0:M.trim(),o=(S=r["last name"])==null?void 0:S.trim(),p=(N=r.role)==null?void 0:N.trim();if(d?this.isValidEmail(d)||i.push({row:a,field:"email",value:d,error:"Invalid email format"}):i.push({row:a,field:"email",value:"",error:"Email is required"}),u||i.push({row:a,field:"first name",value:"",error:"First name is required"}),o||i.push({row:a,field:"last name",value:"",error:"Last name is required"}),p?["admin","member","viewer","owner"].includes(p.toLowerCase())||i.push({row:a,field:"role",value:p,error:"Invalid role. Must be admin, member, viewer, or owner"}):i.push({row:a,field:"role",value:"",error:"Role is required"}),i.length>0)throw new Error(`Validation errors: ${i.map(J=>J.error).join(", ")}`);return{id:"",email:d.toLowerCase(),firstName:u,lastName:o,role:p.toLowerCase(),status:"pending",organization:{id:n,name:"",tier:"BASIC"},organizationId:n,department:((Q=r.department)==null?void 0:Q.trim())||"",position:((ne=r.position)==null?void 0:ne.trim())||"",phone:((ie=r.phone)==null?void 0:ie.trim())||"",licenseType:((re=r["license type"])==null?void 0:re.trim())||"BASIC",assignedProjects:[],joinedAt:new Date,createdAt:new Date,updatedAt:new Date,lastActive:r["last active"]?new Date(r["last active"]):void 0}}isValidEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}downloadCSV(s,t="team-members.csv"){const n=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),i=URL.createObjectURL(n);a.setAttribute("href",i),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}generateTemplate(){const s=["Email","First Name","Last Name","Role","Status","Department","Position","Phone","License Type"],t=["john.doe@example.com","John","Doe","member","active","Engineering","Software Developer","+1-555-0123","PROFESSIONAL"];return[s.join(","),t.join(",")].join(`
`)}};D(B,"instance");let ye=B;const je=ye.getInstance(),E=class E{static getInstance(){return E.instance||(E.instance=new E),E.instance}filterTeamMembers(s,t,n,a){let i=[...s];t.search&&(i=this.applySearchFilter(i,t.search)),t.role&&t.role.length>0&&(i=i.filter(c=>t.role.includes(c.role))),t.status&&t.status.length>0&&(i=i.filter(c=>t.status.includes(c.status))),t.department&&t.department.length>0&&(i=i.filter(c=>c.department&&t.department.includes(c.department))),t.licenseType&&t.licenseType.length>0&&(i=i.filter(c=>c.licenseType&&t.licenseType.includes(c.licenseType))),t.dateRange&&(i=this.applyDateRangeFilter(i,t.dateRange)),t.hasLicense!==void 0&&(i=i.filter(c=>t.hasLicense?!!c.licenseType:!c.licenseType)),t.isActive!==void 0&&(i=i.filter(c=>t.isActive?c.status==="active":c.status!=="active")),t.customFields&&(i=this.applyCustomFieldFilters(i,t.customFields)),n&&(i=this.applySorting(i,n));const r=s.length,d=i.length;let u=i,o=!1,p={currentPage:1,totalPages:1,pageSize:d,totalItems:d};if(a){const c=(a.page-1)*a.pageSize,x=c+a.pageSize;u=i.slice(c,x),o=x<d,p={currentPage:a.page,totalPages:Math.ceil(d/a.pageSize),pageSize:a.pageSize,totalItems:d}}return{filteredMembers:u,totalCount:r,filteredCount:d,hasMore:o,pageInfo:p}}applySearchFilter(s,t){const n=t.toLowerCase();return s.filter(a=>[a.email,a.firstName,a.lastName,a.department,a.position,a.phone,a.role,a.status,a.licenseType].some(r=>r&&r.toLowerCase().includes(n)))}applyDateRangeFilter(s,t){return t?s.filter(n=>{const a=n[t.field];if(!a)return!1;const i=new Date(a),r=t.start?new Date(t.start):null,d=t.end?new Date(t.end):null;return!(r&&i<r||d&&i>d)}):s}applyCustomFieldFilters(s,t){return s.filter(n=>Object.entries(t).every(([a,i])=>{const r=n[a];return i==null?r===i:typeof i=="string"?r&&String(r).toLowerCase().includes(i.toLowerCase()):r===i}))}applySorting(s,t){return s.sort((n,a)=>{const i=n[t.field],r=a[t.field];if(i===void 0&&r===void 0)return 0;if(i===void 0)return t.direction==="asc"?1:-1;if(r===void 0)return t.direction==="asc"?-1:1;let d=0;return typeof i=="string"&&typeof r=="string"?d=i.localeCompare(r):i instanceof Date&&r instanceof Date?d=i.getTime()-r.getTime():typeof i=="number"&&typeof r=="number"?d=i-r:d=String(i).localeCompare(String(r)),t.direction==="asc"?d:-d})}getFilterOptions(s){const t=[...new Set(s.map(r=>r.role))].sort(),n=[...new Set(s.map(r=>r.status))].sort(),a=[...new Set(s.map(r=>r.department).filter(Boolean))].sort(),i=[...new Set(s.map(r=>r.licenseType).filter(Boolean))].sort();return{roles:t,statuses:n,departments:a,licenseTypes:i,totalMembers:s.length,activeMembers:s.filter(r=>r.status==="active").length,pendingMembers:s.filter(r=>r.status==="pending").length,licensedMembers:s.filter(r=>r.licenseType).length}}getQuickFilters(){return{all:{label:"All Members",criteria:{}},active:{label:"Active Members",criteria:{isActive:!0}},pending:{label:"Pending Invites",criteria:{status:["pending"]}},admins:{label:"Administrators",criteria:{role:["admin","owner"]}},licensed:{label:"Licensed Members",criteria:{hasLicense:!0}},recent:{label:"Recently Added",criteria:{dateRange:{field:"createdAt",start:new Date(Date.now()-30*24*60*60*1e3)}}}}}};D(E,"instance");let we=E;const Xt=we.getInstance(),R=class R{static getInstance(){return R.instance||(R.instance=new R),R.instance}generateAnalytics(s){return{overview:this.calculateOverviewStats(s),trends:this.calculateTrends(s),departmentBreakdown:this.calculateDepartmentStats(s),roleDistribution:this.calculateRoleDistribution(s),licenseUtilization:this.calculateLicenseStats(s),activityMetrics:this.calculateActivityMetrics(s),growthMetrics:this.calculateGrowthMetrics(s),topPerformers:this.identifyTopPerformers(s),recommendations:this.generateRecommendations(s)}}calculateOverviewStats(s){const t=s.length,n=s.filter(c=>c.status==="active").length,a=s.filter(c=>c.status==="pending").length,i=s.filter(c=>c.status==="suspended").length,r=s.filter(c=>c.licenseType&&c.licenseType!=="BASIC").length,d=t-r,u=s.map(c=>this.calculateActivityScore(c)),o=u.reduce((c,x)=>c+x,0)/u.length,p=this.calculateRetentionRate(s);return{totalMembers:t,activeMembers:n,pendingMembers:a,suspendedMembers:i,licensedMembers:r,unlicensedMembers:d,averageActivityScore:Math.round(o*100)/100,memberRetentionRate:Math.round(p*100)/100}}calculateTrends(s){const t=[],n=new Date;for(let a=11;a>=0;a--){const i=new Date(n.getFullYear(),n.getMonth()-a,1),r=new Date(n.getFullYear(),n.getMonth()-a+1,1),d=s.filter(p=>{const c=new Date(p.createdAt);return c>=i&&c<r}),u=s.filter(p=>{const c=p.lastActive?new Date(p.lastActive):null;return c&&c>=i&&c<r}),o=s.filter(p=>p.licenseType&&p.licenseType!=="BASIC"&&new Date(p.createdAt)<=r);t.push({period:i.toLocaleDateString("en-US",{month:"short",year:"numeric"}),membersAdded:d.length,membersRemoved:0,netGrowth:d.length,activeMembers:u.length,licenseUtilization:o.length})}return t}calculateDepartmentStats(s){const t=new Map;return s.forEach(n=>{const a=n.department||"Unassigned";t.has(a)||t.set(a,[]),t.get(a).push(n)}),Array.from(t.entries()).map(([n,a])=>{const i=a.filter(o=>o.status==="active").length,r=a.map(o=>this.calculateActivityScore(o)),d=r.reduce((o,p)=>o+p,0)/r.length,u=a.filter(o=>o.licenseType&&o.licenseType!=="BASIC").length;return{department:n,memberCount:a.length,activeMembers:i,averageActivityScore:Math.round(d*100)/100,licenseUtilization:Math.round(u/a.length*100),growthRate:0}}).sort((n,a)=>a.memberCount-n.memberCount)}calculateRoleDistribution(s){const t=new Map;s.forEach(a=>{t.has(a.role)||t.set(a.role,[]),t.get(a.role).push(a)});const n=s.length;return Array.from(t.entries()).map(([a,i])=>{const r=i.map(o=>this.calculateActivityScore(o)),d=r.reduce((o,p)=>o+p,0)/r.length,u=i.filter(o=>o.licenseType&&o.licenseType!=="BASIC").length;return{role:a,count:i.length,percentage:Math.round(i.length/n*100),averageActivityScore:Math.round(d*100)/100,licenseUtilization:Math.round(u/i.length*100)}}).sort((a,i)=>i.count-a.count)}calculateLicenseStats(s){const t=s.length,n=s.filter(d=>d.licenseType&&d.licenseType!=="BASIC").length,a=t-n,i=Math.round(n/t*100),r={};return s.forEach(d=>{d.licenseType&&(r[d.licenseType]=(r[d.licenseType]||0)+1)}),{totalLicenses:t,assignedLicenses:n,availableLicenses:a,utilizationRate:i,byType:r,projectedNeeds:Math.max(0,Math.ceil(t*.1))}}calculateActivityMetrics(s){const n=s.filter(o=>o.lastActive).map(o=>new Date(o.lastActive)),a=n.length>0?new Date(n.reduce((o,p)=>o+p.getTime(),0)/n.length):new Date,i=s.map(o=>({member:o,score:this.calculateActivityScore(o)})),r=i.sort((o,p)=>p.score-o.score).slice(0,5).map(o=>`${o.member.firstName} ${o.member.lastName}`),d=i.filter(o=>o.score<.3).map(o=>`${o.member.firstName} ${o.member.lastName}`),u={"High (0.8-1.0)":i.filter(o=>o.score>=.8).length,"Medium (0.5-0.8)":i.filter(o=>o.score>=.5&&o.score<.8).length,"Low (0.3-0.5)":i.filter(o=>o.score>=.3&&o.score<.5).length,"Inactive (0.0-0.3)":i.filter(o=>o.score<.3).length};return{averageLastActive:a,mostActiveMembers:r,inactiveMembers:d,activityScoreDistribution:u}}calculateGrowthMetrics(s){const t=new Date,n=new Date(t.getTime()-30*24*60*60*1e3);new Date(t.getTime()-90*24*60*60*1e3),new Date(t.getTime()-365*24*60*60*1e3);const a=s.filter(d=>new Date(d.createdAt)>=n).length,i=s.filter(d=>{const u=new Date(d.createdAt);return u>=new Date(n.getTime()-30*24*60*60*1e3)&&u<n}).length,r=i>0?(a-i)/i*100:0;return{monthlyGrowthRate:Math.round(r*100)/100,quarterlyGrowthRate:0,yearlyGrowthRate:0,projectedGrowth:Math.round(s.length*(r/100)),churnRate:0}}identifyTopPerformers(s){return s.map(t=>({memberId:t.id,name:`${t.firstName} ${t.lastName}`,email:t.email,score:this.calculateActivityScore(t),metrics:{activityScore:this.calculateActivityScore(t),projectCount:0,licenseUtilization:t.licenseType&&t.licenseType!=="BASIC"?1:0}})).sort((t,n)=>n.score-t.score).slice(0,10)}generateRecommendations(s){const t=[],n=this.calculateOverviewStats(s),a=Math.round(n.licensedMembers/n.totalMembers*100);return a<50&&t.push({type:"license",priority:"high",title:"Low License Utilization",description:`Only ${a}% of team members have licenses assigned.`,action:"Review license assignments and consider upgrading more members.",impact:"Improved productivity and feature access for team members."}),n.averageActivityScore<.5&&t.push({type:"activity",priority:"medium",title:"Low Team Activity",description:`Average activity score is ${n.averageActivityScore.toFixed(2)}.`,action:"Engage with inactive members and provide training.",impact:"Increased team engagement and productivity."}),n.totalMembers<10&&t.push({type:"growth",priority:"low",title:"Small Team Size",description:`Team has ${n.totalMembers} members. Consider expanding.`,action:"Invite more team members to scale operations.",impact:"Better resource distribution and team resilience."}),t}calculateActivityScore(s){let t=0;if(s.status==="active"&&(t+=.3),s.lastActive){const n=(Date.now()-new Date(s.lastActive).getTime())/864e5;n<7?t+=.4:n<30?t+=.2:n<90&&(t+=.1)}return s.licenseType&&s.licenseType!=="BASIC"&&(t+=.2),s.department&&s.position&&(t+=.1),Math.min(t,1)}calculateRetentionRate(s){const t=s.filter(a=>a.status==="active").length,n=s.length;return n>0?t/n:0}};D(R,"instance");let Se=R;const Zt=Se.getInstance(),O=class O{constructor(){D(this,"auditLogs",[])}static getInstance(){return O.instance||(O.instance=new O),O.instance}logAction(s,t,n,a,i,r,d,u){const o={id:this.generateAuditId(),timestamp:new Date,action:s,actorId:t,actorEmail:n,targetMemberId:a,targetMemberEmail:i,changes:r,metadata:{...d,additionalContext:{...d.additionalContext,...u}}};this.auditLogs.push(o),console.log("ðŸ” [Audit] Team member action logged:",o)}logMemberCreation(s,t,n,a){const i=[{field:"email",oldValue:null,newValue:n.email,changeType:"added"},{field:"firstName",oldValue:null,newValue:n.firstName,changeType:"added"},{field:"lastName",oldValue:null,newValue:n.lastName,changeType:"added"},{field:"role",oldValue:null,newValue:n.role,changeType:"added"},{field:"status",oldValue:null,newValue:n.status,changeType:"added"}];this.logAction("member_created",s,t,n.id,n.email,i,a)}logMemberUpdate(s,t,n,a,i,r,d){const u=[];["firstName","lastName","email","role","status","department","position","phone","licenseType"].forEach(p=>{const c=i[p],x=r[p];c!==x&&u.push({field:p,oldValue:c,newValue:x,changeType:c===void 0?"added":x===void 0?"removed":"modified"})}),u.length>0&&this.logAction("member_updated",s,t,n,a,u,d)}logMemberDeletion(s,t,n,a){const i=[{field:"status",oldValue:n.status,newValue:"deleted",changeType:"modified"}];this.logAction("member_deleted",s,t,n.id,n.email,i,a)}logPasswordReset(s,t,n,a,i){const r=[{field:"password",oldValue:"[REDACTED]",newValue:"[RESET]",changeType:"modified"}];this.logAction("member_password_reset",s,t,n,a,r,i)}logLicenseAssignment(s,t,n,a,i,r,d){const u=[{field:"licenseType",oldValue:i||"BASIC",newValue:r,changeType:"modified"}];this.logAction("member_license_assigned",s,t,n,a,u,d)}logBulkOperation(s,t,n,a,i,r){const d=[{field:"bulk_operation",oldValue:null,newValue:n,changeType:"added"},{field:"affected_members",oldValue:null,newValue:a.length,changeType:"added"},...i];this.logAction("bulk_operation",s,t,a[0]||"multiple","multiple",d,r)}queryAuditLogs(s){let t=[...this.auditLogs];return s.memberId&&(t=t.filter(n=>n.targetMemberId===s.memberId)),s.actorId&&(t=t.filter(n=>n.actorId===s.actorId)),s.action&&(t=t.filter(n=>n.action===s.action)),s.startDate&&(t=t.filter(n=>n.timestamp>=s.startDate)),s.endDate&&(t=t.filter(n=>n.timestamp<=s.endDate)),s.organizationId&&(t=t.filter(n=>n.metadata.organizationId===s.organizationId)),t.sort((n,a)=>a.timestamp.getTime()-n.timestamp.getTime()),s.offset&&(t=t.slice(s.offset)),s.limit&&(t=t.slice(0,s.limit)),t}getAuditSummary(s,t=30){const n=new Date(Date.now()-t*24*60*60*1e3),a=this.auditLogs.filter(o=>o.metadata.organizationId===s&&o.timestamp>=n),i={};a.forEach(o=>{i[o.action]=(i[o.action]||0)+1});const r={};a.forEach(o=>{r[o.actorId]||(r[o.actorId]={actorEmail:o.actorEmail,count:0}),r[o.actorId].count++});const d=Object.entries(r).map(([o,p])=>({actorId:o,actorEmail:p.actorEmail,actionCount:p.count})).sort((o,p)=>p.actionCount-o.actionCount).slice(0,5),u=this.calculateComplianceScore(a);return{totalActions:a.length,actionsByType:i,recentActivity:a.slice(0,10),topActors:d,complianceScore:u}}calculateComplianceScore(s){if(s.length===0)return 100;let t=100;const n=s.filter(i=>i.action==="member_deleted"||i.action==="member_suspended"||i.action==="member_password_reset");t-=n.length*5;const a=s.filter(i=>i.action==="bulk_operation");return t-=a.length*2,Math.max(0,t)}generateAuditId(){return`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}exportAuditLogs(s){const t=this.queryAuditLogs(s),n=["Timestamp","Action","Actor ID","Actor Email","Target Member ID","Target Member Email","Changes","Organization ID"],a=t.map(r=>[r.timestamp.toISOString(),r.action,r.actorId,r.actorEmail,r.targetMemberId,r.targetMemberEmail,JSON.stringify(r.changes),r.metadata.organizationId]);return[n.join(","),...a.map(r=>r.map(d=>typeof d=="string"&&d.includes(",")?`"${d.replace(/"/g,'""')}"`:d).join(","))].join(`
`)}};D(O,"instance");let Ae=O;const qt=Ae.getInstance(),L=class L{constructor(){D(this,"templates",[]);D(this,"bulkOperations",[{id:"sample_1",name:"Update All Members to Professional License",description:"Upgrade all team members to Professional license type",operation:"assign_license",criteria:{roles:["member","admin"],statuses:["active"]},affectedMembers:[],status:"completed",progress:100,results:{totalProcessed:15,successful:15,failed:0,errors:[],details:{}},createdBy:"system",createdAt:new Date(Date.now()-2*24*60*60*1e3),completedAt:new Date(Date.now()-2*24*60*60*1e3)},{id:"sample_2",name:"Bulk Role Update - Engineering Team",description:"Update all engineering team members to admin role",operation:"update_role",criteria:{departments:["Engineering"],statuses:["active"]},affectedMembers:[],status:"pending",progress:0,results:{totalProcessed:0,successful:0,failed:0,errors:[],details:{}},createdBy:"system",createdAt:new Date(Date.now()-1*24*60*60*1e3)},{id:"sample_3",name:"Activate Pending Members",description:"Activate all pending team member invitations",operation:"change_status",criteria:{statuses:["pending"]},affectedMembers:[],status:"running",progress:60,results:{totalProcessed:5,successful:3,failed:0,errors:[],details:{}},createdBy:"system",createdAt:new Date(Date.now()-6*60*60*1e3)}])}static getInstance(){return L.instance||(L.instance=new L,L.instance.initializeDefaultTemplates()),L.instance}initializeDefaultTemplates(){this.templates=[{id:"executive_admin",name:"Executive Administrator",description:"Full administrative access with all permissions",category:"executive",industry:["all"],role:"admin",permissions:["manage_team","manage_licenses","manage_projects","view_analytics","manage_organization","audit_access"],defaultSettings:{department:"Executive",position:"Administrator",licenseType:"ENTERPRISE",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date},{id:"project_manager",name:"Project Manager",description:"Project management role with team coordination permissions",category:"management",industry:["all"],role:"member",permissions:["manage_projects","assign_team_members","view_analytics","manage_tasks"],defaultSettings:{department:"Project Management",position:"Project Manager",licenseType:"PROFESSIONAL",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date},{id:"software_developer",name:"Software Developer",description:"Technical role for software development teams",category:"technical",industry:["technology","software","it"],role:"member",permissions:["access_projects","manage_tasks","view_documentation"],defaultSettings:{department:"Engineering",position:"Software Developer",licenseType:"PROFESSIONAL",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date},{id:"creative_director",name:"Creative Director",description:"Creative leadership role for design and content teams",category:"creative",industry:["media","advertising","design","entertainment"],role:"member",permissions:["manage_creative_projects","approve_content","manage_assets","view_analytics"],defaultSettings:{department:"Creative",position:"Creative Director",licenseType:"PROFESSIONAL",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date},{id:"sales_representative",name:"Sales Representative",description:"Sales role with client management permissions",category:"sales",industry:["all"],role:"member",permissions:["manage_clients","view_sales_analytics","manage_opportunities"],defaultSettings:{department:"Sales",position:"Sales Representative",licenseType:"BASIC",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date},{id:"support_specialist",name:"Support Specialist",description:"Customer support role with limited access",category:"support",industry:["all"],role:"viewer",permissions:["view_tickets","manage_support_cases","view_documentation"],defaultSettings:{department:"Support",position:"Support Specialist",licenseType:"BASIC",status:"active"},isDefault:!0,isCustom:!1,createdAt:new Date,updatedAt:new Date}]}getTemplates(s,t){let n=[...this.templates];return s&&(n=n.filter(a=>a.category===s)),t&&(n=n.filter(a=>a.industry.includes("all")||a.industry.includes(t))),n.sort((a,i)=>a.name.localeCompare(i.name))}getTemplate(s){return this.templates.find(t=>t.id===s)}createTemplate(s,t){const n={...s,id:`custom_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isDefault:!1,isCustom:!0,createdBy:t,createdAt:new Date,updatedAt:new Date};return this.templates.push(n),n}updateTemplate(s,t){const n=this.templates.findIndex(a=>a.id===s);return n===-1?!1:(this.templates[n]={...this.templates[n],...t,updatedAt:new Date},!0)}deleteTemplate(s){const t=this.templates.findIndex(n=>n.id===s);return t===-1||this.templates[t].isDefault?!1:(this.templates.splice(t,1),!0)}createMemberFromTemplate(s,t,n){const a=this.getTemplate(s);if(!a)throw new Error("Template not found");return{id:"",email:t.email||"",firstName:t.firstName||"",lastName:t.lastName||"",role:a.role,status:a.defaultSettings.status,organization:{id:n,name:"",tier:"BASIC"},organizationId:n,department:a.defaultSettings.department||t.department||"",position:a.defaultSettings.position||t.position||"",phone:t.phone||"",licenseType:a.defaultSettings.licenseType,assignedProjects:[],joinedAt:new Date,createdAt:new Date,updatedAt:new Date,...t,...a.defaultSettings.customFields}}createBulkOperation(s,t,n,a,i,r){const d={id:`bulk_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:s,description:t,operation:n,template:r?this.getTemplate(r):void 0,criteria:a,affectedMembers:[],status:"pending",progress:0,results:{totalProcessed:0,successful:0,failed:0,errors:[],details:{}},createdBy:i,createdAt:new Date};return this.bulkOperations.push(d),d}async executeBulkOperation(s,t,n){const a=this.bulkOperations.find(d=>d.id===s);if(!a)throw new Error("Bulk operation not found");a.status="running",a.progress=0;const i={totalProcessed:0,successful:0,failed:0,errors:[],details:{}},r=this.filterMembersByCriteria(t,a.criteria);a.affectedMembers=r.map(d=>d.id),i.totalProcessed=r.length;for(let d=0;d<r.length;d++){const u=r[d];try{switch(a.operation){case"create":i.details[u.id]="Created successfully",i.successful++;break;case"update":i.details[u.id]="Updated successfully",i.successful++;break;case"delete":i.details[u.id]="Deleted successfully",i.successful++;break;case"assign_license":i.details[u.id]="License assigned successfully",i.successful++;break;case"change_role":i.details[u.id]="Role changed successfully",i.successful++;break}}catch(o){i.failed++,i.errors.push({memberId:u.id,error:o instanceof Error?o.message:"Unknown error"}),i.details[u.id]="Failed"}a.progress=Math.round((d+1)/r.length*100),n&&n(a.progress)}return a.results=i,a.status=i.failed===0?"completed":"failed",a.completedAt=new Date,i}filterMembersByCriteria(s,t){let n=[...s];return t.memberIds&&t.memberIds.length>0&&(n=n.filter(a=>t.memberIds.includes(a.id))),t.roles&&t.roles.length>0&&(n=n.filter(a=>t.roles.includes(a.role))),t.departments&&t.departments.length>0&&(n=n.filter(a=>a.department&&t.departments.includes(a.department))),t.statuses&&t.statuses.length>0&&(n=n.filter(a=>t.statuses.includes(a.status))),t.licenseTypes&&t.licenseTypes.length>0&&(n=n.filter(a=>a.licenseType&&t.licenseTypes.includes(a.licenseType))),n}getBulkOperations(s){let t=[...this.bulkOperations];return s&&(t=t.filter(n=>n.createdBy===s)),t.sort((n,a)=>a.createdAt.getTime()-n.createdAt.getTime())}getBulkOperation(s){return this.bulkOperations.find(t=>t.id===s)}getCategories(){return["executive","management","technical","creative","support","sales","marketing","operations","custom"]}getIndustries(){return["technology","software","it","media","advertising","design","entertainment","finance","healthcare","education","retail","manufacturing","consulting","nonprofit","government","all"]}};D(L,"instance");let be=L;const ae=be.getInstance();function H(f){const{children:s,value:t,index:n,...a}=f;return e.jsx("div",{role:"tabpanel",hidden:t!==n,id:`team-tabpanel-${n}`,"aria-labelledby":`team-tab-${n}`,...a,children:t===n&&e.jsx(j,{sx:{p:3},children:s})})}const vs=()=>{var Be,Ee;const{enqueueSnackbar:f}=zt(),[s,t]=g.useState(0),[n,a]=g.useState([]),[i,r]=g.useState({}),[d,u]=g.useState({field:"createdAt",direction:"desc"}),[o,p]=g.useState({page:1,pageSize:25}),[c,x]=g.useState("table"),[M,S]=g.useState(""),[N,Q]=g.useState(!1),[ne,ie]=g.useState(!1),[re,J]=g.useState(!1),[Te,es]=g.useState(!1),[Ne,_]=g.useState(!1),[_e,le]=g.useState(!1),[ts,ss]=g.useState(!1),[Ue,$e]=g.useState(null),[Ce,We]=g.useState([]),[Ge,He]=g.useState([]),[Ie,Me]=g.useState([]),[P,Qe]=g.useState(null),[as,Y]=g.useState(!1),{loading:Je,error:De}=Nt(),{data:A,loading:Ye,error:ke}=_t(),{data:y,loading:Ke,error:Le,refetch:K}=Ut(),{data:X}=$t();Wt(),Gt(),Ht(),Qt(),Jt(),Yt(),Kt();const F=g.useMemo(()=>{if(!y)return[];const l={...i,search:M||void 0};return Xt.filterTeamMembers(y,l,d,o).filteredMembers},[y,i,M,d,o]),Z=g.useMemo(()=>{if(!y)return{totalMembers:0,activeMembers:0,pendingInvites:0,availableLicenses:0,totalLicenses:0,assignedLicenses:0};const l=y.length,m=y.filter(V=>V.status==="active").length,w=y.filter(V=>V.status==="pending").length,I=y.filter(V=>V.licenseType&&V.licenseType!=="BASIC").length,oe=(X==null?void 0:X.length)||0,ot=oe-I;return{totalMembers:l,activeMembers:m,pendingInvites:w,availableLicenses:ot,totalLicenses:oe,assignedLicenses:I}},[y,X]),Xe=g.useCallback(async()=>{if(y){Y(!0);try{const l=Zt.generateAnalytics(y);$e(l)}catch(l){console.error("Failed to load analytics:",l),f("Failed to load analytics",{variant:"error"})}finally{Y(!1)}}},[y,f]),Ze=g.useCallback(async()=>{var l;if((l=A==null?void 0:A.organization)!=null&&l.id){Y(!0);try{const m={organizationId:A.organization.id,limit:100},w=qt.queryAuditLogs(m);We(w)}catch(m){console.error("Failed to load audit logs:",m),f("Failed to load audit logs",{variant:"error"})}finally{Y(!1)}}},[(Be=A==null?void 0:A.organization)==null?void 0:Be.id,f]),qe=g.useCallback(async()=>{try{const l=ae.getTemplates();He(l)}catch(l){console.error("Failed to load templates:",l),f("Failed to load templates",{variant:"error"})}},[f]),et=g.useCallback(async()=>{try{const l=ae.getBulkOperations();Me(l)}catch(l){console.error("Failed to load bulk operations:",l),f("Failed to load bulk operations",{variant:"error"})}},[f]),tt=g.useCallback(async()=>{if(y)try{const l=await je.exportTeamMembers(y,{includeInactive:!0,includeAuditInfo:!0});je.downloadCSV(l,`team-members-${new Date().toISOString().split("T")[0]}.csv`),f("Team members exported successfully",{variant:"success"})}catch(l){console.error("Failed to export CSV:",l),f("Failed to export CSV",{variant:"error"})}},[y,f]),st=g.useCallback(async l=>{var m;if((m=A==null?void 0:A.organization)!=null&&m.id)try{const w=await l.text(),I=await je.importTeamMembers(w,A.organization.id,oe=>{});Qe(I),I.success?(f(`Successfully imported ${I.successfulImports} team members`,{variant:"success"}),K()):f(`Import completed with ${I.failedImports} errors`,{variant:"warning"})}catch(w){console.error("Failed to import CSV:",w),f("Failed to import CSV",{variant:"error"})}},[(Ee=A==null?void 0:A.organization)==null?void 0:Ee.id,f,K]),at=g.useCallback(async l=>{if(y)try{const m=await ae.executeBulkOperation(l.id,y,w=>{});f(`Bulk operation completed: ${m.successful} successful, ${m.failed} failed`,{variant:"success"}),K()}catch(m){console.error("Failed to execute bulk operation:",m),f("Failed to execute bulk operation",{variant:"error"})}},[y,f,K]),nt=(l,m)=>{switch(t(m),m){case 1:Xe();break;case 2:Ze();break;case 3:qe();break;case 4:et();break}},it=(l,m)=>{a(m?w=>[...w,l]:w=>w.filter(I=>I!==l))},rt=l=>{a(l?F.map(m=>m.id):[])},q=l=>{r(l),p(m=>({...m,page:1}))},lt=l=>{p(l)};return Je||Ye||Ke?e.jsxs(j,{sx:{p:3},children:[e.jsx(v,{variant:"h4",gutterBottom:!0,children:"Team Management"}),e.jsx(b,{container:!0,spacing:3,children:[1,2,3,4].map(l=>e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ut,{variant:"rectangular",height:120})},l))})]}):De||ke||Le?e.jsx(j,{sx:{p:3},children:e.jsxs(ce,{severity:"error",children:[e.jsx(de,{children:"Error Loading Team Data"}),De||ke||Le||"Unknown error occurred"]})}):e.jsxs(j,{sx:{p:3},children:[e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(v,{variant:"h4",component:"h1",children:"Team Management"}),e.jsxs(j,{sx:{display:"flex",gap:1},children:[e.jsx(C,{variant:"outlined",startIcon:e.jsx(pt,{}),onClick:tt,children:"Export CSV"}),e.jsx(C,{variant:"outlined",startIcon:e.jsx(ht,{}),onClick:()=>le(!0),children:"Import CSV"}),e.jsx(C,{variant:"contained",startIcon:e.jsx(mt,{}),onClick:()=>{},children:"Invite Member"})]})]}),e.jsxs(b,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(se,{title:"Total Members",value:Z.totalMembers,icon:e.jsx(Re,{}),color:"primary"})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(se,{title:"Active Members",value:Z.activeMembers,icon:e.jsx(gt,{}),color:"success"})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(se,{title:"Pending Invites",value:Z.pendingInvites,icon:e.jsx(ft,{}),color:"warning"})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(se,{title:"Available Licenses",value:Z.availableLicenses,icon:e.jsx(xt,{}),color:"primary"})})]}),e.jsxs(ee,{children:[e.jsx(j,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(vt,{value:s,onChange:nt,"aria-label":"team management tabs",children:[e.jsx(U,{label:"Team Members",icon:e.jsx(Re,{})}),e.jsx(U,{label:"Analytics",icon:e.jsx(jt,{})}),e.jsx(U,{label:"Audit Trail",icon:e.jsx(yt,{})}),e.jsx(U,{label:"Templates",icon:e.jsx(wt,{})}),e.jsx(U,{label:"Bulk Operations",icon:e.jsx(te,{})})]})}),e.jsxs(H,{value:s,index:0,children:[e.jsxs(j,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:[e.jsx(ue,{fullWidth:!0,placeholder:"Search team members...",value:M,onChange:l=>S(l.target.value),InputProps:{startAdornment:e.jsx(St,{position:"start",children:e.jsx(At,{})})}}),e.jsx(C,{variant:"outlined",startIcon:e.jsx(bt,{}),onClick:()=>Q(!N),children:"Filters"}),e.jsxs(Tt,{value:c,exclusive:!0,onChange:(l,m)=>m&&x(m),size:"small",children:[e.jsx(pe,{value:"table",children:e.jsx(Ct,{})}),e.jsx(pe,{value:"grid",children:e.jsx(It,{})}),e.jsx(pe,{value:"list",children:e.jsx(Mt,{})})]})]}),N&&e.jsxs(ee,{sx:{mb:3},children:[e.jsx(Dt,{title:"Advanced Filters"}),e.jsx(he,{children:e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsxs($,{fullWidth:!0,children:[e.jsx(W,{children:"Role"}),e.jsxs(G,{multiple:!0,value:i.role||[],onChange:l=>q({...i,role:l.target.value}),children:[e.jsx(T,{value:"admin",children:"Admin"}),e.jsx(T,{value:"member",children:"Member"}),e.jsx(T,{value:"viewer",children:"Viewer"}),e.jsx(T,{value:"owner",children:"Owner"})]})]})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsxs($,{fullWidth:!0,children:[e.jsx(W,{children:"Status"}),e.jsxs(G,{multiple:!0,value:i.status||[],onChange:l=>q({...i,status:l.target.value}),children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsxs($,{fullWidth:!0,children:[e.jsx(W,{children:"Department"}),e.jsx(G,{multiple:!0,value:i.department||[],onChange:l=>q({...i,department:l.target.value})})]})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsxs($,{fullWidth:!0,children:[e.jsx(W,{children:"License Type"}),e.jsxs(G,{multiple:!0,value:i.licenseType||[],onChange:l=>q({...i,licenseType:l.target.value}),children:[e.jsx(T,{value:"BASIC",children:"Basic"}),e.jsx(T,{value:"PROFESSIONAL",children:"Professional"}),e.jsx(T,{value:"ENTERPRISE",children:"Enterprise"})]})]})})]})})]}),e.jsx(me,{component:ge,children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(z,{children:[e.jsx(h,{padding:"checkbox",children:e.jsx(Oe,{indeterminate:n.length>0&&n.length<F.length,checked:F.length>0&&n.length===F.length,onChange:l=>rt(l.target.checked)})}),e.jsx(h,{children:"Member"}),e.jsx(h,{children:"Role"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Department"}),e.jsx(h,{children:"License"}),e.jsx(h,{children:"Last Active"}),e.jsx(h,{children:"Actions"})]})}),e.jsx(ve,{children:F.map(l=>{var m,w;return e.jsxs(z,{children:[e.jsx(h,{padding:"checkbox",children:e.jsx(Oe,{checked:n.includes(l.id),onChange:I=>it(l.id,I.target.checked)})}),e.jsx(h,{children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(kt,{children:[(m=l.firstName)==null?void 0:m[0],(w=l.lastName)==null?void 0:w[0]]}),e.jsxs(j,{children:[e.jsxs(v,{variant:"subtitle2",children:[l.firstName," ",l.lastName]}),e.jsx(v,{variant:"body2",color:"text.secondary",children:l.email})]})]})}),e.jsx(h,{children:e.jsx(k,{label:l.role,color:l.role==="admin"?"primary":"default",size:"small"})}),e.jsx(h,{children:e.jsx(k,{label:l.status,color:l.status==="active"?"success":"default",size:"small"})}),e.jsx(h,{children:l.department||"-"}),e.jsx(h,{children:l.licenseType?e.jsx(k,{label:l.licenseType,color:"info",size:"small"}):"-"}),e.jsx(h,{children:l.lastActive?new Date(l.lastActive).toLocaleDateString():"-"}),e.jsx(h,{children:e.jsx(Lt,{size:"small",children:e.jsx(Bt,{})})})]},l.id)})})]})}),e.jsx(j,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(Et,{count:Math.ceil(F.length/o.pageSize),page:o.page,onChange:(l,m)=>lt({...o,page:m}),color:"primary"})})]}),e.jsx(H,{value:s,index:1,children:Ue?e.jsxs(j,{children:[e.jsx(v,{variant:"h5",gutterBottom:!0,children:"Team Analytics"}),e.jsx(v,{children:"Analytics dashboard coming soon..."})]}):e.jsxs(j,{sx:{textAlign:"center",py:4},children:[e.jsx(Rt,{}),e.jsx(v,{variant:"body1",sx:{mt:2},children:"Loading analytics..."})]})}),e.jsxs(H,{value:s,index:2,children:[e.jsx(v,{variant:"h5",gutterBottom:!0,children:"Audit Trail"}),Ce.length>0?e.jsx(me,{component:ge,children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(z,{children:[e.jsx(h,{children:"Timestamp"}),e.jsx(h,{children:"Action"}),e.jsx(h,{children:"Actor"}),e.jsx(h,{children:"Target"}),e.jsx(h,{children:"Changes"})]})}),e.jsx(ve,{children:Ce.map(l=>e.jsxs(z,{children:[e.jsx(h,{children:l.timestamp.toLocaleString()}),e.jsx(h,{children:e.jsx(k,{label:l.action,size:"small"})}),e.jsx(h,{children:l.actorEmail}),e.jsx(h,{children:l.targetMemberEmail}),e.jsxs(h,{children:[l.changes.length," changes"]})]},l.id))})]})}):e.jsx(v,{children:"No audit logs found."})]}),e.jsxs(H,{value:s,index:3,children:[e.jsx(v,{variant:"h5",gutterBottom:!0,children:"Team Member Templates"}),e.jsx(b,{container:!0,spacing:2,children:Ge.map(l=>e.jsx(b,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ee,{children:e.jsxs(he,{children:[e.jsx(v,{variant:"h6",children:l.name}),e.jsx(v,{variant:"body2",color:"text.secondary",children:l.description}),e.jsxs(j,{sx:{mt:2},children:[e.jsx(k,{label:l.role,size:"small"}),e.jsx(k,{label:l.category,size:"small",sx:{ml:1}})]})]})})},l.id))})]}),e.jsxs(H,{value:s,index:4,children:[e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(v,{variant:"h5",children:"Bulk Operations"}),e.jsx(C,{variant:"contained",startIcon:e.jsx(te,{}),onClick:()=>_(!0),children:"Create New Operation"})]}),Ie.length>0?e.jsx(me,{component:ge,children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(z,{children:[e.jsx(h,{children:"Name"}),e.jsx(h,{children:"Description"}),e.jsx(h,{children:"Operation"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Progress"}),e.jsx(h,{children:"Created"}),e.jsx(h,{children:"Actions"})]})}),e.jsx(ve,{children:Ie.map(l=>e.jsxs(z,{children:[e.jsx(h,{children:e.jsx(v,{variant:"subtitle2",fontWeight:"medium",children:l.name})}),e.jsx(h,{children:e.jsx(v,{variant:"body2",color:"text.secondary",children:l.description})}),e.jsx(h,{children:e.jsx(k,{label:l.operation.replace("_"," "),size:"small",color:"primary",variant:"outlined"})}),e.jsx(h,{children:e.jsx(k,{label:l.status,color:l.status==="completed"?"success":l.status==="running"?"warning":l.status==="failed"?"error":"default",size:"small"})}),e.jsx(h,{children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ot,{variant:"determinate",value:l.progress,sx:{width:100},color:l.status==="completed"?"success":l.status==="failed"?"error":"primary"}),e.jsxs(v,{variant:"body2",children:[l.progress,"%"]})]})}),e.jsxs(h,{children:[e.jsx(v,{variant:"body2",children:l.createdAt.toLocaleDateString()}),e.jsx(v,{variant:"caption",color:"text.secondary",children:l.createdAt.toLocaleTimeString()})]}),e.jsx(h,{children:e.jsxs(j,{sx:{display:"flex",gap:1},children:[e.jsx(C,{size:"small",variant:"outlined",onClick:()=>at(l),disabled:l.status==="running"||l.status==="completed",startIcon:l.status==="running"?e.jsx(Pt,{}):e.jsx(Ft,{}),children:l.status==="running"?"Running...":"Execute"}),l.status==="completed"&&l.results&&e.jsx(C,{size:"small",variant:"text",onClick:()=>{f(`Operation completed: ${l.results.successful} successful, ${l.results.failed} failed`,{variant:"info"})},children:"View Results"})]})})]},l.id))})]})}):e.jsx(ee,{children:e.jsxs(he,{sx:{textAlign:"center",py:6},children:[e.jsx(te,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(v,{variant:"h6",gutterBottom:!0,children:"No Bulk Operations Found"}),e.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your first bulk operation to manage multiple team members at once."}),e.jsx(C,{variant:"contained",startIcon:e.jsx(te,{}),onClick:()=>_(!0),children:"Create New Operation"})]})})]})]}),e.jsxs(Pe,{open:_e,onClose:()=>le(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Fe,{children:"Import Team Members from CSV"}),e.jsxs(Ve,{children:[e.jsx(j,{sx:{mb:3},children:e.jsxs(C,{variant:"outlined",component:"label",startIcon:e.jsx(Vt,{}),fullWidth:!0,children:["Choose CSV File",e.jsx("input",{type:"file",accept:".csv",hidden:!0,onChange:l=>{var w;const m=(w=l.target.files)==null?void 0:w[0];m&&st(m)}})]})}),P&&e.jsxs(ce,{severity:P.success?"success":"warning",children:[e.jsxs(de,{children:["Import ",P.success?"Successful":"Completed with Errors"]}),e.jsxs(v,{children:["Processed: ",P.totalRows," rows"]}),e.jsxs(v,{children:["Successful: ",P.successfulImports]}),e.jsxs(v,{children:["Failed: ",P.failedImports]})]})]}),e.jsx(ze,{children:e.jsx(C,{onClick:()=>le(!1),children:"Close"})})]}),e.jsxs(Pe,{open:Ne,onClose:()=>_(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Fe,{children:"Create Bulk Operation"}),e.jsx(Ve,{children:e.jsxs(j,{sx:{mt:2},children:[e.jsx(ue,{fullWidth:!0,label:"Operation Name",placeholder:"e.g., Update Engineering Team Roles",sx:{mb:2}}),e.jsx(ue,{fullWidth:!0,label:"Description",placeholder:"Describe what this operation will do",multiline:!0,rows:3,sx:{mb:2}}),e.jsxs($,{fullWidth:!0,sx:{mb:2},children:[e.jsx(W,{children:"Operation Type"}),e.jsxs(G,{label:"Operation Type",children:[e.jsx(T,{value:"update_role",children:"Update Roles"}),e.jsx(T,{value:"assign_license",children:"Assign Licenses"}),e.jsx(T,{value:"change_status",children:"Change Status"}),e.jsx(T,{value:"bulk_invite",children:"Bulk Invite"})]})]}),e.jsxs(ce,{severity:"info",sx:{mt:2},children:[e.jsx(de,{children:"Bulk Operation Preview"}),"This operation will affect ",n.length," selected team members."]})]})}),e.jsxs(ze,{children:[e.jsx(C,{onClick:()=>_(!1),children:"Cancel"}),e.jsx(C,{variant:"contained",onClick:()=>{const l=ae.createBulkOperation("Sample Bulk Operation","This is a sample bulk operation created from the UI","update_role",{roles:["member"]},"current-user");Me(m=>[l,...m]),_(!1),f("Bulk operation created successfully",{variant:"success"})},children:"Create Operation"})]})]})]})};export{vs as default};
