var is=Object.defineProperty;var ls=(h,l,a)=>l in h?is(h,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):h[l]=a;var ge=(h,l,a)=>ls(h,typeof l!="symbol"?l+"":l,a);import{j as e,B as b,T as P,G as A,aD as os,d as je,Z as ve,a as I,as as cs,ca as ke,c8 as ds,a0 as us,p as hs,a1 as ms,bR as ps,t as Fe,v as Ee,e as F,I as xs,b3 as fs,cb as gs,a8 as z,a9 as V,aa as W,M as p,ak as js,c as vs,al as Cs,am as ws,an as Ne,ao as C,l as Re,ap as ys,ae as Ss,r as Ce,g as bs,aq as Is,cc as Ms,at as G,au as J,av as Z,aw as K,ar as Ts,y as X,bQ as Ls,E as As,u as Ps,L as Ds,D as ks,az as Fs}from"./mui-CCWxH8Vb.js";import{r as u}from"./vendor-CjD1bmmO.js";import{u as Es}from"./notistack.esm-Ca-E78ev.js";import{b as Ns,c as Rs,a as zs,u as Vs,d as Ws,i as Os,j as Bs,k as Us,g as qs,h as $s,l as Hs}from"./useStreamlinedData-DVVk_aoo.js";import{M as ue}from"./MetricCard-NkzRDe3f.js";import"./UnifiedDataService-CrLXPxJU.js";import"./index-CxNnS82J.js";import"./stripe-vGaGA8Al.js";import"./index.esm-DdZh2hq1.js";import"./index.esm-Dkmm1Qng.js";import"./FirestoreCollectionManager-Ca5f9R0C.js";import"./firebase-DS-FtHUY.js";import"./index.esm-e-DuI42t.js";const O=class O{static getInstance(){return O.instance||(O.instance=new O),O.instance}async exportTeamMembers(l,a={}){const{includeInactive:c=!1,includePassword:i=!1,includeAuditInfo:t=!1,customFields:n=[]}=a;let d=l;c||(d=l.filter(r=>r.status==="active"));const f=["Email","First Name","Last Name","Role","Status","Department","Position","Phone","License Type","Organization ID","Created At","Last Active"];i&&f.splice(4,0,"Password"),t&&f.push("Created By","Updated At","Updated By"),n.forEach(r=>{f.includes(r)||f.push(r)});const M=d.map(r=>{const x=[r.email||"",r.firstName||"",r.lastName||"",r.role||"",r.status||"",r.department||"",r.position||"",r.phone||"",r.licenseType||"",r.organizationId||"",r.createdAt?new Date(r.createdAt).toISOString():"",r.lastActive?new Date(r.lastActive).toISOString():""];return i&&x.splice(4,0,r.password||""),t&&x.push(r.createdBy||"",r.updatedAt?new Date(r.updatedAt).toISOString():"",r.updatedBy||""),n.forEach(E=>{const v=r[E];x.push(typeof v=="string"?v:v?String(v):"")}),x});return[f.join(","),...M.map(r=>r.map(x=>typeof x=="string"&&x.includes(",")?`"${x.replace(/"/g,'""')}"`:x).join(","))].join(`
`)}async importTeamMembers(l,a,c){const i=l.split(`
`).filter(r=>r.trim());if(i.length<2)return{success:!1,totalRows:0,successfulImports:0,failedImports:0,errors:[{row:0,field:"general",value:"",error:"CSV file is empty or invalid"}],importedMembers:[]};const t=this.parseCSVLine(i[0]),n=i.slice(1),d=[],f=[],y=["Email","First Name","Last Name","Role"].filter(r=>!t.includes(r));if(y.length>0)return{success:!1,totalRows:n.length,successfulImports:0,failedImports:n.length,errors:[{row:0,field:"headers",value:y.join(", "),error:`Missing required headers: ${y.join(", ")}`}],importedMembers:[]};for(let r=0;r<n.length;r++){const x=n[r],E=this.parseCSVLine(x);c&&c(Math.round((r+1)/n.length*100));try{const v=this.validateAndCreateTeamMember(E,t,a,r+2);v&&f.push(v)}catch(v){d.push({row:r+2,field:"general",value:x,error:v instanceof Error?v.message:"Unknown error"})}}return{success:d.length===0,totalRows:n.length,successfulImports:f.length,failedImports:d.length,errors:d,importedMembers:f}}parseCSVLine(l){const a=[];let c="",i=!1;for(let t=0;t<l.length;t++){const n=l[t];n==='"'?i&&l[t+1]==='"'?(c+='"',t++):i=!i:n===","&&!i?(a.push(c.trim()),c=""):c+=n}return a.push(c.trim()),a}validateAndCreateTeamMember(l,a,c,i){var x,E,v,he,me,D,Y,pe;const t=[],n={};a.forEach((_,ee)=>{n[_.toLowerCase()]=l[ee]||""});const d=(x=n.email)==null?void 0:x.trim(),f=(E=n["first name"])==null?void 0:E.trim(),M=(v=n["last name"])==null?void 0:v.trim(),y=(he=n.role)==null?void 0:he.trim();if(d?this.isValidEmail(d)||t.push({row:i,field:"email",value:d,error:"Invalid email format"}):t.push({row:i,field:"email",value:"",error:"Email is required"}),f||t.push({row:i,field:"first name",value:"",error:"First name is required"}),M||t.push({row:i,field:"last name",value:"",error:"Last name is required"}),y?["admin","member","viewer","owner"].includes(y.toLowerCase())||t.push({row:i,field:"role",value:y,error:"Invalid role. Must be admin, member, viewer, or owner"}):t.push({row:i,field:"role",value:"",error:"Role is required"}),t.length>0)throw new Error(`Validation errors: ${t.map(_=>_.error).join(", ")}`);return{id:"",email:d.toLowerCase(),firstName:f,lastName:M,role:y.toLowerCase(),status:"pending",organization:{id:c,name:"",tier:"BASIC"},organizationId:c,department:((me=n.department)==null?void 0:me.trim())||"",position:((D=n.position)==null?void 0:D.trim())||"",phone:((Y=n.phone)==null?void 0:Y.trim())||"",licenseType:((pe=n["license type"])==null?void 0:pe.trim())||"BASIC",assignedProjects:[],joinedAt:new Date,createdAt:new Date,updatedAt:new Date,lastActive:n["last active"]?new Date(n["last active"]):void 0}}isValidEmail(l){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)}downloadCSV(l,a="team-members.csv"){const c=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),t=URL.createObjectURL(c);i.setAttribute("href",t),i.setAttribute("download",a),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateTemplate(){const l=["Email","First Name","Last Name","Role","Status","Department","Position","Phone","License Type"],a=["john.doe@example.com","John","Doe","member","active","Engineering","Software Developer","+1-555-0123","PROFESSIONAL"];return[l.join(","),a.join(",")].join(`
`)}};ge(O,"instance");let ye=O;const we=ye.getInstance(),B=class B{static getInstance(){return B.instance||(B.instance=new B),B.instance}filterTeamMembers(l,a,c,i){let t=[...l];a.search&&(t=this.applySearchFilter(t,a.search)),a.role&&a.role.length>0&&(t=t.filter(r=>a.role.includes(r.role))),a.status&&a.status.length>0&&(t=t.filter(r=>a.status.includes(r.status))),a.department&&a.department.length>0&&(t=t.filter(r=>r.department&&a.department.includes(r.department))),a.licenseType&&a.licenseType.length>0&&(t=t.filter(r=>r.licenseType&&a.licenseType.includes(r.licenseType))),a.dateRange&&(t=this.applyDateRangeFilter(t,a.dateRange)),a.hasLicense!==void 0&&(t=t.filter(r=>a.hasLicense?!!r.licenseType:!r.licenseType)),a.isActive!==void 0&&(t=t.filter(r=>a.isActive?r.status==="active":r.status!=="active")),a.customFields&&(t=this.applyCustomFieldFilters(t,a.customFields)),c&&(t=this.applySorting(t,c));const n=l.length,d=t.length;let f=t,M=!1,y={currentPage:1,totalPages:1,pageSize:d,totalItems:d};if(i){const r=(i.page-1)*i.pageSize,x=r+i.pageSize;f=t.slice(r,x),M=x<d,y={currentPage:i.page,totalPages:Math.ceil(d/i.pageSize),pageSize:i.pageSize,totalItems:d}}return{filteredMembers:f,totalCount:n,filteredCount:d,hasMore:M,pageInfo:y}}applySearchFilter(l,a){const c=a.toLowerCase();return l.filter(i=>[i.email,i.firstName,i.lastName,i.department,i.position,i.phone,i.role,i.status,i.licenseType].some(n=>n&&n.toLowerCase().includes(c)))}applyDateRangeFilter(l,a){return a?l.filter(c=>{const i=c[a.field];if(!i)return!1;const t=new Date(i),n=a.start?new Date(a.start):null,d=a.end?new Date(a.end):null;return!(n&&t<n||d&&t>d)}):l}applyCustomFieldFilters(l,a){return l.filter(c=>Object.entries(a).every(([i,t])=>{const n=c[i];return t==null?n===t:typeof t=="string"?n&&String(n).toLowerCase().includes(t.toLowerCase()):n===t}))}applySorting(l,a){return l.sort((c,i)=>{const t=c[a.field],n=i[a.field];if(t===void 0&&n===void 0)return 0;if(t===void 0)return a.direction==="asc"?1:-1;if(n===void 0)return a.direction==="asc"?-1:1;let d=0;return typeof t=="string"&&typeof n=="string"?d=t.localeCompare(n):t instanceof Date&&n instanceof Date?d=t.getTime()-n.getTime():typeof t=="number"&&typeof n=="number"?d=t-n:d=String(t).localeCompare(String(n)),a.direction==="asc"?d:-d})}getFilterOptions(l){const a=[...new Set(l.map(n=>n.role))].sort(),c=[...new Set(l.map(n=>n.status))].sort(),i=[...new Set(l.map(n=>n.department).filter(Boolean))].sort(),t=[...new Set(l.map(n=>n.licenseType).filter(Boolean))].sort();return{roles:a,statuses:c,departments:i,licenseTypes:t,totalMembers:l.length,activeMembers:l.filter(n=>n.status==="active").length,pendingMembers:l.filter(n=>n.status==="pending").length,licensedMembers:l.filter(n=>n.licenseType).length}}getQuickFilters(){return{all:{label:"All Members",criteria:{}},active:{label:"Active Members",criteria:{isActive:!0}},pending:{label:"Pending Invites",criteria:{status:["pending"]}},admins:{label:"Administrators",criteria:{role:["admin","owner"]}},licensed:{label:"Licensed Members",criteria:{hasLicense:!0}},recent:{label:"Recently Added",criteria:{dateRange:{field:"createdAt",start:new Date(Date.now()-30*24*60*60*1e3)}}}}}};ge(B,"instance");let Se=B;const Qs=Se.getInstance(),lt=()=>{var Pe,De;const{enqueueSnackbar:h}=Es(),[l,a]=u.useState([]),[c,i]=u.useState({}),[t,n]=u.useState({field:"createdAt",direction:"desc"}),[d,f]=u.useState({page:1,pageSize:25}),[M,y]=u.useState(""),[r,x]=u.useState(!1),[E,v]=u.useState(!1),[he,me]=u.useState(!1),[D,Y]=u.useState(null),[pe,_]=u.useState(!1),[ee,be]=u.useState(null),[o,U]=u.useState(null),[ze,se]=u.useState(!1),[Ve,te]=u.useState(!1),[We,ae]=u.useState(!1),[Oe,ne]=u.useState(!1),[g,k]=u.useState({firstName:"",lastName:"",email:"",role:"member",status:"active",department:"",position:"",phone:""}),[T,xe]=u.useState({newPassword:"",confirmPassword:""}),[Q,Ie]=u.useState(""),{loading:Be,error:Me}=Ns(),{data:S,loading:Ue,error:Te}=Rs(),{data:L,loading:qe,error:Le,refetch:N}=zs(),{data:R}=Vs();Ws();const Ae=Os(),re=Bs(),ie=Us(),le=qs();$s();const oe=Hs(),q=u.useMemo(()=>{if(!L)return[];const s={...c,search:M||void 0};return Qs.filterTeamMembers(L,s,t,d).filteredMembers},[L,c,M,t,d]),ce=u.useMemo(()=>{if(!L)return{totalMembers:0,activeMembers:0,pendingInvites:0,availableLicenses:0,totalLicenses:0,assignedLicenses:0};const s=L.length,m=L.filter(H=>H.status==="active").length,j=L.filter(H=>H.status==="pending").length,w=L.filter(H=>H.licenseType&&H.licenseType!=="BASIC").length,fe=(R==null?void 0:R.length)||0,rs=fe-w;return{totalMembers:s,activeMembers:m,pendingInvites:j,availableLicenses:rs,totalLicenses:fe,assignedLicenses:w}},[L,R]),$e=u.useCallback(async()=>{if(L)try{const s=await we.exportTeamMembers(L,{includeInactive:!0,includeAuditInfo:!0});we.downloadCSV(s,`team-members-${new Date().toISOString().split("T")[0]}.csv`),h("Team members exported successfully",{variant:"success"})}catch(s){console.error("Failed to export CSV:",s),h("Failed to export CSV",{variant:"error"})}},[L,h]),He=u.useCallback(async s=>{var m;if((m=S==null?void 0:S.organization)!=null&&m.id)try{const j=await s.text(),w=await we.importTeamMembers(j,S.organization.id,fe=>{});Y(w),w.success?(h(`Successfully imported ${w.successfulImports} team members`,{variant:"success"}),N()):h(`Import completed with ${w.failedImports} errors`,{variant:"warning"})}catch(j){console.error("Failed to import CSV:",j),h("Failed to import CSV",{variant:"error"})}},[(Pe=S==null?void 0:S.organization)==null?void 0:Pe.id,h,N]),Qe=u.useCallback((s,m)=>{be(s.currentTarget),U(m)},[]),$=u.useCallback(()=>{be(null),U(null)},[]),Ge=u.useCallback(s=>{U(s),k({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",role:s.role||"member",status:s.status||"active",department:s.department||"",position:s.position||"",phone:s.phone||""}),$(),se(!0)},[]),Je=u.useCallback(s=>{U(s),$(),ne(!0)},[]),Ze=u.useCallback(s=>{U(s),Ie(""),$(),te(!0)},[]),Ke=u.useCallback(s=>{U(s),xe({newPassword:"",confirmPassword:""}),$(),ae(!0)},[]),Xe=u.useCallback(async s=>{var m,j;try{Ae.mutate({email:s.email,firstName:s.firstName||"",lastName:s.lastName||"",role:s.role||"member",status:s.status||"pending",department:s.department||"",position:s.position||"",phone:s.phone||"",organization:s.organization||{id:((m=S==null?void 0:S.organization)==null?void 0:m.id)||"",name:((j=S==null?void 0:S.organization)==null?void 0:j.name)||"",tier:"professional"},assignedProjects:s.assignedProjects||[]}),$(),h("Invitation resent successfully",{variant:"success"})}catch(w){console.error("Failed to resend invite:",w),h("Failed to resend invitation",{variant:"error"})}},[Ae,h,S]),Ye=u.useCallback(async()=>{if(o)try{re.mutate({memberId:o.id,updates:g}),se(!1),h("Team member updated successfully",{variant:"success"}),N()}catch(s){console.error("Failed to update team member:",s),h("Failed to update team member",{variant:"error"})}},[o,g,re,h,N]),_e=u.useCallback(async()=>{if(o)try{ie.mutate({memberId:o.id}),ne(!1),h("Team member removed successfully",{variant:"success"}),N()}catch(s){console.error("Failed to remove team member:",s),h("Failed to remove team member",{variant:"error"})}},[o,ie,h,N]),es=u.useCallback(async()=>{if(!(!o||!Q))try{le.mutate({licenseId:Q,userId:o.id}),te(!1),h("License assigned successfully",{variant:"success"}),N()}catch(s){console.error("Failed to assign license:",s),h("Failed to assign license",{variant:"error"})}},[o,Q,le,h,N]),ss=u.useCallback(async()=>{if(!(!o||!T.newPassword)){if(T.newPassword!==T.confirmPassword){h("Passwords do not match",{variant:"error"});return}if(T.newPassword.length<8){h("Password must be at least 8 characters long",{variant:"error"});return}try{oe.mutate({memberId:o.id,newPassword:T.newPassword}),ae(!1),h("Password changed successfully",{variant:"success"})}catch(s){console.error("Failed to change password:",s),h("Failed to change password",{variant:"error"})}}},[o,T,oe,h]),ts=(s,m)=>{a(m?j=>[...j,s]:j=>j.filter(w=>w!==s))},as=s=>{a(s?q.map(m=>m.id):[])},de=s=>{i(s),f(m=>({...m,page:1}))},ns=s=>{f(s)};return Be||Ue||qe?e.jsxs(b,{sx:{p:3},children:[e.jsx(P,{variant:"h4",gutterBottom:!0,children:"Team Management"}),e.jsx(A,{container:!0,spacing:3,children:[1,2,3,4].map(s=>e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(os,{variant:"rectangular",height:120})},s))})]}):Me||Te||Le?e.jsx(b,{sx:{p:3},children:e.jsxs(je,{severity:"error",children:[e.jsx(ve,{children:"Error Loading Team Data"}),Me||Te||Le||"Unknown error occurred"]})}):e.jsxs(b,{sx:{p:3},children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(P,{variant:"h4",component:"h1",children:"Team Management"}),e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(I,{variant:"outlined",startIcon:e.jsx(cs,{}),onClick:$e,children:"Export CSV"}),e.jsx(I,{variant:"outlined",startIcon:e.jsx(ke,{}),onClick:()=>v(!0),children:"Import CSV"}),e.jsx(I,{variant:"contained",startIcon:e.jsx(ds,{}),onClick:()=>{},children:"Invite Member"})]})]}),e.jsxs(A,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Total Members",value:ce.totalMembers,icon:e.jsx(us,{}),color:"primary"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Active Members",value:ce.activeMembers,icon:e.jsx(hs,{}),color:"success"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Pending Invites",value:ce.pendingInvites,icon:e.jsx(ms,{}),color:"warning"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Available Licenses",value:ce.availableLicenses,icon:e.jsx(ps,{}),color:"primary"})})]}),e.jsx(Fe,{children:e.jsxs(Ee,{children:[e.jsxs(b,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:[e.jsx(F,{fullWidth:!0,placeholder:"Search team members...",value:M,onChange:s=>y(s.target.value),InputProps:{startAdornment:e.jsx(xs,{position:"start",children:e.jsx(fs,{})})}}),e.jsx(I,{variant:"outlined",startIcon:e.jsx(gs,{}),onClick:()=>x(!r),children:"Filters"})]}),r&&e.jsxs(Fe,{sx:{mb:3},children:[e.jsx(CardHeader,{title:"Advanced Filters"}),e.jsx(Ee,{children:e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Role"}),e.jsxs(W,{multiple:!0,value:c.role||[],onChange:s=>de({...c,role:s.target.value}),children:[e.jsx(p,{value:"admin",children:"Admin"}),e.jsx(p,{value:"member",children:"Member"}),e.jsx(p,{value:"viewer",children:"Viewer"}),e.jsx(p,{value:"owner",children:"Owner"})]})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Status"}),e.jsxs(W,{multiple:!0,value:c.status||[],onChange:s=>de({...c,status:s.target.value}),children:[e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"pending",children:"Pending"}),e.jsx(p,{value:"suspended",children:"Suspended"})]})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Department"}),e.jsx(W,{multiple:!0,value:c.department||[],onChange:s=>de({...c,department:s.target.value})})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"License Type"}),e.jsxs(W,{multiple:!0,value:c.licenseType||[],onChange:s=>de({...c,licenseType:s.target.value}),children:[e.jsx(p,{value:"BASIC",children:"Basic"}),e.jsx(p,{value:"PROFESSIONAL",children:"Professional"}),e.jsx(p,{value:"ENTERPRISE",children:"Enterprise"})]})]})})]})})]}),e.jsx(js,{component:vs,children:e.jsxs(Cs,{children:[e.jsx(ws,{children:e.jsxs(Ne,{children:[e.jsx(C,{padding:"checkbox",children:e.jsx(Re,{indeterminate:l.length>0&&l.length<q.length,checked:q.length>0&&l.length===q.length,onChange:s=>as(s.target.checked)})}),e.jsx(C,{children:"Member"}),e.jsx(C,{children:"Role"}),e.jsx(C,{children:"Status"}),e.jsx(C,{children:"Department"}),e.jsx(C,{children:"License"}),e.jsx(C,{children:"Last Active"}),e.jsx(C,{children:"Actions"})]})}),e.jsx(ys,{children:q.map(s=>{var m,j;return e.jsxs(Ne,{children:[e.jsx(C,{padding:"checkbox",children:e.jsx(Re,{checked:l.includes(s.id),onChange:w=>ts(s.id,w.target.checked)})}),e.jsx(C,{children:e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(Ss,{children:[(m=s.firstName)==null?void 0:m[0],(j=s.lastName)==null?void 0:j[0]]}),e.jsxs(b,{children:[e.jsxs(P,{variant:"subtitle2",children:[s.firstName," ",s.lastName]}),e.jsx(P,{variant:"body2",color:"text.secondary",children:s.email})]})]})}),e.jsx(C,{children:e.jsx(Ce,{label:s.role,color:s.role==="admin"?"primary":"default",size:"small"})}),e.jsx(C,{children:e.jsx(Ce,{label:s.status,color:s.status==="active"?"success":"default",size:"small"})}),e.jsx(C,{children:s.department||"-"}),e.jsx(C,{children:s.licenseType?e.jsx(Ce,{label:s.licenseType,color:"info",size:"small"}):"-"}),e.jsx(C,{children:s.lastActive?new Date(s.lastActive).toLocaleDateString():"-"}),e.jsx(C,{children:e.jsx(bs,{size:"small",onClick:w=>Qe(w,s),children:e.jsx(Is,{})})})]},s.id)})})]})}),e.jsx(b,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(Ms,{count:Math.ceil(q.length/d.pageSize),page:d.page,onChange:(s,m)=>ns({...d,page:m}),color:"primary"})})]})}),e.jsxs(G,{open:E,onClose:()=>v(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(J,{children:"Import Team Members from CSV"}),e.jsxs(Z,{children:[e.jsx(b,{sx:{mb:3},children:e.jsxs(I,{variant:"outlined",component:"label",startIcon:e.jsx(ke,{}),fullWidth:!0,children:["Choose CSV File",e.jsx("input",{type:"file",accept:".csv",hidden:!0,onChange:s=>{var j;const m=(j=s.target.files)==null?void 0:j[0];m&&He(m)}})]})}),D&&e.jsxs(je,{severity:D.success?"success":"warning",children:[e.jsxs(ve,{children:["Import ",D.success?"Successful":"Completed with Errors"]}),e.jsxs(P,{children:["Processed: ",D.totalRows," rows"]}),e.jsxs(P,{children:["Successful: ",D.successfulImports]}),e.jsxs(P,{children:["Failed: ",D.failedImports]})]})]}),e.jsx(K,{children:e.jsx(I,{onClick:()=>v(!1),children:"Close"})})]}),e.jsxs(Ts,{anchorEl:ee,open:!!ee,onClose:$,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(p,{onClick:()=>o&&Ge(o),children:[e.jsx(X,{children:e.jsx(Ls,{})}),"Edit Member"]}),((De=o==null?void 0:o.status)==null?void 0:De.toLowerCase())==="pending"&&e.jsxs(p,{onClick:()=>o&&Xe(o),children:[e.jsx(X,{children:e.jsx(As,{})}),"Resend Invite"]}),e.jsxs(p,{onClick:()=>o&&Ze(o),children:[e.jsx(X,{children:e.jsx(Ps,{})}),"Assign License"]}),e.jsxs(p,{onClick:()=>o&&Ke(o),children:[e.jsx(X,{children:e.jsx(Ds,{})}),"Change Password"]}),e.jsx(ks,{}),e.jsxs(p,{onClick:()=>o&&Je(o),sx:{color:"error.main"},children:[e.jsx(X,{children:e.jsx(Fs,{sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(G,{open:ze,onClose:()=>se(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{children:"Edit Team Member"}),e.jsx(Z,{children:e.jsxs(b,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[e.jsx(F,{label:"First Name",value:g.firstName,onChange:s=>k({...g,firstName:s.target.value}),fullWidth:!0}),e.jsx(F,{label:"Last Name",value:g.lastName,onChange:s=>k({...g,lastName:s.target.value}),fullWidth:!0}),e.jsx(F,{label:"Email",type:"email",value:g.email,onChange:s=>k({...g,email:s.target.value}),fullWidth:!0}),e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Role"}),e.jsxs(W,{value:g.role,onChange:s=>k({...g,role:s.target.value}),children:[e.jsx(p,{value:"admin",children:"Admin"}),e.jsx(p,{value:"member",children:"Member"}),e.jsx(p,{value:"viewer",children:"Viewer"}),e.jsx(p,{value:"owner",children:"Owner"})]})]}),e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Status"}),e.jsxs(W,{value:g.status,onChange:s=>k({...g,status:s.target.value}),children:[e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"pending",children:"Pending"}),e.jsx(p,{value:"suspended",children:"Suspended"}),e.jsx(p,{value:"removed",children:"Removed"})]})]}),e.jsx(F,{label:"Department",value:g.department,onChange:s=>k({...g,department:s.target.value}),fullWidth:!0}),e.jsx(F,{label:"Position",value:g.position,onChange:s=>k({...g,position:s.target.value}),fullWidth:!0}),e.jsx(F,{label:"Phone",value:g.phone,onChange:s=>k({...g,phone:s.target.value}),fullWidth:!0})]})}),e.jsxs(K,{children:[e.jsx(I,{onClick:()=>se(!1),children:"Cancel"}),e.jsx(I,{onClick:Ye,variant:"contained",disabled:re.loading,children:re.loading?"Saving...":"Save Changes"})]})]}),e.jsxs(G,{open:Ve,onClose:()=>te(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{children:"Assign License"}),e.jsx(Z,{children:e.jsxs(b,{sx:{mt:2},children:[e.jsxs(P,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Assign a license to ",o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]}),e.jsxs(z,{fullWidth:!0,children:[e.jsx(V,{children:"Select License"}),e.jsx(W,{value:Q,onChange:s=>Ie(s.target.value),children:R==null?void 0:R.filter(s=>!s.assignedTo).map(s=>e.jsxs(p,{value:s.id,children:[s.tier," - ",s.key]},s.id))})]})]})}),e.jsxs(K,{children:[e.jsx(I,{onClick:()=>te(!1),children:"Cancel"}),e.jsx(I,{onClick:es,variant:"contained",disabled:!Q||le.loading,children:le.loading?"Assigning...":"Assign License"})]})]}),e.jsxs(G,{open:We,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{children:"Change Password"}),e.jsx(Z,{children:e.jsxs(b,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[e.jsxs(P,{variant:"body2",color:"text.secondary",children:["Change password for ",o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]}),e.jsx(F,{label:"New Password",type:"password",value:T.newPassword,onChange:s=>xe({...T,newPassword:s.target.value}),fullWidth:!0,helperText:"Password must be at least 8 characters long"}),e.jsx(F,{label:"Confirm Password",type:"password",value:T.confirmPassword,onChange:s=>xe({...T,confirmPassword:s.target.value}),fullWidth:!0})]})}),e.jsxs(K,{children:[e.jsx(I,{onClick:()=>ae(!1),children:"Cancel"}),e.jsx(I,{onClick:ss,variant:"contained",disabled:!T.newPassword||!T.confirmPassword||oe.loading,children:oe.loading?"Changing...":"Change Password"})]})]}),e.jsxs(G,{open:Oe,onClose:()=>ne(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{children:"Remove Team Member"}),e.jsx(Z,{children:e.jsxs(b,{sx:{mt:2},children:[e.jsxs(je,{severity:"warning",sx:{mb:2},children:[e.jsx(ve,{children:"Warning"}),"This action cannot be undone. The team member will be permanently removed from your organization."]}),e.jsxs(P,{variant:"body2",children:["Are you sure you want to remove ",e.jsxs("strong",{children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]})," from the team?"]})]})}),e.jsxs(K,{children:[e.jsx(I,{onClick:()=>ne(!1),children:"Cancel"}),e.jsx(I,{onClick:_e,variant:"contained",color:"error",disabled:ie.loading,children:ie.loading?"Removing...":"Remove Member"})]})]})]})};export{lt as default};
