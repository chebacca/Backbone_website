import{j as e,a as s,T as n,G as t,c as p,as as se,I as O,a$ as oe,h as le,u as l,aR as ce,aS as de,aT as xe,a4 as C,d as o,x as he,y as ue,U as T,W as b,X as j,Y as y,b0 as S,Q as I,D as _,p as L,t as D,aq as Y,b1 as me,aM as V,aN as B,aO as G,aQ as E,aP as Q,ah as pe}from"./mui-BmK9T4iY.js";import{r as h}from"./vendor-DIxetjBo.js";import{u as be}from"./notistack.esm-Bg0Tn0tt.js";import{u as je,b as z}from"./index-Bpq_AjTt.js";import"./stripe-6nutOR1s.js";const ye=[{id:"two_factor",title:"Two-Factor Authentication",description:"Add an extra layer of security to your account",enabled:!1,icon:e.jsx(L,{}),type:"security"},{id:"email_notifications",title:"Email Notifications",description:"Receive email alerts for important account activities",enabled:!0,icon:e.jsx(pe,{}),type:"notifications"},{id:"login_alerts",title:"Login Alerts",description:"Get notified when someone logs into your account",enabled:!0,icon:e.jsx(L,{}),type:"security"},{id:"data_export",title:"Data Export Access",description:"Allow downloading of your account data",enabled:!0,icon:e.jsx(Y,{}),type:"privacy"}],Ae=()=>{var U,q,M;const{user:i}=je(),{enqueueSnackbar:c}=be(),[d,u]=h.useState({firstName:(i==null?void 0:i.firstName)||"",lastName:(i==null?void 0:i.lastName)||"",email:(i==null?void 0:i.email)||"",company:"",jobTitle:"",phone:"",timezone:"UTC",language:"en"}),[f,A]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[F,Z]=h.useState(ye),[g,W]=h.useState({}),[J,P]=h.useState(!1),[R,X]=h.useState(""),[v,$]=h.useState(!1),[H,k]=h.useState(!1),[x,K]=h.useState("profile"),ee=()=>{c("Profile updated successfully",{variant:"success"})},ae=()=>{if(f.newPassword!==f.confirmPassword){c("Passwords do not match",{variant:"error"});return}c("Password changed successfully",{variant:"success"}),A({currentPassword:"",newPassword:"",confirmPassword:""})},N=a=>{Z(r=>r.map(m=>m.id===a?{...m,enabled:!m.enabled}:m)),c("Setting updated",{variant:"success"})},re=async()=>{try{const a=await z.twoFASetupInitiate();W({qr:a.qrCodeDataUrl,secret:a.secret,enabled:!1}),P(!0)}catch(a){c(a.message||"Failed to start 2FA setup",{variant:"error"})}},ie=async()=>{try{const a=await z.twoFASetupVerify(R.trim());W(r=>({...r,enabled:!0,backupCodes:a.backupCodes})),c("Two-factor authentication enabled",{variant:"success"}),P(!1)}catch(a){c(a.message||"Invalid code",{variant:"error"})}},te=async()=>{try{await z.twoFADisable(),W({enabled:!1}),c("Two-factor authentication disabled",{variant:"success"})}catch(a){c(a.message||"Failed to disable 2FA",{variant:"error"})}},ne=()=>{c("Account deletion initiated. Check your email for confirmation.",{variant:"warning"}),k(!1)},w=({id:a,label:r,isActive:m})=>e.jsx(o,{variant:m?"contained":"outlined",onClick:()=>K(a),sx:{mr:1,mb:1,...m&&{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"}},children:r});return e.jsxs(s,{children:[e.jsx(s,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(s,{sx:{mb:4},children:[e.jsx(n,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Account Settings"}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Manage your account preferences and security settings"})]})}),e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:e.jsxs(s,{sx:{mb:4},children:[e.jsx(w,{id:"profile",label:"Profile",isActive:x==="profile"}),e.jsx(w,{id:"security",label:"Security",isActive:x==="security"}),e.jsx(w,{id:"notifications",label:"Notifications",isActive:x==="notifications"}),e.jsx(w,{id:"privacy",label:"Privacy",isActive:x==="privacy"}),e.jsx(w,{id:"danger",label:"Danger Zone",isActive:x==="danger"})]})}),x==="profile"&&e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(t,{container:!0,spacing:4,children:[e.jsx(t,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{p:3,textAlign:"center",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs(s,{sx:{position:"relative",display:"inline-block",mb:2},children:[e.jsxs(se,{sx:{width:120,height:120,fontSize:"3rem",bgcolor:"primary.main"},children:[(U=i==null?void 0:i.firstName)==null?void 0:U[0],(q=i==null?void 0:i.lastName)==null?void 0:q[0]]}),e.jsx(O,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"#000","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(oe,{})})]}),e.jsxs(n,{variant:"h6",sx:{fontWeight:600},children:[d.firstName," ",d.lastName]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:d.email}),e.jsx(le,{label:((M=i==null?void 0:i.subscription)==null?void 0:M.tier)||"Pro",color:"primary",sx:{mt:1}})]})}),e.jsx(t,{item:!0,xs:12,md:8,children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Personal Information"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"First Name",value:d.firstName,onChange:a=>u(r=>({...r,firstName:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"Last Name",value:d.lastName,onChange:a=>u(r=>({...r,lastName:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"Email Address",value:d.email,onChange:a=>u(r=>({...r,email:a.target.value})),disabled:!0,helperText:"Contact support to change your email address"})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"Company",value:d.company,onChange:a=>u(r=>({...r,company:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"Job Title",value:d.jobTitle,onChange:a=>u(r=>({...r,jobTitle:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"Phone Number",value:d.phone,onChange:a=>u(r=>({...r,phone:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsxs(ce,{fullWidth:!0,children:[e.jsx(de,{id:"timezone-select-label",children:"Timezone"}),e.jsxs(xe,{labelId:"timezone-select-label",id:"timezone-select",value:d.timezone,label:"Timezone",onChange:a=>u(r=>({...r,timezone:a.target.value})),inputProps:{"aria-label":"Select timezone",title:"Select your timezone",name:"timezone"},"aria-labelledby":"timezone-select-label",title:"Select your timezone",children:[e.jsx(C,{value:"UTC",children:"UTC"}),e.jsx(C,{value:"America/New_York",children:"Eastern Time"}),e.jsx(C,{value:"America/Chicago",children:"Central Time"}),e.jsx(C,{value:"America/Denver",children:"Mountain Time"}),e.jsx(C,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})})]}),e.jsxs(s,{sx:{mt:4,display:"flex",gap:2},children:[e.jsx(o,{variant:"contained",onClick:ee,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:"Save Changes"}),e.jsx(o,{variant:"outlined",children:"Cancel"})]})]})})]})}),x==="security"&&e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(t,{container:!0,spacing:4,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Change Password"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"Current Password",type:v?"text":"password",value:f.currentPassword,onChange:a=>A(r=>({...r,currentPassword:a.target.value})),InputProps:{endAdornment:e.jsx(O,{onClick:()=>$(!v),edge:"end",children:v?e.jsx(he,{}):e.jsx(ue,{})})}})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"New Password",type:v?"text":"password",value:f.newPassword,onChange:a=>A(r=>({...r,newPassword:a.target.value}))})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"Confirm New Password",type:v?"text":"password",value:f.confirmPassword,onChange:a=>A(r=>({...r,confirmPassword:a.target.value}))})})]}),e.jsx(o,{variant:"contained",onClick:ae,sx:{mt:3,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:"Update Password"})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Security Settings"}),e.jsxs(T,{children:[F.filter(a=>a.type==="security").map(a=>e.jsxs(b,{sx:{px:0},children:[e.jsx(j,{children:a.icon}),e.jsx(y,{primary:a.title,secondary:a.description}),e.jsx(S,{children:e.jsx(I,{checked:a.enabled,onChange:()=>N(a.id),color:"primary"})})]},a.id)),e.jsx(_,{sx:{my:2}}),e.jsxs(b,{sx:{px:0},children:[e.jsx(j,{children:e.jsx(L,{})}),e.jsx(y,{primary:"Two-Factor Authentication (TOTP)",secondary:g.enabled?"Enabled":"Disabled"}),e.jsx(S,{children:g.enabled?e.jsx(o,{variant:"outlined",color:"error",onClick:te,children:"Disable"}):e.jsx(o,{variant:"contained",onClick:re,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:"Enable"})})]})]})]})})]})}),x==="notifications"&&e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Notification Preferences"}),e.jsx(T,{children:F.filter(a=>a.type==="notifications").map(a=>e.jsxs(b,{sx:{px:0},children:[e.jsx(j,{children:a.icon}),e.jsx(y,{primary:a.title,secondary:a.description}),e.jsx(S,{children:e.jsx(I,{checked:a.enabled,onChange:()=>N(a.id),color:"primary"})})]},a.id))})]})}),x==="privacy"&&e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Privacy & Data Controls"}),e.jsx(T,{children:F.filter(a=>a.type==="privacy").map(a=>e.jsxs(b,{sx:{px:0},children:[e.jsx(j,{children:a.icon}),e.jsx(y,{primary:a.title,secondary:a.description}),e.jsx(S,{children:e.jsx(I,{checked:a.enabled,onChange:()=>N(a.id),color:"primary"})})]},a.id))}),e.jsx(_,{sx:{my:3}}),e.jsx(D,{severity:"info",sx:{mb:3},children:e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Data Export:"})," You can download a copy of your data at any time. This includes your profile information, license history, and usage analytics."]})}),e.jsx(o,{variant:"outlined",startIcon:e.jsx(Y,{}),sx:{mr:2},children:"Export My Data"})]})}),x==="danger"&&e.jsx(s,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(p,{sx:{p:4,background:"linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, rgba(244, 67, 54, 0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(244, 67, 54, 0.2)"},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3,color:"error.main"},children:"Danger Zone"}),e.jsx(D,{severity:"warning",sx:{mb:3},children:e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Warning:"})," These actions are irreversible. Please proceed with caution."]})}),e.jsxs(s,{sx:{p:3,border:"1px solid",borderColor:"error.main",borderRadius:2},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Delete Account"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsx(o,{variant:"contained",color:"error",startIcon:e.jsx(me,{}),onClick:()=>k(!0),children:"Delete My Account"})]})]})}),e.jsxs(V,{open:H,onClose:()=>k(!1),PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(244, 67, 54, 0.2)"}},children:[e.jsx(B,{sx:{color:"error.main"},children:"Delete Account"}),e.jsxs(G,{children:[e.jsx(D,{severity:"error",sx:{mb:2},children:"This action is permanent and cannot be undone."}),e.jsx(n,{variant:"body1",sx:{mb:2},children:"Are you sure you want to delete your account? This will:"}),e.jsxs(T,{dense:!0,children:[e.jsxs(b,{children:[e.jsx(j,{children:e.jsx(E,{color:"error"})}),e.jsx(y,{primary:"Permanently delete all your data"})]}),e.jsxs(b,{children:[e.jsx(j,{children:e.jsx(E,{color:"error"})}),e.jsx(y,{primary:"Cancel all active subscriptions"})]}),e.jsxs(b,{children:[e.jsx(j,{children:e.jsx(E,{color:"error"})}),e.jsx(y,{primary:"Revoke all license keys"})]})]}),e.jsx(l,{fullWidth:!0,label:"Type 'DELETE' to confirm",sx:{mt:2},placeholder:"DELETE"})]}),e.jsxs(Q,{children:[e.jsx(o,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(o,{onClick:ne,color:"error",variant:"contained",children:"Delete Account"})]})]}),e.jsxs(V,{open:J,onClose:()=>P(!1),PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(B,{children:"Set up Two-Factor Authentication"}),e.jsxs(G,{children:[e.jsx(n,{variant:"body2",sx:{mb:2},children:"Scan the QR code with Google Authenticator, Authy, or another TOTP app. Then enter the 6-digit code to confirm."}),g.qr&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx("img",{src:g.qr,alt:"2FA QR Code",style:{width:200,height:200}})}),g.secret&&e.jsxs(D,{severity:"info",sx:{mb:2},children:["Secret: ",g.secret]}),e.jsx(l,{fullWidth:!0,label:"Authentication code",value:R,onChange:a=>X(a.target.value)})]}),e.jsxs(Q,{children:[e.jsx(o,{onClick:()=>P(!1),children:"Cancel"}),e.jsx(o,{variant:"contained",onClick:ie,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},children:"Verify & Enable"})]})]})]})};export{Ae as default};
