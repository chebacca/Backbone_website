const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CloudProjectIntegration-Dhw120lI.js","assets/UnifiedProjectCreationDialog-C8HxqDi6.js","assets/mui-T5zcPaKR.js","assets/vendor-OeuszDaU.js","assets/index-m5LuGRmr.js","assets/stripe-Bd-xCkZF.js","assets/index-DrfToOVX.css","assets/proxy-Bigtmpzy.js"])))=>i.map(i=>d[i]);
import{j as e,ab as K,b as q,a as n,T as o,G as O,k as te,l as re,U as se,W as le,X as ce,n as V,Y as de,h as _,c6 as ue,d as z,aD as xe,aE as he,aG as pe,aZ as me,c7 as ge,c8 as fe,F as ye,c9 as be,aJ as je,aK as ae,aI as ve,az as J,t as oe,u as Ce,v as ke,aL as Se,ca as we,R as Ie,aA as Pe,aB as H,ag as Q,cb as We,aj as Ae,a4 as ze,cc as Me,cd as Le,I as Te,aT as Re,av as $e,aH as De,Z as _e,C as Y,D as X,ce as G,cf as Oe}from"./mui-T5zcPaKR.js";import{r as i}from"./vendor-OeuszDaU.js";import{s as $,U as Be}from"./UnifiedProjectCreationDialog-C8HxqDi6.js";import{M as Ee,i as Fe,u as ne,P as Ne,a as Ye,b as qe,L as Ue,m as S}from"./proxy-Bigtmpzy.js";import{_ as He}from"./index-m5LuGRmr.js";import Ge from"./LoginPage-CX_p-Yl-.js";import"./stripe-Bd-xCkZF.js";import"./index.esm-BqJ7I8dv.js";import"./notistack.esm-CcFOI6Un.js";class Ke extends i.Component{getSnapshotBeforeUpdate(t){const l=this.props.childRef.current;if(l&&t.isPresent&&!this.props.isPresent){const h=l.offsetParent,c=Fe(h)&&h.offsetWidth||0,u=this.props.sizeRef.current;u.height=l.offsetHeight||0,u.width=l.offsetWidth||0,u.top=l.offsetTop,u.left=l.offsetLeft,u.right=c-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ve({children:s,isPresent:t,anchorX:l,root:h}){const c=i.useId(),u=i.useRef(null),m=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=i.useContext(Ee);return i.useInsertionEffect(()=>{const{width:w,height:d,top:f,left:y,right:p}=m.current;if(t||!u.current||!w||!d)return;const g=l==="left"?`left: ${y}`:`right: ${p}`;u.current.dataset.motionPopId=c;const a=document.createElement("style");j&&(a.nonce=j);const v=h??document.head;return v.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${f}px !important;
          }
        `),()=>{v.contains(a)&&v.removeChild(a)}},[t]),e.jsx(Ke,{isPresent:t,childRef:u,sizeRef:m,children:i.cloneElement(s,{ref:u})})}const Je=({children:s,initial:t,isPresent:l,onExitComplete:h,custom:c,presenceAffectsLayout:u,mode:m,anchorX:j,root:w})=>{const d=ne(Qe),f=i.useId();let y=!0,p=i.useMemo(()=>(y=!1,{id:f,initial:t,isPresent:l,custom:c,onExitComplete:g=>{d.set(g,!0);for(const a of d.values())if(!a)return;h&&h()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[l,d,h]);return u&&y&&(p={...p}),i.useMemo(()=>{d.forEach((g,a)=>d.set(a,!1))},[l]),i.useEffect(()=>{!l&&!d.size&&h&&h()},[l]),m==="popLayout"&&(s=e.jsx(Ve,{isPresent:l,anchorX:j,root:w,children:s})),e.jsx(Ne.Provider,{value:p,children:s})};function Qe(){return new Map}const N=s=>s.key||"";function Z(s){const t=[];return i.Children.forEach(s,l=>{i.isValidElement(l)&&t.push(l)}),t}const ie=({children:s,custom:t,initial:l=!0,onExitComplete:h,presenceAffectsLayout:c=!0,mode:u="sync",propagate:m=!1,anchorX:j="left",root:w})=>{const[d,f]=Ye(m),y=i.useMemo(()=>Z(s),[s]),p=m&&!d?[]:y.map(N),g=i.useRef(!0),a=i.useRef(y),v=ne(()=>new Map),[I,A]=i.useState(y),[M,T]=i.useState(y);qe(()=>{g.current=!1,a.current=y;for(let P=0;P<M.length;P++){const C=N(M[P]);p.includes(C)?v.delete(C):v.get(C)!==!0&&v.set(C,!1)}},[M,p.length,p.join("-")]);const D=[];if(y!==I){let P=[...y];for(let C=0;C<M.length;C++){const L=M[C],E=N(L);p.includes(E)||(P.splice(C,0,L),D.push(L))}return u==="wait"&&D.length&&(P=D),T(Z(P)),A(y),null}const{forceRender:B}=i.useContext(Ue);return e.jsx(e.Fragment,{children:M.map(P=>{const C=N(P),L=m&&!d?!1:y===M||p.includes(C),E=()=>{if(v.has(C))v.set(C,!0);else return;let F=!0;v.forEach(U=>{U||(F=!1)}),F&&(B==null||B(),T(a.current),m&&(f==null||f()),h&&h())};return e.jsx(Je,{isPresent:L,initial:!g.current||l?void 0:!1,custom:t,presenceAffectsLayout:c,mode:u,root:w,onExitComplete:L?void 0:E,anchorX:j,children:P},C)})})},ee=[{mode:"standalone",title:"Standalone Mode",description:"Work offline with local projects and data storage",icon:e.jsx(ae,{fontSize:"large"}),benefits:["No internet connection required","Maximum privacy and data control","Fast local performance","No subscription fees","Complete offline capability"],recommendedFor:["Individual users","Offline work","Privacy-focused","Local development"],requirements:[],availableStorageModes:["local"],defaultStorageMode:"local"},{mode:"shared_network",title:"Network Mode",description:"Collaborate with teams and access cloud projects",icon:e.jsx(ve,{fontSize:"large"}),benefits:["Real-time collaboration","Cloud backup and sync","Team project sharing","Cross-device access","Advanced features and integrations"],recommendedFor:["Teams","Collaboration","Cloud-first","Enterprise"],requirements:["Active subscription","Internet connection"],availableStorageModes:["cloud","hybrid"],defaultStorageMode:"cloud"}],Xe=({onModeSelected:s})=>{var g;const[t,l]=i.useState(null),[h,c]=i.useState("local"),[u,m]=i.useState(!1),[j,w]=i.useState(!1),d=K(),f=a=>{l(a.mode),c(a.defaultStorageMode),a.availableStorageModes.length===1?y(a.mode,a.defaultStorageMode):m(!0)},y=async(a,v)=>{w(!0);try{await $.selectMode(a,v),s==null||s(a,v)}catch(I){console.error("Mode selection failed:",I)}finally{w(!1),m(!1)}},p=a=>{switch(a){case"local":return"Store all project data on your local machine. No internet required, maximum privacy.";case"cloud":return"Store project data in the cloud for sharing, backup, and access from multiple devices.";case"hybrid":return"Combine local and cloud storage for optimal performance and flexibility."}};return e.jsxs(q,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(n,{sx:{textAlign:"center",mb:6},children:[e.jsx(o,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:700,background:`linear-gradient(135deg, ${d.palette.primary.main} 0%, ${d.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"Choose Your Workspace Mode"}),e.jsx(o,{variant:"h6",color:"text.secondary",sx:{maxWidth:"600px",mx:"auto",opacity:.8},children:"Select how you want to work with your projects. You can change this later in settings."})]}),e.jsx(O,{container:!0,spacing:4,sx:{mb:6},children:ee.map((a,v)=>e.jsx(O,{item:!0,xs:12,md:6,children:e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1},children:e.jsxs(te,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease",border:t===a.mode?2:1,borderColor:t===a.mode?"primary.main":"divider",backgroundColor:t===a.mode?"background.elevated":"background.paper","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)",boxShadow:I=>I.shadows[8],backgroundColor:"background.elevated"}},onClick:()=>f(a),children:[e.jsxs(re,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(n,{sx:{color:"primary.main",mr:2,p:1,borderRadius:2,backgroundColor:"rgba(0, 212, 255, 0.1)"},children:a.icon}),e.jsxs(n,{children:[e.jsx(o,{variant:"h5",component:"h2",fontWeight:"bold",color:"text.primary",children:a.title}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:a.description})]})]}),e.jsxs(n,{sx:{mb:3,flexGrow:1},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"primary",sx:{fontWeight:600},children:"Benefits:"}),e.jsx(se,{dense:!0,sx:{py:0},children:a.benefits.map((I,A)=>e.jsxs(le,{sx:{py:.5,px:0},children:[e.jsx(ce,{sx:{minWidth:32},children:e.jsx(V,{color:"success",fontSize:"small",sx:{color:"success.main"}})}),e.jsx(de,{primary:I,primaryTypographyProps:{variant:"body2",color:"text.primary"}})]},A))})]}),e.jsxs(n,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"text.primary",sx:{fontWeight:600},children:"Perfect for:"}),e.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.recommendedFor.map((I,A)=>e.jsx(_,{label:I,size:"small",variant:"outlined",color:"primary",sx:{borderColor:"primary.main",color:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.2)"}}},A))})]}),a.requirements.length>0&&e.jsxs(n,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"warning.main",sx:{fontWeight:600},children:"Requirements:"}),e.jsx(n,{component:"ul",sx:{m:0,pl:2},children:a.requirements.map((I,A)=>e.jsx(o,{component:"li",variant:"body2",color:"text.secondary",children:I},A))})]})]}),e.jsx(ue,{sx:{p:3,pt:0},children:e.jsx(z,{fullWidth:!0,variant:t===a.mode?"contained":"outlined",size:"large",startIcon:t===a.mode?e.jsx(V,{}):void 0,disabled:j,sx:{height:48,fontSize:"1rem",fontWeight:600,textTransform:"none",borderRadius:2,...t===a.mode?{background:`linear-gradient(135deg, ${d.palette.primary.main} 0%, ${d.palette.secondary.main} 100%)`,color:"#000000",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)","&:hover":{background:`linear-gradient(135deg, ${d.palette.primary.light} 0%, ${d.palette.secondary.light} 100%)`,boxShadow:"0 6px 20px rgba(0, 212, 255, 0.4)",transform:"translateY(-1px)"}}:{borderColor:"primary.main",color:"primary.main",borderWidth:2,"&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.2)",transform:"translateY(-1px)"}}},children:t===a.mode?"Selected":`Choose ${a.title}`})})]})})},a.mode))}),e.jsxs(xe,{open:u,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",borderRadius:3,border:1,borderColor:"divider"}},children:[e.jsx(he,{sx:{pb:1,color:"text.primary",fontWeight:600},children:"Choose Storage Mode"}),e.jsxs(pe,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Select how you want to store your project data for ",t==="standalone"?"Standalone":"Network"," mode."]}),e.jsxs(me,{component:"fieldset",fullWidth:!0,children:[e.jsx(ge,{component:"legend",sx:{color:"text.primary",mb:2},children:"Storage Options"}),e.jsx(fe,{value:h,onChange:a=>c(a.target.value),children:(g=ee.find(a=>a.mode===t))==null?void 0:g.availableStorageModes.map(a=>e.jsx(ye,{value:a,control:e.jsx(be,{sx:{color:"primary.main"}}),label:e.jsxs(n,{children:[e.jsxs(o,{variant:"body1",color:"text.primary",sx:{fontWeight:500},children:[a.charAt(0).toUpperCase()+a.slice(1)," Storage"]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:p(a)})]}),sx:{mb:2,p:2,borderRadius:2,border:1,borderColor:h===a?"primary.main":"divider",backgroundColor:h===a?"rgba(0, 212, 255, 0.05)":"transparent","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.05)"}}},a))})]})]}),e.jsxs(je,{sx:{p:3,pt:1},children:[e.jsx(z,{onClick:()=>m(!1),sx:{color:"text.secondary","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:"Cancel"}),e.jsx(z,{onClick:()=>y(t,h),variant:"contained",disabled:j,sx:{background:`linear-gradient(135deg, ${d.palette.primary.main} 0%, ${d.palette.secondary.main} 100%)`,color:"#000000",fontWeight:600,px:3,"&:hover":{background:`linear-gradient(135deg, ${d.palette.primary.light} 0%, ${d.palette.secondary.light} 100%)`,boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:j?"Processing...":"Continue"})]})]}),e.jsx(n,{sx:{textAlign:"center",mt:4},children:e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{opacity:.7},children:["Need help choosing? ",e.jsx(z,{color:"primary",sx:{textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Learn more about modes"})]})})]})},Ze=({mode:s,storageMode:t,onProjectSelected:l,onBack:h})=>{const[c,u]=i.useState([]),[m,j]=i.useState([]),[w,d]=i.useState(!0),[f,y]=i.useState(""),[p,g]=i.useState("my_projects"),[a,v]=i.useState("lastAccessed"),[I,A]=i.useState(!1),[M,T]=i.useState(null);i.useEffect(()=>{D()},[s,t,p]),i.useEffect(()=>{B()},[c,f,a,p]);const D=async()=>{d(!0);try{let r=[];if(s==="shared_network"||t==="cloud"||t==="hybrid")try{const{cloudProjectIntegration:b}=await He(async()=>{const{cloudProjectIntegration:W}=await import("./CloudProjectIntegration-Dhw120lI.js");return{cloudProjectIntegration:W}},__vite__mapDeps([0,1,2,3,4,5,6,7])),k=(await b.getUserProjects()).map(W=>({id:W.id,name:W.name,description:W.description,mode:W.applicationMode,storageMode:(W.storageBackend==="firestore","cloud"),lastAccessed:W.lastAccessedAt,collaborators:W.maxCollaborators||0,status:W.isActive?"active":"archived",tags:[],size:"Unknown",isOwner:!0}));r=[...r,...k]}catch(b){console.error("Failed to load cloud projects:",b)}if(s==="standalone"||t==="local")try{const R=JSON.parse(localStorage.getItem("localProjects")||"[]").map(k=>{var W;return{id:k.id,name:k.name,description:k.description,mode:k.mode,storageMode:k.storageMode,lastAccessed:k.createdAt,collaborators:((W=k.localNetworkConfig)==null?void 0:W.maxUsers)||0,status:"active",tags:[],size:"Unknown",isOwner:!0}});r=[...r,...R]}catch(b){console.error("Failed to load local projects:",b)}let x=r;p==="my_projects"?x=x.filter(b=>b.isOwner):p==="shared_projects"&&(x=x.filter(b=>!b.isOwner)),u(x)}catch(r){console.error("Failed to load projects:",r)}finally{d(!1)}},B=()=>{let r=[...c];f&&(r=r.filter(x=>{var b,R;return x.name.toLowerCase().includes(f.toLowerCase())||((b=x.description)==null?void 0:b.toLowerCase().includes(f.toLowerCase()))||((R=x.tags)==null?void 0:R.some(k=>k.toLowerCase().includes(f.toLowerCase())))})),r.sort((x,b)=>{switch(a){case"name":return x.name.localeCompare(b.name);case"lastAccessed":return new Date(b.lastAccessed).getTime()-new Date(x.lastAccessed).getTime();case"size":return(b.size||"").localeCompare(x.size||"");case"collaborators":return(b.collaborators||0)-(x.collaborators||0);default:return 0}}),j(r)},P=r=>{$.selectProject(r),l==null||l(r)},C=r=>{const x=new Date(r),R=new Date().getTime()-x.getTime(),k=Math.floor(R/(1e3*60*60*24));return k===0?"Today":k===1?"Yesterday":k<7?`${k} days ago`:x.toLocaleDateString()},L=r=>{switch(r){case"local":return e.jsx(ae,{fontSize:"small"});case"cloud":return e.jsx(_e,{fontSize:"small"});case"hybrid":return e.jsx(De,{fontSize:"small"})}},E=r=>{switch(r){case"active":return"success";case"shared":return"info";case"archived":return"default";default:return"default"}},F=r=>e.jsx(S.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:e.jsx(te,{sx:{height:"100%",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:x=>x.shadows[4]}},onClick:()=>P(r.id),children:e.jsxs(re,{children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{color:"primary"}),e.jsx(o,{variant:"h6",component:"h3",noWrap:!0,children:r.name})]}),e.jsx(Te,{size:"small",onClick:x=>{x.stopPropagation(),T(x.currentTarget)},children:e.jsx(Re,{})})]}),r.description&&e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:r.description}),e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[e.jsx(_,{size:"small",label:r.status,color:E(r.status),variant:"outlined"}),e.jsx(_,{size:"small",icon:L(r.storageMode),label:r.storageMode,variant:"outlined"}),r.collaborators&&e.jsx(_,{size:"small",icon:e.jsx($e,{}),label:r.collaborators,variant:"outlined"})]}),r.tags&&r.tags.length>0&&e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[r.tags.slice(0,3).map(x=>e.jsx(_,{size:"small",label:x,variant:"filled",color:"primary",sx:{fontSize:"0.75rem"}},x)),r.tags.length>3&&e.jsx(_,{size:"small",label:`+${r.tags.length-3}`,variant:"outlined",sx:{fontSize:"0.75rem"}})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[e.jsx(o,{variant:"caption",color:"text.secondary",children:C(r.lastAccessed)}),r.size&&e.jsx(o,{variant:"caption",color:"text.secondary",children:r.size})]})]})})},r.id),U=()=>e.jsxs(n,{sx:{textAlign:"center",py:8},children:[e.jsx(Me,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:f?"No projects found":"No projects yet"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:f?"Try adjusting your search criteria":s==="standalone"?"Create your first standalone project to get started":"Create or join a network project to begin collaborating"}),!f&&e.jsx(z,{variant:"contained",startIcon:e.jsx(J,{}),onClick:()=>A(!0),size:"large",children:"Create Project"})]});return e.jsxs(q,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o,{variant:"h4",component:"h1",fontWeight:"bold",children:"Your Projects"}),e.jsxs(n,{sx:{display:"flex",gap:1},children:[h&&e.jsx(z,{onClick:h,variant:"outlined",children:"Back"}),e.jsx(z,{variant:"contained",startIcon:e.jsx(J,{}),onClick:()=>A(!0),children:"Create Project"})]})]}),e.jsx(oe,{severity:"info",sx:{mb:3},children:e.jsxs(o,{variant:"body2",children:["Currently in ",e.jsxs("strong",{children:[s==="standalone"?"Standalone":"Network"," mode"]})," with"," ",e.jsxs("strong",{children:[t," storage"]}),".",s==="standalone"&&t==="local"&&" Working offline with local files.",s==="shared_network"&&" Ready for team collaboration."]})}),e.jsxs(n,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(Ce,{placeholder:"Search projects...",value:f,onChange:r=>y(r.target.value),size:"small",sx:{flexGrow:1,minWidth:200},InputProps:{startAdornment:e.jsx(ke,{position:"start",children:e.jsx(Se,{})})}}),e.jsxs(z,{variant:"outlined",startIcon:e.jsx(we,{}),onClick:r=>T(r.currentTarget),children:["Sort: ",a]}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(Ie,{}),onClick:D,disabled:w,children:"Refresh"})]}),e.jsxs(Pe,{value:p,onChange:(r,x)=>g(x),sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(H,{label:e.jsx(Q,{badgeContent:c.filter(r=>r.isOwner).length,color:"primary",children:"My Projects"}),value:"my_projects"}),s==="shared_network"&&e.jsx(H,{label:e.jsx(Q,{badgeContent:c.filter(r=>!r.isOwner).length,color:"secondary",children:"Shared Projects"}),value:"shared_projects"}),e.jsx(H,{label:"Recent",value:"recent"})]})]}),e.jsx(n,{sx:{mb:4},children:w?e.jsx(O,{container:!0,spacing:3,children:[...Array(6)].map((r,x)=>e.jsx(O,{item:!0,xs:12,sm:6,md:4,children:e.jsx(We,{variant:"rectangular",height:200,sx:{borderRadius:1}})},x))}):m.length>0?e.jsx(O,{container:!0,spacing:3,children:e.jsx(ie,{children:m.map(r=>e.jsx(O,{item:!0,xs:12,sm:6,md:4,children:F(r)},r.id))})}):U()}),e.jsx(Ae,{anchorEl:M,open:!!M,onClose:()=>T(null),children:[{value:"lastAccessed",label:"Last Accessed"},{value:"name",label:"Name"},{value:"size",label:"Size"},{value:"collaborators",label:"Collaborators"}].map(r=>e.jsx(ze,{selected:a===r.value,onClick:()=>{v(r.value),T(null)},children:r.label},r.value))}),e.jsx(Be,{open:I,onClose:()=>A(!1),mode:s,onSuccess:r=>{A(!1),P(r)}})]})},et={mode_selection:"Choose Your Workspace Mode",authentication:"Sign In to Continue",project_selection:"Select or Create a Project",complete:"Loading Your Workspace"},tt={mode_selection:"Select how you want to work with your projects",authentication:"Authentication required for this mode",project_selection:"Choose an existing project or create a new one",complete:"Setting up your workspace..."},rt=({onStartupComplete:s})=>{const[t,l]=i.useState(null),[h,c]=i.useState(!0),u=K();i.useEffect(()=>$.subscribe(g=>{l(g),c(!1),g.currentStep==="complete"&&g.selectedProjectId&&setTimeout(()=>{s==null||s(g.selectedProjectId)},1e3)}),[s]);const m=p=>{$.onAuthenticationSuccess(p)},j=(p,g)=>{console.log("Mode selected:",p,"Storage:",g)},w=p=>{console.log("Project selected:",p)},d=()=>{(t==null?void 0:t.currentStep)==="authentication"?$.onModeSelected(t.selectedMode):(t==null?void 0:t.currentStep)==="project_selection"&&$.onModeSelected(t.selectedMode)},f=()=>{$.reset()};if(!t)return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(Y,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,background:`linear-gradient(135deg, ${u.palette.primary.main} 0%, ${u.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center"},children:"Initializing Dashboard v14"}),e.jsx(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"400px"},children:"Setting up your workspace environment..."})]});const y=()=>{switch(t.currentStep){case"mode_selection":return e.jsx(Xe,{onModeSelected:j});case"authentication":return e.jsxs(q,{maxWidth:"sm",children:[e.jsxs(n,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary"},children:"Authentication Required"}),e.jsx(o,{variant:"h6",color:"text.secondary",paragraph:!0,sx:{mb:3},children:t.selectedMode==="shared_network"?"Network mode requires authentication to access shared projects":"Cloud storage requires authentication to sync your data"}),e.jsx(z,{variant:"outlined",onClick:d,sx:{mt:2,borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:"Back to Mode Selection"})]}),e.jsx(Ge,{onSuccess:m,mode:t.selectedMode,redirectTo:"/startup"})]});case"project_selection":return e.jsx(Ze,{mode:t.selectedMode,storageMode:t.storageMode,onProjectSelected:w,onBack:d});case"complete":return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(Y,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,textAlign:"center"},children:"Setting Up Your Workspace"}),e.jsxs(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"500px"},children:['Loading project "',t.selectedProjectId,'" in'," ",t.selectedMode==="standalone"?"Standalone":"Network"," mode"]}),e.jsx(X,{sx:{width:"300px",mt:2,height:6,borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{borderRadius:3,background:`linear-gradient(90deg, ${u.palette.primary.main} 0%, ${u.palette.secondary.main} 100%)`}}})]});default:return null}};return e.jsxs(n,{sx:{minHeight:"100vh",backgroundColor:"background.default",color:"text.primary"},children:[t.currentStep!=="complete"&&e.jsxs(n,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:1e3},children:[e.jsx(X,{variant:"determinate",value:t.currentStep==="mode_selection"?25:t.currentStep==="authentication"?50:t.currentStep==="project_selection"?75:100,sx:{height:4,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{background:`linear-gradient(90deg, ${u.palette.primary.main} 0%, ${u.palette.secondary.main} 100%)`}}}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,backgroundColor:"background.paper",borderBottom:1,borderColor:"divider",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0, 0, 0, 0.3)"},children:[e.jsxs(n,{children:[e.jsx(o,{variant:"h5",component:"h1",sx:{fontWeight:600,color:"text.primary",mb:1},children:et[t.currentStep]}),e.jsx(o,{variant:"body1",color:"text.secondary",sx:{opacity:.8},children:tt[t.currentStep]})]}),t.selectedMode&&e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,backgroundColor:"background.elevated",px:2,py:1,borderRadius:2,border:1,borderColor:"divider"},children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Mode: ",t.selectedMode==="standalone"?"Standalone":"Network"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Storage: ",t.storageMode]})]})]})]}),t.error&&e.jsx(q,{maxWidth:"sm",sx:{pt:t.currentStep!=="complete"?"140px":"20px"},children:e.jsx(oe,{severity:"error",action:e.jsx(z,{color:"inherit",size:"small",onClick:f,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"error.contrastText","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:"Retry"}),sx:{mb:3,backgroundColor:"error.dark",color:"error.contrastText","& .MuiAlert-icon":{color:"error.contrastText"}},children:e.jsx(o,{variant:"body2",children:t.error})})}),e.jsx(n,{sx:{pt:t.currentStep!=="complete"?"140px":0},children:e.jsx(ie,{mode:"wait",children:e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:y()},t.currentStep)})}),e.jsx(G,{in:t.isLoading,children:e.jsx(n,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,backgroundColor:"background.paper",p:4,borderRadius:3,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:1,borderColor:"divider"},children:[e.jsx(Y,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h6",color:"text.primary",children:"Processing..."})]})})})]})},xt=({onStartupComplete:s,onStartupError:t})=>{const[l,h]=i.useState({isInitializing:!0,currentStep:"initializing"}),c=K();i.useEffect(()=>{(async()=>{try{await new Promise(j=>setTimeout(j,2e3)),h({isInitializing:!1,currentStep:"startup"})}catch{h({isInitializing:!1,currentStep:"error",error:"Failed to initialize application"}),t==null||t("Failed to initialize application")}})()},[t]);const u=m=>{h({isInitializing:!1,currentStep:"complete"}),setTimeout(()=>{s==null||s(m)},1e3)};return l.currentStep==="initializing"?e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:4,backgroundColor:"background.default",color:"text.primary",position:"relative",overflow:"hidden"},children:[e.jsx(n,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 50% 50%, ${c.palette.primary.main}15 0%, transparent 70%)`,animation:"pulse 4s ease-in-out infinite"}}),e.jsx(S.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,ease:"easeOut"},children:e.jsx(n,{sx:{width:120,height:120,borderRadius:"50%",background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 32px ${c.palette.primary.main}40`,mb:3},children:e.jsx(o,{variant:"h2",sx:{fontWeight:700,color:"#000000",textAlign:"center"},children:"D14"})})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},children:e.jsx(o,{variant:"h3",component:"h1",sx:{fontWeight:700,background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",mb:2},children:"Dashboard v14"})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4,ease:"easeOut"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",maxWidth:"500px",opacity:.8,mb:4},children:"Professional project management and collaboration platform"})}),e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6,ease:"easeOut"},children:e.jsx(Y,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}})}),e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.8,ease:"easeOut"},children:e.jsx(o,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",opacity:.7},children:"Initializing application..."})})]}):l.currentStep==="startup"?e.jsx(Oe,{direction:"up",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:e.jsx(n,{sx:{minHeight:"100vh"},children:e.jsx(rt,{onStartupComplete:u})})}):l.currentStep==="complete"?e.jsx(G,{in:!0,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(S.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,ease:"easeOut"},children:e.jsx(n,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${c.palette.success.main} 0%, ${c.palette.success.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${c.palette.success.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"success.contrastText",fontWeight:700},children:"✓"})})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2,ease:"easeOut"},children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Ready to Launch!"})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4,ease:"easeOut"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8},children:"Your workspace is ready. Launching application..."})})]})}):l.currentStep==="error"?e.jsx(G,{in:!0,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary",p:4},children:[e.jsx(S.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,ease:"easeOut"},children:e.jsx(n,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${c.palette.error.main} 0%, ${c.palette.error.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${c.palette.error.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"error.contrastText",fontWeight:700},children:"✗"})})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2,ease:"easeOut"},children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Startup Failed"})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4,ease:"easeOut"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8,maxWidth:"600px"},children:l.error||"An unexpected error occurred during startup. Please try again."})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6,ease:"easeOut"},children:e.jsx(o,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",opacity:.6,mt:2},children:"Please restart the application or contact support if the problem persists."})})]})}):null};export{xt as StartupWorkflow,xt as default};
