const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CloudProjectIntegration-f6WnrqdL.js","assets/index-DO6-lhXm.js","assets/mui-D_3t3Wff.js","assets/vendor-CjD1bmmO.js","assets/stripe-DQqYxQf-.js","assets/index-CBai7h7s.css"])))=>i.map(i=>d[i]);
import{Y as D,j as e,b as N,B as s,T as o,G as A,t as H,v as G,w as te,x as ae,y as oe,p as O,z as se,r as W,cc as ne,a as v,ay as ie,az as le,aB as ce,aC as de,bV as xe,bW as ue,F as he,bX as me,aF as pe,ba as V,c2 as ge,ap as Y,d as Q,e as be,I as je,bp as fe,cd as ye,R as ve,b5 as Ce,b6 as $,a1 as q,b3 as ke,a4 as Se,a5 as we,ce as Ie,c6 as Pe,g as We,aw as Ae,al as ze,aO as Me,K as Te,C as L,i as E,cf as _}from"./mui-D_3t3Wff.js";import{r as x,u as Le}from"./vendor-CjD1bmmO.js";import{s as z,U as _e}from"./UnifiedProjectCreationDialog-CipcUPup.js";import{_ as Ne}from"./index-DO6-lhXm.js";import $e from"./LoginPage-ozWZ8_yI.js";import"./CloudProjectIntegration-f6WnrqdL.js";import"./stripe-DQqYxQf-.js";import"./index.esm-VL_aqrbB.js";import"./notistack.esm-Ca-E78ev.js";const U=[{mode:"standalone",title:"Standalone Mode",description:"Work offline with local projects and data storage",icon:e.jsx(V,{fontSize:"large"}),benefits:["No internet connection required","Maximum privacy and data control","Fast local performance","No subscription fees","Complete offline capability"],recommendedFor:["Individual users","Offline work","Privacy-focused","Local development"],requirements:[],availableStorageModes:["local"],defaultStorageMode:"local"},{mode:"shared_network",title:"Network Mode",description:"Collaborate with teams and access cloud projects",icon:e.jsx(ge,{fontSize:"large"}),benefits:["Real-time collaboration","Cloud backup and sync","Team project sharing","Cross-device access","Advanced features and integrations"],recommendedFor:["Teams","Collaboration","Cloud-first","Enterprise"],requirements:["Active subscription","Internet connection"],availableStorageModes:["cloud","hybrid"],defaultStorageMode:"cloud"}],De=({onModeSelected:l})=>{var f;const[t,k]=x.useState(null),[m,g]=x.useState("local"),[i,j]=x.useState(!1),[S,w]=x.useState(!1),c=D(),u=a=>{k(a.mode),g(a.defaultStorageMode),a.availableStorageModes.length===1?P(a.mode,a.defaultStorageMode):j(!0)},P=async(a,M)=>{w(!0);try{await z.selectMode(a,M),l==null||l(a,M)}catch(y){console.error("Mode selection failed:",y)}finally{w(!1),j(!1)}},p=a=>{switch(a){case"local":return"Store all project data on your local machine. No internet required, maximum privacy.";case"cloud":return"Store project data in the cloud for sharing, backup, and access from multiple devices.";case"hybrid":return"Combine local and cloud storage for optimal performance and flexibility."}};return e.jsxs(N,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(s,{sx:{textAlign:"center",mb:6},children:[e.jsx(o,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:700,background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"Choose Your Workspace Mode"}),e.jsx(o,{variant:"h6",color:"text.secondary",sx:{maxWidth:"600px",mx:"auto",opacity:.8},children:"Select how you want to work with your projects. You can change this later in settings."})]}),e.jsx(A,{container:!0,spacing:4,sx:{mb:6},children:U.map((a,M)=>e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx("div",{children:e.jsxs(H,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease",border:t===a.mode?2:1,borderColor:t===a.mode?"primary.main":"divider",backgroundColor:t===a.mode?"background.elevated":"background.paper","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)",boxShadow:y=>y.shadows[8],backgroundColor:"background.elevated"}},onClick:()=>u(a),children:[e.jsxs(G,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(s,{sx:{color:"primary.main",mr:2,p:1,borderRadius:2,backgroundColor:"rgba(0, 212, 255, 0.1)"},children:a.icon}),e.jsxs(s,{children:[e.jsx(o,{variant:"h5",component:"h2",fontWeight:"bold",color:"text.primary",children:a.title}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:a.description})]})]}),e.jsxs(s,{sx:{mb:3,flexGrow:1},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"primary",sx:{fontWeight:600},children:"Benefits:"}),e.jsx(te,{dense:!0,sx:{py:0},children:a.benefits.map((y,C)=>e.jsxs(ae,{sx:{py:.5,px:0},children:[e.jsx(oe,{sx:{minWidth:32},children:e.jsx(O,{color:"success",fontSize:"small",sx:{color:"success.main"}})}),e.jsx(se,{primary:y,primaryTypographyProps:{variant:"body2",color:"text.primary"}})]},C))})]}),e.jsxs(s,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"text.primary",sx:{fontWeight:600},children:"Perfect for:"}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.recommendedFor.map((y,C)=>e.jsx(W,{label:y,size:"small",variant:"outlined",color:"primary",sx:{borderColor:"primary.main",color:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.2)"}}},C))})]}),a.requirements.length>0&&e.jsxs(s,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"warning.main",sx:{fontWeight:600},children:"Requirements:"}),e.jsx(s,{component:"ul",sx:{m:0,pl:2},children:a.requirements.map((y,C)=>e.jsx(o,{component:"li",variant:"body2",color:"text.secondary",children:y},C))})]})]}),e.jsx(ne,{sx:{p:3,pt:0},children:e.jsx(v,{fullWidth:!0,variant:t===a.mode?"contained":"outlined",size:"large",startIcon:t===a.mode?e.jsx(O,{}):void 0,disabled:S,sx:{height:48,fontSize:"1rem",fontWeight:600,textTransform:"none",borderRadius:2,...t===a.mode?{background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,color:"#000000",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)","&:hover":{background:`linear-gradient(135deg, ${c.palette.primary.light} 0%, ${c.palette.secondary.light} 100%)`,boxShadow:"0 6px 20px rgba(0, 212, 255, 0.4)",transform:"translateY(-1px)"}}:{borderColor:"primary.main",color:"primary.main",borderWidth:2,"&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.2)",transform:"translateY(-1px)"}}},children:t===a.mode?"Selected":`Choose ${a.title}`})})]})})},a.mode))}),e.jsxs(ie,{open:i,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",borderRadius:3,border:1,borderColor:"divider"}},children:[e.jsx(le,{sx:{pb:1,color:"text.primary",fontWeight:600},children:"Choose Storage Mode"}),e.jsxs(ce,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Select how you want to store your project data for ",t==="standalone"?"Standalone":"Network"," mode."]}),e.jsxs(de,{component:"fieldset",fullWidth:!0,children:[e.jsx(xe,{component:"legend",sx:{color:"text.primary",mb:2},children:"Storage Options"}),e.jsx(ue,{value:m,onChange:a=>g(a.target.value),children:(f=U.find(a=>a.mode===t))==null?void 0:f.availableStorageModes.map(a=>e.jsx(he,{value:a,control:e.jsx(me,{sx:{color:"primary.main"}}),label:e.jsxs(s,{children:[e.jsxs(o,{variant:"body1",color:"text.primary",sx:{fontWeight:500},children:[a.charAt(0).toUpperCase()+a.slice(1)," Storage"]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:p(a)})]}),sx:{mb:2,p:2,borderRadius:2,border:1,borderColor:m===a?"primary.main":"divider",backgroundColor:m===a?"rgba(0, 212, 255, 0.05)":"transparent","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.05)"}}},a))})]})]}),e.jsxs(pe,{sx:{p:3,pt:1},children:[e.jsx(v,{onClick:()=>j(!1),sx:{color:"text.secondary","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:"Cancel"}),e.jsx(v,{onClick:()=>P(t,m),variant:"contained",disabled:S,sx:{background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,color:"#000000",fontWeight:600,px:3,"&:hover":{background:`linear-gradient(135deg, ${c.palette.primary.light} 0%, ${c.palette.secondary.light} 100%)`,boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:S?"Processing...":"Continue"})]})]}),e.jsx(s,{sx:{textAlign:"center",mt:4},children:e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{opacity:.7},children:["Need help choosing? ",e.jsx(v,{color:"primary",sx:{textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Learn more about modes"})]})})]})},Re=({mode:l,storageMode:t,onProjectSelected:k,onBack:m})=>{const[g,i]=x.useState([]),[j,S]=x.useState([]),[w,c]=x.useState(!0),[u,P]=x.useState(""),[p,f]=x.useState("my_projects"),[a,M]=x.useState("lastAccessed"),[y,C]=x.useState(!1),[R,T]=x.useState(null);x.useEffect(()=>{B()},[l,t,p]),x.useEffect(()=>{J()},[g,u,a,p]);const B=async()=>{c(!0);try{let r=[];if(l==="shared_network"||t==="cloud"||t==="hybrid")try{const{cloudProjectIntegration:d}=await Ne(async()=>{const{cloudProjectIntegration:b}=await import("./CloudProjectIntegration-f6WnrqdL.js");return{cloudProjectIntegration:b}},__vite__mapDeps([0,1,2,3,4,5])),h=(await d.getUserProjects()).map(b=>({id:b.id,name:b.name,description:b.description,mode:b.applicationMode,storageMode:(b.storageBackend==="firestore","cloud"),lastAccessed:b.lastAccessedAt,collaborators:b.maxCollaborators||0,status:b.isActive?"active":"archived",tags:[],size:"Unknown",isOwner:!0}));r=[...r,...h]}catch(d){console.error("Failed to load cloud projects:",d)}if(l==="standalone"||t==="local")try{const I=JSON.parse(localStorage.getItem("localProjects")||"[]").map(h=>{var b;return{id:h.id,name:h.name,description:h.description,mode:h.mode,storageMode:h.storageMode,lastAccessed:h.createdAt,collaborators:((b=h.localNetworkConfig)==null?void 0:b.maxUsers)||0,status:"active",tags:[],size:"Unknown",isOwner:!0}});r=[...r,...I]}catch(d){console.error("Failed to load local projects:",d)}let n=r;p==="my_projects"?n=n.filter(d=>d.isOwner):p==="shared_projects"&&(n=n.filter(d=>!d.isOwner)),i(n)}catch(r){console.error("Failed to load projects:",r)}finally{c(!1)}},J=()=>{let r=[...g];u&&(r=r.filter(n=>{var d,I;return n.name.toLowerCase().includes(u.toLowerCase())||((d=n.description)==null?void 0:d.toLowerCase().includes(u.toLowerCase()))||((I=n.tags)==null?void 0:I.some(h=>h.toLowerCase().includes(u.toLowerCase())))})),r.sort((n,d)=>{switch(a){case"name":return n.name.localeCompare(d.name);case"lastAccessed":return new Date(d.lastAccessed).getTime()-new Date(n.lastAccessed).getTime();case"size":return(d.size||"").localeCompare(n.size||"");case"collaborators":return(d.collaborators||0)-(n.collaborators||0);default:return 0}}),S(r)},F=r=>{z.selectProject(r),k==null||k(r)},K=r=>{const n=new Date(r),I=new Date().getTime()-n.getTime(),h=Math.floor(I/(1e3*60*60*24));return h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:n.toLocaleDateString()},X=r=>{switch(r){case"local":return e.jsx(V,{fontSize:"small"});case"cloud":return e.jsx(Te,{fontSize:"small"});case"hybrid":return e.jsx(Me,{fontSize:"small"})}},Z=r=>{switch(r){case"active":return"success";case"shared":return"info";case"archived":return"default";default:return"default"}},ee=r=>e.jsx("div",{children:e.jsx(H,{sx:{height:"100%",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:n=>n.shadows[4]}},onClick:()=>F(r.id),children:e.jsxs(G,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Pe,{color:"primary"}),e.jsx(o,{variant:"h6",component:"h3",noWrap:!0,children:r.name})]}),e.jsx(We,{size:"small",onClick:n=>{n.stopPropagation(),T(n.currentTarget)},children:e.jsx(Ae,{})})]}),r.description&&e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:r.description}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[e.jsx(W,{size:"small",label:r.status,color:Z(r.status),variant:"outlined"}),e.jsx(W,{size:"small",icon:X(r.storageMode),label:r.storageMode,variant:"outlined"}),r.collaborators&&e.jsx(W,{size:"small",icon:e.jsx(ze,{}),label:r.collaborators,variant:"outlined"})]}),r.tags&&r.tags.length>0&&e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[r.tags.slice(0,3).map(n=>e.jsx(W,{size:"small",label:n,variant:"filled",color:"primary",sx:{fontSize:"0.75rem"}},n)),r.tags.length>3&&e.jsx(W,{size:"small",label:`+${r.tags.length-3}`,variant:"outlined",sx:{fontSize:"0.75rem"}})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[e.jsx(o,{variant:"caption",color:"text.secondary",children:K(r.lastAccessed)}),r.size&&e.jsx(o,{variant:"caption",color:"text.secondary",children:r.size})]})]})})}),re=()=>e.jsxs(s,{sx:{textAlign:"center",py:8},children:[e.jsx(Ie,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:u?"No projects found":"No projects yet"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:u?"Try adjusting your search criteria":l==="standalone"?"Create your first standalone project to get started":"Create or join a network project to begin collaborating"}),!u&&e.jsx(v,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>C(!0),size:"large",children:"Create Project"})]});return e.jsxs(N,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(s,{sx:{mb:4},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o,{variant:"h4",component:"h1",fontWeight:"bold",children:"Your Projects"}),e.jsxs(s,{sx:{display:"flex",gap:1},children:[m&&e.jsx(v,{onClick:m,variant:"outlined",children:"Back"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>C(!0),children:"Create Project"})]})]}),e.jsx(Q,{severity:"info",sx:{mb:3},children:e.jsxs(o,{variant:"body2",children:["Currently in ",e.jsxs("strong",{children:[l==="standalone"?"Standalone":"Network"," mode"]})," with"," ",e.jsxs("strong",{children:[t," storage"]}),".",l==="standalone"&&t==="local"&&" Working offline with local files.",l==="shared_network"&&" Ready for team collaboration."]})}),e.jsxs(s,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(be,{placeholder:"Search projects...",value:u,onChange:r=>P(r.target.value),size:"small",sx:{flexGrow:1,minWidth:200},InputProps:{startAdornment:e.jsx(je,{position:"start",children:e.jsx(fe,{})})}}),e.jsxs(v,{variant:"outlined",startIcon:e.jsx(ye,{}),onClick:r=>T(r.currentTarget),children:["Sort: ",a]}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(ve,{}),onClick:B,disabled:w,children:"Refresh"})]}),e.jsxs(Ce,{value:p,onChange:(r,n)=>f(n),sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx($,{label:e.jsx(q,{badgeContent:g.filter(r=>r.isOwner).length,color:"primary",children:"My Projects"}),value:"my_projects"}),l==="shared_network"&&e.jsx($,{label:e.jsx(q,{badgeContent:g.filter(r=>!r.isOwner).length,color:"secondary",children:"Shared Projects"}),value:"shared_projects"}),e.jsx($,{label:"Recent",value:"recent"})]})]}),e.jsx(s,{sx:{mb:4},children:w?e.jsx(A,{container:!0,spacing:3,children:[...Array(6)].map((r,n)=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ke,{variant:"rectangular",height:200,sx:{borderRadius:1}})},n))}):j.length>0?e.jsx(A,{container:!0,spacing:3,children:j.map(r=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:ee(r)},r.id))}):re()}),e.jsx(Se,{anchorEl:R,open:!!R,onClose:()=>T(null),children:[{value:"lastAccessed",label:"Last Accessed"},{value:"name",label:"Name"},{value:"size",label:"Size"},{value:"collaborators",label:"Collaborators"}].map(r=>e.jsx(we,{selected:a===r.value,onClick:()=>{M(r.value),T(null)},children:r.label},r.value))}),e.jsx(_e,{open:y,onClose:()=>C(!1),mode:l,onSuccess:r=>{C(!1),F(r)}})]})},Be={mode_selection:"Choose Your Workspace Mode",authentication:"Sign In to Continue",project_selection:"Select or Create a Project",complete:"Loading Your Workspace"},Fe={mode_selection:"Select how you want to work with your projects",authentication:"Authentication required for this mode",project_selection:"Choose an existing project or create a new one",complete:"Setting up your workspace..."},Oe=({onStartupComplete:l})=>{const[t,k]=x.useState(null),[m,g]=x.useState(!0),i=D();x.useEffect(()=>z.subscribe(f=>{k(f),g(!1),f.currentStep==="complete"&&f.selectedProjectId&&setTimeout(()=>{l==null||l(f.selectedProjectId)},1e3)}),[l]);const j=p=>{z.onAuthenticationSuccess(p)},S=(p,f)=>{console.log("Mode selected:",p,"Storage:",f)},w=p=>{console.log("Project selected:",p)},c=()=>{((t==null?void 0:t.currentStep)==="authentication"||(t==null?void 0:t.currentStep)==="project_selection")&&z.selectMode(t.selectedMode||"standalone",t.storageMode)},u=()=>{z.reset()};if(!t)return e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(L,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center"},children:"Initializing Dashboard v14"}),e.jsx(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"400px"},children:"Setting up your workspace environment..."})]});const P=()=>{switch(t.currentStep){case"mode_selection":return e.jsx(De,{onModeSelected:S});case"authentication":return e.jsxs(N,{maxWidth:"sm",children:[e.jsxs(s,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary"},children:"Authentication Required"}),e.jsx(o,{variant:"h6",color:"text.secondary",paragraph:!0,sx:{mb:3},children:t.selectedMode==="shared_network"?"Network mode requires authentication to access shared projects":"Cloud storage requires authentication to sync your data"}),e.jsx(v,{variant:"outlined",onClick:c,sx:{mt:2,borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:"Back to Mode Selection"})]}),e.jsx($e,{onSuccess:j,mode:t.selectedMode,redirectTo:"/startup"})]});case"project_selection":return e.jsx(Re,{mode:t.selectedMode,storageMode:t.storageMode,onProjectSelected:w,onBack:c});case"complete":return e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(L,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,textAlign:"center"},children:"Setting Up Your Workspace"}),e.jsxs(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"500px"},children:['Loading project "',t.selectedProjectId,'" in'," ",t.selectedMode==="standalone"?"Standalone":"Network"," mode"]}),e.jsx(E,{sx:{width:"300px",mt:2,height:6,borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{borderRadius:3,background:`linear-gradient(90deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`}}})]});default:return null}};return e.jsxs(s,{sx:{minHeight:"100vh",backgroundColor:"background.default",color:"text.primary"},children:[t.currentStep!=="complete"&&e.jsxs(s,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:1e3},children:[e.jsx(E,{variant:"determinate",value:t.currentStep==="mode_selection"?25:t.currentStep==="authentication"?50:t.currentStep==="project_selection"?75:100,sx:{height:4,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{background:`linear-gradient(90deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`}}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,backgroundColor:"background.paper",borderBottom:1,borderColor:"divider",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0, 0, 0, 0.3)"},children:[e.jsxs(s,{children:[e.jsx(o,{variant:"h5",component:"h1",sx:{fontWeight:600,color:"text.primary",mb:1},children:Be[t.currentStep]}),e.jsx(o,{variant:"body1",color:"text.secondary",sx:{opacity:.8},children:Fe[t.currentStep]})]}),t.selectedMode&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,backgroundColor:"background.elevated",px:2,py:1,borderRadius:2,border:1,borderColor:"divider"},children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Mode: ",t.selectedMode==="standalone"?"Standalone":"Network"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Storage: ",t.storageMode]})]})]})]}),t.error&&e.jsx(N,{maxWidth:"sm",sx:{pt:t.currentStep!=="complete"?"140px":"20px"},children:e.jsx(Q,{severity:"error",action:e.jsx(v,{color:"inherit",size:"small",onClick:u,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"error.contrastText","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:"Retry"}),sx:{mb:3,backgroundColor:"error.dark",color:"error.contrastText","& .MuiAlert-icon":{color:"error.contrastText"}},children:e.jsx(o,{variant:"body2",children:t.error})})}),e.jsx(s,{sx:{pt:t.currentStep!=="complete"?"140px":0},children:P()}),e.jsx(_,{in:t.isLoading,children:e.jsx(s,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,backgroundColor:"background.paper",p:4,borderRadius:3,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:1,borderColor:"divider"},children:[e.jsx(L,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h6",color:"text.primary",children:"Processing..."})]})})})]})},Ke=({onStartupComplete:l,onStartupError:t,isDashboardMode:k=!1})=>{const[m,g]=x.useState({isInitializing:!0,currentStep:"initializing"}),i=D(),j=Le(),S=k||window.location.pathname.includes("/dashboard/startup");x.useEffect(()=>{(async()=>{try{await new Promise(u=>setTimeout(u,2e3)),g({isInitializing:!1,currentStep:"startup"})}catch{g({isInitializing:!1,currentStep:"error",error:"Failed to initialize application"}),t==null||t("Failed to initialize application")}})()},[t]);const w=c=>{g({isInitializing:!1,currentStep:"complete"}),setTimeout(()=>{l==null||l(c),j(S?"/dashboard/cloud-projects":"/dashboard")},1e3)};return m.currentStep==="initializing"?e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:4,backgroundColor:"background.default",color:"text.primary",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 50% 50%, ${i.palette.primary.main}15 0%, transparent 70%)`,animation:"pulse 4s ease-in-out infinite"}}),e.jsx("div",{className:"startup-logo-animation",children:e.jsx(s,{sx:{width:120,height:120,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 32px ${i.palette.primary.main}40`,mb:3},children:e.jsx(o,{variant:"h2",sx:{fontWeight:700,color:"#000000",textAlign:"center"},children:"D14"})})}),e.jsx("div",{className:"startup-title-animation",children:e.jsx(o,{variant:"h3",component:"h1",sx:{fontWeight:700,background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",mb:2},children:"Dashboard v14"})}),e.jsx("div",{className:"startup-subtitle-animation",children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",maxWidth:"500px",opacity:.8,mb:4},children:"Professional project management and collaboration platform"})}),e.jsx("div",{className:"startup-loading-animation",children:e.jsx(L,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}})}),e.jsx("div",{className:"startup-status-animation",children:e.jsx(o,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",opacity:.7},children:"Initializing application..."})})]}):m.currentStep==="startup"?e.jsx(_,{in:!0,children:e.jsx(s,{sx:{minHeight:"100vh"},children:e.jsx(Oe,{onStartupComplete:w})})}):m.currentStep==="complete"?e.jsx(_,{in:!0,children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx("div",{className:"startup-success-animation",children:e.jsx(s,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.success.main} 0%, ${i.palette.success.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${i.palette.success.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"success.contrastText",fontWeight:700},children:"✓"})})}),e.jsx("div",{className:"startup-success-title-animation",children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Ready to Launch!"})}),e.jsx("div",{className:"startup-success-subtitle-animation",children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8},children:"Your workspace is ready. Launching application..."})})]})}):m.currentStep==="error"?e.jsx(_,{in:!0,children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary",p:4},children:[e.jsx("div",{className:"startup-error-animation",children:e.jsx(s,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.error.main} 0%, ${i.palette.error.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${i.palette.error.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"error.contrastText",fontWeight:700},children:"✗"})})}),e.jsx("div",{className:"startup-error-title-animation",children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Startup Failed"})}),e.jsx("div",{className:"startup-error-subtitle-animation",children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8,maxWidth:"600px"},children:m.error||"An unexpected error occurred during startup. Please try again."})}),e.jsx("div",{className:"startup-error-message-animation",children:e.jsx(o,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",opacity:.6,mt:2},children:"Please restart the application or contact support if the problem persists."})})]})}):null};export{Ke as StartupWorkflow,Ke as default};
