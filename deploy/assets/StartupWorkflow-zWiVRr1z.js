const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CloudProjectIntegration-CgIpcgT5.js","assets/UnifiedProjectCreationDialog-DQWKP1qO.js","assets/mui-CqGO0PUa.js","assets/vendor-OeuszDaU.js","assets/index-16alK9s2.js","assets/stripe-jpbJ1A2u.js","assets/index-B6wFPjCh.css"])))=>i.map(i=>d[i]);
import{ab as R,j as e,b as _,a as n,T as o,G as A,k as H,l as G,U as re,W as ae,X as oe,n as U,Y as ne,h as W,c6 as se,d as v,aD as ie,aE as le,aG as ce,aZ as de,c7 as xe,c8 as ue,F as he,c9 as pe,aJ as me,aK as J,aI as ge,az as O,t as Q,u as be,v as je,aL as fe,ca as ye,R as ve,aA as Ce,aB as $,ag as E,cb as ke,aj as Se,a4 as we,cc as Ie,cd as Pe,I as We,aT as Ae,av as ze,aH as Me,Z as Te,C as L,D as Y,ce as D}from"./mui-CqGO0PUa.js";import{r as x,u as Le}from"./vendor-OeuszDaU.js";import{s as z,U as De}from"./UnifiedProjectCreationDialog-DQWKP1qO.js";import{_ as _e}from"./index-16alK9s2.js";import $e from"./LoginPage-BywfpGZi.js";import"./stripe-jpbJ1A2u.js";import"./index.esm-BqJ7I8dv.js";import"./notistack.esm-CcFOI6Un.js";const q=[{mode:"standalone",title:"Standalone Mode",description:"Work offline with local projects and data storage",icon:e.jsx(J,{fontSize:"large"}),benefits:["No internet connection required","Maximum privacy and data control","Fast local performance","No subscription fees","Complete offline capability"],recommendedFor:["Individual users","Offline work","Privacy-focused","Local development"],requirements:[],availableStorageModes:["local"],defaultStorageMode:"local"},{mode:"shared_network",title:"Network Mode",description:"Collaborate with teams and access cloud projects",icon:e.jsx(ge,{fontSize:"large"}),benefits:["Real-time collaboration","Cloud backup and sync","Team project sharing","Cross-device access","Advanced features and integrations"],recommendedFor:["Teams","Collaboration","Cloud-first","Enterprise"],requirements:["Active subscription","Internet connection"],availableStorageModes:["cloud","hybrid"],defaultStorageMode:"cloud"}],Re=({onModeSelected:l})=>{var f;const[r,k]=x.useState(null),[p,g]=x.useState("local"),[i,j]=x.useState(!1),[S,w]=x.useState(!1),c=R(),u=a=>{k(a.mode),g(a.defaultStorageMode),a.availableStorageModes.length===1?P(a.mode,a.defaultStorageMode):j(!0)},P=async(a,M)=>{w(!0);try{await z.selectMode(a,M),l==null||l(a,M)}catch(y){console.error("Mode selection failed:",y)}finally{w(!1),j(!1)}},m=a=>{switch(a){case"local":return"Store all project data on your local machine. No internet required, maximum privacy.";case"cloud":return"Store project data in the cloud for sharing, backup, and access from multiple devices.";case"hybrid":return"Combine local and cloud storage for optimal performance and flexibility."}};return e.jsxs(_,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(n,{sx:{textAlign:"center",mb:6},children:[e.jsx(o,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:700,background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"Choose Your Workspace Mode"}),e.jsx(o,{variant:"h6",color:"text.secondary",sx:{maxWidth:"600px",mx:"auto",opacity:.8},children:"Select how you want to work with your projects. You can change this later in settings."})]}),e.jsx(A,{container:!0,spacing:4,sx:{mb:6},children:q.map((a,M)=>e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx("div",{children:e.jsxs(H,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease",border:r===a.mode?2:1,borderColor:r===a.mode?"primary.main":"divider",backgroundColor:r===a.mode?"background.elevated":"background.paper","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)",boxShadow:y=>y.shadows[8],backgroundColor:"background.elevated"}},onClick:()=>u(a),children:[e.jsxs(G,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(n,{sx:{color:"primary.main",mr:2,p:1,borderRadius:2,backgroundColor:"rgba(0, 212, 255, 0.1)"},children:a.icon}),e.jsxs(n,{children:[e.jsx(o,{variant:"h5",component:"h2",fontWeight:"bold",color:"text.primary",children:a.title}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:a.description})]})]}),e.jsxs(n,{sx:{mb:3,flexGrow:1},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"primary",sx:{fontWeight:600},children:"Benefits:"}),e.jsx(re,{dense:!0,sx:{py:0},children:a.benefits.map((y,C)=>e.jsxs(ae,{sx:{py:.5,px:0},children:[e.jsx(oe,{sx:{minWidth:32},children:e.jsx(U,{color:"success",fontSize:"small",sx:{color:"success.main"}})}),e.jsx(ne,{primary:y,primaryTypographyProps:{variant:"body2",color:"text.primary"}})]},C))})]}),e.jsxs(n,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"text.primary",sx:{fontWeight:600},children:"Perfect for:"}),e.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.recommendedFor.map((y,C)=>e.jsx(W,{label:y,size:"small",variant:"outlined",color:"primary",sx:{borderColor:"primary.main",color:"primary.main",backgroundColor:"rgba(0, 212, 255, 0.1)","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.2)"}}},C))})]}),a.requirements.length>0&&e.jsxs(n,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,color:"warning.main",sx:{fontWeight:600},children:"Requirements:"}),e.jsx(n,{component:"ul",sx:{m:0,pl:2},children:a.requirements.map((y,C)=>e.jsx(o,{component:"li",variant:"body2",color:"text.secondary",children:y},C))})]})]}),e.jsx(se,{sx:{p:3,pt:0},children:e.jsx(v,{fullWidth:!0,variant:r===a.mode?"contained":"outlined",size:"large",startIcon:r===a.mode?e.jsx(U,{}):void 0,disabled:S,sx:{height:48,fontSize:"1rem",fontWeight:600,textTransform:"none",borderRadius:2,...r===a.mode?{background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,color:"#000000",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)","&:hover":{background:`linear-gradient(135deg, ${c.palette.primary.light} 0%, ${c.palette.secondary.light} 100%)`,boxShadow:"0 6px 20px rgba(0, 212, 255, 0.4)",transform:"translateY(-1px)"}}:{borderColor:"primary.main",color:"primary.main",borderWidth:2,"&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.2)",transform:"translateY(-1px)"}}},children:r===a.mode?"Selected":`Choose ${a.title}`})})]})})},a.mode))}),e.jsxs(ie,{open:i,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",borderRadius:3,border:1,borderColor:"divider"}},children:[e.jsx(le,{sx:{pb:1,color:"text.primary",fontWeight:600},children:"Choose Storage Mode"}),e.jsxs(ce,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Select how you want to store your project data for ",r==="standalone"?"Standalone":"Network"," mode."]}),e.jsxs(de,{component:"fieldset",fullWidth:!0,children:[e.jsx(xe,{component:"legend",sx:{color:"text.primary",mb:2},children:"Storage Options"}),e.jsx(ue,{value:p,onChange:a=>g(a.target.value),children:(f=q.find(a=>a.mode===r))==null?void 0:f.availableStorageModes.map(a=>e.jsx(he,{value:a,control:e.jsx(pe,{sx:{color:"primary.main"}}),label:e.jsxs(n,{children:[e.jsxs(o,{variant:"body1",color:"text.primary",sx:{fontWeight:500},children:[a.charAt(0).toUpperCase()+a.slice(1)," Storage"]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:m(a)})]}),sx:{mb:2,p:2,borderRadius:2,border:1,borderColor:p===a?"primary.main":"divider",backgroundColor:p===a?"rgba(0, 212, 255, 0.05)":"transparent","&:hover":{backgroundColor:"rgba(0, 212, 255, 0.05)"}}},a))})]})]}),e.jsxs(me,{sx:{p:3,pt:1},children:[e.jsx(v,{onClick:()=>j(!1),sx:{color:"text.secondary","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:"Cancel"}),e.jsx(v,{onClick:()=>P(r,p),variant:"contained",disabled:S,sx:{background:`linear-gradient(135deg, ${c.palette.primary.main} 0%, ${c.palette.secondary.main} 100%)`,color:"#000000",fontWeight:600,px:3,"&:hover":{background:`linear-gradient(135deg, ${c.palette.primary.light} 0%, ${c.palette.secondary.light} 100%)`,boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:S?"Processing...":"Continue"})]})]}),e.jsx(n,{sx:{textAlign:"center",mt:4},children:e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{opacity:.7},children:["Need help choosing? ",e.jsx(v,{color:"primary",sx:{textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"rgba(0, 212, 255, 0.1)"}},children:"Learn more about modes"})]})})]})},Be=({mode:l,storageMode:r,onProjectSelected:k,onBack:p})=>{const[g,i]=x.useState([]),[j,S]=x.useState([]),[w,c]=x.useState(!0),[u,P]=x.useState(""),[m,f]=x.useState("my_projects"),[a,M]=x.useState("lastAccessed"),[y,C]=x.useState(!1),[B,T]=x.useState(null);x.useEffect(()=>{F()},[l,r,m]),x.useEffect(()=>{V()},[g,u,a,m]);const F=async()=>{c(!0);try{let t=[];if(l==="shared_network"||r==="cloud"||r==="hybrid")try{const{cloudProjectIntegration:d}=await _e(async()=>{const{cloudProjectIntegration:b}=await import("./CloudProjectIntegration-CgIpcgT5.js");return{cloudProjectIntegration:b}},__vite__mapDeps([0,1,2,3,4,5,6])),h=(await d.getUserProjects()).map(b=>({id:b.id,name:b.name,description:b.description,mode:b.applicationMode,storageMode:(b.storageBackend==="firestore","cloud"),lastAccessed:b.lastAccessedAt,collaborators:b.maxCollaborators||0,status:b.isActive?"active":"archived",tags:[],size:"Unknown",isOwner:!0}));t=[...t,...h]}catch(d){console.error("Failed to load cloud projects:",d)}if(l==="standalone"||r==="local")try{const I=JSON.parse(localStorage.getItem("localProjects")||"[]").map(h=>{var b;return{id:h.id,name:h.name,description:h.description,mode:h.mode,storageMode:h.storageMode,lastAccessed:h.createdAt,collaborators:((b=h.localNetworkConfig)==null?void 0:b.maxUsers)||0,status:"active",tags:[],size:"Unknown",isOwner:!0}});t=[...t,...I]}catch(d){console.error("Failed to load local projects:",d)}let s=t;m==="my_projects"?s=s.filter(d=>d.isOwner):m==="shared_projects"&&(s=s.filter(d=>!d.isOwner)),i(s)}catch(t){console.error("Failed to load projects:",t)}finally{c(!1)}},V=()=>{let t=[...g];u&&(t=t.filter(s=>{var d,I;return s.name.toLowerCase().includes(u.toLowerCase())||((d=s.description)==null?void 0:d.toLowerCase().includes(u.toLowerCase()))||((I=s.tags)==null?void 0:I.some(h=>h.toLowerCase().includes(u.toLowerCase())))})),t.sort((s,d)=>{switch(a){case"name":return s.name.localeCompare(d.name);case"lastAccessed":return new Date(d.lastAccessed).getTime()-new Date(s.lastAccessed).getTime();case"size":return(d.size||"").localeCompare(s.size||"");case"collaborators":return(d.collaborators||0)-(s.collaborators||0);default:return 0}}),S(t)},N=t=>{z.selectProject(t),k==null||k(t)},Z=t=>{const s=new Date(t),I=new Date().getTime()-s.getTime(),h=Math.floor(I/(1e3*60*60*24));return h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:s.toLocaleDateString()},K=t=>{switch(t){case"local":return e.jsx(J,{fontSize:"small"});case"cloud":return e.jsx(Te,{fontSize:"small"});case"hybrid":return e.jsx(Me,{fontSize:"small"})}},X=t=>{switch(t){case"active":return"success";case"shared":return"info";case"archived":return"default";default:return"default"}},ee=t=>e.jsx("div",{children:e.jsx(H,{sx:{height:"100%",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:s=>s.shadows[4]}},onClick:()=>N(t.id),children:e.jsxs(G,{children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Pe,{color:"primary"}),e.jsx(o,{variant:"h6",component:"h3",noWrap:!0,children:t.name})]}),e.jsx(We,{size:"small",onClick:s=>{s.stopPropagation(),T(s.currentTarget)},children:e.jsx(Ae,{})})]}),t.description&&e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description}),e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[e.jsx(W,{size:"small",label:t.status,color:X(t.status),variant:"outlined"}),e.jsx(W,{size:"small",icon:K(t.storageMode),label:t.storageMode,variant:"outlined"}),t.collaborators&&e.jsx(W,{size:"small",icon:e.jsx(ze,{}),label:t.collaborators,variant:"outlined"})]}),t.tags&&t.tags.length>0&&e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[t.tags.slice(0,3).map(s=>e.jsx(W,{size:"small",label:s,variant:"filled",color:"primary",sx:{fontSize:"0.75rem"}},s)),t.tags.length>3&&e.jsx(W,{size:"small",label:`+${t.tags.length-3}`,variant:"outlined",sx:{fontSize:"0.75rem"}})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[e.jsx(o,{variant:"caption",color:"text.secondary",children:Z(t.lastAccessed)}),t.size&&e.jsx(o,{variant:"caption",color:"text.secondary",children:t.size})]})]})})}),te=()=>e.jsxs(n,{sx:{textAlign:"center",py:8},children:[e.jsx(Ie,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:u?"No projects found":"No projects yet"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:u?"Try adjusting your search criteria":l==="standalone"?"Create your first standalone project to get started":"Create or join a network project to begin collaborating"}),!u&&e.jsx(v,{variant:"contained",startIcon:e.jsx(O,{}),onClick:()=>C(!0),size:"large",children:"Create Project"})]});return e.jsxs(_,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o,{variant:"h4",component:"h1",fontWeight:"bold",children:"Your Projects"}),e.jsxs(n,{sx:{display:"flex",gap:1},children:[p&&e.jsx(v,{onClick:p,variant:"outlined",children:"Back"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(O,{}),onClick:()=>C(!0),children:"Create Project"})]})]}),e.jsx(Q,{severity:"info",sx:{mb:3},children:e.jsxs(o,{variant:"body2",children:["Currently in ",e.jsxs("strong",{children:[l==="standalone"?"Standalone":"Network"," mode"]})," with"," ",e.jsxs("strong",{children:[r," storage"]}),".",l==="standalone"&&r==="local"&&" Working offline with local files.",l==="shared_network"&&" Ready for team collaboration."]})}),e.jsxs(n,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(be,{placeholder:"Search projects...",value:u,onChange:t=>P(t.target.value),size:"small",sx:{flexGrow:1,minWidth:200},InputProps:{startAdornment:e.jsx(je,{position:"start",children:e.jsx(fe,{})})}}),e.jsxs(v,{variant:"outlined",startIcon:e.jsx(ye,{}),onClick:t=>T(t.currentTarget),children:["Sort: ",a]}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(ve,{}),onClick:F,disabled:w,children:"Refresh"})]}),e.jsxs(Ce,{value:m,onChange:(t,s)=>f(s),sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx($,{label:e.jsx(E,{badgeContent:g.filter(t=>t.isOwner).length,color:"primary",children:"My Projects"}),value:"my_projects"}),l==="shared_network"&&e.jsx($,{label:e.jsx(E,{badgeContent:g.filter(t=>!t.isOwner).length,color:"secondary",children:"Shared Projects"}),value:"shared_projects"}),e.jsx($,{label:"Recent",value:"recent"})]})]}),e.jsx(n,{sx:{mb:4},children:w?e.jsx(A,{container:!0,spacing:3,children:[...Array(6)].map((t,s)=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ke,{variant:"rectangular",height:200,sx:{borderRadius:1}})},s))}):j.length>0?e.jsx(A,{container:!0,spacing:3,children:j.map(t=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:ee(t)},t.id))}):te()}),e.jsx(Se,{anchorEl:B,open:!!B,onClose:()=>T(null),children:[{value:"lastAccessed",label:"Last Accessed"},{value:"name",label:"Name"},{value:"size",label:"Size"},{value:"collaborators",label:"Collaborators"}].map(t=>e.jsx(we,{selected:a===t.value,onClick:()=>{M(t.value),T(null)},children:t.label},t.value))}),e.jsx(De,{open:y,onClose:()=>C(!1),mode:l,onSuccess:t=>{C(!1),N(t)}})]})},Fe={mode_selection:"Choose Your Workspace Mode",authentication:"Sign In to Continue",project_selection:"Select or Create a Project",complete:"Loading Your Workspace"},Ne={mode_selection:"Select how you want to work with your projects",authentication:"Authentication required for this mode",project_selection:"Choose an existing project or create a new one",complete:"Setting up your workspace..."},Ue=({onStartupComplete:l})=>{const[r,k]=x.useState(null),[p,g]=x.useState(!0),i=R();x.useEffect(()=>z.subscribe(f=>{k(f),g(!1),f.currentStep==="complete"&&f.selectedProjectId&&setTimeout(()=>{l==null||l(f.selectedProjectId)},1e3)}),[l]);const j=m=>{z.onAuthenticationSuccess(m)},S=(m,f)=>{console.log("Mode selected:",m,"Storage:",f)},w=m=>{console.log("Project selected:",m)},c=()=>{((r==null?void 0:r.currentStep)==="authentication"||(r==null?void 0:r.currentStep)==="project_selection")&&z.selectMode(r.selectedMode||"standalone",r.storageMode)},u=()=>{z.reset()};if(!r)return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(L,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center"},children:"Initializing Dashboard v14"}),e.jsx(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"400px"},children:"Setting up your workspace environment..."})]});const P=()=>{switch(r.currentStep){case"mode_selection":return e.jsx(Re,{onModeSelected:S});case"authentication":return e.jsxs(_,{maxWidth:"sm",children:[e.jsxs(n,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary"},children:"Authentication Required"}),e.jsx(o,{variant:"h6",color:"text.secondary",paragraph:!0,sx:{mb:3},children:r.selectedMode==="shared_network"?"Network mode requires authentication to access shared projects":"Cloud storage requires authentication to sync your data"}),e.jsx(v,{variant:"outlined",onClick:c,sx:{mt:2,borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.light",backgroundColor:"rgba(0, 212, 255, 0.1)",boxShadow:"0 4px 12px rgba(0, 212, 255, 0.3)"}},children:"Back to Mode Selection"})]}),e.jsx($e,{onSuccess:j,mode:r.selectedMode,redirectTo:"/startup"})]});case"project_selection":return e.jsx(Be,{mode:r.selectedMode,storageMode:r.storageMode,onProjectSelected:w,onBack:c});case"complete":return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx(L,{size:80,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,textAlign:"center"},children:"Setting Up Your Workspace"}),e.jsxs(o,{variant:"h6",color:"text.secondary",textAlign:"center",sx:{maxWidth:"500px"},children:['Loading project "',r.selectedProjectId,'" in'," ",r.selectedMode==="standalone"?"Standalone":"Network"," mode"]}),e.jsx(Y,{sx:{width:"300px",mt:2,height:6,borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{borderRadius:3,background:`linear-gradient(90deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`}}})]});default:return null}};return e.jsxs(n,{sx:{minHeight:"100vh",backgroundColor:"background.default",color:"text.primary"},children:[r.currentStep!=="complete"&&e.jsxs(n,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:1e3},children:[e.jsx(Y,{variant:"determinate",value:r.currentStep==="mode_selection"?25:r.currentStep==="authentication"?50:r.currentStep==="project_selection"?75:100,sx:{height:4,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{background:`linear-gradient(90deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`}}}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,backgroundColor:"background.paper",borderBottom:1,borderColor:"divider",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0, 0, 0, 0.3)"},children:[e.jsxs(n,{children:[e.jsx(o,{variant:"h5",component:"h1",sx:{fontWeight:600,color:"text.primary",mb:1},children:Fe[r.currentStep]}),e.jsx(o,{variant:"body1",color:"text.secondary",sx:{opacity:.8},children:Ne[r.currentStep]})]}),r.selectedMode&&e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,backgroundColor:"background.elevated",px:2,py:1,borderRadius:2,border:1,borderColor:"divider"},children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Mode: ",r.selectedMode==="standalone"?"Standalone":"Network"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Storage: ",r.storageMode]})]})]})]}),r.error&&e.jsx(_,{maxWidth:"sm",sx:{pt:r.currentStep!=="complete"?"140px":"20px"},children:e.jsx(Q,{severity:"error",action:e.jsx(v,{color:"inherit",size:"small",onClick:u,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"error.contrastText","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:"Retry"}),sx:{mb:3,backgroundColor:"error.dark",color:"error.contrastText","& .MuiAlert-icon":{color:"error.contrastText"}},children:e.jsx(o,{variant:"body2",children:r.error})})}),e.jsx(n,{sx:{pt:r.currentStep!=="complete"?"140px":0},children:P()}),e.jsx(D,{in:r.isLoading,children:e.jsx(n,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,backgroundColor:"background.paper",p:4,borderRadius:3,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:1,borderColor:"divider"},children:[e.jsx(L,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(o,{variant:"h6",color:"text.primary",children:"Processing..."})]})})})]})},Ve=({onStartupComplete:l,onStartupError:r,isDashboardMode:k=!1})=>{const[p,g]=x.useState({isInitializing:!0,currentStep:"initializing"}),i=R(),j=Le(),S=k||window.location.pathname.includes("/dashboard/startup");x.useEffect(()=>{(async()=>{try{await new Promise(u=>setTimeout(u,2e3)),g({isInitializing:!1,currentStep:"startup"})}catch{g({isInitializing:!1,currentStep:"error",error:"Failed to initialize application"}),r==null||r("Failed to initialize application")}})()},[r]);const w=c=>{g({isInitializing:!1,currentStep:"complete"}),setTimeout(()=>{l==null||l(c),j(S?"/dashboard/cloud-projects":"/dashboard")},1e3)};return p.currentStep==="initializing"?e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:4,backgroundColor:"background.default",color:"text.primary",position:"relative",overflow:"hidden"},children:[e.jsx(n,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 50% 50%, ${i.palette.primary.main}15 0%, transparent 70%)`,animation:"pulse 4s ease-in-out infinite"}}),e.jsx("div",{style:{animation:"fadeIn 0.8s ease-out"},children:e.jsx(n,{sx:{width:120,height:120,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 32px ${i.palette.primary.main}40`,mb:3},children:e.jsx(o,{variant:"h2",sx:{fontWeight:700,color:"#000000",textAlign:"center"},children:"D14"})})}),e.jsx("div",{style:{animation:"fadeInUp 0.8s ease-out 0.2s both"},children:e.jsx(o,{variant:"h3",component:"h1",sx:{fontWeight:700,background:`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",mb:2},children:"Dashboard v14"})}),e.jsx("div",{style:{animation:"fadeInUp 0.8s ease-out 0.4s both"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",maxWidth:"500px",opacity:.8,mb:4},children:"Professional project management and collaboration platform"})}),e.jsx("div",{style:{animation:"fadeIn 0.8s ease-out 0.6s both"},children:e.jsx(L,{size:60,sx:{color:"primary.main","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}})}),e.jsx("div",{style:{animation:"fadeIn 0.8s ease-out 0.8s both"},children:e.jsx(o,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",opacity:.7},children:"Initializing application..."})})]}):p.currentStep==="startup"?e.jsx(D,{in:!0,children:e.jsx(n,{sx:{minHeight:"100vh"},children:e.jsx(Ue,{onStartupComplete:w})})}):p.currentStep==="complete"?e.jsx(D,{in:!0,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary"},children:[e.jsx("div",{style:{animation:"scaleIn 0.5s ease-out"},children:e.jsx(n,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.success.main} 0%, ${i.palette.success.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${i.palette.success.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"success.contrastText",fontWeight:700},children:"✓"})})}),e.jsx("div",{style:{animation:"fadeInUp 0.5s ease-out 0.2s both"},children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Ready to Launch!"})}),e.jsx("div",{style:{animation:"fadeInUp 0.5s ease-out 0.4s both"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8},children:"Your workspace is ready. Launching application..."})})]})}):p.currentStep==="error"?e.jsx(D,{in:!0,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:3,backgroundColor:"background.default",color:"text.primary",p:4},children:[e.jsx("div",{style:{animation:"scaleIn 0.5s ease-out"},children:e.jsx(n,{sx:{width:80,height:80,borderRadius:"50%",background:`linear-gradient(135deg, ${i.palette.error.main} 0%, ${i.palette.error.light} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${i.palette.error.main}40`},children:e.jsx(o,{variant:"h3",sx:{color:"error.contrastText",fontWeight:700},children:"✗"})})}),e.jsx("div",{style:{animation:"fadeInUp 0.5s ease-out 0.2s both"},children:e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:600,textAlign:"center",mb:2},children:"Startup Failed"})}),e.jsx("div",{style:{animation:"fadeInUp 0.5s ease-out 0.4s both"},children:e.jsx(o,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",opacity:.8,maxWidth:"600px"},children:p.error||"An unexpected error occurred during startup. Please try again."})}),e.jsx("div",{style:{animation:"fadeInUp 0.5s ease-out 0.6s both"},children:e.jsx(o,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",opacity:.6,mt:2},children:"Please restart the application or contact support if the problem persists."})})]})}):null};export{Ve as StartupWorkflow,Ve as default};
