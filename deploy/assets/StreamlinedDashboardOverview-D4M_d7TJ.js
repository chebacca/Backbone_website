import{j as e,B as r,i as P,T as a,d as N,G as n,ai as R,aj as U,u as V,ak as D,t as T,v as M,r as h,al as G,ag as B,a as l,W as H,am as q,K,w as J,x as Q,y as X,z as Y,q as Z,c as $,p,a2 as _,H as ee,aa as se,ae as te}from"./mui-BDWO4bKb.js";import{L as d,b as re}from"./vendor-CjD1bmmO.js";import{u as ae,a as ne,b as ie,c as oe}from"./useStreamlinedData-DcNfScCM.js";import{M as x}from"./MetricCard-QTqyYwVF.js";import"./index-Dbxqq8rg.js";import"./stripe-CpfM3ZZO.js";import"./index.esm-ClhtutUx.js";import"./index.esm-COtph9ny.js";const O=i=>{switch(i.toLowerCase()){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"expired":return"error";default:return"default"}},ce=i=>{switch(i){case"license":return e.jsx(te,{});case"payment":return e.jsx(se,{});case"user":return e.jsx(R,{});case"security":return e.jsx(ee,{});case"project":return e.jsx(U,{});default:return e.jsx(_,{})}},E=(i,m="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:m}).format(i/100),ye=()=>{var v,f,I,w,C,S,z,A;const{data:i,loading:m}=ae(),{data:t,loading:W}=ne(),{data:c,loading:k}=ie(),j=oe();if(m||W||k)return e.jsxs(r,{sx:{p:3},children:[e.jsx(P,{}),e.jsx(a,{sx:{mt:2},children:"Loading dashboard..."})]});if(!i||!t)return e.jsx(r,{sx:{p:3},children:e.jsx(N,{severity:"error",children:"Unable to load dashboard data"})});const u=t.members.filter(s=>{var o;return((o=s.license)==null?void 0:o.status)==="ACTIVE"}).length,g=((f=(v=t.subscription)==null?void 0:v.plan)==null?void 0:f.seats)||0,y=(((w=(I=t.subscription)==null?void 0:I.plan)==null?void 0:w.pricePerSeat)||0)*(((S=(C=t.subscription)==null?void 0:C.plan)==null?void 0:S.seats)||0),b=[{type:"license",title:"License Activated",description:`${t.organization.tier} license activated for ${i.email}`,timestamp:"2 hours ago",status:"success"},{type:"payment",title:"Payment Successful",description:`Monthly subscription renewed for ${E(y)}`,timestamp:"1 day ago",status:"success"},{type:"user",title:"Team Member Added",description:`${t.members.length} total team members`,timestamp:"2 days ago",status:"success"},{type:"project",title:"Project Created",description:`${(c==null?void 0:c.length)||0} active projects`,timestamp:"3 days ago",status:"success"}];return e.jsxs(r,{sx:{p:3},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsxs(a,{variant:"h4",component:"h1",gutterBottom:!0,children:["Welcome back, ",i.name,"! ðŸ‘‹"]}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:["Here's what's happening with your ",t.organization.name," organization."]})]}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(x,{title:"Active Team Members",value:u,icon:e.jsx(R,{}),color:"primary"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(x,{title:"Active Projects",value:(c==null?void 0:c.length)||0,icon:e.jsx(U,{}),color:"success"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(x,{title:"Organization Tier",value:t.organization.tier,icon:e.jsx(V,{}),color:"secondary"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(x,{title:"Monthly Spend",value:E(y),icon:e.jsx(D,{}),color:"warning"})})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:8,children:e.jsx(T,{children:e.jsxs(M,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Organization Overview"}),e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(a,{variant:"subtitle2",children:"Subscription Status"}),e.jsx(h,{label:((z=t.subscription)==null?void 0:z.status)||"ACTIVE",color:O(((A=t.subscription)==null?void 0:A.status)||"active"),size:"small"})]}),e.jsx(P,{variant:"determinate",value:u/g*100,sx:{height:8,borderRadius:4}}),e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[u," of ",g," seats used"]})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Team Members"}),e.jsxs(r,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t.members.slice(0,6).map(s=>e.jsx(G,{title:`${s.name} (${s.role})`,children:e.jsx(B,{sx:{width:32,height:32},children:s.name.charAt(0)})},s.id)),t.members.length>6&&e.jsxs(B,{sx:{width:32,height:32,bgcolor:"grey.300"},children:["+",t.members.length-6]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[j.canManageTeam&&e.jsx(l,{component:d,to:"/dashboard/team",variant:"outlined",startIcon:e.jsx(H,{}),size:"small",children:"Manage Team"}),e.jsx(l,{component:d,to:"/dashboard/licenses",variant:"outlined",startIcon:e.jsx(q,{}),size:"small",children:"View Licenses"}),j.canCreateProjects&&e.jsx(l,{component:d,to:"/dashboard/cloud-projects",variant:"outlined",startIcon:e.jsx(K,{}),size:"small",children:"Create Project"})]})]})})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(T,{children:e.jsxs(M,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),e.jsx(J,{dense:!0,children:b.map((s,o)=>e.jsxs(re.Fragment,{children:[e.jsxs(Q,{sx:{px:0},children:[e.jsx(X,{sx:{minWidth:40},children:ce(s.type)}),e.jsx(Y,{primary:s.title,secondary:e.jsxs(r,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:s.description}),e.jsx(a,{variant:"caption",color:"text.secondary",children:s.timestamp})]})}),s.status&&e.jsx(h,{size:"small",color:O(s.status),sx:{ml:1}})]}),o<b.length-1&&e.jsx(r,{sx:{height:8}})]},o))}),e.jsx(l,{component:d,to:"/dashboard/analytics",variant:"text",endIcon:e.jsx(Z,{}),size:"small",sx:{mt:2},children:"View All Activity"})]})})})]}),e.jsxs(n,{container:!0,spacing:3,sx:{mt:2},children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs($,{sx:{p:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"License Distribution"}),e.jsx(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:["BASIC","PROFESSIONAL","ENTERPRISE"].map(s=>{const o=t.members.filter(F=>{var L;return((L=F.license)==null?void 0:L.type)===s}).length;return e.jsx(h,{label:`${s}: ${o}`,color:s===t.organization.tier?"primary":"default",variant:s===t.organization.tier?"filled":"outlined"},s)})})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs($,{sx:{p:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"System Status"}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(p,{color:"success",fontSize:"small"}),e.jsx(a,{variant:"body2",children:"All systems operational"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(p,{color:"success",fontSize:"small"}),e.jsx(a,{variant:"body2",children:"Licenses synced"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(p,{color:"success",fontSize:"small"}),e.jsx(a,{variant:"body2",children:"Billing up to date"})]})]})})]})]})};export{ye as StreamlinedDashboardOverview,ye as default};
