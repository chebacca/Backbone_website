import{j as e,a as $,T as B,d as k,bt as tt,G as p,az as at,p as pe,aC as We,n as st,aZ as nt,c as rt,a_ as it,a$ as ot,b0 as Te,b1 as E,b2 as lt,av as dt,i as Oe,bu as ct,bv as mt,aA as ut,I as le,ba as gt,bw as ht,aQ as xt,al as pt,a6 as S,Z as re,bd as vt,y as bt,bx as ze,b6 as ft,aK as de,aL as ce,aO as me,A as ie,v as _,aG as ue,b4 as ge,b5 as he,aP as xe,w as Re,z as ke,D as Ve}from"./mui-CToveFo4.js";import{r as b}from"./vendor-OeuszDaU.js";import{u as jt}from"./notistack.esm-CcFOI6Un.js";import{u as St,c as P,e as N}from"./index-DhTczSYj.js";import{M as oe}from"./MetricCard-C5SKa5v1.js";import"./stripe-Bj9OrZIU.js";const wt=l=>{switch(l){case"admin":return"secondary";case"owner":return"secondary";case"manager":return"info";case"member":return"success";case"viewer":return"default";default:return"default"}},Mt=l=>{switch(l){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},Et=l=>{switch(l){case"active":return e.jsx(pe,{});case"pending":return e.jsx(We,{});case"suspended":return e.jsx(ze,{});default:return e.jsx(pe,{})}},Ot=()=>{const{enqueueSnackbar:l}=jt(),{user:R}=St(),[Be,G]=b.useState([]),[w,U]=b.useState({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}),[y,ve]=b.useState(null),[It,be]=b.useState(""),[At,Ue]=b.useState(null),[I,fe]=b.useState(null),V=(t,{includeTime:a=!1}={})=>{try{if(!t){const s=new Date;return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="string"||typeof t=="number"){const s=new Date(t);if(!Number.isNaN(s.getTime()))return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="object"){const s=t._seconds,n=t._nanoseconds??0;if(typeof s=="number"){const v=s*1e3+Math.floor(n/1e6),c=new Date(v);return a?c.toISOString():c.toISOString().slice(0,10)}}}catch{}const o=new Date;return a?o.toISOString():o.toISOString().slice(0,10)};b.useEffect(()=>{let t=!0;return(async()=>{var a,o,s,n,v,c,A,i,f,D,T,r,j,O;try{const g=await P.get(N.organizations.context()).catch(()=>null),m=((o=(a=g==null?void 0:g.data)==null?void 0:a.data)==null?void 0:o.organization)||null,u=((n=(s=g==null?void 0:g.data)==null?void 0:s.data)==null?void 0:n.members)||[],z=((c=(v=g==null?void 0:g.data)==null?void 0:v.data)==null?void 0:c.activeSubscription)||null,q=((i=(A=g==null?void 0:g.data)==null?void 0:A.data)==null?void 0:i.primaryRole)||null;let M=m,F=u,C=z;if(!M){const h=await P.get(N.organizations.my()),Z=((D=(f=h==null?void 0:h.data)==null?void 0:f.data)==null?void 0:D.owned)??[],ee=((r=(T=h==null?void 0:h.data)==null?void 0:T.data)==null?void 0:r.memberOf)??[];M=Z[0]||ee[0]||null,F=(M==null?void 0:M.members)||[]}if(!M){t&&(ve(null),be(""),G([]),U({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}));return}const Pe=F.filter(h=>h.status==="INVITED").length,Ne=F.filter(h=>h.status==="ACTIVE").length;let ne=0;C&&C.status==="ACTIVE"&&C.organizationId===M.id?ne=Number(C.seats||0):ne=(((O=(j=(await P.get(N.subscriptions.mySubscriptions())).data)==null?void 0:j.data)==null?void 0:O.subscriptions)??[]).filter(H=>H.organizationId===M.id&&H.status==="ACTIVE").reduce((H,te)=>(!C&&te.status==="ACTIVE"&&(C=te),H+(te.seats||0)),0);const et=Math.max(0,ne-(Ne+Pe)),De=(Array.isArray(F)?F:[]).filter(h=>h&&h.status!=="REMOVED").map(h=>{const Z=String(h.email||"user@example.com"),ee=Z.split("@")[0]||"User",H={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},te={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(h.id||`${Z}-${Math.random().toString(36).slice(2)}`),firstName:ee.charAt(0).toUpperCase()+ee.slice(1),lastName:"",email:Z,role:H[String(h.role)]||"member",status:te[String(h.status)]||"active",joinedAt:V(h.joinedAt),lastActive:V(h.updatedAt||h.joinedAt||new Date,{includeTime:!0})}});if(!t)return;ve(M.id),be(M.name||"Organization"),Ue(q||null),fe(C?{id:String(C.id),tier:String(C.tier).toUpperCase(),seats:Number(C.seats||0),status:String(C.status||""),organizationId:C.organizationId}:null),G(De),U({totalMembers:De.length,activeMembers:Ne,pendingInvites:Pe,availableSeats:et,totalSeats:ne})}catch(g){if(!t)return;console.error("[TeamPage] Failed to load team data:",g),G([]),U({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0})}})(),()=>{t=!1}},[R==null?void 0:R.email]);const[je,Se]=b.useState(null),[d,we]=b.useState(null),[Fe,K]=b.useState(!1),[$e,ae]=b.useState(!1),[Me,Ee]=b.useState(0),[_e,Q]=b.useState(!1),[Y,se]=b.useState(!1),[Ie,Ae]=b.useState(!1),[ye,Ce]=b.useState(!1),[x,L]=b.useState({newPassword:"",confirmPassword:"",email:"",role:"member",status:"active"}),[W,J]=b.useState({email:"",role:"member",department:"",message:""}),Ge=(t,a)=>{Se(t.currentTarget),we(a)},X=()=>{Se(null)},Le=async()=>{var t,a,o,s,n,v,c,A;if(y){if(w.availableSeats<=0){l("No seats available. Please add seats from Billing before inviting new members.",{variant:"warning"});return}try{const i={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"};await P.post(N.organizations.invite(y),{email:W.email,role:i[W.role]||"MEMBER"}),l(`Invitation sent to ${W.email}`,{variant:"success"}),K(!1),J({email:"",role:"member",department:"",message:""});const f=await P.get(N.organizations.my()),D=((a=(t=f==null?void 0:f.data)==null?void 0:t.data)==null?void 0:a.owned)??[],T=((s=(o=f==null?void 0:f.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],r=[...D,...T].find(j=>j.id===y)||D[0]||T[0];if(r){const j=r.members||[],O=(Array.isArray(j)?j:[]).filter(u=>u&&u.status!=="REMOVED").map(u=>{const z=String(u.email||"user@example.com"),q=z.split("@")[0]||"User",M={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},F={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(u.id||`${z}-${Math.random().toString(36).slice(2)}`),firstName:q.charAt(0).toUpperCase()+q.slice(1),lastName:"",email:z,role:M[String(u.role)]||"member",status:F[String(u.status)]||"active",joinedAt:V(u.joinedAt),lastActive:V(u.updatedAt||u.joinedAt||new Date,{includeTime:!0})}}),g=j.filter(u=>u.status==="INVITED").length,m=j.filter(u=>u.status==="ACTIVE").length;G(O),U(u=>({...u,totalMembers:O.length,pendingInvites:g,activeMembers:m,availableSeats:Math.max(0,u.totalSeats-(m+g))}))}}catch(i){console.error("[TeamPage] Invite failed:",i);const f=((v=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:v.message)||((A=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:A.error)||(i==null?void 0:i.message)||"Failed to send invitation";l(f,{variant:"error"})}}},qe=b.useMemo(()=>String((R==null?void 0:R.role)||"").toUpperCase()==="SUPERADMIN",[R==null?void 0:R.role]),Ze=()=>{if(!I){l("No active subscription found for this organization.",{variant:"warning"});return}Ee(Number(I.seats||0)),ae(!0)},He=async()=>{var t,a;if(I)try{const o=I.tier,s=Number(Me||0);if(o==="BASIC"&&s!==1){l("Basic plan supports exactly 1 seat.",{variant:"warning"});return}if(o==="PRO"&&(s<1||s>50)){l("Pro plan seats must be between 1 and 50.",{variant:"warning"});return}if(o==="ENTERPRISE"&&s<10){l("Enterprise requires minimum 10 seats.",{variant:"warning"});return}await P.put(N.subscriptions.update(I.id),{seats:s}),fe(n=>n&&{...n,seats:s}),U(n=>({...n,totalSeats:s,availableSeats:Math.max(0,s-(n.activeMembers+n.pendingInvites))})),l("Seats updated successfully",{variant:"success"}),ae(!1)}catch(o){const s=((a=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:a.message)||(o==null?void 0:o.message)||"Failed to update seats";l(s,{variant:"error"})}},Ke=()=>{d&&l(`Invitation resent to ${d.email}`,{variant:"success"}),X()},Qe=()=>{L({newPassword:"",confirmPassword:"",email:(d==null?void 0:d.email)||"",role:(d==null?void 0:d.role)||"member",status:(d==null?void 0:d.status)||"active"}),Ae(!1),Ce(!1),Q(!0)},Ye=async()=>{var s,n;if(!d)return;if(d.status!=="active"){l("Password can only be set after the member has joined (status Active).",{variant:"warning"});return}const t=d.email,{newPassword:a,confirmPassword:o}=x;if(!a||a.length<8){l("Password must be at least 8 characters.",{variant:"warning"});return}if(a!==o){l("Passwords do not match.",{variant:"warning"});return}try{if(se(!0),!y){l("Organization context not found.",{variant:"error"});return}await P.put(N.organizations.setMemberPassword(y,d.id),{password:a}),l(`Password set for ${t}`,{variant:"success"}),Q(!1)}catch(v){const c=((n=(s=v==null?void 0:v.response)==null?void 0:s.data)==null?void 0:n.message)||(v==null?void 0:v.message)||"Failed to set password";l(c,{variant:"error"})}finally{se(!1)}},Je=async()=>{var t,a,o,s,n,v;if(!(!d||!y))try{se(!0);const c={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"},A={pending:"INVITED",active:"ACTIVE",suspended:"SUSPENDED",removed:"REMOVED"};console.log("Updating member:",{memberId:d.id,email:x.email,role:c[x.role],status:A[x.status]}),await P.patch(N.organizations.updateMember(y,d.id),{email:x.email,role:c[x.role],status:A[x.status]}),x.newPassword&&x.confirmPassword&&x.newPassword===x.confirmPassword&&await P.put(N.organizations.setMemberPassword(y,d.id),{password:x.newPassword}),l("Member updated successfully",{variant:"success"}),Q(!1);const i=await P.get(N.organizations.my()),f=((a=(t=i==null?void 0:i.data)==null?void 0:t.data)==null?void 0:a.owned)??[],D=((s=(o=i==null?void 0:i.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],T=[...f,...D].find(r=>r.id===y)||f[0]||D[0];if(T){const r=T.members||[],j=(Array.isArray(r)?r:[]).filter(m=>m&&m.status!=="REMOVED").map(m=>{const u=String(m.email||"user@example.com"),z=u.split("@")[0]||"User",q={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},M={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(m.id||`${u}-${Math.random().toString(36).slice(2)}`),firstName:z.charAt(0).toUpperCase()+z.slice(1),lastName:"",email:u,role:q[String(m.role)]||"member",status:M[String(m.status)]||"active",joinedAt:V(m.joinedAt),lastActive:V(m.updatedAt||m.joinedAt||new Date,{includeTime:!0})}}),O=r.filter(m=>m.status==="INVITED").length,g=r.filter(m=>m.status==="ACTIVE").length;G(j),U(m=>({...m,totalMembers:j.length,pendingInvites:O,activeMembers:g,availableSeats:Math.max(0,m.totalSeats-(g+O))}))}}catch(c){console.error("[TeamPage] Update member failed:",c);const A=((v=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:v.message)||(c==null?void 0:c.message)||"Failed to update member";l(A,{variant:"error"})}finally{se(!1)}},Xe=async()=>{var t,a,o,s;if(!(!d||!y))try{await P.post(N.organizations.removeMember(y,d.id)),l(`${d.email} removed from team`,{variant:"warning"});const n=await P.get(N.organizations.my()),v=((a=(t=n==null?void 0:n.data)==null?void 0:t.data)==null?void 0:a.owned)??[],c=((s=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],A=[...v,...c].find(i=>i.id===y)||v[0]||c[0];if(A){const i=A.members||[],f=(Array.isArray(i)?i:[]).filter(r=>r&&r.status!=="REMOVED").map(r=>{const j=String(r.email||"user@example.com"),O=j.split("@")[0]||"User",g={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},m={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(r.id||`${j}-${Math.random().toString(36).slice(2)}`),firstName:O.charAt(0).toUpperCase()+O.slice(1),lastName:"",email:j,role:g[String(r.role)]||"member",status:m[String(r.status)]||"active",joinedAt:V(r.joinedAt),lastActive:V(r.updatedAt||r.joinedAt||new Date,{includeTime:!0})}}),D=i.filter(r=>r.status==="INVITED").length,T=i.filter(r=>r.status==="ACTIVE").length;G(f),U(r=>({...r,totalMembers:f.length,pendingInvites:D,activeMembers:T,availableSeats:Math.max(0,r.totalSeats-(T+D))}))}}catch(n){console.error("[TeamPage] Remove member failed:",n),l((n==null?void 0:n.message)||"Failed to remove member",{variant:"error"})}finally{X()}};return b.useMemo(()=>w.totalSeats<=0?0:(w.totalSeats-w.availableSeats)/w.totalSeats*100,[w.totalSeats,w.availableSeats]),e.jsxs($,{children:[e.jsx($,{children:e.jsxs($,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs($,{children:[e.jsx(B,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsx(B,{variant:"body1",color:"text.secondary",children:"Manage your team members, roles, and license assignments"})]}),e.jsx(k,{variant:"contained",startIcon:e.jsx(tt,{}),onClick:()=>K(!0),disabled:w.availableSeats<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Invite Member"}),qe&&e.jsxs(k,{variant:"outlined",onClick:Ze,sx:{ml:2},children:["Manage Seats",I?` (${I.seats})`:""]})]})}),e.jsxs(p,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(oe,{title:"Total Members",value:w.totalMembers,icon:e.jsx(at,{}),color:"primary",trend:{value:12,direction:"up"}})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(oe,{title:"Active Members",value:w.activeMembers,icon:e.jsx(pe,{}),color:"success",trend:{value:8,direction:"up"}})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(oe,{title:"Pending Invites",value:w.pendingInvites,icon:e.jsx(We,{}),color:"warning"})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(oe,{title:"Available Seats",value:w.availableSeats,icon:e.jsx(st,{}),color:"secondary"})})]}),e.jsx($,{children:e.jsx(nt,{component:rt,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(it,{children:[e.jsx(ot,{children:e.jsxs(Te,{children:[e.jsx(E,{sx:{fontWeight:600},children:"Member"}),e.jsx(E,{sx:{fontWeight:600},children:"Role"}),e.jsx(E,{sx:{fontWeight:600},children:"Department"}),e.jsx(E,{sx:{fontWeight:600},children:"Status"}),e.jsx(E,{sx:{fontWeight:600},children:"License"}),e.jsx(E,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(E,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(lt,{children:Be.map(t=>e.jsxs(Te,{hover:!0,children:[e.jsx(E,{children:e.jsxs($,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(dt,{sx:{width:40,height:40},children:[t.firstName[0],t.lastName[0]]}),e.jsxs($,{children:[e.jsxs(B,{variant:"body2",sx:{fontWeight:500},children:[t.firstName," ",t.lastName]}),e.jsx(B,{variant:"caption",color:"text.secondary",children:t.email})]})]})}),e.jsx(E,{children:e.jsx(Oe,{icon:t.role==="admin"?e.jsx(ct,{}):e.jsx(mt,{}),label:t.role.toUpperCase(),color:wt(t.role),size:"small",variant:"outlined"})}),e.jsx(E,{children:e.jsx(B,{variant:"body2",children:t.department||"Not assigned"})}),e.jsx(E,{children:e.jsx(Oe,{icon:Et(t.status),label:t.status.toUpperCase(),color:Mt(t.status),size:"small"})}),e.jsx(E,{children:t.licenseAssigned?e.jsx(ut,{title:t.licenseAssigned,children:e.jsx(B,{variant:"body2",sx:{fontFamily:"monospace",maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:t.licenseAssigned})}):e.jsx(B,{variant:"body2",color:"text.secondary",children:"No license"})}),e.jsx(E,{children:e.jsx(B,{variant:"body2",children:t.lastActive?new Date(t.lastActive).toLocaleDateString():"Never"})}),e.jsx(E,{children:e.jsx(le,{onClick:a=>Ge(a,t),size:"small",children:e.jsx(gt,{})})})]},t.id))})]})})}),e.jsx(ht,{color:"primary",sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},onClick:()=>K(!0),children:e.jsx(xt,{})}),e.jsxs(pt,{anchorEl:je,open:!!je,onClose:X,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsxs(S,{onClick:()=>{X(),Qe()},children:[e.jsx(re,{children:e.jsx(vt,{fontSize:"small"})}),"Edit Member"]}),(d==null?void 0:d.status)==="pending"&&e.jsxs(S,{onClick:Ke,children:[e.jsx(re,{children:e.jsx(bt,{fontSize:"small"})}),"Resend Invite"]}),e.jsxs(S,{onClick:X,children:[e.jsx(re,{children:e.jsx(ze,{fontSize:"small"})}),"Suspend Member"]}),e.jsxs(S,{onClick:Xe,sx:{color:"error.main"},children:[e.jsx(re,{children:e.jsx(ft,{fontSize:"small",sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(de,{open:Fe,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ce,{children:"Invite Team Member"}),e.jsx(me,{children:e.jsxs(p,{container:!0,spacing:3,sx:{mt:1},children:[w.availableSeats<=0&&e.jsx(p,{item:!0,xs:12,children:e.jsx(ie,{severity:"warning",children:"No available seats. Add seats on the Billing page to invite more team members."})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Email Address",type:"email",value:W.email,onChange:t=>J(a=>({...a,email:t.target.value}))})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsxs(ue,{fullWidth:!0,children:[e.jsx(ge,{children:"Role"}),e.jsxs(he,{value:W.role,label:"Role",onChange:t=>J(a=>({...a,role:t.target.value})),inputProps:{"aria-label":"Select team member role",title:"Select the role for this team member"},children:[e.jsx(S,{value:"viewer",children:"Viewer"}),e.jsx(S,{value:"member",children:"Member"}),e.jsx(S,{value:"admin",children:"Admin"})]})]})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"Department",value:W.department,onChange:t=>J(a=>({...a,department:t.target.value}))})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Welcome Message (Optional)",multiline:!0,rows:3,value:W.message,onChange:t=>J(a=>({...a,message:t.target.value}))})})]})}),e.jsxs(xe,{children:[e.jsx(k,{onClick:()=>K(!1),children:"Cancel"}),e.jsx(k,{onClick:Le,variant:"contained",disabled:!W.email||w.availableSeats<=0,children:"Send Invitation"})]})]}),e.jsxs(de,{open:$e,onClose:()=>ae(!1),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ce,{children:"Manage Seats"}),e.jsx(me,{children:e.jsxs(p,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(ie,{severity:"info",children:I?`${I.tier} subscription`:"No active subscription"})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,type:"number",label:"Total Seats",value:Me,onChange:t=>Ee(parseInt(t.target.value||"0",10)),inputProps:{min:1,max:(I==null?void 0:I.tier)==="PRO"?50:1e3}})})]})}),e.jsxs(xe,{children:[e.jsx(k,{onClick:()=>ae(!1),children:"Cancel"}),e.jsx(k,{onClick:He,variant:"contained",disabled:!I,children:"Save"})]})]}),e.jsxs(de,{open:_e,onClose:()=>{Q(!1),we(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ce,{children:"Edit Member"}),e.jsx(me,{children:e.jsxs(p,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Email",value:x.email,onChange:t=>L(a=>({...a,email:t.target.value}))})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsxs(ue,{fullWidth:!0,children:[e.jsx(ge,{children:"Role"}),e.jsxs(he,{value:x.role,label:"Role",onChange:t=>L(a=>({...a,role:t.target.value})),children:[e.jsx(S,{value:"viewer",children:"Viewer"}),e.jsx(S,{value:"member",children:"Member"}),e.jsx(S,{value:"manager",children:"Manager"}),e.jsx(S,{value:"admin",children:"Admin"}),e.jsx(S,{value:"owner",children:"Owner"})]})]})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsxs(ue,{fullWidth:!0,children:[e.jsx(ge,{children:"Status"}),e.jsxs(he,{value:x.status,label:"Status",onChange:t=>L(a=>({...a,status:t.target.value})),children:[e.jsx(S,{value:"pending",children:"Pending"}),e.jsx(S,{value:"active",children:"Active"}),e.jsx(S,{value:"suspended",children:"Suspended"}),e.jsx(S,{value:"removed",children:"Removed"})]})]})}),e.jsx(p,{item:!0,xs:12,children:x.status!=="active"?e.jsx(ie,{severity:"warning",children:"This member has not joined yet (Pending/Suspended/Removed). You can only set a password for Active members."}):e.jsx(ie,{severity:"info",children:"Set a temporary password for this user to log into Backbone. They can change it later."})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"New Password",type:Ie?"text":"password",value:x.newPassword,onChange:t=>L(a=>({...a,newPassword:t.target.value})),inputProps:{minLength:8},helperText:"Minimum 8 characters",InputProps:{endAdornment:e.jsx(Re,{position:"end",children:e.jsx(le,{onClick:()=>Ae(t=>!t),edge:"end","aria-label":"toggle password visibility",children:Ie?e.jsx(ke,{}):e.jsx(Ve,{})})})}})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"Confirm Password",type:ye?"text":"password",value:x.confirmPassword,onChange:t=>L(a=>({...a,confirmPassword:t.target.value})),InputProps:{endAdornment:e.jsx(Re,{position:"end",children:e.jsx(le,{onClick:()=>Ce(t=>!t),edge:"end","aria-label":"toggle password visibility",children:ye?e.jsx(ke,{}):e.jsx(Ve,{})})})}})})]})}),e.jsxs(xe,{children:[e.jsx(k,{onClick:()=>Q(!1),disabled:Y,children:"Cancel"}),e.jsx(k,{onClick:Je,variant:"outlined",disabled:Y,children:Y?"Saving…":"Save Changes"}),e.jsx(k,{onClick:Ye,variant:"contained",disabled:Y||!x.newPassword||!x.confirmPassword||x.status!=="active",children:Y?"Saving…":"Save Password Only"})]})]})]})};export{Ot as default};
