import{j as e,a as q,T as U,d as $,bw as oa,G as h,aG as la,w as Ie,K as Ve,b0 as da,c as ca,b1 as ma,b2 as ua,b3 as Fe,b4 as N,b5 as ga,aC as pa,m as $e,bx as ha,by as ba,I as je,bd as xa,bz as va,aT as fa,as as ja,ae as A,s as Se,bg as Sa,bA as _e,b9 as we,D as ue,k as ge,l as pe,A as ne,n as L,aN as Me,b7 as ye,b8 as Ee,v as he,X as Ue,_ as Be,$ as Le,aJ as wa}from"./mui-CWufCee_.js";import{r as b}from"./vendor-OeuszDaU.js";import{u as Ma}from"./notistack.esm-CcFOI6Un.js";import{u as ya,c as D,e as O}from"./index-BBr4cJSs.js";import{M as be}from"./MetricCard-Cep6NJsK.js";import"./stripe-DjIiidKe.js";const Ea=c=>{switch(c){case"admin":return"secondary";case"owner":return"secondary";case"manager":return"info";case"member":return"success";case"viewer":return"default";default:return"default"}},Ia=c=>{switch(c){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},Aa=c=>{switch(c){case"active":return e.jsx(Ie,{});case"pending":return e.jsx(wa,{});case"suspended":return e.jsx(_e,{});default:return e.jsx(Ie,{})}},za=()=>{const{enqueueSnackbar:c}=Ma(),{user:B}=ya(),[Ge,H]=b.useState([]),[C,_]=b.useState({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}),[E,ie]=b.useState(null),[Ca,oe]=b.useState(""),[Pa,Ae]=b.useState(null),[R,xe]=b.useState(null),G=(a,{includeTime:t=!1}={})=>{try{if(!a){const r=new Date;return t?r.toISOString():r.toISOString().slice(0,10)}if(typeof a=="string"||typeof a=="number"){const r=new Date(a);if(!Number.isNaN(r.getTime()))return t?r.toISOString():r.toISOString().slice(0,10)}if(typeof a=="object"){const r=a._seconds,n=a._nanoseconds??0;if(typeof r=="number"){const u=r*1e3+Math.floor(n/1e6),d=new Date(u);return t?d.toISOString():d.toISOString().slice(0,10)}}}catch{}const o=new Date;return t?o.toISOString():o.toISOString().slice(0,10)};b.useEffect(()=>{let a=!0;return(async()=>{var t,o,r,n,u,d,M,s,S,y,k,l,z,g;try{const v=await D.get(O.organizations.context()).catch(()=>null),p=((o=(t=v==null?void 0:v.data)==null?void 0:t.data)==null?void 0:o.organization)||null,K=((n=(r=v==null?void 0:v.data)==null?void 0:r.data)==null?void 0:n.members)||[],Q=((d=(u=v==null?void 0:v.data)==null?void 0:u.data)==null?void 0:d.activeSubscription)||null,T=((s=(M=v==null?void 0:v.data)==null?void 0:M.data)==null?void 0:s.primaryRole)||null;let f=p,w=K,I=Q;if(!f){const i=await D.get(O.organizations.my()),W=((y=(S=i==null?void 0:i.data)==null?void 0:S.data)==null?void 0:y.owned)??[],V=((l=(k=i==null?void 0:i.data)==null?void 0:k.data)==null?void 0:l.memberOf)??[];f=W[0]||V[0]||null,w=(f==null?void 0:f.members)||[]}if(!f){a&&(ie(null),oe(""),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}));return}const X=w.filter(i=>i.status==="ACTIVE").length;let ee=0;I&&I.status==="ACTIVE"&&I.organizationId===f.id?ee=Number(I.seats||0):ee=(((g=(z=(await D.get(O.subscriptions.mySubscriptions())).data)==null?void 0:z.data)==null?void 0:g.subscriptions)??[]).filter(F=>F.organizationId===f.id&&F.status==="ACTIVE").reduce((F,re)=>(!I&&re.status==="ACTIVE"&&(I=re),F+(re.seats||0)),0);const me=Math.max(0,ee-X),m=(Array.isArray(w)?w:[]).filter(i=>i&&i.status!=="REMOVED").map(i=>{const W=String(i.email||"user@example.com"),V=W.split("@")[0]||"User",F={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},re={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(i.id||`${W}-${Math.random().toString(36).slice(2)}`),firstName:V.charAt(0).toUpperCase()+V.slice(1),lastName:"",email:W,role:F[String(i.role)]||"member",status:re[String(i.status)]||"active",department:i.department||"",licenseType:i.licenseType||"PROFESSIONAL",joinedAt:G(i.joinedAt),lastActive:G(i.updatedAt||i.joinedAt||new Date,{includeTime:!0})}});if(!a)return;ie(f.id),oe(f.name||"Organization"),Ae(T||null),console.log("[TeamPage] Organization ID:",f.id,"Type:",typeof f.id,"Length:",String(f.id).length),console.log("[TeamPage] Organization ID characters:",Array.from(String(f.id)).map(i=>`${i}(${i.charCodeAt(0)})`).join(" ")),xe(I?{id:String(I.id),tier:String(I.tier).toUpperCase(),seats:Number(I.seats||0),status:String(I.status||""),organizationId:I.organizationId}:null),H(m),_({totalMembers:m.length,activeMembers:X,pendingInvites:0,availableSeats:me,totalSeats:ee})}catch(v){if(!a)return;console.error("[TeamPage] Failed to load team data:",v),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0})}})(),()=>{a=!1}},[B==null?void 0:B.email]);const qe=async()=>{var a,t,o,r,n,u,d,M,s,S,y,k,l,z;try{const g=await D.get(O.organizations.context()).catch(()=>null),v=((t=(a=g==null?void 0:g.data)==null?void 0:a.data)==null?void 0:t.organization)||null,p=((r=(o=g==null?void 0:g.data)==null?void 0:o.data)==null?void 0:r.members)||[],K=((u=(n=g==null?void 0:g.data)==null?void 0:n.data)==null?void 0:u.activeSubscription)||null,Q=((M=(d=g==null?void 0:g.data)==null?void 0:d.data)==null?void 0:M.primaryRole)||null;let T=v,f=p,w=K;if(!T){const m=await D.get(O.organizations.my()),i=((S=(s=m==null?void 0:m.data)==null?void 0:s.data)==null?void 0:S.owned)??[],W=((k=(y=m==null?void 0:m.data)==null?void 0:y.data)==null?void 0:k.memberOf)??[];T=i[0]||W[0]||null,f=(T==null?void 0:T.members)||[]}if(!T){ie(null),oe(""),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0});return}const I=f.filter(m=>m.status==="ACTIVE").length;let X=0;w&&w.status==="ACTIVE"&&w.organizationId===T.id?X=Number(w.seats||0):X=(((z=(l=(await D.get(O.subscriptions.mySubscriptions())).data)==null?void 0:l.data)==null?void 0:z.subscriptions)??[]).filter(V=>V.organizationId===T.id&&V.status==="ACTIVE").reduce((V,F)=>(!w&&F.status==="ACTIVE"&&(w=F),V+(F.seats||0)),0);const ee=Math.max(0,X-I),me=(Array.isArray(f)?f:[]).filter(m=>m&&m.status!=="REMOVED").map(m=>{const i=String(m.email||"user@example.com"),W=i.split("@")[0]||"User",V={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},F={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(m.id||`${i}-${Math.random().toString(36).slice(2)}`),firstName:W.charAt(0).toUpperCase()+W.slice(1),lastName:"",email:i,role:V[String(m.role)]||"member",status:F[String(m.status)]||"active",department:m.department||"",licenseType:m.licenseType||"PROFESSIONAL",joinedAt:G(m.joinedAt),lastActive:G(m.updatedAt||m.joinedAt||new Date,{includeTime:!0})}});ie(T.id),oe(T.name||"Organization"),Ae(Q||null),xe(w?{id:String(w.id),tier:String(w.tier).toUpperCase(),seats:Number(w.seats||0),status:String(w.status||""),organizationId:w.organizationId}:null),H(me),_({totalMembers:me.length,activeMembers:I,pendingInvites:0,availableSeats:ee,totalSeats:X})}catch(g){console.error("[TeamPage] Failed to refresh team data:",g)}},[Ce,Pe]=b.useState(null),[j,Te]=b.useState(null),[He,ae]=b.useState(!1),[Je,le]=b.useState(!1),[Ne,De]=b.useState(0),[Ke,te]=b.useState(!1),[se,de]=b.useState(!1),[Oe,Re]=b.useState(!1),[ke,ze]=b.useState(!1),[x,Y]=b.useState({newPassword:"",confirmPassword:"",email:"",role:"member",status:"active"}),[Xe,ve]=b.useState(!1),[Z,fe]=b.useState(null),[P,J]=b.useState({email:"",firstName:"",lastName:"",role:"member",department:"",message:""}),Ye=(a,t)=>{Pe(a.currentTarget),Te(t)},ce=()=>{Pe(null)},Ze=async()=>{var a,t,o,r,n,u,d,M;if(E){if(C.availableSeats<=0){c("No seats available. Please add seats from Billing before inviting new members.",{variant:"warning"});return}try{const s={email:P.email,firstName:P.firstName,lastName:P.lastName,...P.department&&{department:P.department},licenseType:"PROFESSIONAL",organizationId:E,sendWelcomeEmail:!0};console.log("[TeamPage] Creating team member with payload:",s),console.log("[TeamPage] Organization ID:",E,"Type:",typeof E),console.log("[TeamPage] Organization ID validation test:",/^[a-zA-Z0-9\-_\.]+$/.test(String(E))),console.log("[TeamPage] Organization ID characters:",Array.from(String(E)).map(y=>`${y}(${y.charCodeAt(0)})`).join(" "));const S=await D.post(O.teamMembers.create(),s);if((a=S.data)!=null&&a.success){const y=S.data.data.teamMember,k=S.data.data.temporaryPassword;c(`Team member ${y.email} created successfully! Temporary password: ${k}`,{variant:"success"}),ae(!1),J({email:"",firstName:"",lastName:"",role:"member",department:"",message:""}),await qe()}else throw new Error("Failed to create team member")}catch(s){console.error("[TeamPage] Team member creation failed:",s),console.error("[TeamPage] Error response:",(t=s==null?void 0:s.response)==null?void 0:t.data),console.error("[TeamPage] Error status:",(o=s==null?void 0:s.response)==null?void 0:o.status),console.error("[TeamPage] Error headers:",(r=s==null?void 0:s.response)==null?void 0:r.headers);const S=((u=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:u.message)||((M=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:M.error)||(s==null?void 0:s.message)||"Failed to create team member";c(S,{variant:"error"})}}},Qe=b.useMemo(()=>String((B==null?void 0:B.role)||"").toUpperCase()==="SUPERADMIN",[B==null?void 0:B.role]),ea=()=>{if(!R){c("No active subscription found for this organization.",{variant:"warning"});return}De(Number(R.seats||0)),le(!0)},aa=async()=>{var a,t;if(R)try{const o=R.tier,r=Number(Ne||0);if(o==="BASIC"&&r!==1){c("Basic plan supports exactly 1 seat.",{variant:"warning"});return}if(o==="PRO"&&(r<1||r>50)){c("Pro plan seats must be between 1 and 50.",{variant:"warning"});return}if(o==="ENTERPRISE"&&r<10){c("Enterprise requires minimum 10 seats.",{variant:"warning"});return}await D.put(O.subscriptions.update(R.id),{seats:r}),xe(n=>n&&{...n,seats:r}),_(n=>({...n,totalSeats:r,availableSeats:Math.max(0,r-(n.activeMembers+n.pendingInvites))})),c("Seats updated successfully",{variant:"success"}),le(!1)}catch(o){const r=((t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message)||(o==null?void 0:o.message)||"Failed to update seats";c(r,{variant:"error"})}},ta=()=>{Y({newPassword:"",confirmPassword:"",email:(j==null?void 0:j.email)||"",role:(j==null?void 0:j.role)||"member",status:(j==null?void 0:j.status)||"active"}),Re(!1),ze(!1),te(!0)},sa=async()=>{var r,n;if(!j)return;if(j.status!=="active"){c("Password can only be set after the member has joined (status Active).",{variant:"warning"});return}const a=j.email,{newPassword:t,confirmPassword:o}=x;if(!t||t.length<8){c("Password must be at least 8 characters.",{variant:"warning"});return}if(t!==o){c("Passwords do not match.",{variant:"warning"});return}try{if(de(!0),!E){c("Organization context not found.",{variant:"error"});return}await D.put(O.organizations.setMemberPassword(E,j.id),{password:t}),c(`Password set for ${a}`,{variant:"success"}),te(!1)}catch(u){const d=((n=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:n.message)||(u==null?void 0:u.message)||"Failed to set password";c(d,{variant:"error"})}finally{de(!1)}},ra=async()=>{var a,t,o,r,n,u;if(!(!j||!E))try{de(!0);const d={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"},M={pending:"INVITED",active:"ACTIVE",suspended:"SUSPENDED",removed:"REMOVED"};console.log("Updating member:",{memberId:j.id,email:x.email,role:d[x.role],status:M[x.status]}),await D.patch(O.organizations.updateMember(E,j.id),{email:x.email,role:d[x.role],status:M[x.status]}),x.newPassword&&x.confirmPassword&&x.newPassword===x.confirmPassword&&await D.put(O.organizations.setMemberPassword(E,j.id),{password:x.newPassword}),c("Member updated successfully",{variant:"success"}),te(!1);const s=await D.get(O.organizations.my()),S=((t=(a=s==null?void 0:s.data)==null?void 0:a.data)==null?void 0:t.owned)??[],y=((r=(o=s==null?void 0:s.data)==null?void 0:o.data)==null?void 0:r.memberOf)??[],k=[...S,...y].find(l=>l.id===E)||S[0]||y[0];if(k){const l=k.members||[],z=(Array.isArray(l)?l:[]).filter(p=>p&&p.status!=="REMOVED").map(p=>{const K=String(p.email||"user@example.com"),Q=K.split("@")[0]||"User",T={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},f={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(p.id||`${K}-${Math.random().toString(36).slice(2)}`),firstName:Q.charAt(0).toUpperCase()+Q.slice(1),lastName:"",email:K,role:T[String(p.role)]||"member",status:f[String(p.status)]||"active",joinedAt:G(p.joinedAt),lastActive:G(p.updatedAt||p.joinedAt||new Date,{includeTime:!0})}}),g=l.filter(p=>p.status==="INVITED").length,v=l.filter(p=>p.status==="ACTIVE").length;H(z),_(p=>({...p,totalMembers:z.length,pendingInvites:g,activeMembers:v,availableSeats:Math.max(0,p.totalSeats-(v+g))}))}}catch(d){console.error("[TeamPage] Update member failed:",d);const M=((u=(n=d==null?void 0:d.response)==null?void 0:n.data)==null?void 0:u.message)||(d==null?void 0:d.message)||"Failed to update member";c(M,{variant:"error"})}finally{de(!1)}},na=()=>{j&&(fe(j),ve(!0),ce())},ia=async()=>{var a,t,o,r;if(!(!Z||!E))try{await D.post(O.organizations.removeMember(E,Z.id)),c(`${Z.email} removed from team`,{variant:"warning"});const n=await D.get(O.organizations.my()),u=((t=(a=n==null?void 0:n.data)==null?void 0:a.data)==null?void 0:t.owned)??[],d=((r=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:r.memberOf)??[],M=[...u,...d].find(s=>s.id===E)||u[0]||d[0];if(M){const s=M.members||[],S=(Array.isArray(s)?s:[]).filter(l=>l&&l.status!=="REMOVED").map(l=>{const z=String(l.email||"user@example.com"),g=z.split("@")[0]||"User",v={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},p={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(l.id||`${z}-${Math.random().toString(36).slice(2)}`),firstName:g.charAt(0).toUpperCase()+g.slice(1),lastName:"",email:z,role:v[String(l.role)]||"member",status:p[String(l.status)]||"active",joinedAt:G(l.joinedAt),lastActive:G(l.updatedAt||l.joinedAt||new Date,{includeTime:!0})}}),y=s.filter(l=>l.status==="INVITED").length,k=s.filter(l=>l.status==="ACTIVE").length;H(S),_(l=>({...l,totalMembers:S.length,pendingInvites:y,activeMembers:k,availableSeats:Math.max(0,l.totalSeats-(k+y))}))}}catch(n){console.error("[TeamPage] Remove member failed:",n),c((n==null?void 0:n.message)||"Failed to remove member",{variant:"error"})}finally{ve(!1),fe(null)}},We=()=>{ve(!1),fe(null)};return b.useMemo(()=>C.totalSeats<=0?0:(C.totalSeats-C.availableSeats)/C.totalSeats*100,[C.totalSeats,C.availableSeats]),e.jsxs(q,{children:[e.jsx(q,{children:e.jsxs(q,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(q,{children:[e.jsx(U,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsx(U,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Create and manage your team members with automatic Firebase Authentication setup. Each member gets their own account and temporary password."})]}),e.jsx($,{variant:"contained",startIcon:e.jsx(oa,{}),onClick:()=>ae(!0),disabled:C.availableSeats<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Add Team Member"}),Qe&&e.jsxs($,{variant:"outlined",onClick:ea,sx:{ml:2},children:["Manage Seats",R?` (${R.seats})`:""]})]})}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Team Members",value:C.totalMembers,icon:e.jsx(la,{}),color:"primary",trend:{value:12,direction:"up"}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Active Members",value:C.activeMembers,icon:e.jsx(Ie,{}),color:"success",trend:{value:8,direction:"up"}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Total Seats",value:C.totalSeats,icon:e.jsx(Ve,{}),color:"primary"})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Available Seats",value:C.availableSeats,icon:e.jsx(Ve,{}),color:"secondary"})})]}),e.jsx(q,{children:e.jsx(da,{component:ca,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(ma,{children:[e.jsx(ua,{children:e.jsxs(Fe,{children:[e.jsx(N,{sx:{fontWeight:600},children:"Member"}),e.jsx(N,{sx:{fontWeight:600},children:"Role"}),e.jsx(N,{sx:{fontWeight:600},children:"Department"}),e.jsx(N,{sx:{fontWeight:600},children:"Status"}),e.jsx(N,{sx:{fontWeight:600},children:"License"}),e.jsx(N,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(N,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ga,{children:Ge.map(a=>e.jsxs(Fe,{hover:!0,children:[e.jsx(N,{children:e.jsxs(q,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(pa,{sx:{width:40,height:40},children:[a.firstName[0],a.lastName[0]]}),e.jsxs(q,{children:[e.jsxs(U,{variant:"body2",sx:{fontWeight:500},children:[a.firstName," ",a.lastName]}),e.jsx(U,{variant:"caption",color:"text.secondary",children:a.email})]})]})}),e.jsx(N,{children:e.jsx($e,{icon:a.role==="admin"?e.jsx(ha,{}):e.jsx(ba,{}),label:a.role.toUpperCase(),color:Ea(a.role),size:"small",variant:"outlined"})}),e.jsx(N,{children:e.jsx(U,{variant:"body2",children:a.department||"Not assigned"})}),e.jsx(N,{children:e.jsx($e,{icon:Aa(a.status),label:a.status.toUpperCase(),color:Ia(a.status),size:"small"})}),e.jsx(N,{children:e.jsx(U,{variant:"body2",children:a.licenseType||"PROFESSIONAL"})}),e.jsx(N,{children:e.jsx(U,{variant:"body2",children:a.lastActive?new Date(a.lastActive).toLocaleDateString():"Never"})}),e.jsx(N,{children:e.jsx(je,{onClick:t=>Ye(t,a),size:"small",children:e.jsx(xa,{})})})]},a.id))})]})})}),e.jsx(va,{color:"primary",sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},onClick:()=>ae(!0),children:e.jsx(fa,{})}),e.jsxs(ja,{anchorEl:Ce,open:!!Ce,onClose:ce,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsxs(A,{onClick:()=>{ce(),ta()},children:[e.jsx(Se,{children:e.jsx(Sa,{fontSize:"small"})}),"Edit Member"]}),e.jsxs(A,{onClick:ce,children:[e.jsx(Se,{children:e.jsx(_e,{fontSize:"small"})}),"Suspend Member"]}),e.jsxs(A,{onClick:na,sx:{color:"error.main"},children:[e.jsx(Se,{children:e.jsx(we,{fontSize:"small",sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(ue,{open:He,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Create New Team Member"}),e.jsxs(pe,{children:[e.jsx(U,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Create a new team member account with automatic Firebase Authentication setup. The member will receive a welcome email with their temporary password."}),e.jsxs(h,{container:!0,spacing:3,sx:{mt:1},children:[C.availableSeats<=0&&e.jsx(h,{item:!0,xs:12,children:e.jsx(ne,{severity:"warning",children:"No available seats. Add seats on the Billing page to invite more team members."})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"First Name",value:P.firstName,onChange:a=>J(t=>({...t,firstName:a.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Last Name",value:P.lastName,onChange:a=>J(t=>({...t,lastName:a.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Email Address",type:"email",value:P.email,onChange:a=>J(t=>({...t,email:a.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Role"}),e.jsxs(Ee,{value:P.role,label:"Role",onChange:a=>J(t=>({...t,role:a.target.value})),inputProps:{"aria-label":"Select team member role",title:"Select the role for this team member"},children:[e.jsx(A,{value:"viewer",children:"Viewer"}),e.jsx(A,{value:"member",children:"Member"}),e.jsx(A,{value:"admin",children:"Admin"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Department",value:P.department,onChange:a=>J(t=>({...t,department:a.target.value}))})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Welcome Message (Optional)",multiline:!0,rows:3,value:P.message,onChange:a=>J(t=>({...t,message:a.target.value}))})})]})]}),e.jsxs(he,{children:[e.jsx($,{onClick:()=>ae(!1),children:"Cancel"}),e.jsx($,{onClick:Ze,variant:"contained",disabled:!P.email||!P.firstName||!P.lastName||C.availableSeats<=0,children:"Create Team Member"})]})]}),e.jsxs(ue,{open:Je,onClose:()=>le(!1),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Manage Seats"}),e.jsx(pe,{children:e.jsxs(h,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(ne,{severity:"info",children:R?`${R.tier} subscription`:"No active subscription"})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,type:"number",label:"Total Seats",value:Ne,onChange:a=>De(parseInt(a.target.value||"0",10)),inputProps:{min:1,max:(R==null?void 0:R.tier)==="PRO"?50:1e3}})})]})}),e.jsxs(he,{children:[e.jsx($,{onClick:()=>le(!1),children:"Cancel"}),e.jsx($,{onClick:aa,variant:"contained",disabled:!R,children:"Save"})]})]}),e.jsxs(ue,{open:Ke,onClose:()=>{te(!1),Te(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Edit Member"}),e.jsx(pe,{children:e.jsxs(h,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Email",value:x.email,onChange:a=>Y(t=>({...t,email:a.target.value}))})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Role"}),e.jsxs(Ee,{value:x.role,label:"Role",onChange:a=>Y(t=>({...t,role:a.target.value})),children:[e.jsx(A,{value:"viewer",children:"Viewer"}),e.jsx(A,{value:"member",children:"Member"}),e.jsx(A,{value:"manager",children:"Manager"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"owner",children:"Owner"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Status"}),e.jsxs(Ee,{value:x.status,label:"Status",onChange:a=>Y(t=>({...t,status:a.target.value})),children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"suspended",children:"Suspended"}),e.jsx(A,{value:"removed",children:"Removed"})]})]})}),e.jsx(h,{item:!0,xs:12,children:x.status!=="active"?e.jsx(ne,{severity:"warning",children:"This member has not joined yet (Pending/Suspended/Removed). You can only set a password for Active members."}):e.jsx(ne,{severity:"info",children:"Set a temporary password for this user to log into Backbone. They can change it later."})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"New Password",type:Oe?"text":"password",value:x.newPassword,onChange:a=>Y(t=>({...t,newPassword:a.target.value})),inputProps:{minLength:8},helperText:"Minimum 8 characters",InputProps:{endAdornment:e.jsx(Ue,{position:"end",children:e.jsx(je,{onClick:()=>Re(a=>!a),edge:"end","aria-label":"toggle password visibility",children:Oe?e.jsx(Be,{}):e.jsx(Le,{})})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Confirm Password",type:ke?"text":"password",value:x.confirmPassword,onChange:a=>Y(t=>({...t,confirmPassword:a.target.value})),InputProps:{endAdornment:e.jsx(Ue,{position:"end",children:e.jsx(je,{onClick:()=>ze(a=>!a),edge:"end","aria-label":"toggle password visibility",children:ke?e.jsx(Be,{}):e.jsx(Le,{})})})}})})]})}),e.jsxs(he,{children:[e.jsx($,{onClick:()=>te(!1),disabled:se,children:"Cancel"}),e.jsx($,{onClick:ra,variant:"outlined",disabled:se,children:se?"Saving…":"Save Changes"}),e.jsx($,{onClick:sa,variant:"contained",disabled:se||!x.newPassword||!x.confirmPassword||x.status!=="active",children:se?"Saving…":"Save Password Only"})]})]}),e.jsxs(ue,{open:Xe,onClose:We,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:e.jsxs(q,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{color:"error"}),"Remove Team Member"]})}),e.jsxs(pe,{children:[e.jsxs(U,{variant:"body1",sx:{mb:2},children:["Are you sure you want to remove ",e.jsx("strong",{children:Z==null?void 0:Z.email})," from your team?"]}),e.jsx(ne,{severity:"warning",sx:{mt:2},children:e.jsx(U,{variant:"body2",children:"This action cannot be undone. The member will lose access to all organization resources and data."})})]}),e.jsxs(he,{children:[e.jsx($,{onClick:We,color:"inherit",children:"Cancel"}),e.jsx($,{onClick:ia,color:"error",variant:"contained",startIcon:e.jsx(we,{}),children:"Remove Member"})]})]})]})};export{za as default};
