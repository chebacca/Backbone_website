import{j as e,a as U,T as k,d as O,bw as lt,G as b,aG as dt,w as je,aJ as $e,K as ct,b0 as mt,c as ut,b1 as gt,b2 as ht,b3 as We,b4 as E,b5 as xt,aC as pt,m as ze,bx as bt,by as vt,aH as ft,I as xe,bd as jt,bz as St,aT as wt,as as Mt,ae as S,s as oe,bg as Et,Z as It,bA as _e,b9 as pe,D as le,k as de,l as ce,A as se,n as _,aN as be,b7 as ve,b8 as fe,v as me,X as Be,_ as Ue,$ as Fe}from"./mui-CWufCee_.js";import{r as x}from"./vendor-OeuszDaU.js";import{u as At}from"./notistack.esm-CcFOI6Un.js";import{u as yt,c as P,e as N}from"./index-mGe2W2rA.js";import{M as ue}from"./MetricCard-Cep6NJsK.js";import"./stripe-DjIiidKe.js";const Ct=l=>{switch(l){case"admin":return"secondary";case"owner":return"secondary";case"manager":return"info";case"member":return"success";case"viewer":return"default";default:return"default"}},Pt=l=>{switch(l){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},Nt=l=>{switch(l){case"active":return e.jsx(je,{});case"pending":return e.jsx($e,{});case"suspended":return e.jsx(_e,{});default:return e.jsx(je,{})}},Bt=()=>{const{enqueueSnackbar:l}=At(),{user:V}=yt(),[Ge,G]=x.useState([]),[w,F]=x.useState({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}),[y,Se]=x.useState(null),[Dt,we]=x.useState(""),[Tt,Le]=x.useState(null),[I,Me]=x.useState(null),W=(t,{includeTime:a=!1}={})=>{try{if(!t){const s=new Date;return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="string"||typeof t=="number"){const s=new Date(t);if(!Number.isNaN(s.getTime()))return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="object"){const s=t._seconds,n=t._nanoseconds??0;if(typeof s=="number"){const v=s*1e3+Math.floor(n/1e6),c=new Date(v);return a?c.toISOString():c.toISOString().slice(0,10)}}}catch{}const o=new Date;return a?o.toISOString():o.toISOString().slice(0,10)};x.useEffect(()=>{let t=!0;return(async()=>{var a,o,s,n,v,c,A,i,f,D,T,r,j,R;try{const g=await P.get(N.organizations.context()).catch(()=>null),m=((o=(a=g==null?void 0:g.data)==null?void 0:a.data)==null?void 0:o.organization)||null,u=((n=(s=g==null?void 0:g.data)==null?void 0:s.data)==null?void 0:n.members)||[],B=((c=(v=g==null?void 0:g.data)==null?void 0:v.data)==null?void 0:c.activeSubscription)||null,H=((i=(A=g==null?void 0:g.data)==null?void 0:A.data)==null?void 0:i.primaryRole)||null;let M=m,$=u,C=B;if(!M){const h=await P.get(N.organizations.my()),J=((D=(f=h==null?void 0:h.data)==null?void 0:f.data)==null?void 0:D.owned)??[],te=((r=(T=h==null?void 0:h.data)==null?void 0:T.data)==null?void 0:r.memberOf)??[];M=J[0]||te[0]||null,$=(M==null?void 0:M.members)||[]}if(!M){t&&(Se(null),we(""),G([]),F({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}));return}const Oe=$.filter(h=>h.status==="INVITED").length,ke=$.filter(h=>h.status==="ACTIVE").length;let ie=0;C&&C.status==="ACTIVE"&&C.organizationId===M.id?ie=Number(C.seats||0):ie=(((R=(j=(await P.get(N.subscriptions.mySubscriptions())).data)==null?void 0:j.data)==null?void 0:R.subscriptions)??[]).filter(K=>K.organizationId===M.id&&K.status==="ACTIVE").reduce((K,ae)=>(!C&&ae.status==="ACTIVE"&&(C=ae),K+(ae.seats||0)),0);const ot=Math.max(0,ie-(ke+Oe)),Ve=(Array.isArray($)?$:[]).filter(h=>h&&h.status!=="REMOVED").map(h=>{const J=String(h.email||"user@example.com"),te=J.split("@")[0]||"User",K={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},ae={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(h.id||`${J}-${Math.random().toString(36).slice(2)}`),firstName:te.charAt(0).toUpperCase()+te.slice(1),lastName:"",email:J,role:K[String(h.role)]||"member",status:ae[String(h.status)]||"active",joinedAt:W(h.joinedAt),lastActive:W(h.updatedAt||h.joinedAt||new Date,{includeTime:!0})}});if(!t)return;Se(M.id),we(M.name||"Organization"),Le(H||null),Me(C?{id:String(C.id),tier:String(C.tier).toUpperCase(),seats:Number(C.seats||0),status:String(C.status||""),organizationId:C.organizationId}:null),G(Ve),F({totalMembers:Ve.length,activeMembers:ke,pendingInvites:Oe,availableSeats:ot,totalSeats:ie})}catch(g){if(!t)return;console.error("[TeamPage] Failed to load team data:",g),G([]),F({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0})}})(),()=>{t=!1}},[V==null?void 0:V.email]);const[Ee,Ie]=x.useState(null),[d,Ae]=x.useState(null),[qe,X]=x.useState(!1),[He,ne]=x.useState(!1),[ye,Ce]=x.useState(0),[Je,Y]=x.useState(!1),[Z,re]=x.useState(!1),[Pe,Ne]=x.useState(!1),[De,Te]=x.useState(!1),[p,L]=x.useState({newPassword:"",confirmPassword:"",email:"",role:"member",status:"active"}),[Ke,ge]=x.useState(!1),[q,he]=x.useState(null),[z,Q]=x.useState({email:"",role:"member",department:"",message:""}),Xe=(t,a)=>{Ie(t.currentTarget),Ae(a)},ee=()=>{Ie(null)},Ye=async()=>{var t,a,o,s,n,v,c,A;if(y){if(w.availableSeats<=0){l("No seats available. Please add seats from Billing before inviting new members.",{variant:"warning"});return}try{const i={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"};await P.post(N.organizations.invite(y),{email:z.email,role:i[z.role]||"MEMBER"}),l(`Invitation sent to ${z.email}`,{variant:"success"}),X(!1),Q({email:"",role:"member",department:"",message:""});const f=await P.get(N.organizations.my()),D=((a=(t=f==null?void 0:f.data)==null?void 0:t.data)==null?void 0:a.owned)??[],T=((s=(o=f==null?void 0:f.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],r=[...D,...T].find(j=>j.id===y)||D[0]||T[0];if(r){const j=r.members||[],R=(Array.isArray(j)?j:[]).filter(u=>u&&u.status!=="REMOVED").map(u=>{const B=String(u.email||"user@example.com"),H=B.split("@")[0]||"User",M={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},$={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(u.id||`${B}-${Math.random().toString(36).slice(2)}`),firstName:H.charAt(0).toUpperCase()+H.slice(1),lastName:"",email:B,role:M[String(u.role)]||"member",status:$[String(u.status)]||"active",joinedAt:W(u.joinedAt),lastActive:W(u.updatedAt||u.joinedAt||new Date,{includeTime:!0})}}),g=j.filter(u=>u.status==="INVITED").length,m=j.filter(u=>u.status==="ACTIVE").length;G(R),F(u=>({...u,totalMembers:R.length,pendingInvites:g,activeMembers:m,availableSeats:Math.max(0,u.totalSeats-(m+g))}))}}catch(i){console.error("[TeamPage] Invite failed:",i);const f=((v=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:v.message)||((A=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:A.error)||(i==null?void 0:i.message)||"Failed to send invitation";l(f,{variant:"error"})}}},Ze=x.useMemo(()=>String((V==null?void 0:V.role)||"").toUpperCase()==="SUPERADMIN",[V==null?void 0:V.role]),Qe=()=>{if(!I){l("No active subscription found for this organization.",{variant:"warning"});return}Ce(Number(I.seats||0)),ne(!0)},et=async()=>{var t,a;if(I)try{const o=I.tier,s=Number(ye||0);if(o==="BASIC"&&s!==1){l("Basic plan supports exactly 1 seat.",{variant:"warning"});return}if(o==="PRO"&&(s<1||s>50)){l("Pro plan seats must be between 1 and 50.",{variant:"warning"});return}if(o==="ENTERPRISE"&&s<10){l("Enterprise requires minimum 10 seats.",{variant:"warning"});return}await P.put(N.subscriptions.update(I.id),{seats:s}),Me(n=>n&&{...n,seats:s}),F(n=>({...n,totalSeats:s,availableSeats:Math.max(0,s-(n.activeMembers+n.pendingInvites))})),l("Seats updated successfully",{variant:"success"}),ne(!1)}catch(o){const s=((a=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:a.message)||(o==null?void 0:o.message)||"Failed to update seats";l(s,{variant:"error"})}},tt=()=>{d&&l(`Invitation resent to ${d.email}`,{variant:"success"}),ee()},at=()=>{L({newPassword:"",confirmPassword:"",email:(d==null?void 0:d.email)||"",role:(d==null?void 0:d.role)||"member",status:(d==null?void 0:d.status)||"active"}),Ne(!1),Te(!1),Y(!0)},st=async()=>{var s,n;if(!d)return;if(d.status!=="active"){l("Password can only be set after the member has joined (status Active).",{variant:"warning"});return}const t=d.email,{newPassword:a,confirmPassword:o}=p;if(!a||a.length<8){l("Password must be at least 8 characters.",{variant:"warning"});return}if(a!==o){l("Passwords do not match.",{variant:"warning"});return}try{if(re(!0),!y){l("Organization context not found.",{variant:"error"});return}await P.put(N.organizations.setMemberPassword(y,d.id),{password:a}),l(`Password set for ${t}`,{variant:"success"}),Y(!1)}catch(v){const c=((n=(s=v==null?void 0:v.response)==null?void 0:s.data)==null?void 0:n.message)||(v==null?void 0:v.message)||"Failed to set password";l(c,{variant:"error"})}finally{re(!1)}},nt=async()=>{var t,a,o,s,n,v;if(!(!d||!y))try{re(!0);const c={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"},A={pending:"INVITED",active:"ACTIVE",suspended:"SUSPENDED",removed:"REMOVED"};console.log("Updating member:",{memberId:d.id,email:p.email,role:c[p.role],status:A[p.status]}),await P.patch(N.organizations.updateMember(y,d.id),{email:p.email,role:c[p.role],status:A[p.status]}),p.newPassword&&p.confirmPassword&&p.newPassword===p.confirmPassword&&await P.put(N.organizations.setMemberPassword(y,d.id),{password:p.newPassword}),l("Member updated successfully",{variant:"success"}),Y(!1);const i=await P.get(N.organizations.my()),f=((a=(t=i==null?void 0:i.data)==null?void 0:t.data)==null?void 0:a.owned)??[],D=((s=(o=i==null?void 0:i.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],T=[...f,...D].find(r=>r.id===y)||f[0]||D[0];if(T){const r=T.members||[],j=(Array.isArray(r)?r:[]).filter(m=>m&&m.status!=="REMOVED").map(m=>{const u=String(m.email||"user@example.com"),B=u.split("@")[0]||"User",H={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},M={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(m.id||`${u}-${Math.random().toString(36).slice(2)}`),firstName:B.charAt(0).toUpperCase()+B.slice(1),lastName:"",email:u,role:H[String(m.role)]||"member",status:M[String(m.status)]||"active",joinedAt:W(m.joinedAt),lastActive:W(m.updatedAt||m.joinedAt||new Date,{includeTime:!0})}}),R=r.filter(m=>m.status==="INVITED").length,g=r.filter(m=>m.status==="ACTIVE").length;G(j),F(m=>({...m,totalMembers:j.length,pendingInvites:R,activeMembers:g,availableSeats:Math.max(0,m.totalSeats-(g+R))}))}}catch(c){console.error("[TeamPage] Update member failed:",c);const A=((v=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:v.message)||(c==null?void 0:c.message)||"Failed to update member";l(A,{variant:"error"})}finally{re(!1)}},rt=()=>{d&&(he(d),ge(!0),ee())},it=async()=>{var t,a,o,s;if(!(!q||!y))try{await P.post(N.organizations.removeMember(y,q.id)),l(`${q.email} removed from team`,{variant:"warning"});const n=await P.get(N.organizations.my()),v=((a=(t=n==null?void 0:n.data)==null?void 0:t.data)==null?void 0:a.owned)??[],c=((s=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:s.memberOf)??[],A=[...v,...c].find(i=>i.id===y)||v[0]||c[0];if(A){const i=A.members||[],f=(Array.isArray(i)?i:[]).filter(r=>r&&r.status!=="REMOVED").map(r=>{const j=String(r.email||"user@example.com"),R=j.split("@")[0]||"User",g={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},m={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(r.id||`${j}-${Math.random().toString(36).slice(2)}`),firstName:R.charAt(0).toUpperCase()+R.slice(1),lastName:"",email:j,role:g[String(r.role)]||"member",status:m[String(r.status)]||"active",joinedAt:W(r.joinedAt),lastActive:W(r.updatedAt||r.joinedAt||new Date,{includeTime:!0})}}),D=i.filter(r=>r.status==="INVITED").length,T=i.filter(r=>r.status==="ACTIVE").length;G(f),F(r=>({...r,totalMembers:f.length,pendingInvites:D,activeMembers:T,availableSeats:Math.max(0,r.totalSeats-(T+D))}))}}catch(n){console.error("[TeamPage] Remove member failed:",n),l((n==null?void 0:n.message)||"Failed to remove member",{variant:"error"})}finally{ge(!1),he(null)}},Re=()=>{ge(!1),he(null)};return x.useMemo(()=>w.totalSeats<=0?0:(w.totalSeats-w.availableSeats)/w.totalSeats*100,[w.totalSeats,w.availableSeats]),e.jsxs(U,{children:[e.jsx(U,{children:e.jsxs(U,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(U,{children:[e.jsx(k,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsx(k,{variant:"body1",color:"text.secondary",children:"Manage your team members, roles, and license assignments"})]}),e.jsx(O,{variant:"contained",startIcon:e.jsx(lt,{}),onClick:()=>X(!0),disabled:w.availableSeats<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Invite Member"}),Ze&&e.jsxs(O,{variant:"outlined",onClick:Qe,sx:{ml:2},children:["Manage Seats",I?` (${I.seats})`:""]})]})}),e.jsxs(b,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Total Members",value:w.totalMembers,icon:e.jsx(dt,{}),color:"primary",trend:{value:12,direction:"up"}})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Active Members",value:w.activeMembers,icon:e.jsx(je,{}),color:"success",trend:{value:8,direction:"up"}})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Pending Invites",value:w.pendingInvites,icon:e.jsx($e,{}),color:"warning"})}),e.jsx(b,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Available Seats",value:w.availableSeats,icon:e.jsx(ct,{}),color:"secondary"})})]}),e.jsx(U,{children:e.jsx(mt,{component:ut,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(gt,{children:[e.jsx(ht,{children:e.jsxs(We,{children:[e.jsx(E,{sx:{fontWeight:600},children:"Member"}),e.jsx(E,{sx:{fontWeight:600},children:"Role"}),e.jsx(E,{sx:{fontWeight:600},children:"Department"}),e.jsx(E,{sx:{fontWeight:600},children:"Status"}),e.jsx(E,{sx:{fontWeight:600},children:"License"}),e.jsx(E,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(E,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(xt,{children:Ge.map(t=>e.jsxs(We,{hover:!0,children:[e.jsx(E,{children:e.jsxs(U,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(pt,{sx:{width:40,height:40},children:[t.firstName[0],t.lastName[0]]}),e.jsxs(U,{children:[e.jsxs(k,{variant:"body2",sx:{fontWeight:500},children:[t.firstName," ",t.lastName]}),e.jsx(k,{variant:"caption",color:"text.secondary",children:t.email})]})]})}),e.jsx(E,{children:e.jsx(ze,{icon:t.role==="admin"?e.jsx(bt,{}):e.jsx(vt,{}),label:t.role.toUpperCase(),color:Ct(t.role),size:"small",variant:"outlined"})}),e.jsx(E,{children:e.jsx(k,{variant:"body2",children:t.department||"Not assigned"})}),e.jsx(E,{children:e.jsx(ze,{icon:Nt(t.status),label:t.status.toUpperCase(),color:Pt(t.status),size:"small"})}),e.jsx(E,{children:t.licenseAssigned?e.jsx(ft,{title:t.licenseAssigned,children:e.jsx(k,{variant:"body2",sx:{fontFamily:"monospace",maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:t.licenseAssigned})}):e.jsx(k,{variant:"body2",color:"text.secondary",children:"No license"})}),e.jsx(E,{children:e.jsx(k,{variant:"body2",children:t.lastActive?new Date(t.lastActive).toLocaleDateString():"Never"})}),e.jsx(E,{children:e.jsx(xe,{onClick:a=>Xe(a,t),size:"small",children:e.jsx(jt,{})})})]},t.id))})]})})}),e.jsx(St,{color:"primary",sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},onClick:()=>X(!0),children:e.jsx(wt,{})}),e.jsxs(Mt,{anchorEl:Ee,open:!!Ee,onClose:ee,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsxs(S,{onClick:()=>{ee(),at()},children:[e.jsx(oe,{children:e.jsx(Et,{fontSize:"small"})}),"Edit Member"]}),(d==null?void 0:d.status)==="pending"&&e.jsxs(S,{onClick:tt,children:[e.jsx(oe,{children:e.jsx(It,{fontSize:"small"})}),"Resend Invite"]}),e.jsxs(S,{onClick:ee,children:[e.jsx(oe,{children:e.jsx(_e,{fontSize:"small"})}),"Suspend Member"]}),e.jsxs(S,{onClick:rt,sx:{color:"error.main"},children:[e.jsx(oe,{children:e.jsx(pe,{fontSize:"small",sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(le,{open:qe,onClose:()=>X(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(de,{children:"Invite Team Member"}),e.jsx(ce,{children:e.jsxs(b,{container:!0,spacing:3,sx:{mt:1},children:[w.availableSeats<=0&&e.jsx(b,{item:!0,xs:12,children:e.jsx(se,{severity:"warning",children:"No available seats. Add seats on the Billing page to invite more team members."})}),e.jsx(b,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Email Address",type:"email",value:z.email,onChange:t=>Q(a=>({...a,email:t.target.value}))})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(ve,{children:"Role"}),e.jsxs(fe,{value:z.role,label:"Role",onChange:t=>Q(a=>({...a,role:t.target.value})),inputProps:{"aria-label":"Select team member role",title:"Select the role for this team member"},children:[e.jsx(S,{value:"viewer",children:"Viewer"}),e.jsx(S,{value:"member",children:"Member"}),e.jsx(S,{value:"admin",children:"Admin"})]})]})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"Department",value:z.department,onChange:t=>Q(a=>({...a,department:t.target.value}))})}),e.jsx(b,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Welcome Message (Optional)",multiline:!0,rows:3,value:z.message,onChange:t=>Q(a=>({...a,message:t.target.value}))})})]})}),e.jsxs(me,{children:[e.jsx(O,{onClick:()=>X(!1),children:"Cancel"}),e.jsx(O,{onClick:Ye,variant:"contained",disabled:!z.email||w.availableSeats<=0,children:"Send Invitation"})]})]}),e.jsxs(le,{open:He,onClose:()=>ne(!1),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(de,{children:"Manage Seats"}),e.jsx(ce,{children:e.jsxs(b,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(b,{item:!0,xs:12,children:e.jsx(se,{severity:"info",children:I?`${I.tier} subscription`:"No active subscription"})}),e.jsx(b,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,type:"number",label:"Total Seats",value:ye,onChange:t=>Ce(parseInt(t.target.value||"0",10)),inputProps:{min:1,max:(I==null?void 0:I.tier)==="PRO"?50:1e3}})})]})}),e.jsxs(me,{children:[e.jsx(O,{onClick:()=>ne(!1),children:"Cancel"}),e.jsx(O,{onClick:et,variant:"contained",disabled:!I,children:"Save"})]})]}),e.jsxs(le,{open:Je,onClose:()=>{Y(!1),Ae(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(de,{children:"Edit Member"}),e.jsx(ce,{children:e.jsxs(b,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(b,{item:!0,xs:12,children:e.jsx(_,{fullWidth:!0,label:"Email",value:p.email,onChange:t=>L(a=>({...a,email:t.target.value}))})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(ve,{children:"Role"}),e.jsxs(fe,{value:p.role,label:"Role",onChange:t=>L(a=>({...a,role:t.target.value})),children:[e.jsx(S,{value:"viewer",children:"Viewer"}),e.jsx(S,{value:"member",children:"Member"}),e.jsx(S,{value:"manager",children:"Manager"}),e.jsx(S,{value:"admin",children:"Admin"}),e.jsx(S,{value:"owner",children:"Owner"})]})]})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(ve,{children:"Status"}),e.jsxs(fe,{value:p.status,label:"Status",onChange:t=>L(a=>({...a,status:t.target.value})),children:[e.jsx(S,{value:"pending",children:"Pending"}),e.jsx(S,{value:"active",children:"Active"}),e.jsx(S,{value:"suspended",children:"Suspended"}),e.jsx(S,{value:"removed",children:"Removed"})]})]})}),e.jsx(b,{item:!0,xs:12,children:p.status!=="active"?e.jsx(se,{severity:"warning",children:"This member has not joined yet (Pending/Suspended/Removed). You can only set a password for Active members."}):e.jsx(se,{severity:"info",children:"Set a temporary password for this user to log into Backbone. They can change it later."})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"New Password",type:Pe?"text":"password",value:p.newPassword,onChange:t=>L(a=>({...a,newPassword:t.target.value})),inputProps:{minLength:8},helperText:"Minimum 8 characters",InputProps:{endAdornment:e.jsx(Be,{position:"end",children:e.jsx(xe,{onClick:()=>Ne(t=>!t),edge:"end","aria-label":"toggle password visibility",children:Pe?e.jsx(Ue,{}):e.jsx(Fe,{})})})}})}),e.jsx(b,{item:!0,xs:12,sm:6,children:e.jsx(_,{fullWidth:!0,label:"Confirm Password",type:De?"text":"password",value:p.confirmPassword,onChange:t=>L(a=>({...a,confirmPassword:t.target.value})),InputProps:{endAdornment:e.jsx(Be,{position:"end",children:e.jsx(xe,{onClick:()=>Te(t=>!t),edge:"end","aria-label":"toggle password visibility",children:De?e.jsx(Ue,{}):e.jsx(Fe,{})})})}})})]})}),e.jsxs(me,{children:[e.jsx(O,{onClick:()=>Y(!1),disabled:Z,children:"Cancel"}),e.jsx(O,{onClick:nt,variant:"outlined",disabled:Z,children:Z?"Saving…":"Save Changes"}),e.jsx(O,{onClick:st,variant:"contained",disabled:Z||!p.newPassword||!p.confirmPassword||p.status!=="active",children:Z?"Saving…":"Save Password Only"})]})]}),e.jsxs(le,{open:Ke,onClose:Re,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(de,{children:e.jsxs(U,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(pe,{color:"error"}),"Remove Team Member"]})}),e.jsxs(ce,{children:[e.jsxs(k,{variant:"body1",sx:{mb:2},children:["Are you sure you want to remove ",e.jsx("strong",{children:q==null?void 0:q.email})," from your team?"]}),e.jsx(se,{severity:"warning",sx:{mt:2},children:e.jsx(k,{variant:"body2",children:"This action cannot be undone. The member will lose access to all organization resources and data."})})]}),e.jsxs(me,{children:[e.jsx(O,{onClick:Re,color:"inherit",children:"Cancel"}),e.jsx(O,{onClick:it,color:"error",variant:"contained",startIcon:e.jsx(pe,{}),children:"Remove Member"})]})]})]})};export{Bt as default};
