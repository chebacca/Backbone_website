import{j as e,B as t,C as Le,T as a,d as f,ai as H,w as ls,x as Pe,y as A,aj as os,z as Ae,H as J,a as u,aG as K,G as W,W as se,p as ae,am as te,u as F,t as cs,v as ds,aq as xs,ar as ms,as as hs,at as We,au as x,av as us,ag as js,r as V,aZ as gs,g as Me,aw as ps,ax as vs,ap as bs,ay as _,az as Y,aB as Z,a_ as Se,e as o,I as v,a$ as De,b0 as Ne,aC as ke,aD as Ee,aE as Re,a5 as j,F as fs,s as ys,R as ws,aF as Q,aI as X,aL as Is,aK as Cs,aH as ne,a4 as Ts,E as Ls,D as Ps,aJ as As}from"./mui-D_3t3Wff.js";import{r as l,b as ze}from"./vendor-CjD1bmmO.js";import{u as Ws}from"./notistack.esm-Ca-E78ev.js";import{b as Ms,c as Ss,a as Ds,u as Ns,j as ks,k as Es,l as Rs,f as zs,g as Fs}from"./useStreamlinedData-n9cMx4ts.js";import{M as O}from"./MetricCard-CmTmSA-Z.js";import"./UnifiedDataService-DdOHmGRM.js";import"./index-BxMGX29a.js";import"./stripe-DQqYxQf-.js";import"./index.esm-B4qVkIPL.js";import"./index.esm-DmQE6AXN.js";const Os=r=>{switch(r){case"owner":return"error";case"admin":return"primary";case"manager":return"secondary";case"member":return"info";case"viewer":return"default";default:return"default"}},$s=r=>{switch(r){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},Fe=r=>{switch(r){case"active":return e.jsx(ae,{});case"pending":return e.jsx(te,{});case"suspended":return e.jsx(As,{});case"removed":return e.jsx(ne,{});default:return e.jsx(se,{})}},ee=()=>{const c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let M="";for(let S=0;S<12;S++)M+=c.charAt(Math.floor(Math.random()*c.length));return M},Zs=()=>{var Ce,Te;const{enqueueSnackbar:r}=Ws(),{data:c,loading:M,error:S}=Ms(),{data:D,loading:Oe,error:$e}=Ss(),{data:y,loading:Be,error:Ge,refetch:N}=Ds(),{data:g,loading:qe,error:Ue,refetch:$}=Ns(),He=ks(),Je=Es();Rs();const Ke=zs();Fs();const[Ve,I]=l.useState(!1),[_e,k]=l.useState(!1),[Ye,E]=l.useState(!1),[B,ie]=l.useState(""),[C,re]=l.useState(""),[T,le]=l.useState(""),[oe,ce]=l.useState("member"),[de,xe]=l.useState(""),[me,he]=l.useState(""),[ue,je]=l.useState(""),[G,R]=l.useState(""),[w,Ze]=l.useState(!0),[n,L]=l.useState(void 0),[ge,pe]=l.useState(null),[q,ve]=l.useState(""),[U,be]=l.useState(""),[fe,ye]=l.useState("member"),[we,Ie]=l.useState(""),Qe=M||Oe||Be||qe,Xe=S||$e||Ge||Ue;ze.useEffect(()=>{w&&R(ee())},[w]),ze.useEffect(()=>{const s=async()=>{console.log("🔄 [TeamPage] License refresh event detected, refetching data..."),await Promise.all([$(),N()])};return window.addEventListener("licenses:refresh",s),()=>{window.removeEventListener("licenses:refresh",s)}},[$,N]);const d=l.useMemo(()=>{if(!c||!D||!y||!g)return{members:[],stats:{totalMembers:0,activeMembers:0,pendingInvites:0,availableLicenses:0,totalLicenses:0,assignedLicenses:0}};const s=y.filter(m=>m.status==="active").length,i=y.filter(m=>m.status==="pending").length,p=g.length,h=g.filter(m=>m.assignedTo).length,b=g.filter(m=>m.status==="PENDING"&&!m.assignedTo).length;console.log("📊 [TeamPage] License stats:",{totalLicenses:p,assignedLicenses:h,availableLicenses:b});const P={totalMembers:y.length,activeMembers:s,pendingInvites:i,availableLicenses:b,totalLicenses:p,assignedLicenses:h};return{members:y,stats:P}},[c,D,y,g]),es=(s,i)=>{console.log("🔧 [TeamPage] Menu clicked for member:",i),L(i),pe(s.currentTarget)},z=()=>{pe(null),L(void 0)},ss=async()=>{var s,i,p;if(!B.trim()){r("Please enter an email address",{variant:"error"});return}if(!C.trim()){r("Please enter a first name",{variant:"error"});return}if(!T.trim()){r("Please enter a last name",{variant:"error"});return}if(!G.trim()){r("Please provide a temporary password",{variant:"error"});return}if(d.stats.availableLicenses<=0){r("No available licenses. Please generate more licenses first.",{variant:"error"});return}try{console.log("👤 [TeamPage] Creating full user with Firebase authentication...");const h={firstName:C.trim(),lastName:T.trim(),email:B.trim().toLowerCase(),role:oe,status:"pending",organization:{id:((s=c==null?void 0:c.organization)==null?void 0:s.id)||"",name:((i=c==null?void 0:c.organization)==null?void 0:i.name)||"",tier:((p=c==null?void 0:c.organization)==null?void 0:p.tier)||"BASIC"},department:de.trim()||void 0,assignedProjects:[],avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(C+" "+T)}&background=667eea&color=fff`},b=await He.mutate({...h,temporaryPassword:G,position:me.trim()||void 0,phone:ue.trim()||void 0});console.log("✅ [TeamPage] Team member created with ID:",b);const P=g==null?void 0:g.find(m=>m.status==="PENDING"&&!m.assignedTo);if(P&&b)try{await Ke.mutate({licenseId:P.id,userId:b}),console.log("✅ [TeamPage] Auto-assigned license",P.id,"to new member",b)}catch(m){console.warn("⚠️ [TeamPage] Failed to auto-assign license:",m)}r(`Team member ${C} ${T} created successfully with license assigned. They can now login with their email and temporary password.`,{variant:"success"}),ie(""),re(""),le(""),ce("member"),xe(""),he(""),je(""),R(ee()),I(!1),await Promise.all([N(),$()])}catch(h){console.error("❌ [TeamPage] Failed to create team member:",h),r((h==null?void 0:h.message)||"Failed to create team member",{variant:"error"})}},as=s=>{const i=s||n;if(!i){console.error("🔧 [TeamPage] No member provided for editing");return}console.log("🔧 [TeamPage] Opening edit dialog for member:",i),L(i),ve(i.firstName||""),be(i.lastName||""),ye(i.role||"member"),Ie(i.department||""),k(!0),z()},ts=()=>{n&&(E(!0),z())},ns=async()=>{if(n)try{r(`${n.firstName} ${n.lastName} has been removed from the team`,{variant:"success"}),E(!1),L(void 0)}catch(s){r((s==null?void 0:s.message)||"Failed to remove team member",{variant:"error"})}},is=()=>{n&&(r(`Invitation resent to ${n.email}`,{variant:"success"}),z())},rs=async()=>{if(n)try{await Je.mutate({memberId:n.id,updates:{firstName:q,lastName:U,role:fe,department:we}}),r(`Team member ${q} ${U} updated successfully`,{variant:"success"}),k(!1),L(void 0),N()}catch(s){r((s==null?void 0:s.message)||"Failed to update team member",{variant:"error"})}};return Qe?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsxs(t,{textAlign:"center",children:[e.jsx(Le,{size:60}),e.jsx(a,{variant:"h6",sx:{mt:2},children:"Loading Team Data..."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Fetching your team members and organization details"})]})}):Xe?e.jsx(t,{sx:{p:3},children:e.jsxs(f,{severity:"error",children:[e.jsx(H,{children:"Unable to Load Team Data"}),e.jsx(a,{variant:"body2",sx:{mb:2},children:"We encountered an issue loading your team information. This could be due to:"}),e.jsxs(ls,{dense:!0,children:[e.jsxs(Pe,{children:[e.jsx(A,{children:e.jsx(os,{fontSize:"small"})}),e.jsx(Ae,{primary:"Network connectivity issues"})]}),e.jsxs(Pe,{children:[e.jsx(A,{children:e.jsx(J,{fontSize:"small"})}),e.jsx(Ae,{primary:"Authentication token expired"})]})]}),e.jsx(t,{sx:{mt:2},children:e.jsx(u,{variant:"contained",onClick:()=>window.location.reload(),children:"Retry"})})]})}):!c||!D?e.jsx(t,{sx:{p:3},children:e.jsxs(f,{severity:"info",children:[e.jsx(H,{children:"Setting Up Team Management"}),e.jsx(a,{variant:"body2",children:"We're preparing your team management dashboard. This may take a moment for new accounts."})]})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(t,{children:[e.jsx(a,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:["Manage your ",((Ce=D.organization)==null?void 0:Ce.name)||"Organization"," team members and permissions"]})]}),e.jsx(u,{variant:"contained",startIcon:e.jsx(K,{}),onClick:()=>I(!0),disabled:d.stats.availableLicenses<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Invite Member"})]}),e.jsxs(W,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsx(O,{title:"Total Members",value:d.stats.totalMembers,icon:e.jsx(se,{}),color:"primary"})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsx(O,{title:"Active Members",value:d.stats.activeMembers,icon:e.jsx(ae,{}),color:"success"})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsx(O,{title:"Pending Invites",value:d.stats.pendingInvites,icon:e.jsx(te,{}),color:"warning"})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsx(O,{title:"Available Licenses",value:`${d.stats.availableLicenses}/${d.stats.totalLicenses}`,icon:e.jsx(F,{}),color:"primary"})})]}),d.stats.availableLicenses<=0&&e.jsxs(f,{severity:"warning",sx:{mb:4},children:[e.jsx(H,{children:"No Available Licenses"}),e.jsx(a,{variant:"body2",sx:{mb:2},children:"You need to generate more licenses to invite new team members. Go to the Licenses page to create additional licenses."}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(u,{variant:"contained",size:"small",onClick:()=>window.open("/dashboard/licenses","_blank"),children:"Generate Licenses"}),e.jsx(u,{variant:"outlined",size:"small",onClick:()=>window.open("/dashboard/billing","_blank"),children:"Upgrade Plan"})]})]}),e.jsx(cs,{children:e.jsxs(ds,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(a,{variant:"h6",sx:{fontWeight:600},children:["Team Members (",d.members.length,")"]}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(F,{}),onClick:()=>window.open("/dashboard/licenses","_blank"),children:"Manage Licenses"})]}),e.jsx(xs,{children:e.jsxs(ms,{children:[e.jsx(hs,{children:e.jsxs(We,{children:[e.jsx(x,{sx:{fontWeight:600},children:"Member"}),e.jsx(x,{sx:{fontWeight:600},children:"Role"}),e.jsx(x,{sx:{fontWeight:600},children:"Status"}),e.jsx(x,{sx:{fontWeight:600},children:"Department"}),e.jsx(x,{sx:{fontWeight:600},children:"License"}),e.jsx(x,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(x,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(us,{children:d.members.map(s=>{var i,p;return e.jsxs(We,{hover:!0,children:[e.jsx(x,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(js,{src:s.avatar,sx:{width:40,height:40},children:[s.firstName.charAt(0),s.lastName.charAt(0)]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"body1",sx:{fontWeight:500},children:[s.firstName," ",s.lastName]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:s.email})]})]})}),e.jsx(x,{children:e.jsx(V,{label:s.role.toUpperCase(),color:Os(s.role),size:"small",icon:s.role==="admin"?e.jsx(gs,{}):void 0})}),e.jsx(x,{children:e.jsx(V,{icon:Fe(s.status),label:s.status.toUpperCase(),color:$s(s.status),size:"small"})}),e.jsx(x,{children:e.jsx(a,{variant:"body2",children:s.department||"Unassigned"})}),e.jsx(x,{children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:((i=s.licenseAssignment)==null?void 0:i.licenseType)||"None"}),((p=s.licenseAssignment)==null?void 0:p.licenseKey)&&e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{fontFamily:"monospace"},children:[s.licenseAssignment.licenseKey.substring(0,12),"..."]})]})}),e.jsx(x,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:s.lastActive?new Date(s.lastActive).toLocaleDateString():"Never"})}),e.jsx(x,{children:e.jsx(Me,{size:"small",onClick:h=>es(h,s),disabled:s.role==="owner"&&s.id===c.id,children:e.jsx(ps,{})})})]},s.id)})})]})})]})}),e.jsx(vs,{color:"primary",sx:{position:"fixed",bottom:16,right:16,display:{xs:"flex",md:"none"}},onClick:()=>I(!0),disabled:d.stats.availableLicenses<=0,children:e.jsx(bs,{})}),e.jsxs(_,{open:Ve,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Y,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(K,{}),"Create New Team Member"]})}),e.jsx(Z,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Se,{})," Personal Information"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(o,{fullWidth:!0,label:"First Name",value:C,onChange:s=>re(s.target.value),placeholder:"John",required:!0}),e.jsx(o,{fullWidth:!0,label:"Last Name",value:T,onChange:s=>le(s.target.value),placeholder:"Doe",required:!0})]}),e.jsx(o,{fullWidth:!0,label:"Email Address",type:"email",value:B,onChange:s=>ie(s.target.value),placeholder:"john.doe@company.com",required:!0,sx:{mb:2}}),e.jsx(o,{fullWidth:!0,label:"Phone Number (Optional)",value:ue,onChange:s=>je(s.target.value),placeholder:"+1 (555) 123-4567",InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(De,{})})}})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{})," Role & Department"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsxs(ke,{fullWidth:!0,children:[e.jsx(Ee,{children:"Role"}),e.jsxs(Re,{value:oe,label:"Role",onChange:s=>ce(s.target.value),children:[e.jsx(j,{value:"viewer",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Viewer"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Read-only access to projects"})]})}),e.jsx(j,{value:"member",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Member"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Standard project access"})]})}),e.jsx(j,{value:"manager",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Manager"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Team management capabilities"})]})}),e.jsx(j,{value:"admin",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Admin"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Full organizational access"})]})})]})]}),e.jsx(o,{fullWidth:!0,label:"Department",value:de,onChange:s=>xe(s.target.value),placeholder:"Engineering, Design, Marketing..."})]}),e.jsx(o,{fullWidth:!0,label:"Position/Title (Optional)",value:me,onChange:s=>he(s.target.value),placeholder:"Senior Developer, Product Manager..."})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{})," Authentication"]}),e.jsx(fs,{control:e.jsx(ys,{checked:w,onChange:s=>Ze(s.target.checked)}),label:"Auto-generate secure password",sx:{mb:2}}),e.jsx(o,{fullWidth:!0,label:"Temporary Password",type:"password",value:G,onChange:s=>R(s.target.value),disabled:w,required:!0,InputProps:{endAdornment:e.jsx(v,{position:"end",children:e.jsx(Me,{onClick:()=>R(ee()),disabled:!w,children:e.jsx(ws,{})})})},helperText:w?"Password will be auto-generated":"User will need this password to login initially"})]}),e.jsxs(f,{severity:"info",children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"🎫 License Assignment"}),e.jsx(a,{variant:"body2",children:"This team member will be created as a full Firebase authenticated user and automatically assigned an available license. They can login immediately with their email and temporary password."}),e.jsxs(a,{variant:"body2",sx:{mt:1,fontWeight:500},children:["Available licenses: ",d.stats.availableLicenses," of ",d.stats.totalLicenses]})]}),d.stats.availableLicenses<=0&&e.jsx(f,{severity:"warning",children:e.jsx(a,{variant:"body2",children:"No licenses available! Please generate more licenses before creating team members."})})]})}),e.jsxs(Q,{children:[e.jsx(u,{onClick:()=>I(!1),children:"Cancel"}),e.jsx(u,{onClick:ss,variant:"contained",startIcon:e.jsx(K,{}),disabled:d.stats.availableLicenses<=0,children:"Create Team Member"})]})]}),e.jsxs(_,{open:_e,onClose:()=>k(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Y,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(X,{}),"🚀 ENHANCED Edit Team Member: ",n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]})}),e.jsx(Z,{children:n?e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Se,{})," Personal Information"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(o,{fullWidth:!0,label:"First Name",value:q,onChange:s=>ve(s.target.value),required:!0,placeholder:"John"}),e.jsx(o,{fullWidth:!0,label:"Last Name",value:U,onChange:s=>be(s.target.value),required:!0,placeholder:"Doe"})]}),e.jsx(o,{fullWidth:!0,label:"Email Address",type:"email",value:n.email,disabled:!0,sx:{mb:2},helperText:"Email cannot be changed after account creation"}),e.jsx(o,{fullWidth:!0,label:"Phone Number",value:"",disabled:!0,placeholder:"+1 (555) 123-4567",InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(De,{})})},helperText:"Phone number not available in current data model"})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{})," Role & Department"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsxs(ke,{fullWidth:!0,children:[e.jsx(Ee,{children:"Role"}),e.jsxs(Re,{value:fe,label:"Role",onChange:s=>ye(s.target.value),children:[e.jsx(j,{value:"viewer",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Viewer"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Read-only access to projects"})]})}),e.jsx(j,{value:"member",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Member"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Standard project access"})]})}),e.jsx(j,{value:"manager",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Manager"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Team management capabilities"})]})}),e.jsx(j,{value:"admin",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Admin"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Full organizational access"})]})})]})]}),e.jsx(o,{fullWidth:!0,label:"Department",value:we,onChange:s=>Ie(s.target.value),placeholder:"Engineering, Design, Marketing..."})]}),e.jsx(o,{fullWidth:!0,label:"Position/Title",value:"",disabled:!0,placeholder:"Senior Developer, Product Manager...",helperText:"Position not available in current data model"})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{})," License & Access"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(o,{fullWidth:!0,label:"License Type",value:((Te=n.licenseAssignment)==null?void 0:Te.licenseType)||"None",disabled:!0,InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(F,{})})}}),e.jsx(o,{fullWidth:!0,label:"License Status",value:n.licenseAssignment?"Assigned":"Unassigned",disabled:!0,InputProps:{startAdornment:e.jsx(v,{position:"start",children:n.licenseAssignment?e.jsx(ae,{}):e.jsx(te,{})})}})]}),e.jsx(o,{fullWidth:!0,label:"Last Active",value:n.lastActive?new Date(n.lastActive).toLocaleString():"Never",disabled:!0,InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(Is,{})})}})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Cs,{})," Project Assignments"]}),n.assignedProjects&&n.assignedProjects.length>0?e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:n.assignedProjects.map((s,i)=>e.jsx(V,{label:`Project ${s}`,color:"primary",variant:"outlined",size:"small"},i))}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"No projects assigned yet"})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{})," Account Status"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(o,{fullWidth:!0,label:"Account Status",value:n.status,disabled:!0,InputProps:{startAdornment:e.jsx(v,{position:"start",children:Fe(n.status)})}}),e.jsx(o,{fullWidth:!0,label:"Member Since",value:n.joinedAt?new Date(n.joinedAt).toLocaleDateString():"Unknown",disabled:!0,InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(se,{})})}})]})]}),e.jsxs(f,{severity:"info",children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"⚠️ Important Notes"}),e.jsxs(a,{variant:"body2",children:["• Role changes will immediately affect the member's permissions and access levels",e.jsx("br",{}),"• Department information helps with organization and project assignments",e.jsx("br",{}),"• Some fields are managed by the system and cannot be edited here",e.jsx("br",{}),"• License assignments are managed through the Licenses page"]})]})]}):e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200},children:e.jsxs(t,{textAlign:"center",children:[e.jsx(Le,{size:40,sx:{mb:2}}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Loading member data..."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"If this persists, please close and try again."})]})})}),e.jsxs(Q,{children:[e.jsx(u,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(u,{onClick:rs,variant:"contained",startIcon:e.jsx(X,{}),sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Save Changes"})]})]}),e.jsxs(_,{open:Ye,onClose:()=>E(!1),maxWidth:"sm",children:[e.jsx(Y,{children:"Remove Team Member"}),e.jsx(Z,{children:n&&e.jsxs(t,{children:[e.jsxs(a,{variant:"body1",sx:{mb:2},children:["Are you sure you want to remove ",e.jsxs("strong",{children:[n.firstName," ",n.lastName]})," from your team?"]}),e.jsx(f,{severity:"warning",children:e.jsx(a,{variant:"body2",children:"This action cannot be undone. The member will lose access to all projects and resources. Their license will be freed up for reassignment."})})]})}),e.jsxs(Q,{children:[e.jsx(u,{onClick:()=>E(!1),children:"Cancel"}),e.jsx(u,{onClick:ns,variant:"contained",color:"error",startIcon:e.jsx(ne,{}),children:"Remove Member"})]})]}),e.jsxs(Ts,{anchorEl:ge,open:!!ge,onClose:z,children:[e.jsxs(j,{onClick:()=>as(n),children:[e.jsx(A,{children:e.jsx(X,{})}),"Edit Member"]}),(n==null?void 0:n.status)==="pending"&&e.jsxs(j,{onClick:is,children:[e.jsx(A,{children:e.jsx(Ls,{})}),"Resend Invite"]}),e.jsx(Ps,{}),e.jsxs(j,{onClick:ts,sx:{color:"error.main"},children:[e.jsx(A,{children:e.jsx(ne,{sx:{color:"error.main"}})}),"Remove Member"]})]})]})};export{Zs as default};
