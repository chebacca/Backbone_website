import{j as e,a as q,T as B,d as U,bw as ot,G as h,aG as lt,w as Ie,K as ze,b0 as dt,c as ct,b1 as mt,b2 as ut,b3 as Fe,b4 as A,b5 as gt,aC as ht,m as Ue,bx as pt,by as bt,I as je,bd as xt,bz as vt,aT as ft,as as jt,ae as y,s as Se,bg as St,bA as _e,b9 as we,D as ue,k as ge,l as he,A as ne,n as L,aN as Me,b7 as ye,b8 as Ee,v as pe,X as Be,_ as $e,$ as Le,aJ as wt}from"./mui-CWufCee_.js";import{r as p}from"./vendor-OeuszDaU.js";import{u as Mt}from"./notistack.esm-CcFOI6Un.js";import{u as yt,c as C,e as N}from"./index-CM1AXjxX.js";import{M as be}from"./MetricCard-Cep6NJsK.js";import"./stripe-DjIiidKe.js";const Et=c=>{switch(c){case"admin":return"secondary";case"owner":return"secondary";case"manager":return"info";case"member":return"success";case"viewer":return"default";default:return"default"}},It=c=>{switch(c){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},At=c=>{switch(c){case"active":return e.jsx(Ie,{});case"pending":return e.jsx(wt,{});case"suspended":return e.jsx(_e,{});default:return e.jsx(Ie,{})}},Wt=()=>{const{enqueueSnackbar:c}=Mt(),{user:$}=yt(),[Ge,H]=p.useState([]),[E,_]=p.useState({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}),[W,ie]=p.useState(null),[Ct,oe]=p.useState(""),[Nt,Ae]=p.useState(null),[P,xe]=p.useState(null),G=(t,{includeTime:a=!1}={})=>{try{if(!t){const s=new Date;return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="string"||typeof t=="number"){const s=new Date(t);if(!Number.isNaN(s.getTime()))return a?s.toISOString():s.toISOString().slice(0,10)}if(typeof t=="object"){const s=t._seconds,r=t._nanoseconds??0;if(typeof s=="number"){const n=s*1e3+Math.floor(r/1e6),d=new Date(n);return a?d.toISOString():d.toISOString().slice(0,10)}}}catch{}const i=new Date;return a?i.toISOString():i.toISOString().slice(0,10)};p.useEffect(()=>{let t=!0;return(async()=>{var a,i,s,r,n,d,w,f,V,z,F,o,D,u;try{const x=await C.get(N.organizations.context()).catch(()=>null),g=((i=(a=x==null?void 0:x.data)==null?void 0:a.data)==null?void 0:i.organization)||null,K=((r=(s=x==null?void 0:x.data)==null?void 0:s.data)==null?void 0:r.members)||[],Z=((d=(n=x==null?void 0:x.data)==null?void 0:n.data)==null?void 0:d.activeSubscription)||null,I=((f=(w=x==null?void 0:x.data)==null?void 0:w.data)==null?void 0:f.primaryRole)||null;let j=g,S=K,M=Z;if(!j){const l=await C.get(N.organizations.my()),O=((z=(V=l==null?void 0:l.data)==null?void 0:V.data)==null?void 0:z.owned)??[],R=((o=(F=l==null?void 0:l.data)==null?void 0:F.data)==null?void 0:o.memberOf)??[];j=O[0]||R[0]||null,S=(j==null?void 0:j.members)||[]}if(!j){t&&(ie(null),oe(""),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0}));return}const X=S.filter(l=>l.status==="ACTIVE").length;let ee=0;M&&M.status==="ACTIVE"&&M.organizationId===j.id?ee=Number(M.seats||0):ee=(((u=(D=(await C.get(N.subscriptions.mySubscriptions())).data)==null?void 0:D.data)==null?void 0:u.subscriptions)??[]).filter(k=>k.organizationId===j.id&&k.status==="ACTIVE").reduce((k,re)=>(!M&&re.status==="ACTIVE"&&(M=re),k+(re.seats||0)),0);const me=Math.max(0,ee-X),m=(Array.isArray(S)?S:[]).filter(l=>l&&l.status!=="REMOVED").map(l=>{const O=String(l.email||"user@example.com"),R=O.split("@")[0]||"User",k={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},re={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(l.id||`${O}-${Math.random().toString(36).slice(2)}`),firstName:R.charAt(0).toUpperCase()+R.slice(1),lastName:"",email:O,role:k[String(l.role)]||"member",status:re[String(l.status)]||"active",department:l.department||"",licenseType:l.licenseType||"PROFESSIONAL",joinedAt:G(l.joinedAt),lastActive:G(l.updatedAt||l.joinedAt||new Date,{includeTime:!0})}});if(!t)return;ie(j.id),oe(j.name||"Organization"),Ae(I||null),xe(M?{id:String(M.id),tier:String(M.tier).toUpperCase(),seats:Number(M.seats||0),status:String(M.status||""),organizationId:M.organizationId}:null),H(m),_({totalMembers:m.length,activeMembers:X,pendingInvites:0,availableSeats:me,totalSeats:ee})}catch(x){if(!t)return;console.error("[TeamPage] Failed to load team data:",x),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0})}})(),()=>{t=!1}},[$==null?void 0:$.email]);const qe=async()=>{var t,a,i,s,r,n,d,w,f,V,z,F,o,D;try{const u=await C.get(N.organizations.context()).catch(()=>null),x=((a=(t=u==null?void 0:u.data)==null?void 0:t.data)==null?void 0:a.organization)||null,g=((s=(i=u==null?void 0:u.data)==null?void 0:i.data)==null?void 0:s.members)||[],K=((n=(r=u==null?void 0:u.data)==null?void 0:r.data)==null?void 0:n.activeSubscription)||null,Z=((w=(d=u==null?void 0:u.data)==null?void 0:d.data)==null?void 0:w.primaryRole)||null;let I=x,j=g,S=K;if(!I){const m=await C.get(N.organizations.my()),l=((V=(f=m==null?void 0:m.data)==null?void 0:f.data)==null?void 0:V.owned)??[],O=((F=(z=m==null?void 0:m.data)==null?void 0:z.data)==null?void 0:F.memberOf)??[];I=l[0]||O[0]||null,j=(I==null?void 0:I.members)||[]}if(!I){ie(null),oe(""),H([]),_({totalMembers:0,activeMembers:0,pendingInvites:0,availableSeats:0,totalSeats:0});return}const M=j.filter(m=>m.status==="ACTIVE").length;let X=0;S&&S.status==="ACTIVE"&&S.organizationId===I.id?X=Number(S.seats||0):X=(((D=(o=(await C.get(N.subscriptions.mySubscriptions())).data)==null?void 0:o.data)==null?void 0:D.subscriptions)??[]).filter(R=>R.organizationId===I.id&&R.status==="ACTIVE").reduce((R,k)=>(!S&&k.status==="ACTIVE"&&(S=k),R+(k.seats||0)),0);const ee=Math.max(0,X-M),me=(Array.isArray(j)?j:[]).filter(m=>m&&m.status!=="REMOVED").map(m=>{const l=String(m.email||"user@example.com"),O=l.split("@")[0]||"User",R={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},k={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(m.id||`${l}-${Math.random().toString(36).slice(2)}`),firstName:O.charAt(0).toUpperCase()+O.slice(1),lastName:"",email:l,role:R[String(m.role)]||"member",status:k[String(m.status)]||"active",department:m.department||"",licenseType:m.licenseType||"PROFESSIONAL",joinedAt:G(m.joinedAt),lastActive:G(m.updatedAt||m.joinedAt||new Date,{includeTime:!0})}});ie(I.id),oe(I.name||"Organization"),Ae(Z||null),xe(S?{id:String(S.id),tier:String(S.tier).toUpperCase(),seats:Number(S.seats||0),status:String(S.status||""),organizationId:S.organizationId}:null),H(me),_({totalMembers:me.length,activeMembers:M,pendingInvites:0,availableSeats:ee,totalSeats:X})}catch(u){console.error("[TeamPage] Failed to refresh team data:",u)}},[Ce,Ne]=p.useState(null),[v,Pe]=p.useState(null),[He,te]=p.useState(!1),[Je,le]=p.useState(!1),[Te,De]=p.useState(0),[Ke,ae]=p.useState(!1),[se,de]=p.useState(!1),[Oe,Re]=p.useState(!1),[ke,We]=p.useState(!1),[b,Y]=p.useState({newPassword:"",confirmPassword:"",email:"",role:"member",status:"active"}),[Xe,ve]=p.useState(!1),[Q,fe]=p.useState(null),[T,J]=p.useState({email:"",firstName:"",lastName:"",role:"member",department:"",message:""}),Ye=(t,a)=>{Ne(t.currentTarget),Pe(a)},ce=()=>{Ne(null)},Qe=async()=>{var t,a,i,s,r;if(W){if(E.availableSeats<=0){c("No seats available. Please add seats from Billing before inviting new members.",{variant:"warning"});return}try{const n=await C.post(N.teamMembers.create(),{email:T.email,firstName:T.firstName,lastName:T.lastName,department:T.department||void 0,licenseType:"PROFESSIONAL",organizationId:W,sendWelcomeEmail:!0});if((t=n.data)!=null&&t.success){const d=n.data.data.teamMember,w=n.data.data.temporaryPassword;c(`Team member ${d.email} created successfully! Temporary password: ${w}`,{variant:"success"}),te(!1),J({email:"",firstName:"",lastName:"",role:"member",department:"",message:""}),await qe()}else throw new Error("Failed to create team member")}catch(n){console.error("[TeamPage] Team member creation failed:",n);const d=((i=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:i.message)||((r=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:r.error)||(n==null?void 0:n.message)||"Failed to create team member";c(d,{variant:"error"})}}},Ze=p.useMemo(()=>String(($==null?void 0:$.role)||"").toUpperCase()==="SUPERADMIN",[$==null?void 0:$.role]),et=()=>{if(!P){c("No active subscription found for this organization.",{variant:"warning"});return}De(Number(P.seats||0)),le(!0)},tt=async()=>{var t,a;if(P)try{const i=P.tier,s=Number(Te||0);if(i==="BASIC"&&s!==1){c("Basic plan supports exactly 1 seat.",{variant:"warning"});return}if(i==="PRO"&&(s<1||s>50)){c("Pro plan seats must be between 1 and 50.",{variant:"warning"});return}if(i==="ENTERPRISE"&&s<10){c("Enterprise requires minimum 10 seats.",{variant:"warning"});return}await C.put(N.subscriptions.update(P.id),{seats:s}),xe(r=>r&&{...r,seats:s}),_(r=>({...r,totalSeats:s,availableSeats:Math.max(0,s-(r.activeMembers+r.pendingInvites))})),c("Seats updated successfully",{variant:"success"}),le(!1)}catch(i){const s=((a=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:a.message)||(i==null?void 0:i.message)||"Failed to update seats";c(s,{variant:"error"})}},at=()=>{Y({newPassword:"",confirmPassword:"",email:(v==null?void 0:v.email)||"",role:(v==null?void 0:v.role)||"member",status:(v==null?void 0:v.status)||"active"}),Re(!1),We(!1),ae(!0)},st=async()=>{var s,r;if(!v)return;if(v.status!=="active"){c("Password can only be set after the member has joined (status Active).",{variant:"warning"});return}const t=v.email,{newPassword:a,confirmPassword:i}=b;if(!a||a.length<8){c("Password must be at least 8 characters.",{variant:"warning"});return}if(a!==i){c("Passwords do not match.",{variant:"warning"});return}try{if(de(!0),!W){c("Organization context not found.",{variant:"error"});return}await C.put(N.organizations.setMemberPassword(W,v.id),{password:a}),c(`Password set for ${t}`,{variant:"success"}),ae(!1)}catch(n){const d=((r=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:r.message)||(n==null?void 0:n.message)||"Failed to set password";c(d,{variant:"error"})}finally{de(!1)}},rt=async()=>{var t,a,i,s,r,n;if(!(!v||!W))try{de(!0);const d={admin:"ENTERPRISE_ADMIN",owner:"ENTERPRISE_ADMIN",manager:"MANAGER",member:"MEMBER",viewer:"MEMBER"},w={pending:"INVITED",active:"ACTIVE",suspended:"SUSPENDED",removed:"REMOVED"};console.log("Updating member:",{memberId:v.id,email:b.email,role:d[b.role],status:w[b.status]}),await C.patch(N.organizations.updateMember(W,v.id),{email:b.email,role:d[b.role],status:w[b.status]}),b.newPassword&&b.confirmPassword&&b.newPassword===b.confirmPassword&&await C.put(N.organizations.setMemberPassword(W,v.id),{password:b.newPassword}),c("Member updated successfully",{variant:"success"}),ae(!1);const f=await C.get(N.organizations.my()),V=((a=(t=f==null?void 0:f.data)==null?void 0:t.data)==null?void 0:a.owned)??[],z=((s=(i=f==null?void 0:f.data)==null?void 0:i.data)==null?void 0:s.memberOf)??[],F=[...V,...z].find(o=>o.id===W)||V[0]||z[0];if(F){const o=F.members||[],D=(Array.isArray(o)?o:[]).filter(g=>g&&g.status!=="REMOVED").map(g=>{const K=String(g.email||"user@example.com"),Z=K.split("@")[0]||"User",I={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},j={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(g.id||`${K}-${Math.random().toString(36).slice(2)}`),firstName:Z.charAt(0).toUpperCase()+Z.slice(1),lastName:"",email:K,role:I[String(g.role)]||"member",status:j[String(g.status)]||"active",joinedAt:G(g.joinedAt),lastActive:G(g.updatedAt||g.joinedAt||new Date,{includeTime:!0})}}),u=o.filter(g=>g.status==="INVITED").length,x=o.filter(g=>g.status==="ACTIVE").length;H(D),_(g=>({...g,totalMembers:D.length,pendingInvites:u,activeMembers:x,availableSeats:Math.max(0,g.totalSeats-(x+u))}))}}catch(d){console.error("[TeamPage] Update member failed:",d);const w=((n=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:n.message)||(d==null?void 0:d.message)||"Failed to update member";c(w,{variant:"error"})}finally{de(!1)}},nt=()=>{v&&(fe(v),ve(!0),ce())},it=async()=>{var t,a,i,s;if(!(!Q||!W))try{await C.post(N.organizations.removeMember(W,Q.id)),c(`${Q.email} removed from team`,{variant:"warning"});const r=await C.get(N.organizations.my()),n=((a=(t=r==null?void 0:r.data)==null?void 0:t.data)==null?void 0:a.owned)??[],d=((s=(i=r==null?void 0:r.data)==null?void 0:i.data)==null?void 0:s.memberOf)??[],w=[...n,...d].find(f=>f.id===W)||n[0]||d[0];if(w){const f=w.members||[],V=(Array.isArray(f)?f:[]).filter(o=>o&&o.status!=="REMOVED").map(o=>{const D=String(o.email||"user@example.com"),u=D.split("@")[0]||"User",x={OWNER:"owner",ENTERPRISE_ADMIN:"admin",MANAGER:"manager",MEMBER:"member"},g={INVITED:"pending",ACTIVE:"active",REMOVED:"removed"};return{id:String(o.id||`${D}-${Math.random().toString(36).slice(2)}`),firstName:u.charAt(0).toUpperCase()+u.slice(1),lastName:"",email:D,role:x[String(o.role)]||"member",status:g[String(o.status)]||"active",joinedAt:G(o.joinedAt),lastActive:G(o.updatedAt||o.joinedAt||new Date,{includeTime:!0})}}),z=f.filter(o=>o.status==="INVITED").length,F=f.filter(o=>o.status==="ACTIVE").length;H(V),_(o=>({...o,totalMembers:V.length,pendingInvites:z,activeMembers:F,availableSeats:Math.max(0,o.totalSeats-(F+z))}))}}catch(r){console.error("[TeamPage] Remove member failed:",r),c((r==null?void 0:r.message)||"Failed to remove member",{variant:"error"})}finally{ve(!1),fe(null)}},Ve=()=>{ve(!1),fe(null)};return p.useMemo(()=>E.totalSeats<=0?0:(E.totalSeats-E.availableSeats)/E.totalSeats*100,[E.totalSeats,E.availableSeats]),e.jsxs(q,{children:[e.jsx(q,{children:e.jsxs(q,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(q,{children:[e.jsx(B,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsx(B,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Create and manage your team members with automatic Firebase Authentication setup. Each member gets their own account and temporary password."})]}),e.jsx(U,{variant:"contained",startIcon:e.jsx(ot,{}),onClick:()=>te(!0),disabled:E.availableSeats<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Add Team Member"}),Ze&&e.jsxs(U,{variant:"outlined",onClick:et,sx:{ml:2},children:["Manage Seats",P?` (${P.seats})`:""]})]})}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Team Members",value:E.totalMembers,icon:e.jsx(lt,{}),color:"primary",trend:{value:12,direction:"up"}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Active Members",value:E.activeMembers,icon:e.jsx(Ie,{}),color:"success",trend:{value:8,direction:"up"}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Total Seats",value:E.totalSeats,icon:e.jsx(ze,{}),color:"primary"})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(be,{title:"Available Seats",value:E.availableSeats,icon:e.jsx(ze,{}),color:"secondary"})})]}),e.jsx(q,{children:e.jsx(dt,{component:ct,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs(mt,{children:[e.jsx(ut,{children:e.jsxs(Fe,{children:[e.jsx(A,{sx:{fontWeight:600},children:"Member"}),e.jsx(A,{sx:{fontWeight:600},children:"Role"}),e.jsx(A,{sx:{fontWeight:600},children:"Department"}),e.jsx(A,{sx:{fontWeight:600},children:"Status"}),e.jsx(A,{sx:{fontWeight:600},children:"License"}),e.jsx(A,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(A,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(gt,{children:Ge.map(t=>e.jsxs(Fe,{hover:!0,children:[e.jsx(A,{children:e.jsxs(q,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(ht,{sx:{width:40,height:40},children:[t.firstName[0],t.lastName[0]]}),e.jsxs(q,{children:[e.jsxs(B,{variant:"body2",sx:{fontWeight:500},children:[t.firstName," ",t.lastName]}),e.jsx(B,{variant:"caption",color:"text.secondary",children:t.email})]})]})}),e.jsx(A,{children:e.jsx(Ue,{icon:t.role==="admin"?e.jsx(pt,{}):e.jsx(bt,{}),label:t.role.toUpperCase(),color:Et(t.role),size:"small",variant:"outlined"})}),e.jsx(A,{children:e.jsx(B,{variant:"body2",children:t.department||"Not assigned"})}),e.jsx(A,{children:e.jsx(Ue,{icon:At(t.status),label:t.status.toUpperCase(),color:It(t.status),size:"small"})}),e.jsx(A,{children:e.jsx(B,{variant:"body2",children:t.licenseType||"PROFESSIONAL"})}),e.jsx(A,{children:e.jsx(B,{variant:"body2",children:t.lastActive?new Date(t.lastActive).toLocaleDateString():"Never"})}),e.jsx(A,{children:e.jsx(je,{onClick:a=>Ye(a,t),size:"small",children:e.jsx(xt,{})})})]},t.id))})]})})}),e.jsx(vt,{color:"primary",sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000"},onClick:()=>te(!0),children:e.jsx(ft,{})}),e.jsxs(jt,{anchorEl:Ce,open:!!Ce,onClose:ce,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsxs(y,{onClick:()=>{ce(),at()},children:[e.jsx(Se,{children:e.jsx(St,{fontSize:"small"})}),"Edit Member"]}),e.jsxs(y,{onClick:ce,children:[e.jsx(Se,{children:e.jsx(_e,{fontSize:"small"})}),"Suspend Member"]}),e.jsxs(y,{onClick:nt,sx:{color:"error.main"},children:[e.jsx(Se,{children:e.jsx(we,{fontSize:"small",sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(ue,{open:He,onClose:()=>te(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Create New Team Member"}),e.jsxs(he,{children:[e.jsx(B,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Create a new team member account with automatic Firebase Authentication setup. The member will receive a welcome email with their temporary password."}),e.jsxs(h,{container:!0,spacing:3,sx:{mt:1},children:[E.availableSeats<=0&&e.jsx(h,{item:!0,xs:12,children:e.jsx(ne,{severity:"warning",children:"No available seats. Add seats on the Billing page to invite more team members."})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"First Name",value:T.firstName,onChange:t=>J(a=>({...a,firstName:t.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Last Name",value:T.lastName,onChange:t=>J(a=>({...a,lastName:t.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Email Address",type:"email",value:T.email,onChange:t=>J(a=>({...a,email:t.target.value})),required:!0})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Role"}),e.jsxs(Ee,{value:T.role,label:"Role",onChange:t=>J(a=>({...a,role:t.target.value})),inputProps:{"aria-label":"Select team member role",title:"Select the role for this team member"},children:[e.jsx(y,{value:"viewer",children:"Viewer"}),e.jsx(y,{value:"member",children:"Member"}),e.jsx(y,{value:"admin",children:"Admin"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Department",value:T.department,onChange:t=>J(a=>({...a,department:t.target.value}))})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Welcome Message (Optional)",multiline:!0,rows:3,value:T.message,onChange:t=>J(a=>({...a,message:t.target.value}))})})]})]}),e.jsxs(pe,{children:[e.jsx(U,{onClick:()=>te(!1),children:"Cancel"}),e.jsx(U,{onClick:Qe,variant:"contained",disabled:!T.email||!T.firstName||!T.lastName||E.availableSeats<=0,children:"Create Team Member"})]})]}),e.jsxs(ue,{open:Je,onClose:()=>le(!1),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Manage Seats"}),e.jsx(he,{children:e.jsxs(h,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(ne,{severity:"info",children:P?`${P.tier} subscription`:"No active subscription"})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,type:"number",label:"Total Seats",value:Te,onChange:t=>De(parseInt(t.target.value||"0",10)),inputProps:{min:1,max:(P==null?void 0:P.tier)==="PRO"?50:1e3}})})]})}),e.jsxs(pe,{children:[e.jsx(U,{onClick:()=>le(!1),children:"Cancel"}),e.jsx(U,{onClick:tt,variant:"contained",disabled:!P,children:"Save"})]})]}),e.jsxs(ue,{open:Ke,onClose:()=>{ae(!1),Pe(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:"Edit Member"}),e.jsx(he,{children:e.jsxs(h,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Email",value:b.email,onChange:t=>Y(a=>({...a,email:t.target.value}))})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Role"}),e.jsxs(Ee,{value:b.role,label:"Role",onChange:t=>Y(a=>({...a,role:t.target.value})),children:[e.jsx(y,{value:"viewer",children:"Viewer"}),e.jsx(y,{value:"member",children:"Member"}),e.jsx(y,{value:"manager",children:"Manager"}),e.jsx(y,{value:"admin",children:"Admin"}),e.jsx(y,{value:"owner",children:"Owner"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Me,{fullWidth:!0,children:[e.jsx(ye,{children:"Status"}),e.jsxs(Ee,{value:b.status,label:"Status",onChange:t=>Y(a=>({...a,status:t.target.value})),children:[e.jsx(y,{value:"pending",children:"Pending"}),e.jsx(y,{value:"active",children:"Active"}),e.jsx(y,{value:"suspended",children:"Suspended"}),e.jsx(y,{value:"removed",children:"Removed"})]})]})}),e.jsx(h,{item:!0,xs:12,children:b.status!=="active"?e.jsx(ne,{severity:"warning",children:"This member has not joined yet (Pending/Suspended/Removed). You can only set a password for Active members."}):e.jsx(ne,{severity:"info",children:"Set a temporary password for this user to log into Backbone. They can change it later."})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"New Password",type:Oe?"text":"password",value:b.newPassword,onChange:t=>Y(a=>({...a,newPassword:t.target.value})),inputProps:{minLength:8},helperText:"Minimum 8 characters",InputProps:{endAdornment:e.jsx(Be,{position:"end",children:e.jsx(je,{onClick:()=>Re(t=>!t),edge:"end","aria-label":"toggle password visibility",children:Oe?e.jsx($e,{}):e.jsx(Le,{})})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(L,{fullWidth:!0,label:"Confirm Password",type:ke?"text":"password",value:b.confirmPassword,onChange:t=>Y(a=>({...a,confirmPassword:t.target.value})),InputProps:{endAdornment:e.jsx(Be,{position:"end",children:e.jsx(je,{onClick:()=>We(t=>!t),edge:"end","aria-label":"toggle password visibility",children:ke?e.jsx($e,{}):e.jsx(Le,{})})})}})})]})}),e.jsxs(pe,{children:[e.jsx(U,{onClick:()=>ae(!1),disabled:se,children:"Cancel"}),e.jsx(U,{onClick:rt,variant:"outlined",disabled:se,children:se?"Saving…":"Save Changes"}),e.jsx(U,{onClick:st,variant:"contained",disabled:se||!b.newPassword||!b.confirmPassword||b.status!=="active",children:se?"Saving…":"Save Password Only"})]})]}),e.jsxs(ue,{open:Xe,onClose:Ve,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ge,{children:e.jsxs(q,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{color:"error"}),"Remove Team Member"]})}),e.jsxs(he,{children:[e.jsxs(B,{variant:"body1",sx:{mb:2},children:["Are you sure you want to remove ",e.jsx("strong",{children:Q==null?void 0:Q.email})," from your team?"]}),e.jsx(ne,{severity:"warning",sx:{mt:2},children:e.jsx(B,{variant:"body2",children:"This action cannot be undone. The member will lose access to all organization resources and data."})})]}),e.jsxs(pe,{children:[e.jsx(U,{onClick:Ve,color:"inherit",children:"Cancel"}),e.jsx(U,{onClick:it,color:"error",variant:"contained",startIcon:e.jsx(we,{}),children:"Remove Member"})]})]})]})};export{Wt as default};
