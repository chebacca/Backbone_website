const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnifiedDataService-DIHO4s3D.js","assets/index-CwrsPnRz.js","assets/mui-DuSXeEGQ.js","assets/vendor-CjD1bmmO.js","assets/stripe-C4BKHrkR.js","assets/index-CBai7h7s.css","assets/index.esm-C6E5jVjx.js","assets/index.esm--uL3Qa3r.js","assets/FirestoreCollectionManager-BCRhXiWU.js","assets/firebase-g7qJxKvU.js","assets/index.esm-K73FumZQ.js"])))=>i.map(i=>d[i]);
import{_ as os}from"./index-CwrsPnRz.js";import{j as e,B as t,C as cs,T as a,d as v,ai as we,w as Qs,x as ds,y as F,aj as Xs,z as xs,H as Ie,a as p,aP as Ce,G as X,W as ve,p as je,am as Z,u as I,t as Zs,v as ea,aB as sa,aC as aa,aD as ta,aE as hs,aF as f,aG as na,ag as ra,r as ce,aQ as ia,g as ms,aH as la,aR as oa,aS as ca,aI as de,aJ as xe,aK as he,aT as us,e as u,I as S,aU as gs,aV as js,as as _,at as G,au as B,a5 as m,F as Pe,s as Le,R as da,aL as me,aW as Te,aX as xa,aY as vs,aZ as bs,L as Ae,a_ as Ne,aO as We,a4 as ha,E as ma,D as ua}from"./mui-DuSXeEGQ.js";import{r as d,b as ps}from"./vendor-CjD1bmmO.js";import{u as ga}from"./notistack.esm-Ca-E78ev.js";import{b as ja,c as va,a as pa,u as fa,d as ba,f as ya,g as wa,h as Ia,i as Ca,j as Pa,k as La}from"./useStreamlinedData-Chl_Qy6d.js";import{M as ue}from"./MetricCard-vu4kpPQz.js";import"./stripe-C4BKHrkR.js";import"./UnifiedDataService-DIHO4s3D.js";import"./index.esm-C6E5jVjx.js";import"./index.esm--uL3Qa3r.js";import"./FirestoreCollectionManager-BCRhXiWU.js";import"./firebase-g7qJxKvU.js";import"./index.esm-K73FumZQ.js";const W=i=>i.firstName&&i.lastName?`${i.firstName} ${i.lastName}`:i.email,Ta=i=>{var C,P,D;const l=((C=i.firstName)==null?void 0:C.charAt(0))||((P=i.email)==null?void 0:P.charAt(0))||"U",b=((D=i.lastName)==null?void 0:D.charAt(0))||"";return l+b},Aa=i=>{if(!i)return"default";switch(i.toLowerCase()){case"owner":return"error";case"admin":return"primary";case"manager":return"secondary";case"member":return"info";case"viewer":return"default";default:return"default"}},Na=i=>{if(!i)return"default";switch(i.toLowerCase()){case"active":return"success";case"pending":return"warning";case"suspended":return"error";case"removed":return"default";default:return"default"}},fs=i=>{if(!i)return e.jsx(ve,{});switch(i.toLowerCase()){case"active":return e.jsx(je,{});case"pending":return e.jsx(Z,{});case"suspended":return e.jsx(bs,{});case"removed":return e.jsx(We,{});default:return e.jsx(ve,{})}},ge=()=>{const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let b="";for(let C=0;C<12;C++)b+=l.charAt(Math.floor(Math.random()*l.length));return b},Se=(i,l)=>{var P,D;if(!i||!l)return!1;const b=(P=i.role)==null?void 0:P.toUpperCase(),C=(D=l.role)==null?void 0:D.toUpperCase();return b==="ENTERPRISE_USER"||b==="OWNER"||b==="ADMIN"&&C!=="ENTERPRISE_USER"&&C!=="OWNER"?!0:i.id===l.id},Sa=(i,l)=>!i.assignedProjects||!l?[]:l.filter(b=>i.assignedProjects.includes(b.id)),Ba=()=>{var ns,rs,is,ls;const{enqueueSnackbar:i}=ga(),{data:l,loading:b,error:C}=ja(),{data:P,loading:D,error:ys}=va(),{data:$,loading:ws,error:Is,refetch:L}=pa(),{data:o,loading:Cs,error:Ps,refetch:T}=fa(),{data:Ls,loading:Ts,error:As}=ba(),Ns=ya(),Ss=wa(),Ws=Ia(),pe=Ca(),De=Pa(),fe=La(),[Ds,q]=d.useState(!1),[Es,ee]=d.useState(!1),[ks,se]=d.useState(!1),[Ms,ae]=d.useState(!1),[be,Ee]=d.useState(""),[K,ke]=d.useState(""),[V,Me]=d.useState(""),[Re,Fe]=d.useState("member"),[$e,ze]=d.useState(""),[Oe,Ue]=d.useState(""),[_e,Ge]=d.useState(""),[ye,te]=d.useState(""),[z,Rs]=d.useState(!0),[H,Be]=d.useState(!1),[n,Y]=d.useState(void 0),[qe,Ke]=d.useState(null),[E,Ve]=d.useState(""),[ne,He]=d.useState(""),[J,Ye]=d.useState(""),[Q,Je]=d.useState(""),[Qe,Xe]=d.useState("member"),[Ze,es]=d.useState(""),[A,ss]=d.useState(""),[h,as]=d.useState("pending"),[Fs,re]=d.useState(!1),[ie,le]=d.useState(""),[O,oe]=d.useState(""),[k,ts]=d.useState(!0),$s=b||D||ws||Cs||Ts,zs=C||ys||Is||Ps||As;ps.useEffect(()=>{z&&te(ge())},[z]),ps.useEffect(()=>{const s=async()=>{await Promise.all([T(),L()])},r=async()=>{await Promise.all([L(),T()])};return window.addEventListener("licenses:refresh",s),window.addEventListener("team:refresh",r),()=>{window.removeEventListener("licenses:refresh",s),window.removeEventListener("team:refresh",r)}},[T,L]);const N=d.useMemo(()=>{if(!l||!P||!$||!o)return{members:[],stats:{totalMembers:0,activeMembers:0,pendingInvites:0,availableLicenses:0,totalLicenses:0,assignedLicenses:0}};const s=$.filter(j=>{var R;return((R=j.status)==null?void 0:R.toLowerCase())==="active"}).length,r=$.filter(j=>{var R;return((R=j.status)==null?void 0:R.toLowerCase())==="pending"}).length,c=o.length,g=o.filter(j=>j.assignedTo).length,w=o.filter(j=>j.status==="PENDING"&&!j.assignedTo).length,x={totalMembers:$.length,activeMembers:s,pendingInvites:r,availableLicenses:w,totalLicenses:c,assignedLicenses:g};return{members:$,stats:x}},[l,P,$,o]),y=s=>{if(!s.licenseAssignment)return null;const r=o==null?void 0:o.find(c=>{var g;return c.id===((g=s.licenseAssignment)==null?void 0:g.licenseId)});return{licenseId:s.licenseAssignment.licenseId,licenseType:s.licenseAssignment.licenseType,licenseKey:s.licenseAssignment.licenseKey,status:(r==null?void 0:r.status)||"UNKNOWN"}},M=()=>o?o.filter(s=>s.status==="PENDING"&&!s.assignedTo):[],Os=s=>{if(!o)return[];const r=s?y(s):null;return o.filter(c=>!!(c.status==="PENDING"&&!c.assignedTo||r&&c.id===r.licenseId))},Us=(s,r)=>{Y(r),Ke(s.currentTarget)},U=()=>{Ke(null)},_s=async()=>{var s,r,c;if(!be.trim()){i("Please enter an email address",{variant:"error"});return}if(!K.trim()){i("Please enter a first name",{variant:"error"});return}if(!V.trim()){i("Please enter a last name",{variant:"error"});return}if(!ye.trim()){i("Please provide a temporary password",{variant:"error"});return}if(M().length<=0){i("No available licenses. Please generate more licenses first.",{variant:"error"});return}if(!E){i("Please select a license to assign to this team member",{variant:"error"});return}try{const g={firstName:K.trim(),lastName:V.trim(),email:be.trim().toLowerCase(),role:Re,status:H?"active":"pending",organization:{id:((s=l==null?void 0:l.organization)==null?void 0:s.id)||"",name:((r=l==null?void 0:l.organization)==null?void 0:r.name)||"",tier:((c=l==null?void 0:l.organization)==null?void 0:c.tier)||"BASIC"},department:$e.trim()||"",assignedProjects:[],avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(K+" "+V)}&background=667eea&color=fff`},w=await Ns.mutate({...g,temporaryPassword:ye,position:Oe.trim()||"",phone:_e.trim()||""});console.log("âœ… [TeamPage] Team member created with ID:",w);try{const{unifiedDataService:x}=await os(async()=>{const{unifiedDataService:R}=await import("./UnifiedDataService-DIHO4s3D.js");return{unifiedDataService:R}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),j=await x.ensureTeamMemberProjectReadiness(w);j.success?(console.log("âœ… [TeamPage] Team member project readiness verified:",j),j.collectionsCreated.length>0&&console.log("ðŸ“ [TeamPage] Created missing collections:",j.collectionsCreated)):console.warn("âš ï¸ [TeamPage] Team member project readiness issues:",j.errors)}catch(x){console.warn("âš ï¸ [TeamPage] Failed to verify project readiness:",x)}if(E&&w)try{await pe.mutate({licenseId:E,userId:w});const x=o==null?void 0:o.find(j=>j.id===E);console.log(`âœ… [TeamPage] Assigned ${x==null?void 0:x.tier} license to new member:`,w)}catch(x){console.warn("Failed to assign selected license:",x)}i(`Team member ${K} ${V} created successfully with license assigned. Status: ${H?"Active - ready to login":"Pending - requires activation"}.`,{variant:"success"}),console.log("ðŸ”„ Refreshing team data after member creation..."),await Promise.all([L(),T()]);try{const{unifiedDataService:x}=await os(async()=>{const{unifiedDataService:j}=await import("./UnifiedDataService-DIHO4s3D.js");return{unifiedDataService:j}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));await x.forceRefreshLicenses(),x.clearCacheByPattern("org-team-members-"),x.clearCacheByPattern("org-users-"),console.log("ðŸ”„ Force refreshed team data via UnifiedDataService")}catch(x){console.warn("âš ï¸ Failed to force refresh via UnifiedDataService:",x)}setTimeout(async()=>{console.log("ðŸ”„ Secondary refresh for eventual consistency..."),await Promise.all([L(),T()])},1e3),setTimeout(async()=>{console.log("ðŸ”„ Final refresh for safety..."),await Promise.all([L(),T()])},3e3),window.dispatchEvent(new CustomEvent("team:refresh",{detail:{action:"member_created",memberId:w,licenseId:E}})),Ee(""),ke(""),Me(""),Fe("member"),ze(""),Ue(""),Ge(""),te(ge()),Ve(""),Be(!1),q(!1)}catch(g){console.error("âŒ [TeamPage] Failed to create team member:",g),i((g==null?void 0:g.message)||"Failed to create team member",{variant:"error"})}},Gs=s=>{const r=s||n;if(!r){i("Unable to load member data. Please try again.",{variant:"error"});return}U(),Y(r),Ye(r.firstName||""),Je(r.lastName||""),Xe(r.role||"member"),es(r.department||""),as(r.status||"pending");const c=y(r);ss((c==null?void 0:c.licenseId)||""),re(!1),le(""),oe(""),ts(!0),ee(!0)},Bs=async()=>{if(!n){i("No team member selected",{variant:"error"});return}if(!Se(l,n)){i("You do not have permission to change this password",{variant:"error"});return}const s=k?ge():ie;if(!k){if(!s.trim()){i("Please enter a new password",{variant:"error"});return}if(s!==O){i("Passwords do not match",{variant:"error"});return}if(s.length<8){i("Password must be at least 8 characters long",{variant:"error"});return}}try{await fe.mutate({memberId:n.id,newPassword:s}),i(`Password ${k?"generated and ":""}updated successfully for ${W(n)}`,{variant:"success"}),re(!1),le(""),oe("")}catch(r){console.error("âŒ [TeamPage] Failed to update password:",r),i((r==null?void 0:r.message)||"Failed to update password",{variant:"error"})}},qs=()=>{n&&(U(),se(!0))},Ks=async()=>{if(n)try{const s=y(n);await Ws.mutate({memberId:n.id}),s?i(`${W(n)} has been removed from the team. Their license has been released back to the available pool.`,{variant:"success"}):i(`${W(n)} has been removed from the team`,{variant:"success"}),se(!1),Y(void 0),await Promise.all([L(),T()])}catch(s){console.error("âŒ [TeamPage] Failed to remove team member:",s),i((s==null?void 0:s.message)||"Failed to remove team member",{variant:"error"})}},Vs=()=>{n&&(i(`Invitation resent to ${n.email}`,{variant:"success"}),U())},Hs=async()=>{if(!n||!ne){i("Please select a valid license to assign",{variant:"error"});return}try{await pe.mutate({licenseId:ne,userId:n.id}),i(`License assigned to ${W(n)}`,{variant:"success"}),He(""),ae(!1),U(),await Promise.all([T(),L()])}catch(s){console.error("âŒ [TeamPage] Failed to assign license:",s),i((s==null?void 0:s.message)||"Failed to assign license",{variant:"error"})}},Ys=async()=>{if(n)try{const s=y(n);if(!s){i("This team member has no license to release",{variant:"warning"});return}await De.mutate({licenseId:s.licenseId}),i(`${s.licenseType} license has been released from ${W(n)} and is now available for reassignment.`,{variant:"success"}),U(),await Promise.all([T(),L()])}catch(s){console.error("âŒ [TeamPage] Failed to release license:",s),i((s==null?void 0:s.message)||"Failed to release license",{variant:"error"})}},Js=async()=>{if(n)try{await Ss.mutate({memberId:n.id,updates:{firstName:J,lastName:Q,role:Qe,department:Ze||"",status:h}});const s=y(n),r=(s==null?void 0:s.licenseId)||"";if(A!==r){if(r)try{await De.mutate({licenseId:r}),console.log("âœ… [TeamPage] Released current license:",r)}catch(c){console.warn("âš ï¸ [TeamPage] Failed to release current license:",c)}if(A)try{await pe.mutate({licenseId:A,userId:n.id});const c=o==null?void 0:o.find(g=>g.id===A);console.log("âœ… [TeamPage] Assigned new license:",A,c==null?void 0:c.tier),i(`Team member ${J} ${Q} updated successfully with ${(c==null?void 0:c.tier)||"new"} license assigned`,{variant:"success"})}catch(c){console.error("âŒ [TeamPage] Failed to assign new license:",c),i("Member updated but license assignment failed",{variant:"warning"})}else i(`Team member ${J} ${Q} updated successfully. License removed.`,{variant:"success"})}else i(`Team member ${J} ${Q} updated successfully`,{variant:"success"});ee(!1),Y(void 0),await Promise.all([L(),T()])}catch(s){i((s==null?void 0:s.message)||"Failed to update team member",{variant:"error"})}};return $s?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsxs(t,{textAlign:"center",children:[e.jsx(cs,{size:60}),e.jsx(a,{variant:"h6",sx:{mt:2},children:"Loading Team Data..."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Fetching your team members and organization details"})]})}):zs?e.jsx(t,{sx:{p:3},children:e.jsxs(v,{severity:"error",children:[e.jsx(we,{children:"Unable to Load Team Data"}),e.jsx(a,{variant:"body2",sx:{mb:2},children:"We encountered an issue loading your team information. This could be due to:"}),e.jsxs(Qs,{dense:!0,children:[e.jsxs(ds,{children:[e.jsx(F,{children:e.jsx(Xs,{fontSize:"small"})}),e.jsx(xs,{primary:"Network connectivity issues"})]}),e.jsxs(ds,{children:[e.jsx(F,{children:e.jsx(Ie,{fontSize:"small"})}),e.jsx(xs,{primary:"Authentication token expired"})]})]}),e.jsx(t,{sx:{mt:2},children:e.jsx(p,{variant:"contained",onClick:()=>window.location.reload(),children:"Retry"})})]})}):!l||!P?e.jsx(t,{sx:{p:3},children:e.jsxs(v,{severity:"info",children:[e.jsx(we,{children:"Setting Up Team Management"}),e.jsx(a,{variant:"body2",children:"We're preparing your team management dashboard. This may take a moment for new accounts."})]})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(t,{children:[e.jsx(a,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Team Management"}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:["Manage your ",((ns=P.organization)==null?void 0:ns.name)||"Organization"," team members and permissions"]})]}),e.jsx(p,{variant:"contained",startIcon:e.jsx(Ce,{}),onClick:()=>q(!0),disabled:M().length<=0,sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Invite Member"})]}),e.jsxs(X,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(X,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Total Members",value:N.stats.totalMembers,icon:e.jsx(ve,{}),color:"primary"})}),e.jsx(X,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Active Members",value:N.stats.activeMembers,icon:e.jsx(je,{}),color:"success"})}),e.jsx(X,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Pending Invites",value:N.stats.pendingInvites,icon:e.jsx(Z,{}),color:"warning"})}),e.jsx(X,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue,{title:"Available Licenses",value:`${N.stats.availableLicenses}/${N.stats.totalLicenses}`,icon:e.jsx(I,{}),color:"primary"})})]}),N.stats.availableLicenses<=0&&e.jsxs(v,{severity:"warning",sx:{mb:4},children:[e.jsx(we,{children:"No Available Licenses"}),e.jsx(a,{variant:"body2",sx:{mb:2},children:"You need to generate more licenses to invite new team members. Go to the Licenses page to create additional licenses."}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"contained",size:"small",onClick:()=>window.open("/dashboard/licenses","_blank"),children:"Generate Licenses"}),e.jsx(p,{variant:"outlined",size:"small",onClick:()=>window.open("/dashboard/billing","_blank"),children:"Upgrade Plan"})]})]}),e.jsx(Zs,{children:e.jsxs(ea,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(a,{variant:"h6",sx:{fontWeight:600},children:["Team Members (",N.members.length,")"]}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(I,{}),onClick:()=>window.open("/dashboard/licenses","_blank"),children:"Manage Licenses"})]}),e.jsx(sa,{children:e.jsxs(aa,{children:[e.jsx(ta,{children:e.jsxs(hs,{children:[e.jsx(f,{sx:{fontWeight:600},children:"Member"}),e.jsx(f,{sx:{fontWeight:600},children:"Role"}),e.jsx(f,{sx:{fontWeight:600},children:"Status"}),e.jsx(f,{sx:{fontWeight:600},children:"Department"}),e.jsx(f,{sx:{fontWeight:600},children:"License"}),e.jsx(f,{sx:{fontWeight:600},children:"Last Active"}),e.jsx(f,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(na,{children:N.members.filter(s=>s&&s.id&&s.email).map(s=>{var r,c,g,w;return e.jsxs(hs,{hover:!0,children:[e.jsx(f,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(ra,{src:s.avatar,sx:{width:40,height:40},children:Ta(s)}),e.jsxs(t,{children:[e.jsx(a,{variant:"body1",sx:{fontWeight:500},children:W(s)}),e.jsx(a,{variant:"body2",color:"text.secondary",children:s.email})]})]})}),e.jsx(f,{children:e.jsx(ce,{label:((r=s.role)==null?void 0:r.toUpperCase())||"UNKNOWN",color:Aa(s.role),size:"small",icon:((c=s.role)==null?void 0:c.toLowerCase())==="admin"?e.jsx(ia,{}):void 0})}),e.jsx(f,{children:e.jsx(ce,{icon:fs(s.status),label:((g=s.status)==null?void 0:g.toUpperCase())||"UNKNOWN",color:Na(s.status),size:"small"})}),e.jsx(f,{children:e.jsx(a,{variant:"body2",children:s.department||"Unassigned"})}),e.jsx(f,{children:e.jsx(t,{children:(()=>{const x=y(s);return x?e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:x.licenseType}),e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{fontFamily:"monospace"},children:[x.licenseKey.substring(0,12),"..."]}),e.jsx(ce,{label:x.status,size:"small",color:x.status==="ACTIVE"?"success":"warning",sx:{mt:.5}})]}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"None"})})()})}),e.jsx(f,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:s.lastActive?new Date(s.lastActive).toLocaleDateString():"Never"})}),e.jsx(f,{children:e.jsx(ms,{size:"small",onClick:x=>Us(x,s),disabled:((w=s.role)==null?void 0:w.toLowerCase())==="owner"&&s.id===(l==null?void 0:l.id),children:e.jsx(la,{})})})]},s.id)})})]})})]})}),e.jsx(oa,{color:"primary",sx:{position:"fixed",bottom:16,right:16,display:{xs:"flex",md:"none"}},onClick:()=>q(!0),disabled:M().length<=0,children:e.jsx(ca,{})}),e.jsxs(de,{open:Ds,onClose:()=>q(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ce,{}),"Create New Team Member"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(us,{})," Personal Information"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(u,{fullWidth:!0,label:"First Name",value:K,onChange:s=>ke(s.target.value),placeholder:"John",required:!0}),e.jsx(u,{fullWidth:!0,label:"Last Name",value:V,onChange:s=>Me(s.target.value),placeholder:"Doe",required:!0})]}),e.jsx(u,{fullWidth:!0,label:"Email Address",type:"email",value:be,onChange:s=>Ee(s.target.value),placeholder:"john.doe@company.com",required:!0,sx:{mb:2}}),e.jsx(u,{fullWidth:!0,label:"Phone Number (Optional)",value:_e,onChange:s=>Ge(s.target.value),placeholder:"+1 (555) 123-4567",InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(gs,{})})}})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(js,{})," Role & Department"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsxs(_,{fullWidth:!0,children:[e.jsx(G,{children:"Role"}),e.jsxs(B,{value:Re,label:"Role",onChange:s=>Fe(s.target.value),children:[e.jsx(m,{value:"viewer",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Viewer"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Read-only access to projects"})]})}),e.jsx(m,{value:"member",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Member"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Standard project access"})]})}),e.jsx(m,{value:"manager",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Manager"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Team management capabilities"})]})}),e.jsx(m,{value:"admin",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Admin"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Full organizational access"})]})})]})]}),e.jsx(u,{fullWidth:!0,label:"Department",value:$e,onChange:s=>ze(s.target.value),placeholder:"Engineering, Design, Marketing..."})]}),e.jsx(u,{fullWidth:!0,label:"Position/Title (Optional)",value:Oe,onChange:s=>Ue(s.target.value),placeholder:"Senior Developer, Product Manager..."})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{})," Authentication"]}),e.jsx(Pe,{control:e.jsx(Le,{checked:z,onChange:s=>Rs(s.target.checked)}),label:"Auto-generate secure password",sx:{mb:2}}),e.jsx(u,{fullWidth:!0,label:"Temporary Password",type:"password",value:ye,onChange:s=>te(s.target.value),disabled:z,required:!0,InputProps:{endAdornment:e.jsx(S,{position:"end",children:e.jsx(ms,{onClick:()=>te(ge()),disabled:!z,children:e.jsx(da,{})})})},helperText:z?"Password will be auto-generated":"User will need this password to login initially",sx:{mb:2}}),e.jsx(Pe,{control:e.jsx(Le,{checked:H,onChange:s=>Be(s.target.checked)}),label:"Activate team member immediately",sx:{mb:1}}),e.jsx(v,{severity:H?"success":"info",sx:{mt:1},children:e.jsx(a,{variant:"body2",children:H?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"âœ… Active Status:"}),' Team member will be created with "active" status and can login immediately with their credentials.']}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"â³ Pending Status:"}),' Team member will be created with "pending" status and will need to be activated later through the edit dialog.']})})})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{})," License Assignment"]}),e.jsxs(_,{fullWidth:!0,sx:{mb:2},children:[e.jsx(G,{children:"Select License to Assign"}),e.jsx(B,{value:E,label:"Select License to Assign",onChange:s=>Ve(s.target.value),required:!0,children:M().length===0?e.jsx(m,{disabled:!0,children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"No available licenses found"})}):M().map(s=>e.jsx(m,{value:s.id,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(I,{color:"primary"}),e.jsxs(t,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:s.name}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:[s.tier," â€¢ ",s.key," â€¢ Expires ",new Date(s.expiresAt).toLocaleDateString()]})]})]})},s.id))}),e.jsx(a,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"Only unassigned PENDING licenses are available for assignment"})]}),e.jsxs(v,{severity:"info",children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"ðŸŽ« License Assignment Details"}),e.jsx(a,{variant:"body2",children:"This team member will be created as a full Firebase authenticated user and assigned the selected license. They can login immediately with their email and temporary password."}),e.jsxs(a,{variant:"body2",sx:{mt:1,fontWeight:500},children:["Available licenses: ",N.stats.availableLicenses," of ",N.stats.totalLicenses]})]})]}),M().length<=0&&e.jsx(v,{severity:"warning",children:e.jsx(a,{variant:"body2",children:"No licenses available! Please generate more licenses before creating team members."})})]})}),e.jsxs(me,{children:[e.jsx(p,{onClick:()=>q(!1),children:"Cancel"}),e.jsx(p,{onClick:_s,variant:"contained",startIcon:e.jsx(Ce,{}),disabled:M().length<=0||!E,children:"Create Team Member"})]})]}),e.jsxs(de,{open:Es,onClose:()=>{ee(!1),Y(void 0)},maxWidth:"md",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Te,{}),"ðŸš€ ENHANCED Edit Team Member: ",(n==null?void 0:n.firstName)||"Loading..."," ",(n==null?void 0:n.lastName)||""]})}),e.jsx(he,{children:n?e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(us,{})," Personal Information"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(u,{fullWidth:!0,label:"First Name",value:J,onChange:s=>Ye(s.target.value),required:!0,placeholder:"John"}),e.jsx(u,{fullWidth:!0,label:"Last Name",value:Q,onChange:s=>Je(s.target.value),required:!0,placeholder:"Doe"})]}),e.jsx(u,{fullWidth:!0,label:"Email Address",type:"email",value:n.email,disabled:!0,sx:{mb:2},helperText:"Email cannot be changed after account creation"}),e.jsx(u,{fullWidth:!0,label:"Phone Number",value:"",disabled:!0,placeholder:"+1 (555) 123-4567",InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(gs,{})})},helperText:"Phone number not available in current data model"})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(js,{})," Role & Department"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsxs(_,{fullWidth:!0,children:[e.jsx(G,{children:"Role"}),e.jsxs(B,{value:Qe,label:"Role",onChange:s=>Xe(s.target.value),children:[e.jsx(m,{value:"viewer",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Viewer"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Read-only access to projects"})]})}),e.jsx(m,{value:"member",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Member"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Standard project access"})]})}),e.jsx(m,{value:"manager",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Manager"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Team management capabilities"})]})}),e.jsx(m,{value:"admin",children:e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Admin"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Full organizational access"})]})})]})]}),e.jsx(u,{fullWidth:!0,label:"Department",value:Ze,onChange:s=>es(s.target.value),placeholder:"Engineering, Design, Marketing..."})]}),e.jsx(u,{fullWidth:!0,label:"Position/Title",value:"",disabled:!0,placeholder:"Senior Developer, Product Manager...",helperText:"Position not available in current data model"})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{})," License & Access"]}),e.jsxs(_,{fullWidth:!0,sx:{mb:2},children:[e.jsx(G,{children:"Assign License"}),e.jsxs(B,{value:A,label:"Assign License",onChange:s=>ss(s.target.value),children:[e.jsx(m,{value:"",children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Z,{color:"disabled"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"No License (Remove current license)"})]})}),Os(n).map(s=>{var c;const r=((c=y(n))==null?void 0:c.licenseId)===s.id;return e.jsx(m,{value:s.id,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(I,{color:r?"primary":"action"}),e.jsxs(t,{sx:{flex:1},children:[e.jsxs(a,{variant:"body2",sx:{fontWeight:r?600:400},children:[s.name," ",r&&"(Current)"]}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:[s.tier," â€¢ ",s.key," â€¢ Expires ",new Date(s.expiresAt).toLocaleDateString()]})]})]})},s.id)})]}),e.jsx(a,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"You can reassign licenses between team members. Released licenses return to the available pool."})]}),(()=>{const s=y(n);return o==null||o.find(r=>r.id===A),s!=null&&s.licenseId,e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(u,{fullWidth:!0,label:"Current License",value:(s==null?void 0:s.licenseType)||"None",disabled:!0,InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(I,{})})}}),e.jsx(u,{fullWidth:!0,label:"License Status",value:s?s.status:"Unassigned",disabled:!0,InputProps:{startAdornment:e.jsx(S,{position:"start",children:s?e.jsx(je,{}):e.jsx(Z,{})})}})]})})(),(()=>{const s=y(n),r=o==null?void 0:o.find(g=>g.id===A);return A!==((s==null?void 0:s.licenseId)||"")?e.jsxs(v,{severity:"info",sx:{mb:2},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"ðŸ”„ License Change Preview"}),e.jsxs(a,{variant:"body2",children:[s?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Current:"})," ",s.licenseType," (",s.licenseKey,")",e.jsx("br",{})]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Current:"})," No license assigned",e.jsx("br",{})]}),e.jsx("strong",{children:"New:"})," ",r?`${r.tier} (${r.key})`:"No license (will be removed)"]}),s&&e.jsx(a,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:"The current license will be released back to the available pool."})]}):null})(),e.jsx(u,{fullWidth:!0,label:"Last Active",value:n.lastActive?new Date(n.lastActive).toLocaleString():"Never",disabled:!0,InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(xa,{})})}})]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(vs,{})," Project Assignments"]}),(()=>{const s=Sa(n,Ls||[]);return s.length>0?e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:s.map(r=>e.jsx(ce,{label:r.name,color:"primary",variant:"outlined",size:"small",icon:e.jsx(vs,{}),sx:{maxWidth:200}},r.id))}),e.jsxs(t,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.jsx("strong",{children:"Project Details:"})}),s.map(r=>e.jsxs(t,{sx:{mb:1,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:r.name}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Mode: ",r.mode," â€¢ Storage: ",r.storageBackend," â€¢ Status: ",r.status]}),r.description&&e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:r.description})]},r.id))]})]}):e.jsx(v,{severity:"info",children:e.jsx(a,{variant:"body2",children:"No projects assigned yet. This team member can be assigned to projects from the Cloud Projects page."})})})()]}),e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{})," Account Status"]}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:2},children:[e.jsxs(_,{fullWidth:!0,children:[e.jsx(G,{children:"Account Status"}),e.jsxs(B,{value:h,label:"Account Status",onChange:s=>as(s.target.value),startAdornment:e.jsx(S,{position:"start",children:fs(h)}),children:[e.jsx(m,{value:"active",children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{color:"success"}),e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Active"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Can login and access all assigned resources"})]})]})}),e.jsx(m,{value:"pending",children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Z,{color:"warning"}),e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Pending"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Awaiting activation or first login"})]})]})}),e.jsx(m,{value:"suspended",children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(bs,{color:"error"}),e.jsxs(t,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Suspended"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Temporarily blocked from access"})]})]})})]})]}),e.jsx(u,{fullWidth:!0,label:"Member Since",value:n.joinedAt?new Date(n.joinedAt).toLocaleDateString():"Unknown",disabled:!0,InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(ve,{})})}})]}),h!==n.status&&e.jsxs(v,{severity:(h==null?void 0:h.toLowerCase())==="active"?"success":(h==null?void 0:h.toLowerCase())==="suspended"?"warning":"info",sx:{mb:2},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"ðŸ”„ Status Change Preview"}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Current:"})," ",(rs=n.status)==null?void 0:rs.toUpperCase(),e.jsx("br",{}),e.jsx("strong",{children:"New:"})," ",h==null?void 0:h.toUpperCase()]}),e.jsxs(a,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:[(h==null?void 0:h.toLowerCase())==="active"&&"Team member will be able to login and access all assigned resources.",(h==null?void 0:h.toLowerCase())==="pending"&&"Team member will need to be activated before they can access resources.",(h==null?void 0:h.toLowerCase())==="suspended"&&"Team member will be blocked from accessing any resources."]})]})]}),Se(l,n)&&e.jsxs(t,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ae,{})," Password Management"]}),Fs?e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(v,{severity:"warning",children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"ðŸ” Password Change"}),e.jsx(a,{variant:"body2",children:k?"A secure password will be automatically generated.":"Please enter a new password with at least 8 characters."})]}),e.jsx(Pe,{control:e.jsx(Le,{checked:k,onChange:s=>ts(s.target.checked)}),label:"Auto-generate secure password"}),!k&&e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(u,{fullWidth:!0,label:"New Password",type:"password",value:ie,onChange:s=>le(s.target.value),placeholder:"Enter new password (min 8 characters)",required:!0,InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(Ae,{})})}}),e.jsx(u,{fullWidth:!0,label:"Confirm Password",type:"password",value:O,onChange:s=>oe(s.target.value),placeholder:"Confirm new password",required:!0,error:O!==""&&ie!==O,helperText:O!==""&&ie!==O?"Passwords do not match":"",InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(Ae,{})})}})]}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"contained",startIcon:e.jsx(Ne,{}),onClick:Bs,disabled:fe.loading,sx:{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)",color:"white",fontWeight:600},children:fe.loading?"Updating...":k?"Generate & Update Password":"Update Password"}),e.jsx(p,{variant:"outlined",onClick:()=>{re(!1),le(""),oe("")},children:"Cancel"})]})]}):e.jsxs(t,{children:[e.jsxs(v,{severity:"info",sx:{mb:2},children:[e.jsx(a,{variant:"body2",sx:{mb:1},children:e.jsx("strong",{children:"ðŸ” Password Access"})}),e.jsx(a,{variant:"body2",children:(l==null?void 0:l.id)===n.id?"You can change your own password here.":(l==null?void 0:l.role)==="ENTERPRISE_USER"||((is=l==null?void 0:l.role)==null?void 0:is.toLowerCase())==="owner"?"As the account owner, you can change this team member's password.":"As an admin, you can change this team member's password."})]}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(Ne,{}),onClick:()=>re(!0),sx:{mb:2},children:"Change Password"})]})]}),e.jsxs(v,{severity:"info",children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"âš ï¸ Important Notes"}),e.jsxs(a,{variant:"body2",children:["â€¢ Role changes will immediately affect the member's permissions and access levels",e.jsx("br",{}),"â€¢ Department information helps with organization and project assignments",e.jsx("br",{}),"â€¢ Project assignments are managed from the Cloud Projects page",e.jsx("br",{}),"â€¢ License assignments are managed through the Licenses page",e.jsx("br",{}),Se(l,n)&&"â€¢ Password changes take effect immediately"]})]})]}):e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200},children:e.jsxs(t,{textAlign:"center",children:[e.jsx(cs,{size:40,sx:{mb:2}}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Loading member data..."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"If this persists, please close and try again."})]})})}),e.jsxs(me,{children:[e.jsx(p,{onClick:()=>ee(!1),children:"Cancel"}),e.jsx(p,{onClick:Js,variant:"contained",startIcon:e.jsx(Te,{}),sx:{background:"linear-gradient(135deg, #00d4ff 0%, #667eea 100%)",color:"#000",fontWeight:600},children:"Save Changes"})]})]}),e.jsxs(de,{open:ks,onClose:()=>se(!1),maxWidth:"sm",children:[e.jsx(xe,{children:"Remove Team Member"}),e.jsx(he,{children:n&&e.jsxs(t,{children:[e.jsxs(a,{variant:"body1",sx:{mb:2},children:["Are you sure you want to remove ",e.jsx("strong",{children:W(n)})," from your team?"]}),(()=>{const s=y(n);return s?e.jsxs(v,{severity:"info",sx:{mb:2},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:1},children:"ðŸŽ« License Management"}),e.jsxs(a,{variant:"body2",children:["This team member currently has a ",e.jsx("strong",{children:s.licenseType})," license assigned. When removed, their license will be automatically released back to your available license pool and can be reassigned to another team member."]})]}):e.jsx(v,{severity:"info",sx:{mb:2},children:e.jsx(a,{variant:"body2",children:"This team member has no license assigned, so no license will be affected."})})})(),e.jsx(v,{severity:"warning",children:e.jsx(a,{variant:"body2",children:"This action cannot be undone. The member will lose access to all projects and resources."})})]})}),e.jsxs(me,{children:[e.jsx(p,{onClick:()=>se(!1),children:"Cancel"}),e.jsx(p,{onClick:Ks,variant:"contained",color:"error",startIcon:e.jsx(We,{}),children:"Remove Member"})]})]}),e.jsxs(ha,{anchorEl:qe,open:!!qe,onClose:U,children:[e.jsxs(m,{onClick:()=>Gs(n),children:[e.jsx(F,{children:e.jsx(Te,{})}),"Edit Member"]}),n?y(n)?e.jsxs(m,{onClick:Ys,children:[e.jsx(F,{children:e.jsx(Ne,{})}),"Release License"]}):e.jsxs(m,{onClick:()=>ae(!0),children:[e.jsx(F,{children:e.jsx(I,{})}),"Assign License"]}):null,((ls=n==null?void 0:n.status)==null?void 0:ls.toLowerCase())==="pending"&&e.jsxs(m,{onClick:Vs,children:[e.jsx(F,{children:e.jsx(ma,{})}),"Resend Invite"]}),e.jsx(ua,{}),e.jsxs(m,{onClick:qs,sx:{color:"error.main"},children:[e.jsx(F,{children:e.jsx(We,{sx:{color:"error.main"}})}),"Remove Member"]})]}),e.jsxs(de,{open:Ms,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(I,{}),"Assign License to ",n?W(n):"Team Member"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsx(v,{severity:"info",children:e.jsxs(a,{variant:"body2",children:["Assigning a license to ",e.jsx("strong",{children:n?W(n):"Team Member"})," (",n==null?void 0:n.email,")"]})}),e.jsxs(_,{fullWidth:!0,children:[e.jsx(G,{children:"Select License"}),e.jsx(B,{value:ne,label:"Select License",onChange:s=>He(s.target.value),children:o==null?void 0:o.filter(s=>s.status==="PENDING"&&!s.assignedTo).map(s=>e.jsx(m,{value:s.id,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{color:"primary"}),e.jsxs(t,{children:[e.jsxs(a,{variant:"body2",sx:{fontWeight:500},children:[s.tier," License"]}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:[s.key," â€¢ Expires ",new Date(s.expiresAt).toLocaleDateString()]})]})]})},s.id))}),e.jsx(a,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"Only unassigned PENDING licenses are available for assignment"})]}),(o==null?void 0:o.filter(s=>s.status==="PENDING"&&!s.assignedTo).length)===0&&e.jsx(v,{severity:"warning",children:e.jsx(a,{variant:"body2",children:"No available licenses found. All licenses are either assigned or not in PENDING status."})}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"The selected license will be assigned to this team member and they will have immediate access to the system."})]})}),e.jsxs(me,{children:[e.jsx(p,{onClick:()=>ae(!1),children:"Cancel"}),e.jsx(p,{onClick:Hs,variant:"contained",startIcon:e.jsx(I,{}),disabled:!ne||(o==null?void 0:o.filter(s=>s.status==="PENDING"&&!s.assignedTo).length)===0,children:"Assign License"})]})]})]})};export{Ba as default};
