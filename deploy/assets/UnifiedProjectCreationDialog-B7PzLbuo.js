import{j as e,aD as X,aE as ee,T as a,I as re,bO as te,aG as ae,t as M,a as s,a6 as oe,a7 as se,a8 as ne,cf as le,D as ie,aJ as ce,d as b,G as n,k as P,l as y,h as S,aK as T,aI as N,aH as A,M as R,cg as E,F as d,Q as p,u as c,aZ as U,c7 as de,c8 as xe,c9 as I,Z as O,a$ as ue,a4 as G}from"./mui-CqGO0PUa.js";import{r as h}from"./vendor-OeuszDaU.js";import{s as he}from"./index-D-vBeeRO.js";const V={name:"",description:"",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:10,networkPassword:"",preferredWebsitePort:3002,preferredApiPort:3003,maxCollaborators:10,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1},q=["Basic Information","Storage Configuration","Network Settings","Collaboration Options","Review & Create"],be=({open:g,onClose:j,mode:x,onSuccess:f,onCreate:B})=>{const[m,v]=h.useState(0),[r,W]=h.useState(V),[u,D]=h.useState(!1),[F,k]=h.useState(null),[i,w]=h.useState({});h.useEffect(()=>{g&&(W({...V,enableLocalNetwork:x==="standalone",maxCollaborators:x==="shared_network"?25:5,enableRealTime:x==="shared_network"}),v(0),k(null),w({}))},[g,x]);const l=t=>{W(C=>({...C,...t}));const o={...i};Object.keys(t).forEach(C=>{delete o[C]}),w(o)},L=t=>{const o={};switch(t){case 0:r.name.trim()||(o.name="Project name is required"),r.name.length>100&&(o.name="Project name must be less than 100 characters");break;case 1:r.storageMode==="cloud"&&r.cloudProvider==="gcs"&&(r.gcsBucket.trim()||(o.gcsBucket="GCS bucket name is required"));break;case 2:r.enableLocalNetwork&&((r.networkPort<1024||r.networkPort>65535)&&(o.networkPort="Port must be between 1024 and 65535"),r.networkAddress.trim()||(o.networkAddress="Network address is required"),(r.maxNetworkUsers<1||r.maxNetworkUsers>100)&&(o.maxNetworkUsers="Max users must be between 1 and 100")),typeof r.preferredWebsitePort=="number"&&(r.preferredWebsitePort<1024||r.preferredWebsitePort>65535)&&(o.preferredWebsitePort="Website port must be 1024-65535"),typeof r.preferredApiPort=="number"&&(r.preferredApiPort<1024||r.preferredApiPort>65535)&&(o.preferredApiPort="API port must be 1024-65535");break;case 3:(r.maxCollaborators<1||r.maxCollaborators>100)&&(o.maxCollaborators="Max collaborators must be between 1 and 100");break}return w(o),Object.keys(o).length===0},_=()=>{L(m)&&v(t=>t+1)},$=()=>{v(t=>t-1)},H=async()=>{if(L(m)){D(!0),k(null);try{const t={name:r.name,description:r.description,storageMode:r.storageMode,preferredPorts:{website:r.preferredWebsitePort,api:r.preferredApiPort},localNetworkConfig:r.enableLocalNetwork?{enabled:!0,port:r.networkPort,address:r.networkAddress,maxUsers:r.maxNetworkUsers}:void 0,cloudConfig:r.storageMode==="cloud"?{provider:r.cloudProvider,bucket:r.gcsBucket,prefix:r.gcsPrefix}:void 0,collaborationSettings:{maxCollaborators:r.maxCollaborators,enableRealTime:r.enableRealTime,enableComments:r.enableComments,enableFileSharing:r.enableFileSharing}},o=B?await B(t):await he.createProject(t);f==null||f(o),j()}catch(t){k(t instanceof Error?t.message:"Failed to create project")}finally{D(!1)}}},Q=t=>{switch(t){case 0:return Z();case 1:return z();case 2:return J();case 3:return K();case 4:return Y();default:return null}},Z=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Project Information"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide basic information about your project. This can be changed later."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"Project Name",value:r.name,onChange:t=>l({name:t.target.value}),error:!!i.name,helperText:i.name,required:!0,placeholder:"My Awesome Project"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"Description",value:r.description,onChange:t=>l({description:t.target.value}),multiline:!0,rows:3,placeholder:"Describe what this project is about..."})})]})]}),z=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Storage Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose how your project data will be stored and accessed."}),e.jsxs(U,{component:"fieldset",fullWidth:!0,sx:{mb:3},children:[e.jsx(de,{component:"legend",children:"Storage Mode"}),e.jsxs(xe,{value:r.storageMode,onChange:t=>l({storageMode:t.target.value}),children:[e.jsx(d,{value:"local",control:e.jsx(I,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(T,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Local Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project files on your local machine"})]})]})}),e.jsx(d,{value:"cloud",control:e.jsx(I,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project data in the cloud for sharing and backup"})]})]})}),e.jsx(d,{value:"hybrid",control:e.jsx(I,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(A,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Hybrid Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Combine local and cloud storage for optimal performance"})]})]})})]})]}),r.storageMode==="cloud"&&e.jsx(P,{variant:"outlined",sx:{mb:2},children:e.jsxs(y,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Cloud Provider Settings"}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(U,{fullWidth:!0,children:e.jsxs(ue,{value:r.cloudProvider,onChange:t=>l({cloudProvider:t.target.value}),children:[e.jsx(G,{value:"firestore",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Firestore"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Real-time NoSQL database"})]})]})}),e.jsx(G,{value:"gcs",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(A,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Google Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Object storage with metadata"})]})]})})]})})}),r.cloudProvider==="gcs"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"GCS Bucket",value:r.gcsBucket,onChange:t=>l({gcsBucket:t.target.value}),error:!!i.gcsBucket,helperText:i.gcsBucket,placeholder:"my-project-bucket"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Prefix (Optional)",value:r.gcsPrefix,onChange:t=>l({gcsPrefix:t.target.value}),placeholder:"projects/"})})]})]})]})})]}),J=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Network Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure local network deployment for team collaboration."}),e.jsx(E,{sx:{mb:3},children:e.jsx(d,{control:e.jsx(p,{checked:r.enableLocalNetwork,onChange:t=>l({enableLocalNetwork:t.target.checked})}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(N,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Enable Local Network Deployment"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Allow team members to connect to your local instance"})]})]})})}),r.enableLocalNetwork&&e.jsx("div",{children:e.jsx(P,{variant:"outlined",children:e.jsxs(y,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Network Deployment Settings"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Network Address",value:r.networkAddress,onChange:t=>l({networkAddress:t.target.value}),error:!!i.networkAddress,helperText:i.networkAddress||"IP address or hostname",placeholder:"192.168.1.100"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Port",type:"number",value:r.networkPort,onChange:t=>l({networkPort:parseInt(t.target.value)||3e3}),error:!!i.networkPort,helperText:i.networkPort||"Port 1024-65535",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(R,{sx:{my:1}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Desktop/Web Preferred Development Ports"})]}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Preferred Website Port (Dev)",type:"number",value:r.preferredWebsitePort??"",onChange:t=>l({preferredWebsitePort:parseInt(t.target.value)||void 0}),error:!!i.preferredWebsitePort,helperText:i.preferredWebsitePort||"Optional. Default 3002",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Preferred API Port (Dev)",type:"number",value:r.preferredApiPort??"",onChange:t=>l({preferredApiPort:parseInt(t.target.value)||void 0}),error:!!i.preferredApiPort,helperText:i.preferredApiPort||"Optional. Default 3003",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Max Network Users",type:"number",value:r.maxNetworkUsers,onChange:t=>l({maxNetworkUsers:parseInt(t.target.value)||10}),error:!!i.maxNetworkUsers,helperText:i.maxNetworkUsers,InputProps:{inputProps:{min:1,max:100}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Network Password (Optional)",type:"password",value:r.networkPassword,onChange:t=>l({networkPassword:t.target.value}),helperText:"Leave empty for no password protection"})})]}),e.jsx(M,{severity:"info",sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Your local instance will be accessible at"," ",e.jsxs("strong",{children:["http://",r.networkAddress,":",r.networkPort]})]})})]})})})]}),K=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Collaboration Settings"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure how team members can collaborate on this project."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(a,{gutterBottom:!0,children:["Max Collaborators: ",r.maxCollaborators]}),e.jsx(Slider,{value:r.maxCollaborators,onChange:(t,o)=>l({maxCollaborators:o}),min:1,max:100,marks:[{value:1,label:"1"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"}],valueLabelDisplay:"auto"})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Collaboration Features"}),e.jsxs(E,{children:[e.jsx(d,{control:e.jsx(p,{checked:r.enableRealTime,onChange:t=>l({enableRealTime:t.target.checked})}),label:"Real-time Editing"}),e.jsx(d,{control:e.jsx(p,{checked:r.enableComments,onChange:t=>l({enableComments:t.target.checked})}),label:"Comments & Annotations"}),e.jsx(d,{control:e.jsx(p,{checked:r.enableFileSharing,onChange:t=>l({enableFileSharing:t.target.checked})}),label:"File Sharing"}),e.jsx(d,{control:e.jsx(p,{checked:r.enableVersionControl,onChange:t=>l({enableVersionControl:t.target.checked})}),label:"Version Control"})]})]})]})]}),Y=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review & Create"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Review your project configuration before creating."}),e.jsx(n,{container:!0,spacing:2,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(P,{variant:"outlined",children:e.jsxs(y,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:r.name}),r.description&&e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),e.jsxs(s,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.jsx(S,{icon:x==="standalone"?e.jsx(T,{}):e.jsx(N,{}),label:x==="standalone"?"Standalone Mode":"Network Mode",color:"primary"}),e.jsx(S,{icon:e.jsx(A,{}),label:`${r.storageMode} storage`,variant:"outlined"}),r.enableLocalNetwork&&e.jsx(S,{icon:e.jsx(N,{}),label:`Network: ${r.networkAddress}:${r.networkPort}`,variant:"outlined"})]}),e.jsx(R,{sx:{my:2}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),e.jsxs(s,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs(a,{component:"li",variant:"body2",children:["Storage: ",r.storageMode,r.storageMode==="cloud"&&` (${r.cloudProvider})`]}),e.jsxs(a,{component:"li",variant:"body2",children:["Max Collaborators: ",r.maxCollaborators]}),r.enableLocalNetwork&&e.jsxs(a,{component:"li",variant:"body2",children:["Local Network: ",r.networkAddress,":",r.networkPort,"(max ",r.maxNetworkUsers," users)"]}),e.jsxs(a,{component:"li",variant:"body2",children:["Features: ",[r.enableRealTime&&"Real-time",r.enableComments&&"Comments",r.enableFileSharing&&"File Sharing",r.enableVersionControl&&"Version Control"].filter(Boolean).join(", ")]})]})]})})})})]});return e.jsxs(X,{open:g,onClose:j,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh"}},children:[e.jsxs(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{variant:"h6",children:["Create New ",x==="standalone"?"Standalone":"Network"," Project"]}),e.jsx(re,{onClick:j,size:"small",children:e.jsx(te,{})})]}),e.jsxs(ae,{children:[F&&e.jsx(M,{severity:"error",sx:{mb:2},children:F}),e.jsx(s,{sx:{width:"100%"},children:e.jsx(oe,{activeStep:m,orientation:"vertical",children:q.map((t,o)=>e.jsxs(se,{children:[e.jsx(ne,{children:t}),e.jsx(le,{children:Q(o)})]},t))})}),u&&e.jsx(ie,{sx:{mt:2}})]}),e.jsxs(ce,{sx:{px:3,pb:2},children:[e.jsx(b,{onClick:j,disabled:u,children:"Cancel"}),m>0&&e.jsx(b,{onClick:$,disabled:u,children:"Back"}),m<q.length-1?e.jsx(b,{onClick:_,variant:"contained",disabled:u,children:"Next"}):e.jsx(b,{onClick:H,variant:"contained",disabled:u,startIcon:e.jsx(CheckIcon,{}),children:u?"Creating...":"Create Project"})]})]})};export{be as U};
