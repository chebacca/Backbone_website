import{j as e,aD as ee,aE as re,a as s,az as E,T as a,I as te,bQ as ae,aF as oe,t as U,a6 as se,a7 as ne,a8 as le,ch as ie,d as v,D as ce,aN as de,G as n,k as A,l as B,h as N,aO as O,aG as I,aP as b,M as q,ci as ue,cj as G,F as d,Q as g,u as c,aJ as V,c9 as xe,ca as he,cb as W,Z as _,aL as me,a4 as f}from"./mui-BSkWdNwG.js";import{r as m}from"./vendor-OeuszDaU.js";import{s as pe}from"./index-2EYOVKAa.js";const $={name:"",description:"",visibility:"private",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",s3Bucket:"",s3Region:"us-east-1",s3Prefix:"",azureStorageAccount:"",azureContainer:"",azurePrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:250,networkPassword:"",preferredWebsitePort:3002,preferredApiPort:3003,maxCollaborators:250,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1},p=["Basic Information","Storage Configuration","Network Settings","Collaboration Options","Review & Create"],ve=({open:k,onClose:j,mode:u,onSuccess:C,onCreate:z})=>{const[x,P]=m.useState(0),[r,T]=m.useState($),[h,F]=m.useState(!1),[D,y]=m.useState(null),[i,w]=m.useState({});m.useEffect(()=>{k&&(T({...$,enableLocalNetwork:u==="standalone",maxCollaborators:u==="shared_network"?25:5,enableRealTime:u==="shared_network"}),P(0),y(null),w({}))},[k,u]);const l=t=>{T(S=>({...S,...t}));const o={...i};Object.keys(t).forEach(S=>{delete o[S]}),w(o)},M=t=>{const o={};switch(t){case 0:r.name.trim()||(o.name="Project name is required"),r.name.length>100&&(o.name="Project name must be less than 100 characters");break;case 1:r.storageMode==="cloud"&&(r.cloudProvider==="gcs"&&!r.gcsBucket.trim()&&(o.gcsBucket="GCS bucket name is required"),r.cloudProvider==="s3"&&!r.s3Bucket.trim()&&(o.s3Bucket="S3 bucket name is required"),r.cloudProvider==="azure-blob"&&(r.azureStorageAccount.trim()||(o.azureStorageAccount="Azure storage account is required"),r.azureContainer.trim()||(o.azureContainer="Azure container name is required")));break;case 2:r.enableLocalNetwork&&((r.networkPort<1024||r.networkPort>65535)&&(o.networkPort="Port must be between 1024 and 65535"),r.networkAddress.trim()||(o.networkAddress="Network address is required"),(r.maxNetworkUsers<1||r.maxNetworkUsers>250)&&(o.maxNetworkUsers="Max users must be between 1 and 250")),typeof r.preferredWebsitePort=="number"&&(r.preferredWebsitePort<1024||r.preferredWebsitePort>65535)&&(o.preferredWebsitePort="Website port must be 1024-65535"),typeof r.preferredApiPort=="number"&&(r.preferredApiPort<1024||r.preferredApiPort>65535)&&(o.preferredApiPort="API port must be 1024-65535");break;case 3:(r.maxCollaborators<1||r.maxCollaborators>250)&&(o.maxCollaborators="Max collaborators must be between 1 and 250");break}return w(o),Object.keys(o).length===0},Q=()=>{M(x)&&P(t=>t+1)},H=()=>{P(t=>t-1)},L=async()=>{if(M(x)){F(!0),y(null);try{const t={name:r.name,description:r.description,visibility:r.visibility,storageMode:r.storageMode,preferredPorts:{website:r.preferredWebsitePort,api:r.preferredApiPort},localNetworkConfig:r.enableLocalNetwork?{enabled:!0,port:r.networkPort,address:r.networkAddress,maxUsers:r.maxNetworkUsers}:void 0,cloudConfig:r.storageMode==="cloud"?{provider:r.cloudProvider,bucket:r.cloudProvider==="gcs"?r.gcsBucket:r.cloudProvider==="s3"?r.s3Bucket:r.cloudProvider==="azure-blob"?r.azureContainer:"",prefix:r.cloudProvider==="gcs"?r.gcsPrefix:r.cloudProvider==="s3"?r.s3Prefix:r.cloudProvider==="azure-blob"?r.azurePrefix:"",region:r.cloudProvider==="s3"?r.s3Region:void 0,storageAccount:r.cloudProvider==="azure-blob"?r.azureStorageAccount:void 0}:void 0,collaborationSettings:{maxCollaborators:r.maxCollaborators,enableRealTime:r.enableRealTime,enableComments:r.enableComments,enableFileSharing:r.enableFileSharing}},o=z?await z(t):await pe.createProject(t);C==null||C(o),j()}catch(t){y(t instanceof Error?t.message:"Failed to create project")}finally{F(!1)}}},J=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Project Information"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide basic information about your project. This can be changed later."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"Project Name",value:r.name,onChange:t=>l({name:t.target.value}),error:!!i.name,helperText:i.name,required:!0,placeholder:"My Awesome Project"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"Description",value:r.description,onChange:t=>l({description:t.target.value}),multiline:!0,rows:3,placeholder:"Describe what this project is about..."})})]})]}),Y=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Storage Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose how your project data will be stored and accessed."}),e.jsxs(V,{component:"fieldset",fullWidth:!0,sx:{mb:3},children:[e.jsx(xe,{component:"legend",children:"Storage Mode"}),e.jsxs(he,{value:r.storageMode,onChange:t=>l({storageMode:t.target.value}),children:[e.jsx(d,{value:"local",control:e.jsx(W,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Local Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project files on your local machine"})]})]})}),e.jsx(d,{value:"cloud",control:e.jsx(W,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project data in the cloud for sharing and backup"})]})]})}),e.jsx(d,{value:"hybrid",control:e.jsx(W,{}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{}),e.jsxs(s,{children:[e.jsx(a,{variant:"body1",children:"Hybrid Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Combine local and cloud storage for optimal performance"})]})]})})]})]}),r.storageMode==="cloud"&&e.jsx(A,{variant:"outlined",sx:{mb:2},children:e.jsxs(B,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Cloud Provider Settings"}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(V,{fullWidth:!0,children:e.jsxs(me,{value:r.cloudProvider,onChange:t=>l({cloudProvider:t.target.value}),children:[e.jsx(f,{value:"firestore",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Firestore"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Real-time NoSQL database"})]})]})}),e.jsx(f,{value:"gcs",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Google Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Object storage with metadata"})]})]})}),e.jsx(f,{value:"s3",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{}),e.jsxs(s,{children:[e.jsx(a,{children:"AWS S3"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Amazon Simple Storage Service"})]})]})}),e.jsx(f,{value:"azure-blob",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Azure Blob Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Microsoft Azure object storage"})]})]})})]})})}),r.cloudProvider==="gcs"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"GCS Bucket",value:r.gcsBucket,onChange:t=>l({gcsBucket:t.target.value}),error:!!i.gcsBucket,helperText:i.gcsBucket,placeholder:"my-project-bucket"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Prefix (Optional)",value:r.gcsPrefix,onChange:t=>l({gcsPrefix:t.target.value}),placeholder:"projects/"})})]}),r.cloudProvider==="s3"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"S3 Bucket",value:r.s3Bucket,onChange:t=>l({s3Bucket:t.target.value}),error:!!i.s3Bucket,helperText:i.s3Bucket,placeholder:"my-s3-bucket",required:!0})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"AWS Region",value:r.s3Region,onChange:t=>l({s3Region:t.target.value}),placeholder:"us-east-1"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"S3 Prefix (Optional)",value:r.s3Prefix,onChange:t=>l({s3Prefix:t.target.value}),placeholder:"projects/"})})]}),r.cloudProvider==="azure-blob"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Storage Account",value:r.azureStorageAccount,onChange:t=>l({azureStorageAccount:t.target.value}),error:!!i.azureStorageAccount,helperText:i.azureStorageAccount,placeholder:"mystorageaccount",required:!0})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Container",value:r.azureContainer,onChange:t=>l({azureContainer:t.target.value}),error:!!i.azureContainer,helperText:i.azureContainer,placeholder:"my-container",required:!0})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(c,{fullWidth:!0,label:"Blob Prefix (Optional)",value:r.azurePrefix,onChange:t=>l({azurePrefix:t.target.value}),placeholder:"projects/"})})]})]})]})})]}),Z=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Network Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure local network deployment for team collaboration."}),e.jsx(G,{sx:{mb:3},children:e.jsx(d,{control:e.jsx(g,{checked:r.enableLocalNetwork,onChange:t=>l({enableLocalNetwork:t.target.checked})}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{}),e.jsxs(s,{children:[e.jsx(a,{children:"Enable Local Network Deployment"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Allow team members to connect to your local instance"})]})]})})}),r.enableLocalNetwork&&e.jsx("div",{children:e.jsx(A,{variant:"outlined",children:e.jsxs(B,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Network Deployment Settings"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Network Address",value:r.networkAddress,onChange:t=>l({networkAddress:t.target.value}),error:!!i.networkAddress,helperText:i.networkAddress||"IP address or hostname",placeholder:"192.168.1.100"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Port",type:"number",value:r.networkPort,onChange:t=>l({networkPort:parseInt(t.target.value)||3e3}),error:!!i.networkPort,helperText:i.networkPort||"Port 1024-65535",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(q,{sx:{my:1}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Desktop/Web Preferred Development Ports"})]}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Preferred Website Port (Dev)",type:"number",value:r.preferredWebsitePort??"",onChange:t=>l({preferredWebsitePort:parseInt(t.target.value)||void 0}),error:!!i.preferredWebsitePort,helperText:i.preferredWebsitePort||"Optional. Default 3002",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Preferred API Port (Dev)",type:"number",value:r.preferredApiPort??"",onChange:t=>l({preferredApiPort:parseInt(t.target.value)||void 0}),error:!!i.preferredApiPort,helperText:i.preferredApiPort||"Optional. Default 3003",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Max Network Users",type:"number",value:r.maxNetworkUsers,onChange:t=>l({maxNetworkUsers:parseInt(t.target.value)||10}),error:!!i.maxNetworkUsers,helperText:i.maxNetworkUsers,InputProps:{inputProps:{min:1,max:100}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{fullWidth:!0,label:"Network Password (Optional)",type:"password",value:r.networkPassword,onChange:t=>l({networkPassword:t.target.value}),helperText:"Leave empty for no password protection"})})]}),e.jsx(U,{severity:"info",sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Your local instance will be accessible at"," ",e.jsxs("strong",{children:["http://",r.networkAddress,":",r.networkPort]})]})})]})})})]}),K=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Collaboration Settings"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure how team members can collaborate on this project."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(a,{gutterBottom:!0,children:["Max Collaborators: ",r.maxCollaborators]}),e.jsx(ue,{value:r.maxCollaborators,onChange:(t,o)=>l({maxCollaborators:o}),min:1,max:100,marks:[{value:1,label:"1"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"}],valueLabelDisplay:"auto"})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Collaboration Features"}),e.jsxs(G,{children:[e.jsx(d,{control:e.jsx(g,{checked:r.enableRealTime,onChange:t=>l({enableRealTime:t.target.checked})}),label:"Real-time Editing"}),e.jsx(d,{control:e.jsx(g,{checked:r.enableComments,onChange:t=>l({enableComments:t.target.checked})}),label:"Comments & Annotations"}),e.jsx(d,{control:e.jsx(g,{checked:r.enableFileSharing,onChange:t=>l({enableFileSharing:t.target.checked})}),label:"File Sharing"}),e.jsx(d,{control:e.jsx(g,{checked:r.enableVersionControl,onChange:t=>l({enableVersionControl:t.target.checked})}),label:"Version Control"})]})]})]})]}),X=()=>e.jsxs(s,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review & Create"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Review your project configuration before creating."}),e.jsx(n,{container:!0,spacing:2,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(A,{variant:"outlined",children:e.jsxs(B,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:r.name}),r.description&&e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),e.jsxs(s,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.jsx(N,{icon:u==="standalone"?e.jsx(O,{}):e.jsx(I,{}),label:u==="standalone"?"Standalone Mode":"Network Mode",color:"primary"}),e.jsx(N,{icon:e.jsx(b,{}),label:`${r.storageMode} storage`,variant:"outlined"}),r.enableLocalNetwork&&e.jsx(N,{icon:e.jsx(I,{}),label:`Network: ${r.networkAddress}:${r.networkPort}`,variant:"outlined"})]}),e.jsx(q,{sx:{my:2}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),e.jsxs(s,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs(a,{component:"li",variant:"body2",children:["Storage: ",r.storageMode,r.storageMode==="cloud"&&` (${r.cloudProvider})`]}),e.jsxs(a,{component:"li",variant:"body2",children:["Max Collaborators: ",r.maxCollaborators]}),r.enableLocalNetwork&&e.jsxs(a,{component:"li",variant:"body2",children:["Local Network: ",r.networkAddress,":",r.networkPort,"(max ",r.maxNetworkUsers," users)"]}),e.jsxs(a,{component:"li",variant:"body2",children:["Features: ",[r.enableRealTime&&"Real-time",r.enableComments&&"Comments",r.enableFileSharing&&"File Sharing",r.enableVersionControl&&"Version Control"].filter(Boolean).join(", ")]})]})]})})})})]}),R=t=>{switch(t){case 0:return J();case 1:return Y();case 2:return Z();case 3:return K();case 4:return X();default:return null}};return e.jsxs(ee,{open:k,onClose:j,maxWidth:"md",fullWidth:!0,sx:{zIndex:1400},PaperProps:{sx:{minHeight:"70vh",backgroundColor:"background.default","& .MuiDialogContent-root":{backgroundColor:"background.default"}}},children:[e.jsxs(re,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{color:"primary"}),e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Create New Project"})]}),e.jsx(te,{onClick:j,size:"small",children:e.jsx(ae,{})})]}),e.jsxs(oe,{sx:{p:3},children:[D&&e.jsx(U,{severity:"error",sx:{mb:3},children:D}),e.jsx(se,{activeStep:x,orientation:"vertical",children:p.map((t,o)=>e.jsxs(ne,{children:[e.jsx(le,{children:t}),e.jsxs(ie,{children:[R(o),e.jsx(s,{sx:{mb:2,mt:2},children:e.jsxs("div",{children:[o!==p.length-1&&e.jsx(v,{variant:"contained",onClick:o===p.length-1?L:Q,sx:{mt:1,mr:1},disabled:h,children:o===p.length-1?"Create Project":"Continue"}),o>0&&e.jsx(v,{disabled:h,onClick:H,sx:{mt:1,mr:1},children:"Back"})]})})]})]},t))}),x===p.length-1&&e.jsx(s,{sx:{mt:2},children:R(x)}),h&&e.jsx(ce,{sx:{mt:2}})]}),e.jsxs(de,{sx:{px:3,pb:3,pt:2,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(v,{onClick:j,variant:"outlined",disabled:h,sx:{borderColor:"primary.main",color:"primary.main"},children:"Close"}),x===p.length-1&&e.jsx(v,{onClick:L,variant:"contained",disabled:h||!r.name.trim(),startIcon:e.jsx(E,{}),sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:h?"Creating...":"Create Project"})]})]})};export{ve as U};
