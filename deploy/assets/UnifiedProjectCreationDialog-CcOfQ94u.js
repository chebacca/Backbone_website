import{j as e,aO as Z,aP as J,T as a,I as X,bN as ee,aQ as re,t as T,a as o,a6 as te,a7 as ae,a8 as oe,cd as se,D as ne,aR as le,d as b,K as ie,G as n,k as y,l as P,h as S,bg as R,_ as N,aY as B,M as ce,ce as de,cf as D,F as c,Q as j,u as d,aT as U,cg as xe,c6 as he,c7 as I,Z as E,aV as ue,a4 as W}from"./mui-BeKQ6Vc5.js";import{r as u}from"./vendor-OeuszDaU.js";import{s as me}from"./index-BvoI4F7U.js";import{m as je}from"./proxy-rb2B78Gd.js";const O={name:"",description:"",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:10,networkPassword:"",maxCollaborators:10,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1},V=["Basic Information","Storage Configuration","Network Settings","Collaboration Options","Review & Create"],ve=({open:p,onClose:g,mode:x,onSuccess:k})=>{const[m,v]=u.useState(0),[r,F]=u.useState(O),[h,L]=u.useState(!1),[M,w]=u.useState(null),[i,C]=u.useState({});u.useEffect(()=>{p&&(F({...O,enableLocalNetwork:x==="standalone",maxCollaborators:x==="shared_network"?25:5,enableRealTime:x==="shared_network"}),v(0),w(null),C({}))},[p,x]);const l=t=>{F(f=>({...f,...t}));const s={...i};Object.keys(t).forEach(f=>{delete s[f]}),C(s)},A=t=>{const s={};switch(t){case 0:r.name.trim()||(s.name="Project name is required"),r.name.length>100&&(s.name="Project name must be less than 100 characters");break;case 1:r.storageMode==="cloud"&&r.cloudProvider==="gcs"&&(r.gcsBucket.trim()||(s.gcsBucket="GCS bucket name is required"));break;case 2:r.enableLocalNetwork&&((r.networkPort<1024||r.networkPort>65535)&&(s.networkPort="Port must be between 1024 and 65535"),r.networkAddress.trim()||(s.networkAddress="Network address is required"),(r.maxNetworkUsers<1||r.maxNetworkUsers>100)&&(s.maxNetworkUsers="Max users must be between 1 and 100"));break;case 3:(r.maxCollaborators<1||r.maxCollaborators>100)&&(s.maxCollaborators="Max collaborators must be between 1 and 100");break}return C(s),Object.keys(s).length===0},G=()=>{A(m)&&v(t=>t+1)},_=()=>{v(t=>t-1)},q=async()=>{if(A(m)){L(!0),w(null);try{const t={name:r.name,description:r.description,storageMode:r.storageMode,localNetworkConfig:r.enableLocalNetwork?{enabled:!0,port:r.networkPort,address:r.networkAddress,maxUsers:r.maxNetworkUsers}:void 0,cloudConfig:r.storageMode==="cloud"?{provider:r.cloudProvider,bucket:r.gcsBucket,prefix:r.gcsPrefix}:void 0,collaborationSettings:{maxCollaborators:r.maxCollaborators,enableRealTime:r.enableRealTime,enableComments:r.enableComments,enableFileSharing:r.enableFileSharing}},s=await me.createProject(t);k==null||k(s),g()}catch(t){w(t instanceof Error?t.message:"Failed to create project")}finally{L(!1)}}},$=t=>{switch(t){case 0:return H();case 1:return Q();case 2:return Y();case 3:return z();case 4:return K();default:return null}},H=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Project Information"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide basic information about your project. This can be changed later."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Project Name",value:r.name,onChange:t=>l({name:t.target.value}),error:!!i.name,helperText:i.name,required:!0,placeholder:"My Awesome Project"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Description",value:r.description,onChange:t=>l({description:t.target.value}),multiline:!0,rows:3,placeholder:"Describe what this project is about..."})})]})]}),Q=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Storage Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose how your project data will be stored and accessed."}),e.jsxs(U,{component:"fieldset",fullWidth:!0,sx:{mb:3},children:[e.jsx(xe,{component:"legend",children:"Storage Mode"}),e.jsxs(he,{value:r.storageMode,onChange:t=>l({storageMode:t.target.value}),children:[e.jsx(c,{value:"local",control:e.jsx(I,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(R,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Local Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project files on your local machine"})]})]})}),e.jsx(c,{value:"cloud",control:e.jsx(I,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project data in the cloud for sharing and backup"})]})]})}),e.jsx(c,{value:"hybrid",control:e.jsx(I,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Hybrid Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Combine local and cloud storage for optimal performance"})]})]})})]})]}),r.storageMode==="cloud"&&e.jsx(y,{variant:"outlined",sx:{mb:2},children:e.jsxs(P,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Cloud Provider Settings"}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(U,{fullWidth:!0,children:e.jsxs(ue,{value:r.cloudProvider,onChange:t=>l({cloudProvider:t.target.value}),children:[e.jsx(W,{value:"firestore",children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Firestore"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Real-time NoSQL database"})]})]})}),e.jsx(W,{value:"gcs",children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Google Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Object storage with metadata"})]})]})})]})})}),r.cloudProvider==="gcs"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"GCS Bucket",value:r.gcsBucket,onChange:t=>l({gcsBucket:t.target.value}),error:!!i.gcsBucket,helperText:i.gcsBucket,placeholder:"my-project-bucket"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Prefix (Optional)",value:r.gcsPrefix,onChange:t=>l({gcsPrefix:t.target.value}),placeholder:"projects/"})})]})]})]})})]}),Y=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Network Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure local network deployment for team collaboration."}),e.jsx(D,{sx:{mb:3},children:e.jsx(c,{control:e.jsx(j,{checked:r.enableLocalNetwork,onChange:t=>l({enableLocalNetwork:t.target.checked})}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(N,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Enable Local Network Deployment"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Allow team members to connect to your local instance"})]})]})})}),r.enableLocalNetwork&&e.jsx(je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsx(y,{variant:"outlined",children:e.jsxs(P,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Network Deployment Settings"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Network Address",value:r.networkAddress,onChange:t=>l({networkAddress:t.target.value}),error:!!i.networkAddress,helperText:i.networkAddress||"IP address or hostname",placeholder:"192.168.1.100"})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Port",type:"number",value:r.networkPort,onChange:t=>l({networkPort:parseInt(t.target.value)||3e3}),error:!!i.networkPort,helperText:i.networkPort||"Port 1024-65535",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Max Network Users",type:"number",value:r.maxNetworkUsers,onChange:t=>l({maxNetworkUsers:parseInt(t.target.value)||10}),error:!!i.maxNetworkUsers,helperText:i.maxNetworkUsers,InputProps:{inputProps:{min:1,max:100}}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Network Password (Optional)",type:"password",value:r.networkPassword,onChange:t=>l({networkPassword:t.target.value}),helperText:"Leave empty for no password protection"})})]}),e.jsx(T,{severity:"info",sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Your local instance will be accessible at"," ",e.jsxs("strong",{children:["http://",r.networkAddress,":",r.networkPort]})]})})]})})})]}),z=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Collaboration Settings"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure how team members can collaborate on this project."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(a,{gutterBottom:!0,children:["Max Collaborators: ",r.maxCollaborators]}),e.jsx(de,{value:r.maxCollaborators,onChange:(t,s)=>l({maxCollaborators:s}),min:1,max:100,marks:[{value:1,label:"1"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"}],valueLabelDisplay:"auto"})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Collaboration Features"}),e.jsxs(D,{children:[e.jsx(c,{control:e.jsx(j,{checked:r.enableRealTime,onChange:t=>l({enableRealTime:t.target.checked})}),label:"Real-time Editing"}),e.jsx(c,{control:e.jsx(j,{checked:r.enableComments,onChange:t=>l({enableComments:t.target.checked})}),label:"Comments & Annotations"}),e.jsx(c,{control:e.jsx(j,{checked:r.enableFileSharing,onChange:t=>l({enableFileSharing:t.target.checked})}),label:"File Sharing"}),e.jsx(c,{control:e.jsx(j,{checked:r.enableVersionControl,onChange:t=>l({enableVersionControl:t.target.checked})}),label:"Version Control"})]})]})]})]}),K=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review & Create"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Review your project configuration before creating."}),e.jsx(n,{container:!0,spacing:2,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{variant:"outlined",children:e.jsxs(P,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:r.name}),r.description&&e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),e.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.jsx(S,{icon:x==="standalone"?e.jsx(R,{}):e.jsx(N,{}),label:x==="standalone"?"Standalone Mode":"Network Mode",color:"primary"}),e.jsx(S,{icon:e.jsx(B,{}),label:`${r.storageMode} storage`,variant:"outlined"}),r.enableLocalNetwork&&e.jsx(S,{icon:e.jsx(N,{}),label:`Network: ${r.networkAddress}:${r.networkPort}`,variant:"outlined"})]}),e.jsx(ce,{sx:{my:2}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),e.jsxs(o,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs(a,{component:"li",variant:"body2",children:["Storage: ",r.storageMode,r.storageMode==="cloud"&&` (${r.cloudProvider})`]}),e.jsxs(a,{component:"li",variant:"body2",children:["Max Collaborators: ",r.maxCollaborators]}),r.enableLocalNetwork&&e.jsxs(a,{component:"li",variant:"body2",children:["Local Network: ",r.networkAddress,":",r.networkPort,"(max ",r.maxNetworkUsers," users)"]}),e.jsxs(a,{component:"li",variant:"body2",children:["Features: ",[r.enableRealTime&&"Real-time",r.enableComments&&"Comments",r.enableFileSharing&&"File Sharing",r.enableVersionControl&&"Version Control"].filter(Boolean).join(", ")]})]})]})})})})]});return e.jsxs(Z,{open:p,onClose:g,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh"}},children:[e.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{variant:"h6",children:["Create New ",x==="standalone"?"Standalone":"Network"," Project"]}),e.jsx(X,{onClick:g,size:"small",children:e.jsx(ee,{})})]}),e.jsxs(re,{children:[M&&e.jsx(T,{severity:"error",sx:{mb:2},children:M}),e.jsx(o,{sx:{width:"100%"},children:e.jsx(te,{activeStep:m,orientation:"vertical",children:V.map((t,s)=>e.jsxs(ae,{children:[e.jsx(oe,{children:t}),e.jsx(se,{children:$(s)})]},t))})}),h&&e.jsx(ne,{sx:{mt:2}})]}),e.jsxs(le,{sx:{px:3,pb:2},children:[e.jsx(b,{onClick:g,disabled:h,children:"Cancel"}),m>0&&e.jsx(b,{onClick:_,disabled:h,children:"Back"}),m<V.length-1?e.jsx(b,{onClick:G,variant:"contained",disabled:h,children:"Next"}):e.jsx(b,{onClick:q,variant:"contained",disabled:h,startIcon:e.jsx(ie,{}),children:h?"Creating...":"Create Project"})]})]})};export{ve as U};
