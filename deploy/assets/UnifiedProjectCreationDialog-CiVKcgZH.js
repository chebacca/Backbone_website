const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CloudProjectIntegration-Ddv4uGls.js","assets/index-DUsOwf0X.js","assets/mui-CCWxH8Vb.js","assets/vendor-CjD1bmmO.js","assets/stripe-vGaGA8Al.js","assets/index-CBai7h7s.css"])))=>i.map(i=>d[i]);
var fe=Object.defineProperty;var ve=(b,a,s)=>a in b?fe(b,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):b[a]=s;var I=(b,a,s)=>ve(b,typeof a!="symbol"?a+"":a,s);import{j as e,at as we,au as ye,B as n,bP as Y,T as o,g as Pe,bm as Se,av as ke,d as M,bW as Ce,bX as Ae,bY as Ie,i as J,aw as Me,a as D,G as c,t as B,v as R,r as z,aM as X,bZ as F,a6 as _,D as K,F as f,s as P,b_ as De,b$ as Q,e as g,a8 as O,c0 as _e,c1 as Ee,c2 as U,K as E,a9 as Z,aa as ee,M as v,L as Te,Y as Le,bz as Ne,c3 as We}from"./mui-CCWxH8Vb.js";import{r as w}from"./vendor-CjD1bmmO.js";import{_ as k}from"./index-DUsOwf0X.js";import{c as te}from"./CloudProjectIntegration-Ddv4uGls.js";const T=class T{constructor(){I(this,"listeners",[]);I(this,"state",{currentStep:"mode_selection",selectedMode:null,storageMode:"local",isAuthenticated:!1,user:null,selectedProjectId:null,error:null,isLoading:!1});this.initialize()}static getInstance(){return this.instance||(this.instance=new T),this.instance}async initialize(){try{const a=this.checkExistingAuthentication(),s=localStorage.getItem("preferredApplicationMode"),i=localStorage.getItem("preferredStorageMode");if(sessionStorage.getItem("startup_reset")==="true"){sessionStorage.removeItem("startup_reset"),this.updateState({currentStep:"mode_selection",selectedMode:null,storageMode:i||"local",isAuthenticated:!1});return}if(a.isValid&&s){this.updateState({isAuthenticated:!0,user:a.user,selectedMode:s,storageMode:i||"local"});const l=localStorage.getItem("lastProjectId");l&&this.validateProjectAccess(l,s)?await this.completeStartup(l):this.updateState({currentStep:"project_selection"})}else this.updateState({currentStep:"mode_selection",storageMode:i||"local"})}catch(a){console.error("Startup initialization error:",a),this.updateState({error:"Failed to initialize application",currentStep:"mode_selection"})}}subscribe(a){return this.listeners.push(a),a(this.state),()=>{const s=this.listeners.indexOf(a);s>-1&&this.listeners.splice(s,1)}}getState(){return{...this.state}}async selectMode(a,s="local"){try{if(this.updateState({isLoading:!0,error:null}),localStorage.setItem("preferredApplicationMode",a),localStorage.setItem("preferredStorageMode",s),this.updateState({selectedMode:a,storageMode:s}),a==="shared_network")try{const{cloudProjectIntegration:i}=await k(async()=>{const{cloudProjectIntegration:l}=await import("./CloudProjectIntegration-Ddv4uGls.js").then(x=>x.C);return{cloudProjectIntegration:l}},__vite__mapDeps([0,1,2,3,4,5]));await this.checkCloudHealth().catch(()=>!1)||console.log("Cloud unreachable, but Edge mode not supported in web-only production")}catch(i){console.warn("Edge discovery failed:",i)}this.isAuthRequired(a,this.state.storageMode)?this.state.isAuthenticated?this.updateState({currentStep:"project_selection",isLoading:!1}):this.updateState({currentStep:"authentication",isLoading:!1}):this.updateState({currentStep:"project_selection",isLoading:!1})}catch(i){console.error("Mode selection error:",i),this.updateState({error:"Failed to select mode",isLoading:!1})}}async checkCloudHealth(){try{const a=new AbortController,s=setTimeout(()=>a.abort("timeout"),1500),h=await fetch("/api/health",{signal:a.signal,method:"GET"});return clearTimeout(s),h.ok}catch{return!1}}async onAuthenticationSuccess(a){try{this.updateState({isAuthenticated:!0,user:a,currentStep:"project_selection",error:null}),localStorage.setItem("currentUser",JSON.stringify(a)),localStorage.setItem("lastAuthTime",Date.now().toString())}catch(s){console.error("Authentication success handling error:",s),this.updateState({error:"Failed to complete authentication"})}}async authenticateTeamMember(a,s){try{this.updateState({isLoading:!0,error:null});const{cloudProjectIntegration:i}=await k(async()=>{const{cloudProjectIntegration:x}=await import("./CloudProjectIntegration-Ddv4uGls.js").then(m=>m.C);return{cloudProjectIntegration:x}},__vite__mapDeps([0,1,2,3,4,5])),h=await i.validateTeamMemberCredentials(a,s);if(!h.isValid)throw new Error(h.error||"Invalid team member credentials");const l={...h.teamMember,isTeamMember:!0,authenticationType:"team_member",projectAccess:h.projectAccess||[]};await this.onAuthenticationSuccess(l)}catch(i){throw console.error("Team member authentication error:",i),this.updateState({error:i instanceof Error?i.message:"Team member authentication failed",isLoading:!1}),i}}async getTeamMemberProjectContext(a){var s;if(!((s=this.state.user)!=null&&s.isTeamMember))return null;try{const{cloudProjectIntegration:i}=await k(async()=>{const{cloudProjectIntegration:t}=await import("./CloudProjectIntegration-Ddv4uGls.js").then(C=>C.C);return{cloudProjectIntegration:t}},__vite__mapDeps([0,1,2,3,4,5])),l=(await i.getProjectTeamMembers(a)).find(t=>t.teamMemberId===this.state.user.id);if(!l)throw new Error("Team member is not assigned to this project");const{TEAM_MEMBER_ROLE_MAPPINGS:x}=await k(async()=>{const{TEAM_MEMBER_ROLE_MAPPINGS:t}=await import("./teamMember-0N2cos9P.js");return{TEAM_MEMBER_ROLE_MAPPINGS:t}},[]),m=x.find(t=>t.teamMemberRole===l.role);if(!m)throw new Error("Invalid team member role mapping");return{teamMember:this.state.user,project:{id:a,role:l.role},backboneUserRole:m.backboneUserRole,permissions:m.permissions,canManageTeam:l.role==="admin"}}catch(i){throw console.error("Failed to get team member project context:",i),i}}async selectProject(a){try{if(this.updateState({isLoading:!0,error:null}),!this.validateProjectAccess(a,this.state.selectedMode))throw new Error("Invalid project access");await this.completeStartup(a)}catch(s){console.error("Project selection error:",s),this.updateState({error:"Failed to select project",isLoading:!1})}}async createProject(a){try{this.updateState({isLoading:!0,error:null}),this.validateProjectCreationOptions(a);const s=await this.executeProjectCreation(a);return await this.completeStartup(s),s}catch(s){throw console.error("Project creation error:",s),this.updateState({error:`Failed to create project: ${s instanceof Error?s.message:"Unknown error"}`,isLoading:!1}),s}}async reset(){sessionStorage.clear(),localStorage.removeItem("currentUser"),localStorage.removeItem("lastAuthTime"),localStorage.removeItem("lastProjectId"),sessionStorage.setItem("startup_reset","true"),this.updateState({currentStep:"mode_selection",selectedMode:null,isAuthenticated:!1,user:null,selectedProjectId:null,error:null,isLoading:!1})}async switchMode(a,s="local"){this.state.selectedProjectId&&localStorage.setItem("lastProjectId",this.state.selectedProjectId),await this.selectMode(a,s)}updateState(a){this.state={...this.state,...a},this.listeners.forEach(s=>{try{s(this.state)}catch(i){console.error("Startup listener error:",i)}})}checkExistingAuthentication(){try{const a=localStorage.getItem("currentUser"),s=localStorage.getItem("lastAuthTime");if(!a||!s)return{isValid:!1,user:null};const i=parseInt(s),h=Date.now(),l=24*60*60*1e3;return h-i>l?{isValid:!1,user:null}:{isValid:!0,user:JSON.parse(a)}}catch{return{isValid:!1,user:null}}}isAuthRequired(a,s){return a==="shared_network"||a==="standalone"&&s==="cloud"||s==="hybrid"}validateProjectAccess(a,s){return!(!a||!s)}validateProjectCreationOptions(a){var s,i,h,l;if(!((s=a.name)!=null&&s.trim()))throw new Error("Project name is required");if(a.preferredPorts){const{website:x,api:m}=a.preferredPorts;if(typeof x=="number"&&(x<1024||x>65535))throw new Error("Website port must be between 1024-65535");if(typeof m=="number"&&(m<1024||m>65535))throw new Error("API port must be between 1024-65535")}if((i=a.localNetworkConfig)!=null&&i.enabled){const{port:x,address:m,maxUsers:t}=a.localNetworkConfig;if(!x||x<1024||x>65535)throw new Error("Invalid port number (must be between 1024-65535)");if(!(m!=null&&m.trim()))throw new Error("Network address is required for local network deployment");if(!t||t<1||t>250)throw new Error("Max users must be between 1-250")}if(a.storageMode==="cloud"&&((h=a.cloudConfig)==null?void 0:h.provider)==="gcs"&&!((l=a.cloudConfig.bucket)!=null&&l.trim()))throw new Error("GCS bucket is required for cloud storage")}async executeProjectCreation(a){if(this.requiresCloudIntegration()){const{cloudProjectIntegration:i}=await k(async()=>{const{cloudProjectIntegration:x}=await import("./CloudProjectIntegration-Ddv4uGls.js").then(m=>m.C);return{cloudProjectIntegration:x}},__vite__mapDeps([0,1,2,3,4,5])),h=localStorage.getItem("auth_token");h&&i.setAuthToken(h);const l=await i.createCloudProject(a);return l&&l.id?l.id:await this.createLocalProject(a)}else return await this.createLocalProject(a)}requiresCloudIntegration(){return this.state.selectedMode==="shared_network"||this.state.storageMode==="cloud"||this.state.storageMode==="hybrid"}async createLocalProject(a){var l;const s={name:a.name,description:a.description,mode:this.state.selectedMode,storageMode:this.state.storageMode,createdBy:((l=this.state.user)==null?void 0:l.id)||"local-user",createdAt:new Date().toISOString(),localNetworkConfig:a.localNetworkConfig,collaborationSettings:a.collaborationSettings},i=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h=JSON.parse(localStorage.getItem("localProjects")||"[]");return h.push({id:i,...s}),localStorage.setItem("localProjects",JSON.stringify(h)),console.log("Created local project:",i,s),i}async completeStartup(a){localStorage.setItem("lastProjectId",a),this.updateState({currentStep:"complete",selectedProjectId:a,isLoading:!1,error:null}),window.dispatchEvent(new CustomEvent("startup:complete",{detail:{mode:this.state.selectedMode,storageMode:this.state.storageMode,projectId:a,user:this.state.user}}))}isComplete(){return this.state.currentStep==="complete"&&this.state.selectedMode!==null&&this.state.selectedProjectId!==null}requiresAuthentication(){return this.isAuthRequired(this.state.selectedMode,this.state.storageMode)}getSelectedMode(){return this.state.selectedMode}getStorageMode(){return this.state.storageMode}getCurrentUser(){return this.state.user}getSelectedProjectId(){return this.state.selectedProjectId}};I(T,"instance");let V=T;const se=V.getInstance();typeof window<"u"&&(window.simplifiedStartupSequencer=se);const re={name:"",description:"",visibility:"private",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",s3Bucket:"",s3Region:"us-east-1",s3Prefix:"",awsBucket:"",awsRegion:"us-east-1",awsPrefix:"",azureContainer:"",azureAccount:"",azurePrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:250,networkPassword:"",preferredWebsitePort:3002,preferredApiPort:3003,maxCollaborators:10,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1,selectedDatasets:[]},ae=["Basic Information","Storage Configuration","Network Settings","Collaboration Options","Dataset Assignment","Review & Create"],Ue=({open:b,onClose:a,mode:s,onSuccess:i,onCreate:h,maxCollaborators:l=10})=>{const[x,m]=w.useState(0),[t,C]=w.useState(re),[y,q]=w.useState(!1),[G,L]=w.useState(null),[p,N]=w.useState({}),[W,oe]=w.useState([]),[ne,$]=w.useState(!1),ie=async()=>{try{$(!0);const u=(await te.listDatasets({})).map(j=>{var A;const S=be=>{switch(be){case"gcs":return"(GCS)";case"s3":return"(S3)";case"aws":return"(AWS)";case"azure":return"(Azure)";case"firestore":default:return"(Firestore)"}};return{...j,__label:`${j.name} ${S((A=j.storage)==null?void 0:A.backend)}`}});oe(u)}catch(r){console.error("Failed to load datasets:",r)}finally{$(!1)}};w.useEffect(()=>{b&&(C({...re,enableLocalNetwork:s==="standalone",maxCollaborators:l,enableRealTime:s==="shared_network"}),m(0),L(null),N({}),ie())},[b,s,l]);const d=r=>{C(j=>({...j,...r}));const u={...p};Object.keys(r).forEach(j=>{delete u[j]}),N(u)},H=r=>{const u={};switch(r){case 0:t.name.trim()||(u.name="Project name is required"),t.name.length>100&&(u.name="Project name must be less than 100 characters");break;case 1:t.storageMode==="cloud"&&t.cloudProvider==="gcs"&&(t.gcsBucket.trim()||(u.gcsBucket="GCS bucket name is required"));break;case 2:t.enableLocalNetwork&&((t.networkPort<1024||t.networkPort>65535)&&(u.networkPort="Port must be between 1024 and 65535"),t.networkAddress.trim()||(u.networkAddress="Network address is required"),(t.maxNetworkUsers<1||t.maxNetworkUsers>250)&&(u.maxNetworkUsers="Max users must be between 1 and 250")),typeof t.preferredWebsitePort=="number"&&(t.preferredWebsitePort<1024||t.preferredWebsitePort>65535)&&(u.preferredWebsitePort="Website port must be 1024-65535"),typeof t.preferredApiPort=="number"&&(t.preferredApiPort<1024||t.preferredApiPort>65535)&&(u.preferredApiPort="API port must be 1024-65535");break;case 3:(t.maxCollaborators<1||t.maxCollaborators>l)&&(u.maxCollaborators=`Max collaborators must be between 1 and ${l}`);break}return N(u),Object.keys(u).length===0},le=()=>{H(x)&&m(r=>r+1)},ce=()=>{m(r=>r-1)},de=async()=>{if(H(x)){q(!0),L(null);try{const r={name:t.name,description:t.description,storageMode:t.storageMode,preferredPorts:{website:t.preferredWebsitePort,api:t.preferredApiPort},localNetworkConfig:t.enableLocalNetwork?{enabled:!0,port:t.networkPort,address:t.networkAddress,maxUsers:t.maxNetworkUsers}:void 0,cloudConfig:t.storageMode==="cloud"?{provider:t.cloudProvider,bucket:t.gcsBucket,prefix:t.gcsPrefix}:void 0,collaborationSettings:{maxCollaborators:t.maxCollaborators,enableRealTime:t.enableRealTime,enableComments:t.enableComments,enableFileSharing:t.enableFileSharing}};console.log("ðŸ” Project creation options:",r),console.log("ðŸ” User maxCollaborators limit:",l),console.log("ðŸ” Form maxCollaborators value:",t.maxCollaborators);const u=h?await h(r):await se.createProject(r);if(t.selectedDatasets.length>0){console.log("ðŸ” Assigning datasets to project:",t.selectedDatasets);for(const j of t.selectedDatasets)try{await te.assignDatasetToProject(u,j),console.log("âœ… Assigned dataset",j,"to project",u)}catch(S){console.error("âŒ Failed to assign dataset",j,"to project",u,":",S)}}i==null||i(u),a()}catch(r){L(r instanceof Error?r.message:"Failed to create project")}finally{q(!1)}}},ue=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Project Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide basic information about your project. This can be changed later."}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"Project Name",value:t.name,onChange:r=>d({name:r.target.value}),error:!!p.name,helperText:p.name,required:!0,placeholder:"My Awesome Project"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"Description",value:t.description,onChange:r=>d({description:r.target.value}),multiline:!0,rows:3,placeholder:"Describe what this project is about..."})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsxs(O,{fullWidth:!0,children:[e.jsx(Z,{id:"visibility-label",children:"Visibility"}),e.jsxs(ee,{labelId:"visibility-label",id:"visibility-select",value:t.visibility,onChange:r=>{console.log("ðŸ” Visibility changed:",r.target.value),d({visibility:r.target.value})},label:"Visibility",MenuProps:{PaperProps:{style:{maxHeight:300}}},children:[e.jsx(v,{value:"private",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Te,{fontSize:"small"}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Private"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Only you and invited team members"})]})]})}),e.jsx(v,{value:"organization",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{fontSize:"small"}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Organization"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"All organization members"})]})]})}),e.jsx(v,{value:"public",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{fontSize:"small"}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Public"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Anyone can access (read-only)"})]})]})})]}),e.jsx(We,{children:"Choose who can access this project and its data"})]})})]})]}),he=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Storage Configuration"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose how your project data will be stored and accessed."}),e.jsxs(O,{component:"fieldset",fullWidth:!0,sx:{mb:3},children:[e.jsx(_e,{component:"legend",children:"Storage Mode"}),e.jsxs(Ee,{value:t.storageMode,onChange:r=>d({storageMode:r.target.value}),children:[e.jsx(f,{value:"local",control:e.jsx(U,{}),label:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(X,{}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Local Storage"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Store project files on your local machine"})]})]})}),e.jsx(f,{value:"cloud",control:e.jsx(U,{}),label:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Cloud Storage"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Store project data in the cloud for sharing and backup"})]})]})}),e.jsx(f,{value:"hybrid",control:e.jsx(U,{}),label:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsxs(n,{children:[e.jsx(o,{variant:"body1",children:"Hybrid Storage"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Combine local and cloud storage for optimal performance"})]})]})})]})]}),t.storageMode==="cloud"&&e.jsx(B,{variant:"outlined",sx:{mb:2},children:e.jsxs(R,{children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Cloud Provider Settings"}),e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,children:e.jsxs(O,{fullWidth:!0,children:[e.jsx(Z,{id:"cloud-provider-label",children:"Cloud Provider"}),e.jsxs(ee,{labelId:"cloud-provider-label",id:"cloud-provider-select",value:t.cloudProvider,onChange:r=>{console.log("ðŸ” Cloud provider changed:",r.target.value),d({cloudProvider:r.target.value})},label:"Cloud Provider",children:[e.jsx(v,{value:"firestore",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(n,{children:[e.jsx(o,{children:"Firestore"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Real-time NoSQL database"})]})]})}),e.jsx(v,{value:"gcs",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsxs(n,{children:[e.jsx(o,{children:"Google Cloud Storage"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Object storage with metadata"})]})]})}),e.jsx(v,{value:"s3",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{}),e.jsxs(n,{children:[e.jsx(o,{children:"Amazon S3"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Scalable object storage"})]})]})}),e.jsx(v,{value:"aws",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(n,{children:[e.jsx(o,{children:"AWS Services"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Amazon Web Services"})]})]})}),e.jsx(v,{value:"azure",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{}),e.jsxs(n,{children:[e.jsx(o,{children:"Microsoft Azure"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Azure Blob Storage"})]})]})})]})]})}),t.cloudProvider==="gcs"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"GCS Bucket",value:t.gcsBucket,onChange:r=>d({gcsBucket:r.target.value}),error:!!p.gcsBucket,helperText:p.gcsBucket,placeholder:"my-project-bucket"})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Prefix (Optional)",value:t.gcsPrefix,onChange:r=>d({gcsPrefix:r.target.value}),placeholder:"projects/"})})]}),t.cloudProvider==="s3"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"S3 Bucket",value:t.s3Bucket,onChange:r=>d({s3Bucket:r.target.value}),placeholder:"my-s3-bucket"})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"AWS Region",value:t.s3Region,onChange:r=>d({s3Region:r.target.value}),placeholder:"us-east-1"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"S3 Prefix (Optional)",value:t.s3Prefix,onChange:r=>d({s3Prefix:r.target.value}),placeholder:"datasets/"})})]}),t.cloudProvider==="aws"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"AWS Bucket",value:t.awsBucket,onChange:r=>d({awsBucket:r.target.value}),placeholder:"my-aws-bucket"})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"AWS Region",value:t.awsRegion,onChange:r=>d({awsRegion:r.target.value}),placeholder:"us-east-1"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"AWS Prefix (Optional)",value:t.awsPrefix,onChange:r=>d({awsPrefix:r.target.value}),placeholder:"datasets/"})})]}),t.cloudProvider==="azure"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Azure Storage Account",value:t.azureAccount,onChange:r=>d({azureAccount:r.target.value}),placeholder:"mystorageaccount"})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Azure Container",value:t.azureContainer,onChange:r=>d({azureContainer:r.target.value}),placeholder:"mycontainer"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"Azure Prefix (Optional)",value:t.azurePrefix,onChange:r=>d({azurePrefix:r.target.value}),placeholder:"datasets/"})})]})]})]})})]}),xe=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Network Configuration"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure local network deployment for team collaboration."}),e.jsx(Q,{sx:{mb:3},children:e.jsx(f,{control:e.jsx(P,{checked:t.enableLocalNetwork,onChange:r=>d({enableLocalNetwork:r.target.checked})}),label:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{}),e.jsxs(n,{children:[e.jsx(o,{children:"Enable Local Network Deployment"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Allow team members to connect to your local instance"})]})]})})}),t.enableLocalNetwork&&e.jsx("div",{children:e.jsx(B,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Network Deployment Settings"}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Network Address",value:t.networkAddress,onChange:r=>d({networkAddress:r.target.value}),error:!!p.networkAddress,helperText:p.networkAddress||"IP address or hostname",placeholder:"192.168.1.100"})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Port",type:"number",value:t.networkPort,onChange:r=>d({networkPort:parseInt(r.target.value)||3e3}),error:!!p.networkPort,helperText:p.networkPort||"Port 1024-65535",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsxs(c,{item:!0,xs:12,children:[e.jsx(K,{sx:{my:1}}),e.jsx(o,{variant:"subtitle2",gutterBottom:!0,children:"Desktop/Web Preferred Development Ports"})]}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Preferred Website Port (Dev)",type:"number",value:t.preferredWebsitePort??"",onChange:r=>d({preferredWebsitePort:parseInt(r.target.value)||void 0}),error:!!p.preferredWebsitePort,helperText:p.preferredWebsitePort||"Optional. Default 3002",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Preferred API Port (Dev)",type:"number",value:t.preferredApiPort??"",onChange:r=>d({preferredApiPort:parseInt(r.target.value)||void 0}),error:!!p.preferredApiPort,helperText:p.preferredApiPort||"Optional. Default 3003",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Max Network Users",type:"number",value:t.maxNetworkUsers,onChange:r=>d({maxNetworkUsers:parseInt(r.target.value)||10}),error:!!p.maxNetworkUsers,helperText:p.maxNetworkUsers,InputProps:{inputProps:{min:1,max:100}}})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Network Password (Optional)",type:"password",value:t.networkPassword,onChange:r=>d({networkPassword:r.target.value}),helperText:"Leave empty for no password protection"})})]}),e.jsx(M,{severity:"info",sx:{mt:2},children:e.jsxs(o,{variant:"body2",children:["Your local instance will be accessible at"," ",e.jsxs("strong",{children:["http://",t.networkAddress,":",t.networkPort]})]})})]})})})]}),me=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Collaboration Settings"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure how team members can collaborate on this project."}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsxs(c,{item:!0,xs:12,children:[e.jsxs(o,{gutterBottom:!0,children:["Max Collaborators: ",t.maxCollaborators]}),e.jsx(De,{value:t.maxCollaborators,onChange:(r,u)=>d({maxCollaborators:u}),min:1,max:l,marks:[{value:1,label:"1"},{value:Math.min(25,l),label:Math.min(25,l).toString()},{value:Math.min(50,l),label:Math.min(50,l).toString()},{value:l,label:l.toString()}],valueLabelDisplay:"auto"})]}),e.jsxs(c,{item:!0,xs:12,children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Collaboration Features"}),e.jsxs(Q,{children:[e.jsx(f,{control:e.jsx(P,{checked:t.enableRealTime,onChange:r=>d({enableRealTime:r.target.checked})}),label:"Real-time Editing"}),e.jsx(f,{control:e.jsx(P,{checked:t.enableComments,onChange:r=>d({enableComments:r.target.checked})}),label:"Comments & Annotations"}),e.jsx(f,{control:e.jsx(P,{checked:t.enableFileSharing,onChange:r=>d({enableFileSharing:r.target.checked})}),label:"File Sharing"}),e.jsx(f,{control:e.jsx(P,{checked:t.enableVersionControl,onChange:r=>d({enableVersionControl:r.target.checked})}),label:"Version Control"})]})]})]})]}),ge=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Dataset Assignment (Optional)"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Select existing datasets to assign to this project. You can also assign datasets later from the project details page."}),ne?e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(J,{sx:{width:"100%"}})}):e.jsxs(n,{children:[W.length===0?e.jsx(M,{severity:"info",sx:{mb:2},children:e.jsxs(o,{variant:"body2",children:[e.jsx("strong",{children:"No datasets available."})," Create datasets from the main Cloud Projects page using the comprehensive Dataset Creation Wizard, then assign them to projects as needed."]})}):e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",gutterBottom:!0,children:["Available Datasets (",W.length,")"]}),e.jsx(n,{sx:{maxHeight:300,overflowY:"auto",border:"1px solid",borderColor:"divider",borderRadius:1,p:1},children:W.map(r=>e.jsx(f,{control:e.jsx(P,{checked:t.selectedDatasets.includes(r.id),onChange:u=>{const S=u.target.checked?[...t.selectedDatasets,r.id]:t.selectedDatasets.filter(A=>A!==r.id);d({selectedDatasets:S})}}),label:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",fontWeight:500,children:r.name}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[r.description||"No description"," â€¢ ",(()=>{var u;switch((u=r.storage)==null?void 0:u.backend){case"gcs":return"Google Cloud Storage";case"s3":return"Amazon S3";case"aws":return"AWS Services";case"azure":return"Microsoft Azure";case"firestore":default:return"Firestore"}})()]})]}),sx:{display:"flex",width:"100%",m:0,p:1,borderRadius:1,"&:hover":{backgroundColor:"action.hover"}}},r.id))}),t.selectedDatasets.length>0&&e.jsx(M,{severity:"success",sx:{mt:2},children:e.jsxs(o,{variant:"body2",children:[t.selectedDatasets.length," dataset",t.selectedDatasets.length>1?"s":""," selected for assignment."]})})]}),e.jsx(n,{sx:{mt:2,p:2,backgroundColor:"action.hover",borderRadius:1},children:e.jsxs(o,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Need to create a dataset?"})," Use the comprehensive Dataset Creation Wizard from the main Cloud Projects page. It guides you through cloud provider setup, authentication, storage configuration, and schema templates for full compatibility with your projects."]})})]})]}),pe=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Review & Create"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Review your project configuration before creating."}),e.jsx(c,{container:!0,spacing:2,children:e.jsx(c,{item:!0,xs:12,children:e.jsx(B,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:t.name}),t.description&&e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:t.description}),e.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.jsx(z,{icon:s==="standalone"?e.jsx(X,{}):e.jsx(F,{}),label:s==="standalone"?"Standalone Mode":"Network Mode",color:"primary"}),e.jsx(z,{icon:e.jsx(_,{}),label:`${t.storageMode} storage`,variant:"outlined"}),t.enableLocalNetwork&&e.jsx(z,{icon:e.jsx(F,{}),label:`Network: ${t.networkAddress}:${t.networkPort}`,variant:"outlined"})]}),e.jsx(K,{sx:{my:2}}),e.jsx(o,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),e.jsxs(n,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs(o,{component:"li",variant:"body2",children:["Storage: ",t.storageMode,t.storageMode==="cloud"&&` (${t.cloudProvider})`]}),e.jsxs(o,{component:"li",variant:"body2",children:["Max Collaborators: ",t.maxCollaborators]}),t.enableLocalNetwork&&e.jsxs(o,{component:"li",variant:"body2",children:["Local Network: ",t.networkAddress,":",t.networkPort,"(max ",t.maxNetworkUsers," users)"]}),e.jsxs(o,{component:"li",variant:"body2",children:["Features: ",[t.enableRealTime&&"Real-time",t.enableComments&&"Comments",t.enableFileSharing&&"File Sharing",t.enableVersionControl&&"Version Control"].filter(Boolean).join(", ")]}),t.selectedDatasets.length>0&&e.jsxs(o,{component:"li",variant:"body2",children:["Datasets: ",t.selectedDatasets.length," dataset",t.selectedDatasets.length>1?"s":""," selected"]})]})]})})})})]}),je=r=>{switch(r){case 0:return ue();case 1:return he();case 2:return xe();case 3:return me();case 4:return ge();case 5:return pe();default:return null}};return e.jsxs(we,{open:b,onClose:a,maxWidth:"md",fullWidth:!0,sx:{zIndex:1400},PaperProps:{sx:{minHeight:"70vh",backgroundColor:"background.default","& .MuiDialogContent-root":{backgroundColor:"background.default"}}},children:[e.jsxs(ye,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{color:"primary"}),e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:"Create New Project"})]}),e.jsx(Pe,{onClick:a,size:"small",children:e.jsx(Se,{})})]}),e.jsxs(ke,{sx:{p:3},children:[G&&e.jsx(M,{severity:"error",sx:{mb:3},children:G}),e.jsx(Ce,{activeStep:x,orientation:"horizontal",sx:{mb:3},children:ae.map((r,u)=>e.jsx(Ae,{children:e.jsx(Ie,{children:r})},r))}),je(x),y&&e.jsx(J,{sx:{mt:2}})]}),e.jsxs(Me,{sx:{px:3,pb:3,pt:2,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",justifyContent:"space-between"},children:[e.jsx(D,{onClick:a,variant:"outlined",disabled:y,sx:{borderColor:"primary.main",color:"primary.main"},children:"Cancel"}),e.jsxs(n,{sx:{display:"flex",gap:1},children:[e.jsx(D,{onClick:ce,disabled:x===0||y,variant:"outlined",children:"Back"}),x===ae.length-1?e.jsx(D,{onClick:de,variant:"contained",disabled:y||!t.name.trim(),startIcon:e.jsx(Y,{}),sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:y?"Creating...":"Create Project"}):e.jsx(D,{onClick:le,variant:"contained",disabled:y,children:"Next"})]})]})]})};export{Ue as U,se as s};
