import{j as e,aD as te,aE as ae,a as o,az as U,T as a,I as oe,bQ as se,aF as ne,t as E,a6 as le,a7 as ie,a8 as ce,D as de,aN as xe,d as v,G as s,k as S,l as N,h as I,aO as O,aG as A,aP as B,M as V,ch as ue,ci as G,F as x,Q as b,u as d,aJ as W,c9 as he,ca as pe,cb as M,Z as z,aL as q,a4 as j,aK as me}from"./mui-Dc4z0eIW.js";import{r as m}from"./vendor-OeuszDaU.js";import{s as be}from"./index-B6H1ACcI.js";const _={name:"",description:"",visibility:"private",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:250,networkPassword:"",preferredWebsitePort:3002,preferredApiPort:3003,maxCollaborators:10,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1},$=["Basic Information","Storage Configuration","Network Settings","Collaboration Options","Review & Create"],fe=({open:f,onClose:g,mode:u,onSuccess:k,onCreate:D,maxCollaborators:c=10})=>{const[h,w]=m.useState(0),[r,F]=m.useState(_),[p,L]=m.useState(!1),[T,y]=m.useState(null),[i,C]=m.useState({});m.useEffect(()=>{f&&(F({..._,enableLocalNetwork:u==="standalone",maxCollaborators:Math.min(c,u==="shared_network"?25:5),enableRealTime:u==="shared_network"}),w(0),y(null),C({}))},[f,u,c]);const n=t=>{F(P=>({...P,...t}));const l={...i};Object.keys(t).forEach(P=>{delete l[P]}),C(l)},R=t=>{const l={};switch(t){case 0:r.name.trim()||(l.name="Project name is required"),r.name.length>100&&(l.name="Project name must be less than 100 characters");break;case 1:r.storageMode==="cloud"&&r.cloudProvider==="gcs"&&(r.gcsBucket.trim()||(l.gcsBucket="GCS bucket name is required"));break;case 2:r.enableLocalNetwork&&((r.networkPort<1024||r.networkPort>65535)&&(l.networkPort="Port must be between 1024 and 65535"),r.networkAddress.trim()||(l.networkAddress="Network address is required"),(r.maxNetworkUsers<1||r.maxNetworkUsers>250)&&(l.maxNetworkUsers="Max users must be between 1 and 250")),typeof r.preferredWebsitePort=="number"&&(r.preferredWebsitePort<1024||r.preferredWebsitePort>65535)&&(l.preferredWebsitePort="Website port must be 1024-65535"),typeof r.preferredApiPort=="number"&&(r.preferredApiPort<1024||r.preferredApiPort>65535)&&(l.preferredApiPort="API port must be 1024-65535");break;case 3:(r.maxCollaborators<1||r.maxCollaborators>c)&&(l.maxCollaborators=`Max collaborators must be between 1 and ${c}`);break}return C(l),Object.keys(l).length===0},Q=()=>{R(h)&&w(t=>t+1)},H=()=>{w(t=>t-1)},J=async()=>{if(R(h)){L(!0),y(null);try{const t={name:r.name,description:r.description,storageMode:r.storageMode,preferredPorts:{website:r.preferredWebsitePort,api:r.preferredApiPort},localNetworkConfig:r.enableLocalNetwork?{enabled:!0,port:r.networkPort,address:r.networkAddress,maxUsers:r.maxNetworkUsers}:void 0,cloudConfig:r.storageMode==="cloud"?{provider:r.cloudProvider,bucket:r.gcsBucket,prefix:r.gcsPrefix}:void 0,collaborationSettings:{maxCollaborators:r.maxCollaborators,enableRealTime:r.enableRealTime,enableComments:r.enableComments,enableFileSharing:r.enableFileSharing}};console.log("ðŸ” Project creation options:",t),console.log("ðŸ” User maxCollaborators limit:",c),console.log("ðŸ” Form maxCollaborators value:",r.maxCollaborators);const l=D?await D(t):await be.createProject(t);k==null||k(l),g()}catch(t){y(t instanceof Error?t.message:"Failed to create project")}finally{L(!1)}}},K=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Project Information"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide basic information about your project. This can be changed later."}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Project Name",value:r.name,onChange:t=>n({name:t.target.value}),error:!!i.name,helperText:i.name,required:!0,placeholder:"My Awesome Project"})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Description",value:r.description,onChange:t=>n({description:t.target.value}),multiline:!0,rows:3,placeholder:"Describe what this project is about..."})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsxs(W,{fullWidth:!0,children:[e.jsx(me,{children:"Visibility"}),e.jsxs(q,{value:r.visibility,onChange:t=>n({visibility:t.target.value}),label:"Visibility",children:[e.jsx(j,{value:"private",children:"Private"}),e.jsx(j,{value:"organization",children:"Organization"}),e.jsx(j,{value:"public",children:"Public"})]})]})})]})]}),Y=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Storage Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose how your project data will be stored and accessed."}),e.jsxs(W,{component:"fieldset",fullWidth:!0,sx:{mb:3},children:[e.jsx(he,{component:"legend",children:"Storage Mode"}),e.jsxs(pe,{value:r.storageMode,onChange:t=>n({storageMode:t.target.value}),children:[e.jsx(x,{value:"local",control:e.jsx(M,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Local Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project files on your local machine"})]})]})}),e.jsx(x,{value:"cloud",control:e.jsx(M,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(z,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Store project data in the cloud for sharing and backup"})]})]})}),e.jsx(x,{value:"hybrid",control:e.jsx(M,{}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",children:"Hybrid Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Combine local and cloud storage for optimal performance"})]})]})})]})]}),r.storageMode==="cloud"&&e.jsx(S,{variant:"outlined",sx:{mb:2},children:e.jsxs(N,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Cloud Provider Settings"}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(W,{fullWidth:!0,children:e.jsxs(q,{value:r.cloudProvider,onChange:t=>n({cloudProvider:t.target.value}),children:[e.jsx(j,{value:"firestore",children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(z,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Firestore"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Real-time NoSQL database"})]})]})}),e.jsx(j,{value:"gcs",children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Google Cloud Storage"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Object storage with metadata"})]})]})})]})})}),r.cloudProvider==="gcs"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"GCS Bucket",value:r.gcsBucket,onChange:t=>n({gcsBucket:t.target.value}),error:!!i.gcsBucket,helperText:i.gcsBucket,placeholder:"my-project-bucket"})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Prefix (Optional)",value:r.gcsPrefix,onChange:t=>n({gcsPrefix:t.target.value}),placeholder:"projects/"})})]})]})]})})]}),Z=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Network Configuration"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure local network deployment for team collaboration."}),e.jsx(G,{sx:{mb:3},children:e.jsx(x,{control:e.jsx(b,{checked:r.enableLocalNetwork,onChange:t=>n({enableLocalNetwork:t.target.checked})}),label:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(A,{}),e.jsxs(o,{children:[e.jsx(a,{children:"Enable Local Network Deployment"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Allow team members to connect to your local instance"})]})]})})}),r.enableLocalNetwork&&e.jsx("div",{children:e.jsx(S,{variant:"outlined",children:e.jsxs(N,{children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Network Deployment Settings"}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Network Address",value:r.networkAddress,onChange:t=>n({networkAddress:t.target.value}),error:!!i.networkAddress,helperText:i.networkAddress||"IP address or hostname",placeholder:"192.168.1.100"})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Port",type:"number",value:r.networkPort,onChange:t=>n({networkPort:parseInt(t.target.value)||3e3}),error:!!i.networkPort,helperText:i.networkPort||"Port 1024-65535",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(V,{sx:{my:1}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Desktop/Web Preferred Development Ports"})]}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Preferred Website Port (Dev)",type:"number",value:r.preferredWebsitePort??"",onChange:t=>n({preferredWebsitePort:parseInt(t.target.value)||void 0}),error:!!i.preferredWebsitePort,helperText:i.preferredWebsitePort||"Optional. Default 3002",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Preferred API Port (Dev)",type:"number",value:r.preferredApiPort??"",onChange:t=>n({preferredApiPort:parseInt(t.target.value)||void 0}),error:!!i.preferredApiPort,helperText:i.preferredApiPort||"Optional. Default 3003",InputProps:{inputProps:{min:1024,max:65535}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Max Network Users",type:"number",value:r.maxNetworkUsers,onChange:t=>n({maxNetworkUsers:parseInt(t.target.value)||10}),error:!!i.maxNetworkUsers,helperText:i.maxNetworkUsers,InputProps:{inputProps:{min:1,max:100}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(d,{fullWidth:!0,label:"Network Password (Optional)",type:"password",value:r.networkPassword,onChange:t=>n({networkPassword:t.target.value}),helperText:"Leave empty for no password protection"})})]}),e.jsx(E,{severity:"info",sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Your local instance will be accessible at"," ",e.jsxs("strong",{children:["http://",r.networkAddress,":",r.networkPort]})]})})]})})})]}),X=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Collaboration Settings"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure how team members can collaborate on this project."}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(a,{gutterBottom:!0,children:["Max Collaborators: ",r.maxCollaborators]}),e.jsx(ue,{value:r.maxCollaborators,onChange:(t,l)=>n({maxCollaborators:l}),min:1,max:c,marks:[{value:1,label:"1"},{value:Math.min(25,c),label:Math.min(25,c).toString()},{value:Math.min(50,c),label:Math.min(50,c).toString()},{value:c,label:c.toString()}],valueLabelDisplay:"auto"})]}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Collaboration Features"}),e.jsxs(G,{children:[e.jsx(x,{control:e.jsx(b,{checked:r.enableRealTime,onChange:t=>n({enableRealTime:t.target.checked})}),label:"Real-time Editing"}),e.jsx(x,{control:e.jsx(b,{checked:r.enableComments,onChange:t=>n({enableComments:t.target.checked})}),label:"Comments & Annotations"}),e.jsx(x,{control:e.jsx(b,{checked:r.enableFileSharing,onChange:t=>n({enableFileSharing:t.target.checked})}),label:"File Sharing"}),e.jsx(x,{control:e.jsx(b,{checked:r.enableVersionControl,onChange:t=>n({enableVersionControl:t.target.checked})}),label:"Version Control"})]})]})]})]}),ee=()=>e.jsxs(o,{sx:{py:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review & Create"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Review your project configuration before creating."}),e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,children:e.jsx(S,{variant:"outlined",children:e.jsxs(N,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:r.name}),r.description&&e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),e.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.jsx(I,{icon:u==="standalone"?e.jsx(O,{}):e.jsx(A,{}),label:u==="standalone"?"Standalone Mode":"Network Mode",color:"primary"}),e.jsx(I,{icon:e.jsx(B,{}),label:`${r.storageMode} storage`,variant:"outlined"}),r.enableLocalNetwork&&e.jsx(I,{icon:e.jsx(A,{}),label:`Network: ${r.networkAddress}:${r.networkPort}`,variant:"outlined"})]}),e.jsx(V,{sx:{my:2}}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Configuration Summary:"}),e.jsxs(o,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs(a,{component:"li",variant:"body2",children:["Storage: ",r.storageMode,r.storageMode==="cloud"&&` (${r.cloudProvider})`]}),e.jsxs(a,{component:"li",variant:"body2",children:["Max Collaborators: ",r.maxCollaborators]}),r.enableLocalNetwork&&e.jsxs(a,{component:"li",variant:"body2",children:["Local Network: ",r.networkAddress,":",r.networkPort,"(max ",r.maxNetworkUsers," users)"]}),e.jsxs(a,{component:"li",variant:"body2",children:["Features: ",[r.enableRealTime&&"Real-time",r.enableComments&&"Comments",r.enableFileSharing&&"File Sharing",r.enableVersionControl&&"Version Control"].filter(Boolean).join(", ")]})]})]})})})})]}),re=t=>{switch(t){case 0:return K();case 1:return Y();case 2:return Z();case 3:return X();case 4:return ee();default:return null}};return e.jsxs(te,{open:f,onClose:g,maxWidth:"md",fullWidth:!0,sx:{zIndex:1400},PaperProps:{sx:{minHeight:"70vh",backgroundColor:"background.default","& .MuiDialogContent-root":{backgroundColor:"background.default"}}},children:[e.jsxs(ae,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{color:"primary"}),e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Create New Project"})]}),e.jsx(oe,{onClick:g,size:"small",children:e.jsx(se,{})})]}),e.jsxs(ne,{sx:{p:3},children:[T&&e.jsx(E,{severity:"error",sx:{mb:3},children:T}),e.jsx(le,{activeStep:h,orientation:"horizontal",sx:{mb:3},children:$.map((t,l)=>e.jsx(ie,{children:e.jsx(ce,{children:t})},t))}),re(h),p&&e.jsx(de,{sx:{mt:2}})]}),e.jsxs(xe,{sx:{px:3,pb:3,pt:2,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",justifyContent:"space-between"},children:[e.jsx(v,{onClick:g,variant:"outlined",disabled:p,sx:{borderColor:"primary.main",color:"primary.main"},children:"Cancel"}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(v,{onClick:H,disabled:h===0||p,variant:"outlined",children:"Back"}),h===$.length-1?e.jsx(v,{onClick:J,variant:"contained",disabled:p||!r.name.trim(),startIcon:e.jsx(U,{}),sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:p?"Creating...":"Create Project"}):e.jsx(v,{onClick:Q,variant:"contained",disabled:p,children:"Next"})]})]})]})};export{fe as U};
