import{j as e,aD as R,aE as E,a as n,ak as M,T as s,I as G,bO as _,aG as q,t as O,D as H,aJ as V,d as a,aC as J,c as v,G as t,h,aI as Y,aH as Z,S as C,cf as $,R as K,cg as Q,aZ as y,a_ as w,a$ as P,a4 as d,ch as S,u as X,U as ee,W as I,Y as A,b7 as B,b8 as D}from"./mui-C7BJXprO.js";import{r as l}from"./vendor-OeuszDaU.js";import{s as re}from"./index-D5rFyqi4.js";const T={name:"",description:"",storageMode:"local",cloudProvider:"firestore",gcsBucket:"",gcsPrefix:"",enableLocalNetwork:!1,networkPort:3e3,networkAddress:"localhost",maxNetworkUsers:10,networkPassword:"",preferredWebsitePort:3002,preferredApiPort:3003,maxCollaborators:10,enableRealTime:!0,enableComments:!0,enableFileSharing:!0,enableVersionControl:!0,enableEncryption:!1,autoBackup:!0,backupInterval:30,enableAuditLog:!1},ie=({open:u,onClose:c,mode:x,onSuccess:b,onCreate:j})=>{const[W,L]=l.useState(0),[r,z]=l.useState(T),[m,g]=l.useState(!1),[f,p]=l.useState(null),[oe,k]=l.useState({});l.useEffect(()=>{u&&(z({...T,enableLocalNetwork:x==="standalone",maxCollaborators:x==="shared_network"?25:5,enableRealTime:x==="shared_network"}),L(0),p(null),k({}))},[u,x]);const N=i=>{const o={};switch(i){case 0:r.name.trim()||(o.name="Project name is required"),r.name.length>100&&(o.name="Project name must be less than 100 characters");break;case 1:r.storageMode==="cloud"&&r.cloudProvider==="gcs"&&(r.gcsBucket.trim()||(o.gcsBucket="GCS bucket name is required"));break;case 2:r.enableLocalNetwork&&((r.networkPort<1024||r.networkPort>65535)&&(o.networkPort="Port must be between 1024 and 65535"),r.networkAddress.trim()||(o.networkAddress="Network address is required"),(r.maxNetworkUsers<1||r.maxNetworkUsers>100)&&(o.maxNetworkUsers="Max users must be between 1 and 100")),typeof r.preferredWebsitePort=="number"&&(r.preferredWebsitePort<1024||r.preferredWebsitePort>65535)&&(o.preferredWebsitePort="Website port must be 1024-65535"),typeof r.preferredApiPort=="number"&&(r.preferredApiPort<1024||r.preferredApiPort>65535)&&(o.preferredApiPort="API port must be 1024-65535");break;case 3:(r.maxCollaborators<1||r.maxCollaborators>100)&&(o.maxCollaborators="Max collaborators must be between 1 and 100");break}return k(o),Object.keys(o).length===0},U=async()=>{if(N(W)){g(!0),p(null);try{const i={name:r.name,description:r.description,storageMode:r.storageMode,preferredPorts:{website:r.preferredWebsitePort,api:r.preferredApiPort},localNetworkConfig:r.enableLocalNetwork?{enabled:!0,port:r.networkPort,address:r.networkAddress,maxUsers:r.maxNetworkUsers}:void 0,cloudConfig:r.storageMode==="cloud"?{provider:r.cloudProvider,bucket:r.gcsBucket,prefix:r.gcsPrefix}:void 0,collaborationSettings:{maxCollaborators:r.maxCollaborators,enableRealTime:r.enableRealTime,enableComments:r.enableComments,enableFileSharing:r.enableFileSharing}},o=j?await j(i):await re.createProject(i);b==null||b(o),c()}catch(i){p(i instanceof Error?i.message:"Failed to create project")}finally{g(!1)}}},F=()=>e.jsxs(n,{sx:{py:2},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{mb:3,color:"text.primary",fontWeight:600},children:"Project Configuration"}),e.jsxs(v,{elevation:0,sx:{p:3,mb:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Project Information"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(n,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Mode"}),e.jsx(h,{icon:e.jsx(Y,{}),label:"Network",size:"small",color:"primary",variant:"outlined"})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(n,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Backend"}),e.jsx(h,{icon:e.jsx(Z,{}),label:"firestore",size:"small",color:"secondary",variant:"outlined"})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(n,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Collaboration"}),e.jsx(h,{label:"Up to 10 users",size:"small",color:"success",variant:"outlined"})]})})]})]}),e.jsxs(v,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Assigned Datasets"}),e.jsxs(C,{direction:"row",spacing:2,sx:{mb:3},children:[e.jsx(a,{variant:"contained",startIcon:e.jsx($,{}),size:"small",sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Upload File"}),e.jsx(a,{variant:"outlined",startIcon:e.jsx(K,{}),size:"small",sx:{borderColor:"primary.main",color:"primary.main"},children:"Refresh"}),e.jsx(a,{variant:"outlined",startIcon:e.jsx(Q,{}),size:"small",sx:{borderColor:"primary.main",color:"primary.main"},children:"New Dataset"})]}),e.jsxs(t,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(t,{item:!0,xs:12,sm:3,children:e.jsxs(y,{fullWidth:!0,size:"small",children:[e.jsx(w,{children:"Backend"}),e.jsxs(P,{value:"firestore",label:"Backend",input:e.jsx(S,{label:"Backend"}),children:[e.jsx(d,{value:"firestore",children:"Firestore"}),e.jsx(d,{value:"gcs",children:"Google Cloud Storage"})]})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(X,{fullWidth:!0,size:"small",label:"Search datasets...",placeholder:"Enter dataset name...",inputProps:{style:{fontSize:"14px"}}})}),e.jsx(t,{item:!0,xs:12,sm:3,children:e.jsxs(y,{fullWidth:!0,size:"small",children:[e.jsx(w,{children:"Select dataset"}),e.jsxs(P,{value:"",label:"Select dataset",input:e.jsx(S,{label:"Select dataset"}),children:[e.jsx(d,{value:"show-2024",children:"The Show 2024"}),e.jsx(d,{value:"show-2025",children:"The Show 2025"}),e.jsx(d,{value:"show-2026",children:"The Show 2026"})]})]})}),e.jsx(t,{item:!0,xs:12,sm:2,children:e.jsxs(C,{direction:"row",spacing:1,children:[e.jsx(a,{variant:"contained",size:"small",sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Assign"}),e.jsx(a,{variant:"outlined",size:"small",sx:{borderColor:"primary.main",color:"primary.main"},children:"Apply Filters"})]})})]}),e.jsxs(n,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:2},children:"Currently Assigned Datasets"}),e.jsxs(ee,{sx:{backgroundColor:"background.default",borderRadius:1,p:0},children:[e.jsxs(I,{sx:{borderBottom:"1px solid",borderColor:"divider"},children:[e.jsx(A,{primary:"The Show 2024",primaryTypographyProps:{variant:"body2",fontWeight:500}}),e.jsx(B,{children:e.jsx(a,{variant:"outlined",size:"small",startIcon:e.jsx(D,{}),sx:{borderColor:"error.main",color:"error.main","&:hover":{borderColor:"error.dark",backgroundColor:"error.main",color:"white"}},children:"Remove"})})]}),e.jsxs(I,{children:[e.jsx(A,{primary:"The Show 2025",primaryTypographyProps:{variant:"body2",fontWeight:500}}),e.jsx(B,{children:e.jsx(a,{variant:"outlined",size:"small",startIcon:e.jsx(D,{}),sx:{borderColor:"error.main",color:"error.main","&:hover":{borderColor:"error.dark",backgroundColor:"error.main",color:"white"}},children:"Remove"})})]})]})]})]})]});return e.jsxs(R,{open:u,onClose:c,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",backgroundColor:"background.default","& .MuiDialogContent-root":{backgroundColor:"background.default"}}},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(M,{color:"primary"}),e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Project Details"})]}),e.jsx(G,{onClick:c,size:"small",children:e.jsx(_,{})})]}),e.jsxs(q,{sx:{p:3},children:[f&&e.jsx(O,{severity:"error",sx:{mb:3},children:f}),F(),m&&e.jsx(H,{sx:{mt:2}})]}),e.jsxs(V,{sx:{px:3,pb:3,pt:2,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(a,{onClick:c,variant:"outlined",disabled:m,sx:{borderColor:"primary.main",color:"primary.main"},children:"Close"}),e.jsx(a,{onClick:U,variant:"contained",disabled:m,startIcon:e.jsx(J,{}),sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:m?"Processing...":"Launch Project"})]})]})};export{ie as U};
