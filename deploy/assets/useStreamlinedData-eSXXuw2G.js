import{r as t}from"./vendor-CjD1bmmO.js";import{unifiedDataService as l}from"./UnifiedDataService-DebshPbD.js";import{u as d}from"./index-B1Qck6KP.js";function g(){const[r,n]=t.useState(null),[c,s]=t.useState(!0),[u,o]=t.useState(null),{isAuthenticated:a,isLoading:e,user:f}=d(),i=t.useCallback(async()=>{if(!(e||!a))try{s(!0),o(null);const m=await l.getCurrentUser();n(m)}catch(m){o(m instanceof Error?m.message:"Failed to fetch user")}finally{s(!1)}},[e,a]);return t.useEffect(()=>{!e&&a?i():!e&&!a&&(s(!1),n(null))},[e,a,i]),t.useEffect(()=>{e&&s(!0)},[e]),{data:r,loading:c||e,error:u,refetch:i}}function b(){const[r,n]=t.useState([]),[c,s]=t.useState(!0),[u,o]=t.useState(null),a=t.useCallback(async()=>{try{s(!0),o(null);const e=await l.getProjectsForUser();n(e)}catch(e){o(e instanceof Error?e.message:"Failed to fetch projects")}finally{s(!1)}},[]);return t.useEffect(()=>{a()},[a]),{data:r,loading:c,error:u,refetch:a}}function S(){const[r,n]=t.useState(null),[c,s]=t.useState(!0),[u,o]=t.useState(null),{data:a,loading:e}=g(),f=t.useCallback(async()=>{if(!(e||!a))try{s(!0),o(null);const i=await l.getOrganizationContext();n(i)}catch(i){o(i instanceof Error?i.message:"Failed to fetch organization context")}finally{s(!1)}},[e,a]);return t.useEffect(()=>{!e&&a?f():!e&&!a&&(s(!1),n(null))},[e,a,f]),t.useEffect(()=>{e&&s(!0)},[e]),{data:r,loading:c||e,error:u,refetch:f}}function L(){const[r,n]=t.useState([]),[c,s]=t.useState(!0),[u,o]=t.useState(null),{data:a,loading:e}=g(),f=t.useCallback(async()=>{if(!(e||!a))try{s(!0),o(null);const i=await l.getLicensesForOrganization();n(i)}catch(i){o(i instanceof Error?i.message:"Failed to fetch licenses")}finally{s(!1)}},[e,a]);return t.useEffect(()=>{!e&&a?f():!e&&!a&&(s(!1),n([]))},[e,a,f]),t.useEffect(()=>{e&&s(!0)},[e]),{data:r,loading:c||e,error:u,refetch:f}}function w(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({licenseId:o,updates:a})=>{try{n(!0),s(null),await l.updateLicense(o,a)}catch(e){throw s(e instanceof Error?e.message:"Failed to update license"),e}finally{n(!1)}},[]),loading:r,error:c}}function C(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({licenseId:o,userId:a})=>{try{n(!0),s(null),await l.assignLicense(o,a)}catch(e){throw s(e instanceof Error?e.message:"Failed to assign license"),e}finally{n(!1)}},[]),loading:r,error:c}}function T(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({licenseId:o})=>{try{n(!0),s(null),await l.unassignLicense(o)}catch(a){throw s(a instanceof Error?a.message:"Failed to unassign license"),a}finally{n(!1)}},[]),loading:r,error:c}}function M(){const[r,n]=t.useState([]),[c,s]=t.useState(!0),[u,o]=t.useState(null),a=t.useCallback(async()=>{try{s(!0),o(null);const e=await l.getTeamMembersForOrganization();n(e)}catch(e){o(e instanceof Error?e.message:"Failed to fetch team members")}finally{s(!1)}},[]);return t.useEffect(()=>{a()},[a]),{data:r,loading:c,error:u,refetch:a}}function p(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async o=>{try{return n(!0),s(null),await l.inviteTeamMember(o)}catch(a){throw s(a instanceof Error?a.message:"Failed to invite team member"),a}finally{n(!1)}},[]),loading:r,error:c}}function F(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({memberId:o,updates:a})=>{try{n(!0),s(null),await l.updateTeamMember(o,a)}catch(e){throw s(e instanceof Error?e.message:"Failed to update team member"),e}finally{n(!1)}},[]),loading:r,error:c}}function k(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({memberId:o,newPassword:a})=>{try{n(!0),s(null),await l.changeTeamMemberPassword(o,a)}catch(e){throw s(e instanceof Error?e.message:"Failed to change password"),e}finally{n(!1)}},[]),loading:r,error:c}}function U(){const[r,n]=t.useState(!1),[c,s]=t.useState(null);return{mutate:t.useCallback(async({memberId:o})=>{try{n(!0),s(null),await l.removeTeamMember(o)}catch(a){throw s(a instanceof Error?a.message:"Failed to remove team member"),a}finally{n(!1)}},[]),loading:r,error:c}}function z(){var n,c,s;const{data:r}=g();return{canCreateProjects:((n=r==null?void 0:r.license)==null?void 0:n.canCreateProjects)||!1,canManageTeam:((c=r==null?void 0:r.license)==null?void 0:c.canManageTeam)||!1,isAccountOwner:(r==null?void 0:r.userType)==="ACCOUNT_OWNER",isTeamMember:(r==null?void 0:r.userType)==="TEAM_MEMBER",isAdmin:(r==null?void 0:r.userType)==="ADMIN",organizationTier:((s=r==null?void 0:r.organization)==null?void 0:s.tier)||"BASIC"}}export{M as a,g as b,S as c,b as d,z as e,p as f,F as g,U as h,C as i,T as j,k,w as l,L as u};
